function H$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var q$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bu(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Gy={exports:{}},Jh={};var Vw;function X$(){if(Vw)return Jh;Vw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,s){var l=null;if(s!==void 0&&(l=""+s),o.key!==void 0&&(l=""+o.key),"key"in o){s={};for(var u in o)u!=="key"&&(s[u]=o[u])}else s=o;return o=s.ref,{$$typeof:e,type:r,key:l,ref:o!==void 0?o:null,props:s}}return Jh.Fragment=t,Jh.jsx=n,Jh.jsxs=n,Jh}var Ww;function Q$(){return Ww||(Ww=1,Gy.exports=X$()),Gy.exports}var de=Q$(),Ky={exports:{}},qn={};var Gw;function Y$(){if(Gw)return qn;Gw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function x(Y){return Y===null||typeof Y!="object"?null:(Y=m&&Y[m]||Y["@@iterator"],typeof Y=="function"?Y:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,I={};function T(Y,te,J){this.props=Y,this.context=te,this.refs=I,this.updater=J||_}T.prototype.isReactComponent={},T.prototype.setState=function(Y,te){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,te,"setState")},T.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function S(){}S.prototype=T.prototype;function D(Y,te,J){this.props=Y,this.context=te,this.refs=I,this.updater=J||_}var E=D.prototype=new S;E.constructor=D,b(E,T.prototype),E.isPureReactComponent=!0;var C=Array.isArray;function P(){}var w={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(Y,te,J){var H=J.ref;return{$$typeof:e,type:Y,key:te,ref:H!==void 0?H:null,props:J}}function N(Y,te){return U(Y.type,te,Y.props)}function ie(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function ee(Y){var te={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(J){return te[J]})}var q=/\/+/g;function oe(Y,te){return typeof Y=="object"&&Y!==null&&Y.key!=null?ee(""+Y.key):te.toString(36)}function ae(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(P,P):(Y.status="pending",Y.then(function(te){Y.status==="pending"&&(Y.status="fulfilled",Y.value=te)},function(te){Y.status==="pending"&&(Y.status="rejected",Y.reason=te)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function X(Y,te,J,H,_e){var Te=typeof Y;(Te==="undefined"||Te==="boolean")&&(Y=null);var Re=!1;if(Y===null)Re=!0;else switch(Te){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(Y.$$typeof){case e:case t:Re=!0;break;case g:return Re=Y._init,X(Re(Y._payload),te,J,H,_e)}}if(Re)return _e=_e(Y),Re=H===""?"."+oe(Y,0):H,C(_e)?(J="",Re!=null&&(J=Re.replace(q,"$&/")+"/"),X(_e,te,J,"",function(Oe){return Oe})):_e!=null&&(ie(_e)&&(_e=N(_e,J+(_e.key==null||Y&&Y.key===_e.key?"":(""+_e.key).replace(q,"$&/")+"/")+Re)),te.push(_e)),1;Re=0;var We=H===""?".":H+":";if(C(Y))for(var at=0;at<Y.length;at++)H=Y[at],Te=We+oe(H,at),Re+=X(H,te,J,Te,_e);else if(at=x(Y),typeof at=="function")for(Y=at.call(Y),at=0;!(H=Y.next()).done;)H=H.value,Te=We+oe(H,at++),Re+=X(H,te,J,Te,_e);else if(Te==="object"){if(typeof Y.then=="function")return X(ae(Y),te,J,H,_e);throw te=String(Y),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Re}function se(Y,te,J){if(Y==null)return Y;var H=[],_e=0;return X(Y,H,"","",function(Te){return te.call(J,Te,_e++)}),H}function le(Y){if(Y._status===-1){var te=Y._result;te=te(),te.then(function(J){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=J)},function(J){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=J)}),Y._status===-1&&(Y._status=0,Y._result=te)}if(Y._status===1)return Y._result.default;throw Y._result}var be=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},Ee={map:se,forEach:function(Y,te,J){se(Y,function(){te.apply(this,arguments)},J)},count:function(Y){var te=0;return se(Y,function(){te++}),te},toArray:function(Y){return se(Y,function(te){return te})||[]},only:function(Y){if(!ie(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return qn.Activity=h,qn.Children=Ee,qn.Component=T,qn.Fragment=n,qn.Profiler=o,qn.PureComponent=D,qn.StrictMode=r,qn.Suspense=d,qn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,qn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return w.H.useMemoCache(Y)}},qn.cache=function(Y){return function(){return Y.apply(null,arguments)}},qn.cacheSignal=function(){return null},qn.cloneElement=function(Y,te,J){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var H=b({},Y.props),_e=Y.key;if(te!=null)for(Te in te.key!==void 0&&(_e=""+te.key),te)!R.call(te,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&te.ref===void 0||(H[Te]=te[Te]);var Te=arguments.length-2;if(Te===1)H.children=J;else if(1<Te){for(var Re=Array(Te),We=0;We<Te;We++)Re[We]=arguments[We+2];H.children=Re}return U(Y.type,_e,H)},qn.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},qn.createElement=function(Y,te,J){var H,_e={},Te=null;if(te!=null)for(H in te.key!==void 0&&(Te=""+te.key),te)R.call(te,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(_e[H]=te[H]);var Re=arguments.length-2;if(Re===1)_e.children=J;else if(1<Re){for(var We=Array(Re),at=0;at<Re;at++)We[at]=arguments[at+2];_e.children=We}if(Y&&Y.defaultProps)for(H in Re=Y.defaultProps,Re)_e[H]===void 0&&(_e[H]=Re[H]);return U(Y,Te,_e)},qn.createRef=function(){return{current:null}},qn.forwardRef=function(Y){return{$$typeof:u,render:Y}},qn.isValidElement=ie,qn.lazy=function(Y){return{$$typeof:g,_payload:{_status:-1,_result:Y},_init:le}},qn.memo=function(Y,te){return{$$typeof:p,type:Y,compare:te===void 0?null:te}},qn.startTransition=function(Y){var te=w.T,J={};w.T=J;try{var H=Y(),_e=w.S;_e!==null&&_e(J,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(P,be)}catch(Te){be(Te)}finally{te!==null&&J.types!==null&&(te.types=J.types),w.T=te}},qn.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},qn.use=function(Y){return w.H.use(Y)},qn.useActionState=function(Y,te,J){return w.H.useActionState(Y,te,J)},qn.useCallback=function(Y,te){return w.H.useCallback(Y,te)},qn.useContext=function(Y){return w.H.useContext(Y)},qn.useDebugValue=function(){},qn.useDeferredValue=function(Y,te){return w.H.useDeferredValue(Y,te)},qn.useEffect=function(Y,te){return w.H.useEffect(Y,te)},qn.useEffectEvent=function(Y){return w.H.useEffectEvent(Y)},qn.useId=function(){return w.H.useId()},qn.useImperativeHandle=function(Y,te,J){return w.H.useImperativeHandle(Y,te,J)},qn.useInsertionEffect=function(Y,te){return w.H.useInsertionEffect(Y,te)},qn.useLayoutEffect=function(Y,te){return w.H.useLayoutEffect(Y,te)},qn.useMemo=function(Y,te){return w.H.useMemo(Y,te)},qn.useOptimistic=function(Y,te){return w.H.useOptimistic(Y,te)},qn.useReducer=function(Y,te,J){return w.H.useReducer(Y,te,J)},qn.useRef=function(Y){return w.H.useRef(Y)},qn.useState=function(Y){return w.H.useState(Y)},qn.useSyncExternalStore=function(Y,te,J){return w.H.useSyncExternalStore(Y,te,J)},qn.useTransition=function(){return w.H.useTransition()},qn.version="19.2.4",qn}var Kw;function Gg(){return Kw||(Kw=1,Ky.exports=Y$()),Ky.exports}var ne=Gg();const $i=Od(ne),Mv=H$({__proto__:null,default:$i},[ne]);var Hy={exports:{}},eg={},qy={exports:{}},Xy={};var Hw;function Z$(){return Hw||(Hw=1,(function(e){function t(X,se){var le=X.length;X.push(se);e:for(;0<le;){var be=le-1>>>1,Ee=X[be];if(0<o(Ee,se))X[be]=se,X[le]=Ee,le=be;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var se=X[0],le=X.pop();if(le!==se){X[0]=le;e:for(var be=0,Ee=X.length,Y=Ee>>>1;be<Y;){var te=2*(be+1)-1,J=X[te],H=te+1,_e=X[H];if(0>o(J,le))H<Ee&&0>o(_e,J)?(X[be]=_e,X[H]=le,be=H):(X[be]=J,X[te]=le,be=te);else if(H<Ee&&0>o(_e,le))X[be]=_e,X[H]=le,be=H;else break e}}return se}function o(X,se){var le=X.sortIndex-se.sortIndex;return le!==0?le:X.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,h=null,m=3,x=!1,_=!1,b=!1,I=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function E(X){for(var se=n(p);se!==null;){if(se.callback===null)r(p);else if(se.startTime<=X)r(p),se.sortIndex=se.expirationTime,t(d,se);else break;se=n(p)}}function C(X){if(b=!1,E(X),!_)if(n(d)!==null)_=!0,P||(P=!0,ee());else{var se=n(p);se!==null&&ae(C,se.startTime-X)}}var P=!1,w=-1,R=5,U=-1;function N(){return I?!0:!(e.unstable_now()-U<R)}function ie(){if(I=!1,P){var X=e.unstable_now();U=X;var se=!0;try{e:{_=!1,b&&(b=!1,S(w),w=-1),x=!0;var le=m;try{t:{for(E(X),h=n(d);h!==null&&!(h.expirationTime>X&&N());){var be=h.callback;if(typeof be=="function"){h.callback=null,m=h.priorityLevel;var Ee=be(h.expirationTime<=X);if(X=e.unstable_now(),typeof Ee=="function"){h.callback=Ee,E(X),se=!0;break t}h===n(d)&&r(d),E(X)}else r(d);h=n(d)}if(h!==null)se=!0;else{var Y=n(p);Y!==null&&ae(C,Y.startTime-X),se=!1}}break e}finally{h=null,m=le,x=!1}se=void 0}}finally{se?ee():P=!1}}}var ee;if(typeof D=="function")ee=function(){D(ie)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,oe=q.port2;q.port1.onmessage=ie,ee=function(){oe.postMessage(null)}}else ee=function(){T(ie,0)};function ae(X,se){w=T(function(){X(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(X){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var le=m;m=se;try{return X()}finally{m=le}},e.unstable_requestPaint=function(){I=!0},e.unstable_runWithPriority=function(X,se){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var le=m;m=X;try{return se()}finally{m=le}},e.unstable_scheduleCallback=function(X,se,le){var be=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?be+le:be):le=be,X){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=le+Ee,X={id:g++,callback:se,priorityLevel:X,startTime:le,expirationTime:Ee,sortIndex:-1},le>be?(X.sortIndex=le,t(p,X),n(d)===null&&X===n(p)&&(b?(S(w),w=-1):b=!0,ae(C,le-be))):(X.sortIndex=Ee,t(d,X),_||x||(_=!0,P||(P=!0,ee()))),X},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(X){var se=m;return function(){var le=m;m=se;try{return X.apply(this,arguments)}finally{m=le}}}})(Xy)),Xy}var qw;function J$(){return qw||(qw=1,qy.exports=Z$()),qy.exports}var Qy={exports:{}},Ki={};var Xw;function eD(){if(Xw)return Ki;Xw=1;var e=Gg();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(d,p,g){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:h==null?null:""+h,children:d,containerInfo:p,implementation:g}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ki.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return s(d,p,null,g)},Ki.flushSync=function(d){var p=l.T,g=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=p,r.p=g,r.d.f()}},Ki.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},Ki.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Ki.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,h=u(g,p.crossOrigin),m=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:x}):g==="script"&&r.d.X(d,{crossOrigin:h,integrity:m,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ki.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},Ki.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,h=u(g,p.crossOrigin);r.d.L(d,g,{crossOrigin:h,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ki.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},Ki.requestFormReset=function(d){r.d.r(d)},Ki.unstable_batchedUpdates=function(d,p){return d(p)},Ki.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Ki.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ki.version="19.2.4",Ki}var Qw;function i2(){if(Qw)return Qy.exports;Qw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qy.exports=eD(),Qy.exports}var Yw;function tD(){if(Yw)return eg;Yw=1;var e=J$(),t=Gg(),n=i2();function r(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var i=a,c=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(c=i.return),a=i.return;while(a)}return i.tag===3?c:null}function l(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function u(a){if(a.tag===31){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function d(a){if(s(a)!==a)throw Error(r(188))}function p(a){var i=a.alternate;if(!i){if(i=s(a),i===null)throw Error(r(188));return i!==a?null:a}for(var c=a,f=i;;){var M=c.return;if(M===null)break;var k=M.alternate;if(k===null){if(f=M.return,f!==null){c=f;continue}break}if(M.child===k.child){for(k=M.child;k;){if(k===c)return d(M),a;if(k===f)return d(M),i;k=k.sibling}throw Error(r(188))}if(c.return!==f.return)c=M,f=k;else{for(var K=!1,me=M.child;me;){if(me===c){K=!0,c=M,f=k;break}if(me===f){K=!0,f=M,c=k;break}me=me.sibling}if(!K){for(me=k.child;me;){if(me===c){K=!0,c=k,f=M;break}if(me===f){K=!0,f=k,c=M;break}me=me.sibling}if(!K)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:i}function g(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=g(a),i!==null)return i;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),D=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ee(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function oe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case T:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case D:return a.displayName||"Context";case S:return(a._context.displayName||"Context")+".Consumer";case E:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case w:return i=a.displayName||null,i!==null?i:oe(a.type)||"Memo";case R:i=a._payload,a=a._init;try{return oe(a(i))}catch{}}return null}var ae=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},be=[],Ee=-1;function Y(a){return{current:a}}function te(a){0>Ee||(a.current=be[Ee],be[Ee]=null,Ee--)}function J(a,i){Ee++,be[Ee]=a.current,a.current=i}var H=Y(null),_e=Y(null),Te=Y(null),Re=Y(null);function We(a,i){switch(J(Te,i),J(_e,a),J(H,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?Dn(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=Dn(i),a=cn(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(H),J(H,a)}function at(){te(H),te(_e),te(Te)}function Oe(a){a.memoizedState!==null&&J(Re,a);var i=H.current,c=cn(i,a.type);i!==c&&(J(_e,a),J(H,c))}function ge(a){_e.current===a&&(te(H),te(_e)),Re.current===a&&(te(Re),Xh._currentValue=le)}var re,$e;function Ge(a){if(re===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);re=i&&i[1]||"",$e=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+a+$e}var qe=!1;function it(a,i){if(!a||qe)return"";qe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(i){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(yt){var ft=yt}Reflect.construct(a,[],Pt)}else{try{Pt.call()}catch(yt){ft=yt}a.call(Pt.prototype)}}else{try{throw Error()}catch(yt){ft=yt}(Pt=a())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(yt){if(yt&&ft&&typeof yt.stack=="string")return[yt.stack,ft.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=f.DetermineComponentFrameRoot(),K=k[0],me=k[1];if(K&&me){var De=K.split(`
`),ut=me.split(`
`);for(M=f=0;f<De.length&&!De[f].includes("DetermineComponentFrameRoot");)f++;for(;M<ut.length&&!ut[M].includes("DetermineComponentFrameRoot");)M++;if(f===De.length||M===ut.length)for(f=De.length-1,M=ut.length-1;1<=f&&0<=M&&De[f]!==ut[M];)M--;for(;1<=f&&0<=M;f--,M--)if(De[f]!==ut[M]){if(f!==1||M!==1)do if(f--,M--,0>M||De[f]!==ut[M]){var Mt=`
`+De[f].replace(" at new "," at ");return a.displayName&&Mt.includes("<anonymous>")&&(Mt=Mt.replace("<anonymous>",a.displayName)),Mt}while(1<=f&&0<=M);break}}}finally{qe=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Ge(c):""}function Ve(a,i){switch(a.tag){case 26:case 27:case 5:return Ge(a.type);case 16:return Ge("Lazy");case 13:return a.child!==i&&i!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return it(a.type,!1);case 11:return it(a.type.render,!1);case 1:return it(a.type,!0);case 31:return Ge("Activity");default:return""}}function Be(a){try{var i="",c=null;do i+=Ve(a,c),c=a,a=a.return;while(a);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var _t=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,Ye=e.unstable_cancelCallback,kt=e.unstable_shouldYield,mt=e.unstable_requestPaint,Tt=e.unstable_now,Ke=e.unstable_getCurrentPriorityLevel,dt=e.unstable_ImmediatePriority,wt=e.unstable_UserBlockingPriority,st=e.unstable_NormalPriority,He=e.unstable_LowPriority,Bt=e.unstable_IdlePriority,qt=e.log,xn=e.unstable_setDisableYieldValue,At=null,nn=null;function Ct(a){if(typeof qt=="function"&&xn(a),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(At,a)}catch{}}var rt=Math.clz32?Math.clz32:tr,hn=Math.log,En=Math.LN2;function tr(a){return a>>>=0,a===0?32:31-(hn(a)/En|0)|0}var Rt=256,Kn=262144,xr=4194304;function mr(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function qa(a,i,c){var f=a.pendingLanes;if(f===0)return 0;var M=0,k=a.suspendedLanes,K=a.pingedLanes;a=a.warmLanes;var me=f&134217727;return me!==0?(f=me&~k,f!==0?M=mr(f):(K&=me,K!==0?M=mr(K):c||(c=me&~a,c!==0&&(M=mr(c))))):(me=f&~k,me!==0?M=mr(me):K!==0?M=mr(K):c||(c=f&~a,c!==0&&(M=mr(c)))),M===0?0:i!==0&&i!==M&&(i&k)===0&&(k=M&-M,c=i&-i,k>=c||k===32&&(c&4194048)!==0)?i:M}function on(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function wr(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(){var a=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),a}function Xa(a){for(var i=[],c=0;31>c;c++)i.push(a);return i}function sa(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function wn(a,i,c,f,M,k){var K=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var me=a.entanglements,De=a.expirationTimes,ut=a.hiddenUpdates;for(c=K&~c;0<c;){var Mt=31-rt(c),Pt=1<<Mt;me[Mt]=0,De[Mt]=-1;var ft=ut[Mt];if(ft!==null)for(ut[Mt]=null,Mt=0;Mt<ft.length;Mt++){var yt=ft[Mt];yt!==null&&(yt.lane&=-536870913)}c&=~Pt}f!==0&&vi(a,f,0),k!==0&&M===0&&a.tag!==0&&(a.suspendedLanes|=k&~(K&~i))}function vi(a,i,c){a.pendingLanes|=i,a.suspendedLanes&=~i;var f=31-rt(i);a.entangledLanes|=i,a.entanglements[f]=a.entanglements[f]|1073741824|c&261930}function B(a,i){var c=a.entangledLanes|=i;for(a=a.entanglements;c;){var f=31-rt(c),M=1<<f;M&i|a[f]&i&&(a[f]|=i),c&=~M}}function xe(a,i){var c=i&-i;return c=(c&42)!==0?1:pe(c),(c&(a.suspendedLanes|i))!==0?0:c}function pe(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function we(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Se(){var a=se.p;return a!==0?a:(a=window.event,a===void 0?32:Lw(a.type))}function Xe(a,i){var c=se.p;try{return se.p=a,i()}finally{se.p=c}}var ht=Math.random().toString(36).slice(2),Lt="__reactFiber$"+ht,Qt="__reactProps$"+ht,jt="__reactContainer$"+ht,gn="__reactEvents$"+ht,Gt="__reactListeners$"+ht,yn="__reactHandles$"+ht,Fn="__reactResources$"+ht,pr="__reactMarker$"+ht;function Vr(a){delete a[Lt],delete a[Qt],delete a[gn],delete a[Gt],delete a[yn]}function fr(a){var i=a[Lt];if(i)return i;for(var c=a.parentNode;c;){if(i=c[jt]||c[Lt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(a=ja(a);a!==null;){if(c=a[Lt])return c;a=ja(a)}return i}a=c,c=a.parentNode}return null}function In(a){if(a=a[Lt]||a[jt]){var i=a.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return a}return null}function wa(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(r(33))}function hr(a){var i=a[Fn];return i||(i=a[Fn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Cr(a){a[pr]=!0}var la=new Set,ha={};function Ma(a,i){Pr(a,i),Pr(a+"Capture",i)}function Pr(a,i){for(ha[a]=i,a=0;a<i.length;a++)la.add(i[a])}var gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},ei={};function ao(a){return _t.call(ei,a)?!0:_t.call(Ja,a)?!1:gr.test(a)?ei[a]=!0:(Ja[a]=!0,!1)}function An(a,i,c){if(ao(i))if(c===null)a.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var f=i.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+c)}}function yi(a,i,c){if(c===null)a.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+c)}}function Aa(a,i,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(i,c,""+f)}}function Wr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ga(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dt(a,i,c){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,i);if(!a.hasOwnProperty(i)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var M=f.get,k=f.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return M.call(this)},set:function(K){c=""+K,k.call(this,K)}}),Object.defineProperty(a,i,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(K){c=""+K},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Ft(a){if(!a._valueTracker){var i=ga(a)?"checked":"value";a._valueTracker=Dt(a,i,""+a[i])}}function Jt(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return a&&(f=ga(a)?a.checked?"true":"false":a.value),a=f,a!==c?(i.setValue(a),!0):!1}function fn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ei=/[\n"\\]/g;function Qr(a){return a.replace(Ei,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ti(a,i,c,f,M,k,K,me){a.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?a.type=K:a.removeAttribute("type"),i!=null?K==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Wr(i)):a.value!==""+Wr(i)&&(a.value=""+Wr(i)):K!=="submit"&&K!=="reset"||a.removeAttribute("value"),i!=null?Qe(a,K,Wr(i)):c!=null?Qe(a,K,Wr(c)):f!=null&&a.removeAttribute("value"),M==null&&k!=null&&(a.defaultChecked=!!k),M!=null&&(a.checked=M&&typeof M!="function"&&typeof M!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?a.name=""+Wr(me):a.removeAttribute("name")}function _o(a,i,c,f,M,k,K,me){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.type=k),i!=null||c!=null){if(!(k!=="submit"&&k!=="reset"||i!=null)){Ft(a);return}c=c!=null?""+Wr(c):"",i=i!=null?""+Wr(i):c,me||i===a.value||(a.value=i),a.defaultValue=i}f=f??M,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=me?a.checked:!!f,a.defaultChecked=!!f,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(a.name=K),Ft(a)}function Qe(a,i,c){i==="number"&&fn(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function G(a,i,c,f){if(a=a.options,i){i={};for(var M=0;M<c.length;M++)i["$"+c[M]]=!0;for(c=0;c<a.length;c++)M=i.hasOwnProperty("$"+a[c].value),a[c].selected!==M&&(a[c].selected=M),M&&f&&(a[c].defaultSelected=!0)}else{for(c=""+Wr(c),i=null,M=0;M<a.length;M++){if(a[M].value===c){a[M].selected=!0,f&&(a[M].defaultSelected=!0);return}i!==null||a[M].disabled||(i=a[M])}i!==null&&(i.selected=!0)}}function ye(a,i,c){if(i!=null&&(i=""+Wr(i),i!==a.value&&(a.value=i),c==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=c!=null?""+Wr(c):""}function Pe(a,i,c,f){if(i==null){if(f!=null){if(c!=null)throw Error(r(92));if(ae(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),i=c}c=Wr(i),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f),Ft(a)}function ke(a,i){if(i){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=i;return}}a.textContent=i}var lt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ot(a,i,c){var f=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":f?a.setProperty(i,c):typeof c!="number"||c===0||lt.has(i)?i==="float"?a.cssFloat=c:a[i]=(""+c).trim():a[i]=c+"px"}function Kt(a,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||i!=null&&i.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var M in i)f=i[M],i.hasOwnProperty(M)&&c[M]!==f&&ot(a,M,f)}else for(var k in i)i.hasOwnProperty(k)&&ot(a,k,i[k])}function Ht(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(a){return zt.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function mn(){}var or=null;function ta(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var lr=null,On=null;function Hn(a){var i=In(a);if(i&&(a=i.stateNode)){var c=a[Qt]||null;e:switch(a=i.stateNode,i.type){case"input":if(ti(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Qr(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==a&&f.form===a.form){var M=f[Qt]||null;if(!M)throw Error(r(90));ti(f,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(i=0;i<c.length;i++)f=c[i],f.form===a.form&&Jt(f)}break e;case"textarea":ye(a,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&G(a,!!c.multiple,i,!1)}}}var Ta=!1;function Qa(a,i,c){if(Ta)return a(i,c);Ta=!0;try{var f=a(i);return f}finally{if(Ta=!1,(lr!==null||On!==null)&&(nd(),lr&&(i=lr,a=On,On=lr=null,Hn(i),a)))for(i=0;i<a.length;i++)Hn(a[i])}}function Gr(a,i){var c=a.stateNode;if(c===null)return null;var f=c[Qt]||null;if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(Kr)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){kr=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{kr=!1}var Ar=null,ni=null,ri=null;function Hr(){if(ri)return ri;var a,i=ni,c=i.length,f,M="value"in Ar?Ar.value:Ar.textContent,k=M.length;for(a=0;a<c&&i[a]===M[a];a++);var K=c-a;for(f=1;f<=K&&i[c-f]===M[k-f];f++);return ri=M.slice(a,1<f?1-f:void 0)}function Ya(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function Yr(){return!0}function Lr(){return!1}function Xn(a){function i(c,f,M,k,K){this._reactName=c,this._targetInst=M,this.type=f,this.nativeEvent=k,this.target=K,this.currentTarget=null;for(var me in a)a.hasOwnProperty(me)&&(c=a[me],this[me]=c?c(k):k[me]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Yr:Lr,this.isPropagationStopped=Lr,this}return h(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),i}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Xn(_r),ci=h({},_r,{view:0,detail:0}),Si=Xn(ci),vo,pl,Ko,Ss=h({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ko&&(Ko&&a.type==="mousemove"?(vo=a.screenX-Ko.screenX,pl=a.screenY-Ko.screenY):pl=vo=0,Ko=a),vo)},movementY:function(a){return"movementY"in a?a.movementY:pl}}),Cs=Xn(Ss),io=h({},Ss,{dataTransfer:0}),Kl=Xn(io),Ps=h({},ci,{relatedTarget:0}),yo=Xn(Ps),ks=h({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Xn(ks),Ho=h({},_r,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),bo=Xn(Ho),As=h({},_r,{data:0}),qo=Xn(As),Os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xo(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=Ea[a])?!!i[a]:!1}function Yi(){return xo}var oo=h({},ci,{key:function(a){if(a.key){var i=Os[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=Ya(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?fl[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(a){return a.type==="keypress"?Ya(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ya(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$s=Xn(oo),Ds=h({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=Xn(Ds),Xo=h({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),ql=Xn(Xo),Ii=h({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qo=Xn(Ii),Is=h({},Ss,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=Xn(Is),hl=h({},_r,{newState:0,oldState:0}),Xl=Xn(hl),Cc=[9,13,27,32],Yo=Kr&&"CompositionEvent"in window,Zi=null;Kr&&"documentMode"in document&&(Zi=document.documentMode);var Pc=Kr&&"TextEvent"in window&&!Zi,Zo=Kr&&(!Yo||Zi&&8<Zi&&11>=Zi),so=" ",Mo=!1;function Jo(a,i){switch(a){case"keyup":return Cc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ql(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ri=!1;function es(a,i){switch(a){case"compositionend":return Ql(i);case"keypress":return i.which!==32?null:(Mo=!0,so);case"textInput":return a=i.data,a===so&&Mo?null:a;default:return null}}function gl(a,i){if(Ri)return a==="compositionend"||!Yo&&Jo(a,i)?(a=Hr(),ri=ni=Ar=null,Ri=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Zo&&i.locale!=="ko"?null:i.data;default:return null}}var Rs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ci(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!Rs[a.type]:i==="textarea"}function Ls(a,i,c,f){lr?On?On.push(f):On=[f]:lr=f,i=zo(i,"onChange"),0<i.length&&(c=new Ua("onChange","change",null,c,f),a.push({event:c,listeners:i}))}var To=null,Eo=null;function kc(a){S_(a,0)}function zs(a){var i=wa(a);if(Jt(i))return a}function lo(a,i){if(a==="change")return i}var bi=!1;if(Kr){var Mr;if(Kr){var rn="oninput"in document;if(!rn){var co=document.createElement("div");co.setAttribute("oninput","return;"),rn=typeof co.oninput=="function"}Mr=rn}else Mr=!1;bi=Mr&&(!document.documentMode||9<document.documentMode)}function _l(){To&&(To.detachEvent("onpropertychange",uo),Eo=To=null)}function uo(a){if(a.propertyName==="value"&&zs(Eo)){var i=[];Ls(i,Eo,a,ta(a)),Qa(kc,i)}}function ts(a,i,c){a==="focusin"?(_l(),To=i,Eo=c,To.attachEvent("onpropertychange",uo)):a==="focusout"&&_l()}function Oa(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zs(Eo)}function So(a,i){if(a==="click")return zs(i)}function Li(a,i){if(a==="input"||a==="change")return zs(i)}function zi(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Va=typeof Object.is=="function"?Object.is:zi;function v(a,i){if(Va(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var c=Object.keys(a),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var M=c[f];if(!_t.call(i,M)||!Va(a[M],i[M]))return!1}return!0}function O(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function j(a,i){var c=O(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=i&&f>=i)return{node:c,offset:i-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=O(c)}}function V(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?V(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function Z(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=fn(a.document);i instanceof a.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)a=i.contentWindow;else break;i=fn(a.document)}return i}function ce(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var ve=Kr&&"documentMode"in document&&11>=document.documentMode,Me=null,Le=null,Ze=null,ze=!1;function Ie(a,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ze||Me==null||Me!==fn(f)||(f=Me,"selectionStart"in f&&ce(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ze&&v(Ze,f)||(Ze=f,f=zo(Le,"onSelect"),0<f.length&&(i=new Ua("onSelect","select",null,i,c),a.push({event:i,listeners:f}),i.target=Me)))}function Fe(a,i){var c={};return c[a.toLowerCase()]=i.toLowerCase(),c["Webkit"+a]="webkit"+i,c["Moz"+a]="moz"+i,c}var y={animationend:Fe("Animation","AnimationEnd"),animationiteration:Fe("Animation","AnimationIteration"),animationstart:Fe("Animation","AnimationStart"),transitionrun:Fe("Transition","TransitionRun"),transitionstart:Fe("Transition","TransitionStart"),transitioncancel:Fe("Transition","TransitionCancel"),transitionend:Fe("Transition","TransitionEnd")},$={},F={};Kr&&(F=document.createElement("div").style,"AnimationEvent"in window||(delete y.animationend.animation,delete y.animationiteration.animation,delete y.animationstart.animation),"TransitionEvent"in window||delete y.transitionend.transition);function W(a){if($[a])return $[a];if(!y[a])return a;var i=y[a],c;for(c in i)if(i.hasOwnProperty(c)&&c in F)return $[a]=i[c];return a}var Q=W("animationend"),ue=W("animationiteration"),Ce=W("animationstart"),je=W("transitionrun"),nt=W("transitionstart"),pt=W("transitioncancel"),gt=W("transitionend"),$t=new Map,Ot="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ot.push("scrollEnd");function Et(a,i){$t.set(a,i),Ma(i,[a])}var Yt=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},kn=[],Qn=0,vn=0;function Bn(){for(var a=Qn,i=vn=Qn=0;i<a;){var c=kn[i];kn[i++]=null;var f=kn[i];kn[i++]=null;var M=kn[i];kn[i++]=null;var k=kn[i];if(kn[i++]=null,f!==null&&M!==null){var K=f.pending;K===null?M.next=M:(M.next=K.next,K.next=M),f.pending=M}k!==0&&po(c,M,k)}}function Or(a,i,c,f){kn[Qn++]=a,kn[Qn++]=i,kn[Qn++]=c,kn[Qn++]=f,vn|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function ui(a,i,c,f){return Or(a,i,c,f),Fs(a)}function Tr(a,i){return Or(a,null,null,i),Fs(a)}function po(a,i,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var M=!1,k=a.return;k!==null;)k.childLanes|=c,f=k.alternate,f!==null&&(f.childLanes|=c),k.tag===22&&(a=k.stateNode,a===null||a._visibility&1||(M=!0)),a=k,k=k.return;return a.tag===3?(k=a.stateNode,M&&i!==null&&(M=31-rt(c),a=k.hiddenUpdates,f=a[M],f===null?a[M]=[i]:f.push(i),i.lane=c|536870912),k):null}function Fs(a){if(50<ed)throw ed=0,td=null,Error(r(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Yl={};function Bf(a,i,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(a,i,c,f){return new Bf(a,i,c,f)}function Ld(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Co(a,i){var c=a.alternate;return c===null?(c=Fi(a.tag,i,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=i,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,i=a.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function Nf(a,i){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,i=c.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function wu(a,i,c,f,M,k){var K=0;if(f=a,typeof a=="function")Ld(a)&&(K=1);else if(typeof a=="string")K=R$(a,c,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Fi(31,c,i,M),a.elementType=U,a.lanes=k,a;case b:return js(c.children,M,k,i);case I:K=8,M|=24;break;case T:return a=Fi(12,c,i,M|2),a.elementType=T,a.lanes=k,a;case C:return a=Fi(13,c,i,M),a.elementType=C,a.lanes=k,a;case P:return a=Fi(19,c,i,M),a.elementType=P,a.lanes=k,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:K=10;break e;case S:K=9;break e;case E:K=11;break e;case w:K=14;break e;case R:K=16,f=null;break e}K=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return i=Fi(K,c,i,M),i.elementType=a,i.type=f,i.lanes=k,i}function js(a,i,c,f){return a=Fi(7,a,f,i),a.lanes=c,a}function zd(a,i,c){return a=Fi(6,a,null,i),a.lanes=c,a}function Uf(a){var i=Fi(18,null,null,0);return i.stateNode=a,i}function Mu(a,i,c){return i=Fi(4,a.children!==null?a.children:[],a.key,i),i.lanes=c,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Vf=new WeakMap;function Ji(a,i){if(typeof a=="object"&&a!==null){var c=Vf.get(a);return c!==void 0?c:(i={value:a,source:i,stack:Be(i)},Vf.set(a,i),i)}return{value:a,source:i,stack:Be(i)}}var vl=[],Zl=0,Tu=null,Jl=0,eo=[],to=0,ns=null,Po=1,ko="";function Ao(a,i){vl[Zl++]=Jl,vl[Zl++]=Tu,Tu=a,Jl=i}function Wf(a,i,c){eo[to++]=Po,eo[to++]=ko,eo[to++]=ns,ns=a;var f=Po;a=ko;var M=32-rt(f)-1;f&=~(1<<M),c+=1;var k=32-rt(i)+M;if(30<k){var K=M-M%5;k=(f&(1<<K)-1).toString(32),f>>=K,M-=K,Po=1<<32-rt(i)+M|c<<M|f,ko=k+a}else Po=1<<k|c<<M|f,ko=a}function Fd(a){a.return!==null&&(Ao(a,1),Wf(a,1,0))}function Eu(a){for(;a===Tu;)Tu=vl[--Zl],vl[Zl]=null,Jl=vl[--Zl],vl[Zl]=null;for(;a===ns;)ns=eo[--to],eo[to]=null,ko=eo[--to],eo[to]=null,Po=eo[--to],eo[to]=null}function Gf(a,i){eo[to++]=Po,eo[to++]=ko,eo[to++]=ns,Po=i.id,ko=i.overflow,ns=a}var ai=null,Zr=null,sr=!1,Bs=null,ji=!1,jd=Error(r(519));function Ns(a){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ac(Ji(i,a)),jd}function Bd(a){var i=a.stateNode,c=a.type,f=a.memoizedProps;switch(i[Lt]=a,i[Qt]=f,c){case"dialog":ar("cancel",i),ar("close",i);break;case"iframe":case"object":case"embed":ar("load",i);break;case"video":case"audio":for(c=0;c<sd.length;c++)ar(sd[c],i);break;case"source":ar("error",i);break;case"img":case"image":case"link":ar("error",i),ar("load",i);break;case"details":ar("toggle",i);break;case"input":ar("invalid",i),_o(i,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":ar("invalid",i);break;case"textarea":ar("invalid",i),Pe(i,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||f.suppressHydrationWarning===!0||he(i.textContent,c)?(f.popover!=null&&(ar("beforetoggle",i),ar("toggle",i)),f.onScroll!=null&&ar("scroll",i),f.onScrollEnd!=null&&ar("scrollend",i),f.onClick!=null&&(i.onclick=mn),i=!0):i=!1,i||Ns(a,!0)}function Kf(a){for(ai=a.return;ai;)switch(ai.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:ai=ai.return}}function ec(a){if(a!==ai)return!1;if(!sr)return Kf(a),sr=!0,!1;var i=a.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||ir(a.type,a.memoizedProps)),c=!c),c&&Zr&&Ns(a),Kf(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Zr=ea(a)}else if(i===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Zr=ea(a)}else i===27?(i=Zr,jr(a.type)?(a=Vh,Vh=null,Zr=a):Zr=i):Zr=ai?wi(a.stateNode.nextSibling):null;return!0}function Us(){Zr=ai=null,sr=!1}function Nd(){var a=Bs;return a!==null&&(fi===null?fi=a:fi.push.apply(fi,a),Bs=null),a}function Ac(a){Bs===null?Bs=[a]:Bs.push(a)}var Su=Y(null),yl=null,rs=null;function as(a,i,c){J(Su,i._currentValue),i._currentValue=c}function is(a){a._currentValue=Su.current,te(Su)}function Ud(a,i,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),a===c)break;a=a.return}}function Cu(a,i,c,f){var M=a.child;for(M!==null&&(M.return=a);M!==null;){var k=M.dependencies;if(k!==null){var K=M.child;k=k.firstContext;e:for(;k!==null;){var me=k;k=M;for(var De=0;De<i.length;De++)if(me.context===i[De]){k.lanes|=c,me=k.alternate,me!==null&&(me.lanes|=c),Ud(k.return,c,a),f||(K=null);break e}k=me.next}}else if(M.tag===18){if(K=M.return,K===null)throw Error(r(341));K.lanes|=c,k=K.alternate,k!==null&&(k.lanes|=c),Ud(K,c,a),K=null}else K=M.child;if(K!==null)K.return=M;else for(K=M;K!==null;){if(K===a){K=null;break}if(M=K.sibling,M!==null){M.return=K.return,K=M;break}K=K.return}M=K}}function tc(a,i,c,f){a=null;for(var M=i,k=!1;M!==null;){if(!k){if((M.flags&524288)!==0)k=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var K=M.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var me=M.type;Va(M.pendingProps.value,K.value)||(a!==null?a.push(me):a=[me])}}else if(M===Re.current){if(K=M.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(a!==null?a.push(Xh):a=[Xh])}M=M.return}a!==null&&Cu(i,a,c,f),i.flags|=262144}function Pu(a){for(a=a.firstContext;a!==null;){if(!Va(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bl(a){yl=a,rs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ii(a){return Hf(yl,a)}function Oc(a,i){return yl===null&&bl(a),Hf(a,i)}function Hf(a,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},rs===null){if(a===null)throw Error(r(308));rs=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else rs=rs.next=i;return c}var Yg=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){i.aborted=!0,a.forEach(function(c){return c()})}},qf=e.unstable_scheduleCallback,Zg=e.unstable_NormalPriority,$a={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ku(){return{controller:new Yg,data:new Map,refCount:0}}function $c(a){a.refCount--,a.refCount===0&&qf(Zg,function(){a.controller.abort()})}var Dc=null,Au=0,nc=0,rc=null;function Xf(a,i){if(Dc===null){var c=Dc=[];Au=0,nc=Fh(),rc={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Au++,i.then(Qf,Qf),i}function Qf(){if(--Au===0&&Dc!==null){rc!==null&&(rc.status="fulfilled");var a=Dc;Dc=null,nc=0,rc=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function Jg(a,i){var c=[],f={status:"pending",value:null,reason:null,then:function(M){c.push(M)}};return a.then(function(){f.status="fulfilled",f.value=i;for(var M=0;M<c.length;M++)(0,c[M])(i)},function(M){for(f.status="rejected",f.reason=M,M=0;M<c.length;M++)(0,c[M])(void 0)}),f}var Vd=X.S;X.S=function(a,i){vh=Tt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Xf(a,i),Vd!==null&&Vd(a,i)};var xl=Y(null);function Wd(){var a=xl.current;return a!==null?a:qr.pooledCache}function Ic(a,i){i===null?J(xl,xl.current):J(xl,i.pool)}function Yf(){var a=Wd();return a===null?null:{parent:$a._currentValue,pool:a}}var ac=Error(r(460)),Gd=Error(r(474)),Ou=Error(r(542)),Rc={then:function(){}};function Zf(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Jf(a,i,c){switch(c=a[c],c===void 0?a.push(i):c!==i&&(i.then(mn,mn),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,em(a),a;default:if(typeof i.status=="string")i.then(mn,mn);else{if(a=qr,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=i,a.status="pending",a.then(function(f){if(i.status==="pending"){var M=i;M.status="fulfilled",M.value=f}},function(f){if(i.status==="pending"){var M=i;M.status="rejected",M.reason=f}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,em(a),a}throw Ml=i,ac}}function wl(a){try{var i=a._init;return i(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ml=c,ac):c}}var Ml=null;function Kd(){if(Ml===null)throw Error(r(459));var a=Ml;return Ml=null,a}function em(a){if(a===ac||a===Ou)throw Error(r(483))}var ic=null,Lc=0;function $u(a){var i=Lc;return Lc+=1,ic===null&&(ic=[]),Jf(ic,a,i)}function oc(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function Du(a,i){throw i.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(i),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function tm(a){function i(Je,Ue){if(a){var ct=Je.deletions;ct===null?(Je.deletions=[Ue],Je.flags|=16):ct.push(Ue)}}function c(Je,Ue){if(!a)return null;for(;Ue!==null;)i(Je,Ue),Ue=Ue.sibling;return null}function f(Je){for(var Ue=new Map;Je!==null;)Je.key!==null?Ue.set(Je.key,Je):Ue.set(Je.index,Je),Je=Je.sibling;return Ue}function M(Je,Ue){return Je=Co(Je,Ue),Je.index=0,Je.sibling=null,Je}function k(Je,Ue,ct){return Je.index=ct,a?(ct=Je.alternate,ct!==null?(ct=ct.index,ct<Ue?(Je.flags|=67108866,Ue):ct):(Je.flags|=67108866,Ue)):(Je.flags|=1048576,Ue)}function K(Je){return a&&Je.alternate===null&&(Je.flags|=67108866),Je}function me(Je,Ue,ct,St){return Ue===null||Ue.tag!==6?(Ue=zd(ct,Je.mode,St),Ue.return=Je,Ue):(Ue=M(Ue,ct),Ue.return=Je,Ue)}function De(Je,Ue,ct,St){var Tn=ct.type;return Tn===b?Mt(Je,Ue,ct.props.children,St,ct.key):Ue!==null&&(Ue.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===R&&wl(Tn)===Ue.type)?(Ue=M(Ue,ct.props),oc(Ue,ct),Ue.return=Je,Ue):(Ue=wu(ct.type,ct.key,ct.props,null,Je.mode,St),oc(Ue,ct),Ue.return=Je,Ue)}function ut(Je,Ue,ct,St){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==ct.containerInfo||Ue.stateNode.implementation!==ct.implementation?(Ue=Mu(ct,Je.mode,St),Ue.return=Je,Ue):(Ue=M(Ue,ct.children||[]),Ue.return=Je,Ue)}function Mt(Je,Ue,ct,St,Tn){return Ue===null||Ue.tag!==7?(Ue=js(ct,Je.mode,St,Tn),Ue.return=Je,Ue):(Ue=M(Ue,ct),Ue.return=Je,Ue)}function Pt(Je,Ue,ct){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ue=zd(""+Ue,Je.mode,ct),Ue.return=Je,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case x:return ct=wu(Ue.type,Ue.key,Ue.props,null,Je.mode,ct),oc(ct,Ue),ct.return=Je,ct;case _:return Ue=Mu(Ue,Je.mode,ct),Ue.return=Je,Ue;case R:return Ue=wl(Ue),Pt(Je,Ue,ct)}if(ae(Ue)||ee(Ue))return Ue=js(Ue,Je.mode,ct,null),Ue.return=Je,Ue;if(typeof Ue.then=="function")return Pt(Je,$u(Ue),ct);if(Ue.$$typeof===D)return Pt(Je,Oc(Je,Ue),ct);Du(Je,Ue)}return null}function ft(Je,Ue,ct,St){var Tn=Ue!==null?Ue.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Tn!==null?null:me(Je,Ue,""+ct,St);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return ct.key===Tn?De(Je,Ue,ct,St):null;case _:return ct.key===Tn?ut(Je,Ue,ct,St):null;case R:return ct=wl(ct),ft(Je,Ue,ct,St)}if(ae(ct)||ee(ct))return Tn!==null?null:Mt(Je,Ue,ct,St,null);if(typeof ct.then=="function")return ft(Je,Ue,$u(ct),St);if(ct.$$typeof===D)return ft(Je,Ue,Oc(Je,ct),St);Du(Je,ct)}return null}function yt(Je,Ue,ct,St,Tn){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return Je=Je.get(ct)||null,me(Ue,Je,""+St,Tn);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case x:return Je=Je.get(St.key===null?ct:St.key)||null,De(Ue,Je,St,Tn);case _:return Je=Je.get(St.key===null?ct:St.key)||null,ut(Ue,Je,St,Tn);case R:return St=wl(St),yt(Je,Ue,ct,St,Tn)}if(ae(St)||ee(St))return Je=Je.get(ct)||null,Mt(Ue,Je,St,Tn,null);if(typeof St.then=="function")return yt(Je,Ue,ct,$u(St),Tn);if(St.$$typeof===D)return yt(Je,Ue,ct,Oc(Ue,St),Tn);Du(Ue,St)}return null}function sn(Je,Ue,ct,St){for(var Tn=null,Dr=null,_n=Ue,er=Ue=0,dr=null;_n!==null&&er<ct.length;er++){_n.index>er?(dr=_n,_n=null):dr=_n.sibling;var Ir=ft(Je,_n,ct[er],St);if(Ir===null){_n===null&&(_n=dr);break}a&&_n&&Ir.alternate===null&&i(Je,_n),Ue=k(Ir,Ue,er),Dr===null?Tn=Ir:Dr.sibling=Ir,Dr=Ir,_n=dr}if(er===ct.length)return c(Je,_n),sr&&Ao(Je,er),Tn;if(_n===null){for(;er<ct.length;er++)_n=Pt(Je,ct[er],St),_n!==null&&(Ue=k(_n,Ue,er),Dr===null?Tn=_n:Dr.sibling=_n,Dr=_n);return sr&&Ao(Je,er),Tn}for(_n=f(_n);er<ct.length;er++)dr=yt(_n,Je,er,ct[er],St),dr!==null&&(a&&dr.alternate!==null&&_n.delete(dr.key===null?er:dr.key),Ue=k(dr,Ue,er),Dr===null?Tn=dr:Dr.sibling=dr,Dr=dr);return a&&_n.forEach(function(du){return i(Je,du)}),sr&&Ao(Je,er),Tn}function $n(Je,Ue,ct,St){if(ct==null)throw Error(r(151));for(var Tn=null,Dr=null,_n=Ue,er=Ue=0,dr=null,Ir=ct.next();_n!==null&&!Ir.done;er++,Ir=ct.next()){_n.index>er?(dr=_n,_n=null):dr=_n.sibling;var du=ft(Je,_n,Ir.value,St);if(du===null){_n===null&&(_n=dr);break}a&&_n&&du.alternate===null&&i(Je,_n),Ue=k(du,Ue,er),Dr===null?Tn=du:Dr.sibling=du,Dr=du,_n=dr}if(Ir.done)return c(Je,_n),sr&&Ao(Je,er),Tn;if(_n===null){for(;!Ir.done;er++,Ir=ct.next())Ir=Pt(Je,Ir.value,St),Ir!==null&&(Ue=k(Ir,Ue,er),Dr===null?Tn=Ir:Dr.sibling=Ir,Dr=Ir);return sr&&Ao(Je,er),Tn}for(_n=f(_n);!Ir.done;er++,Ir=ct.next())Ir=yt(_n,Je,er,Ir.value,St),Ir!==null&&(a&&Ir.alternate!==null&&_n.delete(Ir.key===null?er:Ir.key),Ue=k(Ir,Ue,er),Dr===null?Tn=Ir:Dr.sibling=Ir,Dr=Ir);return a&&_n.forEach(function(K$){return i(Je,K$)}),sr&&Ao(Je,er),Tn}function ra(Je,Ue,ct,St){if(typeof ct=="object"&&ct!==null&&ct.type===b&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:e:{for(var Tn=ct.key;Ue!==null;){if(Ue.key===Tn){if(Tn=ct.type,Tn===b){if(Ue.tag===7){c(Je,Ue.sibling),St=M(Ue,ct.props.children),St.return=Je,Je=St;break e}}else if(Ue.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===R&&wl(Tn)===Ue.type){c(Je,Ue.sibling),St=M(Ue,ct.props),oc(St,ct),St.return=Je,Je=St;break e}c(Je,Ue);break}else i(Je,Ue);Ue=Ue.sibling}ct.type===b?(St=js(ct.props.children,Je.mode,St,ct.key),St.return=Je,Je=St):(St=wu(ct.type,ct.key,ct.props,null,Je.mode,St),oc(St,ct),St.return=Je,Je=St)}return K(Je);case _:e:{for(Tn=ct.key;Ue!==null;){if(Ue.key===Tn)if(Ue.tag===4&&Ue.stateNode.containerInfo===ct.containerInfo&&Ue.stateNode.implementation===ct.implementation){c(Je,Ue.sibling),St=M(Ue,ct.children||[]),St.return=Je,Je=St;break e}else{c(Je,Ue);break}else i(Je,Ue);Ue=Ue.sibling}St=Mu(ct,Je.mode,St),St.return=Je,Je=St}return K(Je);case R:return ct=wl(ct),ra(Je,Ue,ct,St)}if(ae(ct))return sn(Je,Ue,ct,St);if(ee(ct)){if(Tn=ee(ct),typeof Tn!="function")throw Error(r(150));return ct=Tn.call(ct),$n(Je,Ue,ct,St)}if(typeof ct.then=="function")return ra(Je,Ue,$u(ct),St);if(ct.$$typeof===D)return ra(Je,Ue,Oc(Je,ct),St);Du(Je,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ue!==null&&Ue.tag===6?(c(Je,Ue.sibling),St=M(Ue,ct),St.return=Je,Je=St):(c(Je,Ue),St=zd(ct,Je.mode,St),St.return=Je,Je=St),K(Je)):c(Je,Ue)}return function(Je,Ue,ct,St){try{Lc=0;var Tn=ra(Je,Ue,ct,St);return ic=null,Tn}catch(_n){if(_n===ac||_n===Ou)throw _n;var Dr=Fi(29,_n,null,Je.mode);return Dr.lanes=St,Dr.return=Je,Dr}}}var Tl=tm(!0),nm=tm(!1),os=!1;function Hd(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ss(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Vs(a,i,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(vr&2)!==0){var M=f.pending;return M===null?i.next=i:(i.next=M.next,M.next=i),f.pending=i,i=Fs(a),po(a,null,c),i}return Or(a,f,i,c),Fs(a)}function zc(a,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var f=i.lanes;f&=a.pendingLanes,c|=f,i.lanes=c,B(a,c)}}function Iu(a,i){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var M=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var K={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};k===null?M=k=K:k=k.next=K,c=c.next}while(c!==null);k===null?M=k=i:k=k.next=i}else M=k=i;c={baseState:f.baseState,firstBaseUpdate:M,lastBaseUpdate:k,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=i:a.next=i,c.lastBaseUpdate=i}var Xd=!1;function Fc(){if(Xd){var a=rc;if(a!==null)throw a}}function sc(a,i,c,f){Xd=!1;var M=a.updateQueue;os=!1;var k=M.firstBaseUpdate,K=M.lastBaseUpdate,me=M.shared.pending;if(me!==null){M.shared.pending=null;var De=me,ut=De.next;De.next=null,K===null?k=ut:K.next=ut,K=De;var Mt=a.alternate;Mt!==null&&(Mt=Mt.updateQueue,me=Mt.lastBaseUpdate,me!==K&&(me===null?Mt.firstBaseUpdate=ut:me.next=ut,Mt.lastBaseUpdate=De))}if(k!==null){var Pt=M.baseState;K=0,Mt=ut=De=null,me=k;do{var ft=me.lane&-536870913,yt=ft!==me.lane;if(yt?(rr&ft)===ft:(f&ft)===ft){ft!==0&&ft===nc&&(Xd=!0),Mt!==null&&(Mt=Mt.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var sn=a,$n=me;ft=i;var ra=c;switch($n.tag){case 1:if(sn=$n.payload,typeof sn=="function"){Pt=sn.call(ra,Pt,ft);break e}Pt=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=$n.payload,ft=typeof sn=="function"?sn.call(ra,Pt,ft):sn,ft==null)break e;Pt=h({},Pt,ft);break e;case 2:os=!0}}ft=me.callback,ft!==null&&(a.flags|=64,yt&&(a.flags|=8192),yt=M.callbacks,yt===null?M.callbacks=[ft]:yt.push(ft))}else yt={lane:ft,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Mt===null?(ut=Mt=yt,De=Pt):Mt=Mt.next=yt,K|=ft;if(me=me.next,me===null){if(me=M.shared.pending,me===null)break;yt=me,me=yt.next,yt.next=null,M.lastBaseUpdate=yt,M.shared.pending=null}}while(!0);Mt===null&&(De=Pt),M.baseState=De,M.firstBaseUpdate=ut,M.lastBaseUpdate=Mt,k===null&&(M.shared.lanes=0),Ro|=K,a.lanes=K,a.memoizedState=Pt}}function rm(a,i){if(typeof a!="function")throw Error(r(191,a));a.call(i)}function am(a,i){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)rm(c[a],i)}var El=Y(null),Ru=Y(0);function im(a,i){a=Io,J(Ru,a),J(El,i),Io=a|i.baseLanes}function jc(){J(Ru,Io),J(El,El.current)}function Qd(){Io=Ru.current,te(El),te(Ru)}var Bi=Y(null),Ni=null;function ls(a){var i=a.alternate;J(ca,ca.current&1),J(Bi,a),Ni===null&&(i===null||El.current!==null||i.memoizedState!==null)&&(Ni=a)}function Yd(a){J(ca,ca.current),J(Bi,a),Ni===null&&(Ni=a)}function Zd(a){a.tag===22?(J(ca,ca.current),J(Bi,a),Ni===null&&(Ni=a)):Ws()}function Ws(){J(ca,ca.current),J(Bi,Bi.current)}function Ui(a){te(Bi),Ni===a&&(Ni=null),te(ca)}var ca=Y(0);function Bc(a){for(var i=a;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Rl(c)||Ll(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var cs=0,Vn=null,zr=null,Sa=null,Lu=!1,lc=!1,Sl=!1,Nc=0,Uc=0,cc=null,om=0;function _a(){throw Error(r(321))}function Jd(a,i){if(i===null)return!1;for(var c=0;c<i.length&&c<a.length;c++)if(!Va(a[c],i[c]))return!1;return!0}function ep(a,i,c,f,M,k){return cs=k,Vn=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=a===null||a.memoizedState===null?jm:vp,Sl=!1,k=c(f,M),Sl=!1,lc&&(k=sm(i,c,f,M)),tp(a),k}function tp(a){X.H=pc;var i=zr!==null&&zr.next!==null;if(cs=0,Sa=zr=Vn=null,Lu=!1,Uc=0,cc=null,i)throw Error(r(300));a===null||Da||(a=a.dependencies,a!==null&&Pu(a)&&(Da=!0))}function sm(a,i,c,f){Vn=a;var M=0;do{if(lc&&(cc=null),Uc=0,lc=!1,25<=M)throw Error(r(301));if(M+=1,Sa=zr=null,a.updateQueue!=null){var k=a.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}X.H=yp,k=i(c,f)}while(lc);return k}function e_(){var a=X.H,i=a.useState()[0];return i=typeof i.then=="function"?Cl(i):i,a=a.useState()[0],(zr!==null?zr.memoizedState:null)!==a&&(Vn.flags|=1024),i}function zu(){var a=Nc!==0;return Nc=0,a}function np(a,i,c){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~c}function rp(a){if(Lu){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Lu=!1}cs=0,Sa=zr=Vn=null,lc=!1,Uc=Nc=0,cc=null}function di(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sa===null?Vn.memoizedState=Sa=a:Sa=Sa.next=a,Sa}function Ca(){if(zr===null){var a=Vn.alternate;a=a!==null?a.memoizedState:null}else a=zr.next;var i=Sa===null?Vn.memoizedState:Sa.next;if(i!==null)Sa=i,zr=a;else{if(a===null)throw Vn.alternate===null?Error(r(467)):Error(r(310));zr=a,a={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},Sa===null?Vn.memoizedState=Sa=a:Sa=Sa.next=a}return Sa}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(a){var i=Uc;return Uc+=1,cc===null&&(cc=[]),a=Jf(cc,a,i),i=Vn,(Sa===null?i.memoizedState:Sa.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?jm:vp),a}function ju(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Cl(a);if(a.$$typeof===D)return ii(a)}throw Error(r(438,String(a)))}function ap(a){var i=null,c=Vn.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var f=Vn.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(i={data:f.data.map(function(M){return M.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=Fu(),Vn.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(a),f=0;f<a;f++)c[f]=N;return i.index++,c}function us(a,i){return typeof i=="function"?i(a):i}function Vc(a){var i=Ca();return ip(i,zr,a)}function ip(a,i,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var M=a.baseQueue,k=f.pending;if(k!==null){if(M!==null){var K=M.next;M.next=k.next,k.next=K}i.baseQueue=M=k,f.pending=null}if(k=a.baseState,M===null)a.memoizedState=k;else{i=M.next;var me=K=null,De=null,ut=i,Mt=!1;do{var Pt=ut.lane&-536870913;if(Pt!==ut.lane?(rr&Pt)===Pt:(cs&Pt)===Pt){var ft=ut.revertLane;if(ft===0)De!==null&&(De=De.next={lane:0,revertLane:0,gesture:null,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),Pt===nc&&(Mt=!0);else if((cs&ft)===ft){ut=ut.next,ft===nc&&(Mt=!0);continue}else Pt={lane:0,revertLane:ut.revertLane,gesture:null,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},De===null?(me=De=Pt,K=k):De=De.next=Pt,Vn.lanes|=ft,Ro|=ft;Pt=ut.action,Sl&&c(k,Pt),k=ut.hasEagerState?ut.eagerState:c(k,Pt)}else ft={lane:Pt,revertLane:ut.revertLane,gesture:ut.gesture,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},De===null?(me=De=ft,K=k):De=De.next=ft,Vn.lanes|=Pt,Ro|=Pt;ut=ut.next}while(ut!==null&&ut!==i);if(De===null?K=k:De.next=me,!Va(k,a.memoizedState)&&(Da=!0,Mt&&(c=rc,c!==null)))throw c;a.memoizedState=k,a.baseState=K,a.baseQueue=De,f.lastRenderedState=k}return M===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function op(a){var i=Ca(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,M=c.pending,k=i.memoizedState;if(M!==null){c.pending=null;var K=M=M.next;do k=a(k,K.action),K=K.next;while(K!==M);Va(k,i.memoizedState)||(Da=!0),i.memoizedState=k,i.baseQueue===null&&(i.baseState=k),c.lastRenderedState=k}return[k,f]}function sp(a,i,c){var f=Vn,M=Ca(),k=sr;if(k){if(c===void 0)throw Error(r(407));c=c()}else c=i();var K=!Va((zr||M).memoizedState,c);if(K&&(M.memoizedState=c,Da=!0),M=M.queue,dp(um.bind(null,f,M,a),[a]),M.getSnapshot!==i||K||Sa!==null&&Sa.memoizedState.tag&1){if(f.flags|=2048,uc(9,{destroy:void 0},cm.bind(null,f,M,c,i),null),qr===null)throw Error(r(349));k||(cs&127)!==0||lm(f,i,c)}return c}function lm(a,i,c){a.flags|=16384,a={getSnapshot:i,value:c},i=Vn.updateQueue,i===null?(i=Fu(),Vn.updateQueue=i,i.stores=[a]):(c=i.stores,c===null?i.stores=[a]:c.push(a))}function cm(a,i,c,f){i.value=c,i.getSnapshot=f,dm(i)&&Bu(a)}function um(a,i,c){return c(function(){dm(i)&&Bu(a)})}function dm(a){var i=a.getSnapshot;a=a.value;try{var c=i();return!Va(a,c)}catch{return!0}}function Bu(a){var i=Tr(a,2);i!==null&&ki(i,a,2)}function lp(a){var i=di();if(typeof a=="function"){var c=a;if(a=c(),Sl){Ct(!0);try{c()}finally{Ct(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},i}function pm(a,i,c,f){return a.baseState=c,ip(a,zr,typeof f=="function"?f:us)}function t_(a,i,c,f,M){if(dc(a))throw Error(r(485));if(a=i.action,a!==null){var k={payload:M,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){k.listeners.push(K)}};X.T!==null?c(!0):k.isTransition=!1,f(k),c=i.pending,c===null?(k.next=i.pending=k,fm(i,k)):(k.next=c.next,i.pending=c.next=k)}}function fm(a,i){var c=i.action,f=i.payload,M=a.state;if(i.isTransition){var k=X.T,K={};X.T=K;try{var me=c(M,f),De=X.S;De!==null&&De(K,me),mm(a,i,me)}catch(ut){cp(a,i,ut)}finally{k!==null&&K.types!==null&&(k.types=K.types),X.T=k}}else try{k=c(M,f),mm(a,i,k)}catch(ut){cp(a,i,ut)}}function mm(a,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){hm(a,i,f)},function(f){return cp(a,i,f)}):hm(a,i,c)}function hm(a,i,c){i.status="fulfilled",i.value=c,gm(i),a.state=c,i=a.pending,i!==null&&(c=i.next,c===i?a.pending=null:(c=c.next,i.next=c,fm(a,c)))}function cp(a,i,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do i.status="rejected",i.reason=c,gm(i),i=i.next;while(i!==f)}a.action=null}function gm(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function _m(a,i){return i}function up(a,i){if(sr){var c=qr.formState;if(c!==null){e:{var f=Vn;if(sr){if(Zr){t:{for(var M=Zr,k=ji;M.nodeType!==8;){if(!k){M=null;break t}if(M=wi(M.nextSibling),M===null){M=null;break t}}k=M.data,M=k==="F!"||k==="F"?M:null}if(M){Zr=wi(M.nextSibling),f=M.data==="F!";break e}}Ns(f)}f=!1}f&&(i=c[0])}}return c=di(),c.memoizedState=c.baseState=i,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:i},c.queue=f,c=Lm.bind(null,Vn,f),f.dispatch=c,f=lp(!1),k=_p.bind(null,Vn,!1,f.queue),f=di(),M={state:i,dispatch:null,action:a,pending:null},f.queue=M,c=t_.bind(null,Vn,M,k,c),M.dispatch=c,f.memoizedState=a,[i,c,!1]}function vm(a){var i=Ca();return ym(i,zr,a)}function ym(a,i,c){if(i=ip(a,i,_m)[0],a=Vc(us)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var f=Cl(i)}catch(K){throw K===ac?Ou:K}else f=i;i=Ca();var M=i.queue,k=M.dispatch;return c!==i.memoizedState&&(Vn.flags|=2048,uc(9,{destroy:void 0},bm.bind(null,M,c),null)),[f,k,a]}function bm(a,i){a.action=i}function xm(a){var i=Ca(),c=zr;if(c!==null)return ym(i,c,a);Ca(),i=i.memoizedState,c=Ca();var f=c.queue.dispatch;return c.memoizedState=a,[i,f,!1]}function uc(a,i,c,f){return a={tag:a,create:c,deps:f,inst:i,next:null},i=Vn.updateQueue,i===null&&(i=Fu(),Vn.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,i.lastEffect=a),a}function wm(){return Ca().memoizedState}function Nu(a,i,c,f){var M=di();Vn.flags|=a,M.memoizedState=uc(1|i,{destroy:void 0},c,f===void 0?null:f)}function Wc(a,i,c,f){var M=Ca();f=f===void 0?null:f;var k=M.memoizedState.inst;zr!==null&&f!==null&&Jd(f,zr.memoizedState.deps)?M.memoizedState=uc(i,k,c,f):(Vn.flags|=a,M.memoizedState=uc(1|i,k,c,f))}function Mm(a,i){Nu(8390656,8,a,i)}function dp(a,i){Wc(2048,8,a,i)}function Tm(a){Vn.flags|=4;var i=Vn.updateQueue;if(i===null)i=Fu(),Vn.updateQueue=i,i.events=[a];else{var c=i.events;c===null?i.events=[a]:c.push(a)}}function Em(a){var i=Ca().memoizedState;return Tm({ref:i,nextImpl:a}),function(){if((vr&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Sm(a,i){return Wc(4,2,a,i)}function pp(a,i){return Wc(4,4,a,i)}function Cm(a,i){if(typeof i=="function"){a=a();var c=i(a);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function Pm(a,i,c){c=c!=null?c.concat([a]):null,Wc(4,4,Cm.bind(null,i,a),c)}function Uu(){}function km(a,i){var c=Ca();i=i===void 0?null:i;var f=c.memoizedState;return i!==null&&Jd(i,f[1])?f[0]:(c.memoizedState=[a,i],a)}function Am(a,i){var c=Ca();i=i===void 0?null:i;var f=c.memoizedState;if(i!==null&&Jd(i,f[1]))return f[0];if(f=a(),Sl){Ct(!0);try{a()}finally{Ct(!1)}}return c.memoizedState=[f,i],f}function fp(a,i,c){return c===void 0||(cs&1073741824)!==0&&(rr&261930)===0?a.memoizedState=i:(a.memoizedState=c,a=xh(),Vn.lanes|=a,Ro|=a,c)}function Om(a,i,c,f){return Va(c,i)?c:El.current!==null?(a=fp(a,c,f),Va(a,i)||(Da=!0),a):(cs&42)===0||(cs&1073741824)!==0&&(rr&261930)===0?(Da=!0,a.memoizedState=c):(a=xh(),Vn.lanes|=a,Ro|=a,i)}function $m(a,i,c,f,M){var k=se.p;se.p=k!==0&&8>k?k:8;var K=X.T,me={};X.T=me,_p(a,!1,i,c);try{var De=M(),ut=X.S;if(ut!==null&&ut(me,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var Mt=Jg(De,f);Gc(a,i,Mt,Gi(a))}else Gc(a,i,f,Gi(a))}catch(Pt){Gc(a,i,{then:function(){},status:"rejected",reason:Pt},Gi())}finally{se.p=k,K!==null&&me.types!==null&&(K.types=me.types),X.T=K}}function n_(){}function mp(a,i,c,f){if(a.tag!==5)throw Error(r(476));var M=Dm(a).queue;$m(a,M,i,le,c===null?n_:function(){return hp(a),c(f)})}function Dm(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:le},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:c},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function hp(a){var i=Dm(a);i.next===null&&(i=a.alternate.memoizedState),Gc(a,i.next.queue,{},Gi())}function gp(){return ii(Xh)}function Im(){return Ca().memoizedState}function Rm(){return Ca().memoizedState}function r_(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var c=Gi();a=ss(c);var f=Vs(i,a,c);f!==null&&(ki(f,i,c),zc(f,i,c)),i={cache:ku()},a.payload=i;return}i=i.return}}function a_(a,i,c){var f=Gi();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dc(a)?zm(i,c):(c=ui(a,i,c,f),c!==null&&(ki(c,a,f),Fm(c,i,f)))}function Lm(a,i,c){var f=Gi();Gc(a,i,c,f)}function Gc(a,i,c,f){var M={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(dc(a))zm(i,M);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=i.lastRenderedReducer,k!==null))try{var K=i.lastRenderedState,me=k(K,c);if(M.hasEagerState=!0,M.eagerState=me,Va(me,K))return Or(a,i,M,0),qr===null&&Bn(),!1}catch{}if(c=ui(a,i,M,f),c!==null)return ki(c,a,f),Fm(c,i,f),!0}return!1}function _p(a,i,c,f){if(f={lane:2,revertLane:Fh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},dc(a)){if(i)throw Error(r(479))}else i=ui(a,c,f,2),i!==null&&ki(i,a,2)}function dc(a){var i=a.alternate;return a===Vn||i!==null&&i===Vn}function zm(a,i){lc=Lu=!0;var c=a.pending;c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i}function Fm(a,i,c){if((c&4194048)!==0){var f=i.lanes;f&=a.pendingLanes,c|=f,i.lanes=c,B(a,c)}}var pc={readContext:ii,use:ju,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useLayoutEffect:_a,useInsertionEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useSyncExternalStore:_a,useId:_a,useHostTransitionStatus:_a,useFormState:_a,useActionState:_a,useOptimistic:_a,useMemoCache:_a,useCacheRefresh:_a};pc.useEffectEvent=_a;var jm={readContext:ii,use:ju,useCallback:function(a,i){return di().memoizedState=[a,i===void 0?null:i],a},useContext:ii,useEffect:Mm,useImperativeHandle:function(a,i,c){c=c!=null?c.concat([a]):null,Nu(4194308,4,Cm.bind(null,i,a),c)},useLayoutEffect:function(a,i){return Nu(4194308,4,a,i)},useInsertionEffect:function(a,i){Nu(4,2,a,i)},useMemo:function(a,i){var c=di();i=i===void 0?null:i;var f=a();if(Sl){Ct(!0);try{a()}finally{Ct(!1)}}return c.memoizedState=[f,i],f},useReducer:function(a,i,c){var f=di();if(c!==void 0){var M=c(i);if(Sl){Ct(!0);try{c(i)}finally{Ct(!1)}}}else M=i;return f.memoizedState=f.baseState=M,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:M},f.queue=a,a=a.dispatch=a_.bind(null,Vn,a),[f.memoizedState,a]},useRef:function(a){var i=di();return a={current:a},i.memoizedState=a},useState:function(a){a=lp(a);var i=a.queue,c=Lm.bind(null,Vn,i);return i.dispatch=c,[a.memoizedState,c]},useDebugValue:Uu,useDeferredValue:function(a,i){var c=di();return fp(c,a,i)},useTransition:function(){var a=lp(!1);return a=$m.bind(null,Vn,a.queue,!0,!1),di().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,c){var f=Vn,M=di();if(sr){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),qr===null)throw Error(r(349));(rr&127)!==0||lm(f,i,c)}M.memoizedState=c;var k={value:c,getSnapshot:i};return M.queue=k,Mm(um.bind(null,f,k,a),[a]),f.flags|=2048,uc(9,{destroy:void 0},cm.bind(null,f,k,c,i),null),c},useId:function(){var a=di(),i=qr.identifierPrefix;if(sr){var c=ko,f=Po;c=(f&~(1<<32-rt(f)-1)).toString(32)+c,i="_"+i+"R_"+c,c=Nc++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=om++,i="_"+i+"r_"+c.toString(32)+"_";return a.memoizedState=i},useHostTransitionStatus:gp,useFormState:up,useActionState:up,useOptimistic:function(a){var i=di();i.memoizedState=i.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=_p.bind(null,Vn,!0,c),c.dispatch=i,[a,i]},useMemoCache:ap,useCacheRefresh:function(){return di().memoizedState=r_.bind(null,Vn)},useEffectEvent:function(a){var i=di(),c={impl:a};return i.memoizedState=c,function(){if((vr&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},vp={readContext:ii,use:ju,useCallback:km,useContext:ii,useEffect:dp,useImperativeHandle:Pm,useInsertionEffect:Sm,useLayoutEffect:pp,useMemo:Am,useReducer:Vc,useRef:wm,useState:function(){return Vc(us)},useDebugValue:Uu,useDeferredValue:function(a,i){var c=Ca();return Om(c,zr.memoizedState,a,i)},useTransition:function(){var a=Vc(us)[0],i=Ca().memoizedState;return[typeof a=="boolean"?a:Cl(a),i]},useSyncExternalStore:sp,useId:Im,useHostTransitionStatus:gp,useFormState:vm,useActionState:vm,useOptimistic:function(a,i){var c=Ca();return pm(c,zr,a,i)},useMemoCache:ap,useCacheRefresh:Rm};vp.useEffectEvent=Em;var yp={readContext:ii,use:ju,useCallback:km,useContext:ii,useEffect:dp,useImperativeHandle:Pm,useInsertionEffect:Sm,useLayoutEffect:pp,useMemo:Am,useReducer:op,useRef:wm,useState:function(){return op(us)},useDebugValue:Uu,useDeferredValue:function(a,i){var c=Ca();return zr===null?fp(c,a,i):Om(c,zr.memoizedState,a,i)},useTransition:function(){var a=op(us)[0],i=Ca().memoizedState;return[typeof a=="boolean"?a:Cl(a),i]},useSyncExternalStore:sp,useId:Im,useHostTransitionStatus:gp,useFormState:xm,useActionState:xm,useOptimistic:function(a,i){var c=Ca();return zr!==null?pm(c,zr,a,i):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:ap,useCacheRefresh:Rm};yp.useEffectEvent=Em;function bp(a,i,c,f){i=a.memoizedState,c=c(f,i),c=c==null?i:h({},i,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var xp={enqueueSetState:function(a,i,c){a=a._reactInternals;var f=Gi(),M=ss(f);M.payload=i,c!=null&&(M.callback=c),i=Vs(a,M,f),i!==null&&(ki(i,a,f),zc(i,a,f))},enqueueReplaceState:function(a,i,c){a=a._reactInternals;var f=Gi(),M=ss(f);M.tag=1,M.payload=i,c!=null&&(M.callback=c),i=Vs(a,M,f),i!==null&&(ki(i,a,f),zc(i,a,f))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var c=Gi(),f=ss(c);f.tag=2,i!=null&&(f.callback=i),i=Vs(a,f,c),i!==null&&(ki(i,a,c),zc(i,a,c))}};function Gs(a,i,c,f,M,k,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,k,K):i.prototype&&i.prototype.isPureReactComponent?!v(c,f)||!v(M,k):!0}function Bm(a,i,c,f){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==a&&xp.enqueueReplaceState(i,i.state,null)}function Pl(a,i){var c=i;if("ref"in i){c={};for(var f in i)f!=="ref"&&(c[f]=i[f])}if(a=a.defaultProps){c===i&&(c=h({},c));for(var M in a)c[M]===void 0&&(c[M]=a[M])}return c}function Nm(a){Yt(a)}function Um(a){console.error(a)}function Vm(a){Yt(a)}function Vu(a,i){try{var c=a.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(f){setTimeout(function(){throw f})}}function wp(a,i,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Mp(a,i,c){return c=ss(c),c.tag=3,c.payload={element:null},c.callback=function(){Vu(a,i)},c}function Wm(a){return a=ss(a),a.tag=3,a}function Gm(a,i,c,f){var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var k=f.value;a.payload=function(){return M(k)},a.callback=function(){wp(i,c,f)}}var K=c.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(a.callback=function(){wp(i,c,f),typeof M!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var me=f.stack;this.componentDidCatch(f.value,{componentStack:me!==null?me:""})})}function i_(a,i,c,f,M){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(i=c.alternate,i!==null&&tc(i,c,M,!0),c=Bi.current,c!==null){switch(c.tag){case 31:case 13:return Ni===null?rd():c.alternate===null&&va===0&&(va=3),c.flags&=-257,c.flags|=65536,c.lanes=M,f===Rc?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([f]):i.add(f),Kp(a,f,M)),!1;case 22:return c.flags|=65536,f===Rc?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([f]):c.add(f)),Kp(a,f,M)),!1}throw Error(r(435,c.tag))}return Kp(a,f,M),rd(),!1}if(sr)return i=Bi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=M,f!==jd&&(a=Error(r(422),{cause:f}),Ac(Ji(a,c)))):(f!==jd&&(i=Error(r(423),{cause:f}),Ac(Ji(i,c))),a=a.current.alternate,a.flags|=65536,M&=-M,a.lanes|=M,f=Ji(f,c),M=Mp(a.stateNode,f,M),Iu(a,M),va!==4&&(va=2)),!1;var k=Error(r(520),{cause:f});if(k=Ji(k,c),ru===null?ru=[k]:ru.push(k),va!==4&&(va=2),i===null)return!0;f=Ji(f,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,a=M&-M,c.lanes|=a,a=Mp(c.stateNode,f,a),Iu(c,a),!1;case 1:if(i=c.type,k=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Lo===null||!Lo.has(k))))return c.flags|=65536,M&=-M,c.lanes|=M,M=Wm(M),Gm(M,a,c,f),Iu(c,M),!1}c=c.return}while(c!==null);return!1}var Kc=Error(r(461)),Da=!1;function oi(a,i,c,f){i.child=a===null?nm(i,null,c,f):Tl(i,a.child,c,f)}function Km(a,i,c,f,M){c=c.render;var k=i.ref;if("ref"in f){var K={};for(var me in f)me!=="ref"&&(K[me]=f[me])}else K=f;return bl(i),f=ep(a,i,c,K,k,M),me=zu(),a!==null&&!Da?(np(a,i,M),ds(a,i,M)):(sr&&me&&Fd(i),i.flags|=1,oi(a,i,f,M),i.child)}function Hc(a,i,c,f,M){if(a===null){var k=c.type;return typeof k=="function"&&!Ld(k)&&k.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=k,Hm(a,i,k,f,M)):(a=wu(c.type,null,f,i,i.mode,M),a.ref=i.ref,a.return=i,i.child=a)}if(k=a.child,!Pp(a,M)){var K=k.memoizedProps;if(c=c.compare,c=c!==null?c:v,c(K,f)&&a.ref===i.ref)return ds(a,i,M)}return i.flags|=1,a=Co(k,f),a.ref=i.ref,a.return=i,i.child=a}function Hm(a,i,c,f,M){if(a!==null){var k=a.memoizedProps;if(v(k,f)&&a.ref===i.ref)if(Da=!1,i.pendingProps=f=k,Pp(a,M))(a.flags&131072)!==0&&(Da=!0);else return i.lanes=a.lanes,ds(a,i,M)}return Ym(a,i,c,f,M)}function qm(a,i,c,f){var M=f.children,k=a!==null?a.memoizedState:null;if(a===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((i.flags&128)!==0){if(k=k!==null?k.baseLanes|c:c,a!==null){for(f=i.child=a.child,M=0;f!==null;)M=M|f.lanes|f.childLanes,f=f.sibling;f=M&~k}else f=0,i.child=null;return Xm(a,i,k,c,f)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ic(i,k!==null?k.cachePool:null),k!==null?im(i,k):jc(),Zd(i);else return f=i.lanes=536870912,Xm(a,i,k!==null?k.baseLanes|c:c,c,f)}else k!==null?(Ic(i,k.cachePool),im(i,k),Ws(),i.memoizedState=null):(a!==null&&Ic(i,null),jc(),Ws());return oi(a,i,M,c),i.child}function qc(a,i){return a!==null&&a.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Xm(a,i,c,f,M){var k=Wd();return k=k===null?null:{parent:$a._currentValue,pool:k},i.memoizedState={baseLanes:c,cachePool:k},a!==null&&Ic(i,null),jc(),Zd(i),a!==null&&tc(a,i,f,!0),i.childLanes=M,null}function fc(a,i){return i=Gu({mode:i.mode,children:i.children},a.mode),i.ref=a.ref,a.child=i,i.return=a,i}function Qm(a,i,c){return Tl(i,a.child,null,c),a=fc(i,i.pendingProps),a.flags|=2,Ui(i),i.memoizedState=null,a}function o_(a,i,c){var f=i.pendingProps,M=(i.flags&128)!==0;if(i.flags&=-129,a===null){if(sr){if(f.mode==="hidden")return a=fc(i,f),i.lanes=536870912,qc(null,a);if(Yd(i),(a=Zr)?(a=ho(a,ji),a=a!==null&&a.data==="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:ns!==null?{id:Po,overflow:ko}:null,retryLane:536870912,hydrationErrors:null},c=Uf(a),c.return=i,i.child=c,ai=i,Zr=null)):a=null,a===null)throw Ns(i);return i.lanes=536870912,null}return fc(i,f)}var k=a.memoizedState;if(k!==null){var K=k.dehydrated;if(Yd(i),M)if(i.flags&256)i.flags&=-257,i=Qm(a,i,c);else if(i.memoizedState!==null)i.child=a.child,i.flags|=128,i=null;else throw Error(r(558));else if(Da||tc(a,i,c,!1),M=(c&a.childLanes)!==0,Da||M){if(f=qr,f!==null&&(K=xe(f,c),K!==0&&K!==k.retryLane))throw k.retryLane=K,Tr(a,K),ki(f,a,K),Kc;rd(),i=Qm(a,i,c)}else a=k.treeContext,Zr=wi(K.nextSibling),ai=i,sr=!0,Bs=null,ji=!1,a!==null&&Gf(i,a),i=fc(i,f),i.flags|=4096;return i}return a=Co(a.child,{mode:f.mode,children:f.children}),a.ref=i.ref,i.child=a,a.return=i,a}function Wu(a,i){var c=i.ref;if(c===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(i.flags|=4194816)}}function Ym(a,i,c,f,M){return bl(i),c=ep(a,i,c,f,void 0,M),f=zu(),a!==null&&!Da?(np(a,i,M),ds(a,i,M)):(sr&&f&&Fd(i),i.flags|=1,oi(a,i,c,M),i.child)}function Zm(a,i,c,f,M,k){return bl(i),i.updateQueue=null,c=sm(i,f,c,M),tp(a),f=zu(),a!==null&&!Da?(np(a,i,k),ds(a,i,k)):(sr&&f&&Fd(i),i.flags|=1,oi(a,i,c,k),i.child)}function Jm(a,i,c,f,M){if(bl(i),i.stateNode===null){var k=Yl,K=c.contextType;typeof K=="object"&&K!==null&&(k=ii(K)),k=new c(f,k),i.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=xp,i.stateNode=k,k._reactInternals=i,k=i.stateNode,k.props=f,k.state=i.memoizedState,k.refs={},Hd(i),K=c.contextType,k.context=typeof K=="object"&&K!==null?ii(K):Yl,k.state=i.memoizedState,K=c.getDerivedStateFromProps,typeof K=="function"&&(bp(i,c,K,f),k.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(K=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),K!==k.state&&xp.enqueueReplaceState(k,k.state,null),sc(i,f,k,M),Fc(),k.state=i.memoizedState),typeof k.componentDidMount=="function"&&(i.flags|=4194308),f=!0}else if(a===null){k=i.stateNode;var me=i.memoizedProps,De=Pl(c,me);k.props=De;var ut=k.context,Mt=c.contextType;K=Yl,typeof Mt=="object"&&Mt!==null&&(K=ii(Mt));var Pt=c.getDerivedStateFromProps;Mt=typeof Pt=="function"||typeof k.getSnapshotBeforeUpdate=="function",me=i.pendingProps!==me,Mt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(me||ut!==K)&&Bm(i,k,f,K),os=!1;var ft=i.memoizedState;k.state=ft,sc(i,f,k,M),Fc(),ut=i.memoizedState,me||ft!==ut||os?(typeof Pt=="function"&&(bp(i,c,Pt,f),ut=i.memoizedState),(De=os||Gs(i,c,De,f,ft,ut,K))?(Mt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(i.flags|=4194308)):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=ut),k.props=f,k.state=ut,k.context=K,f=De):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{k=i.stateNode,qd(a,i),K=i.memoizedProps,Mt=Pl(c,K),k.props=Mt,Pt=i.pendingProps,ft=k.context,ut=c.contextType,De=Yl,typeof ut=="object"&&ut!==null&&(De=ii(ut)),me=c.getDerivedStateFromProps,(ut=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(K!==Pt||ft!==De)&&Bm(i,k,f,De),os=!1,ft=i.memoizedState,k.state=ft,sc(i,f,k,M),Fc();var yt=i.memoizedState;K!==Pt||ft!==yt||os||a!==null&&a.dependencies!==null&&Pu(a.dependencies)?(typeof me=="function"&&(bp(i,c,me,f),yt=i.memoizedState),(Mt=os||Gs(i,c,Mt,f,ft,yt,De)||a!==null&&a.dependencies!==null&&Pu(a.dependencies))?(ut||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,yt,De),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,yt,De)),typeof k.componentDidUpdate=="function"&&(i.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof k.componentDidUpdate!="function"||K===a.memoizedProps&&ft===a.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&ft===a.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=yt),k.props=f,k.state=yt,k.context=De,f=Mt):(typeof k.componentDidUpdate!="function"||K===a.memoizedProps&&ft===a.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&ft===a.memoizedState||(i.flags|=1024),f=!1)}return k=f,Wu(a,i),f=(i.flags&128)!==0,k||f?(k=i.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:k.render(),i.flags|=1,a!==null&&f?(i.child=Tl(i,a.child,null,M),i.child=Tl(i,null,c,M)):oi(a,i,c,M),i.memoizedState=k.state,a=i.child):a=ds(a,i,M),a}function eh(a,i,c,f){return Us(),i.flags|=256,oi(a,i,c,f),i.child}var kl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tp(a){return{baseLanes:a,cachePool:Yf()}}function Ep(a,i,c){return a=a!==null?a.childLanes&~c:0,i&&(a|=Wi),a}function th(a,i,c){var f=i.pendingProps,M=!1,k=(i.flags&128)!==0,K;if((K=k)||(K=a!==null&&a.memoizedState===null?!1:(ca.current&2)!==0),K&&(M=!0,i.flags&=-129),K=(i.flags&32)!==0,i.flags&=-33,a===null){if(sr){if(M?ls(i):Ws(),(a=Zr)?(a=ho(a,ji),a=a!==null&&a.data!=="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:ns!==null?{id:Po,overflow:ko}:null,retryLane:536870912,hydrationErrors:null},c=Uf(a),c.return=i,i.child=c,ai=i,Zr=null)):a=null,a===null)throw Ns(i);return Ll(a)?i.lanes=32:i.lanes=536870912,null}var me=f.children;return f=f.fallback,M?(Ws(),M=i.mode,me=Gu({mode:"hidden",children:me},M),f=js(f,M,c,null),me.return=i,f.return=i,me.sibling=f,i.child=me,f=i.child,f.memoizedState=Tp(c),f.childLanes=Ep(a,K,c),i.memoizedState=kl,qc(null,f)):(ls(i),Sp(i,me))}var De=a.memoizedState;if(De!==null&&(me=De.dehydrated,me!==null)){if(k)i.flags&256?(ls(i),i.flags&=-257,i=Cp(a,i,c)):i.memoizedState!==null?(Ws(),i.child=a.child,i.flags|=128,i=null):(Ws(),me=f.fallback,M=i.mode,f=Gu({mode:"visible",children:f.children},M),me=js(me,M,c,null),me.flags|=2,f.return=i,me.return=i,f.sibling=me,i.child=f,Tl(i,a.child,null,c),f=i.child,f.memoizedState=Tp(c),f.childLanes=Ep(a,K,c),i.memoizedState=kl,i=qc(null,f));else if(ls(i),Ll(me)){if(K=me.nextSibling&&me.nextSibling.dataset,K)var ut=K.dgst;K=ut,f=Error(r(419)),f.stack="",f.digest=K,Ac({value:f,source:null,stack:null}),i=Cp(a,i,c)}else if(Da||tc(a,i,c,!1),K=(c&a.childLanes)!==0,Da||K){if(K=qr,K!==null&&(f=xe(K,c),f!==0&&f!==De.retryLane))throw De.retryLane=f,Tr(a,f),ki(K,a,f),Kc;Rl(me)||rd(),i=Cp(a,i,c)}else Rl(me)?(i.flags|=192,i.child=a.child,i=null):(a=De.treeContext,Zr=wi(me.nextSibling),ai=i,sr=!0,Bs=null,ji=!1,a!==null&&Gf(i,a),i=Sp(i,f.children),i.flags|=4096);return i}return M?(Ws(),me=f.fallback,M=i.mode,De=a.child,ut=De.sibling,f=Co(De,{mode:"hidden",children:f.children}),f.subtreeFlags=De.subtreeFlags&65011712,ut!==null?me=Co(ut,me):(me=js(me,M,c,null),me.flags|=2),me.return=i,f.return=i,f.sibling=me,i.child=f,qc(null,f),f=i.child,me=a.child.memoizedState,me===null?me=Tp(c):(M=me.cachePool,M!==null?(De=$a._currentValue,M=M.parent!==De?{parent:De,pool:De}:M):M=Yf(),me={baseLanes:me.baseLanes|c,cachePool:M}),f.memoizedState=me,f.childLanes=Ep(a,K,c),i.memoizedState=kl,qc(a.child,f)):(ls(i),c=a.child,a=c.sibling,c=Co(c,{mode:"visible",children:f.children}),c.return=i,c.sibling=null,a!==null&&(K=i.deletions,K===null?(i.deletions=[a],i.flags|=16):K.push(a)),i.child=c,i.memoizedState=null,c)}function Sp(a,i){return i=Gu({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Gu(a,i){return a=Fi(22,a,null,i),a.lanes=0,a}function Cp(a,i,c){return Tl(i,a.child,null,c),a=Sp(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function nh(a,i,c){a.lanes|=i;var f=a.alternate;f!==null&&(f.lanes|=i),Ud(a.return,i,c)}function Xc(a,i,c,f,M,k){var K=a.memoizedState;K===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:M,treeForkCount:k}:(K.isBackwards=i,K.rendering=null,K.renderingStartTime=0,K.last=f,K.tail=c,K.tailMode=M,K.treeForkCount=k)}function s_(a,i,c){var f=i.pendingProps,M=f.revealOrder,k=f.tail;f=f.children;var K=ca.current,me=(K&2)!==0;if(me?(K=K&1|2,i.flags|=128):K&=1,J(ca,K),oi(a,i,f,c),f=sr?Jl:0,!me&&a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&nh(a,c,i);else if(a.tag===19)nh(a,c,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(M){case"forwards":for(c=i.child,M=null;c!==null;)a=c.alternate,a!==null&&Bc(a)===null&&(M=c),c=c.sibling;c=M,c===null?(M=i.child,i.child=null):(M=c.sibling,c.sibling=null),Xc(i,!1,M,c,k,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,M=i.child,i.child=null;M!==null;){if(a=M.alternate,a!==null&&Bc(a)===null){i.child=M;break}a=M.sibling,M.sibling=c,c=M,M=a}Xc(i,!0,c,null,k,f);break;case"together":Xc(i,!1,null,null,void 0,f);break;default:i.memoizedState=null}return i.child}function ds(a,i,c){if(a!==null&&(i.dependencies=a.dependencies),Ro|=i.lanes,(c&i.childLanes)===0)if(a!==null){if(tc(a,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(r(153));if(i.child!==null){for(a=i.child,c=Co(a,a.pendingProps),i.child=c,c.return=i;a.sibling!==null;)a=a.sibling,c=c.sibling=Co(a,a.pendingProps),c.return=i;c.sibling=null}return i.child}function Pp(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Pu(a)))}function l_(a,i,c){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),as(i,$a,a.memoizedState.cache),Us();break;case 27:case 5:Oe(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:as(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Yd(i),null;break;case 13:var f=i.memoizedState;if(f!==null)return f.dehydrated!==null?(ls(i),i.flags|=128,null):(c&i.child.childLanes)!==0?th(a,i,c):(ls(i),a=ds(a,i,c),a!==null?a.sibling:null);ls(i);break;case 19:var M=(a.flags&128)!==0;if(f=(c&i.childLanes)!==0,f||(tc(a,i,c,!1),f=(c&i.childLanes)!==0),M){if(f)return s_(a,i,c);i.flags|=128}if(M=i.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),J(ca,ca.current),f)break;return null;case 22:return i.lanes=0,qm(a,i,c,i.pendingProps);case 24:as(i,$a,a.memoizedState.cache)}return ds(a,i,c)}function rh(a,i,c){if(a!==null)if(a.memoizedProps!==i.pendingProps)Da=!0;else{if(!Pp(a,c)&&(i.flags&128)===0)return Da=!1,l_(a,i,c);Da=(a.flags&131072)!==0}else Da=!1,sr&&(i.flags&1048576)!==0&&Wf(i,Jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var f=i.pendingProps;if(a=wl(i.elementType),i.type=a,typeof a=="function")Ld(a)?(f=Pl(a,f),i.tag=1,i=Jm(null,i,a,f,c)):(i.tag=0,i=Ym(null,i,a,f,c));else{if(a!=null){var M=a.$$typeof;if(M===E){i.tag=11,i=Km(null,i,a,f,c);break e}else if(M===w){i.tag=14,i=Hc(null,i,a,f,c);break e}}throw i=oe(a)||a,Error(r(306,i,""))}}return i;case 0:return Ym(a,i,i.type,i.pendingProps,c);case 1:return f=i.type,M=Pl(f,i.pendingProps),Jm(a,i,f,M,c);case 3:e:{if(We(i,i.stateNode.containerInfo),a===null)throw Error(r(387));f=i.pendingProps;var k=i.memoizedState;M=k.element,qd(a,i),sc(i,f,null,c);var K=i.memoizedState;if(f=K.cache,as(i,$a,f),f!==k.cache&&Cu(i,[$a],c,!0),Fc(),f=K.element,k.isDehydrated)if(k={element:f,isDehydrated:!1,cache:K.cache},i.updateQueue.baseState=k,i.memoizedState=k,i.flags&256){i=eh(a,i,f,c);break e}else if(f!==M){M=Ji(Error(r(424)),i),Ac(M),i=eh(a,i,f,c);break e}else for(a=i.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Zr=wi(a.firstChild),ai=i,sr=!0,Bs=null,ji=!0,c=nm(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Us(),f===M){i=ds(a,i,c);break e}oi(a,i,f,c)}i=i.child}return i;case 26:return Wu(a,i),a===null?(c=Fl(i.type,null,i.pendingProps,null))?i.memoizedState=c:sr||(c=i.type,a=i.pendingProps,f=Mn(Te.current).createElement(c),f[Lt]=i,f[Qt]=a,et(f,c,a),Cr(f),i.stateNode=f):i.memoizedState=Fl(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Oe(i),a===null&&sr&&(f=i.stateNode=Qs(i.type,i.pendingProps,Te.current),ai=i,ji=!0,M=Zr,jr(i.type)?(Vh=M,Zr=wi(f.firstChild)):Zr=M),oi(a,i,i.pendingProps.children,c),Wu(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&sr&&((M=f=Zr)&&(f=bc(f,i.type,i.pendingProps,ji),f!==null?(i.stateNode=f,ai=i,Zr=wi(f.firstChild),ji=!1,M=!0):M=!1),M||Ns(i)),Oe(i),M=i.type,k=i.pendingProps,K=a!==null?a.memoizedProps:null,f=k.children,ir(M,k)?f=null:K!==null&&ir(M,K)&&(i.flags|=32),i.memoizedState!==null&&(M=ep(a,i,e_,null,null,c),Xh._currentValue=M),Wu(a,i),oi(a,i,f,c),i.child;case 6:return a===null&&sr&&((a=c=Zr)&&(c=Ai(c,i.pendingProps,ji),c!==null?(i.stateNode=c,ai=i,Zr=null,a=!0):a=!1),a||Ns(i)),null;case 13:return th(a,i,c);case 4:return We(i,i.stateNode.containerInfo),f=i.pendingProps,a===null?i.child=Tl(i,null,f,c):oi(a,i,f,c),i.child;case 11:return Km(a,i,i.type,i.pendingProps,c);case 7:return oi(a,i,i.pendingProps,c),i.child;case 8:return oi(a,i,i.pendingProps.children,c),i.child;case 12:return oi(a,i,i.pendingProps.children,c),i.child;case 10:return f=i.pendingProps,as(i,i.type,f.value),oi(a,i,f.children,c),i.child;case 9:return M=i.type._context,f=i.pendingProps.children,bl(i),M=ii(M),f=f(M),i.flags|=1,oi(a,i,f,c),i.child;case 14:return Hc(a,i,i.type,i.pendingProps,c);case 15:return Hm(a,i,i.type,i.pendingProps,c);case 19:return s_(a,i,c);case 31:return o_(a,i,c);case 22:return qm(a,i,c,i.pendingProps);case 24:return bl(i),f=ii($a),a===null?(M=Wd(),M===null&&(M=qr,k=ku(),M.pooledCache=k,k.refCount++,k!==null&&(M.pooledCacheLanes|=c),M=k),i.memoizedState={parent:f,cache:M},Hd(i),as(i,$a,M)):((a.lanes&c)!==0&&(qd(a,i),sc(i,null,null,c),Fc()),M=a.memoizedState,k=i.memoizedState,M.parent!==f?(M={parent:f,cache:f},i.memoizedState=M,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=M),as(i,$a,f)):(f=k.cache,as(i,$a,f),f!==M.cache&&Cu(i,[$a],c,!0))),oi(a,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Oo(a){a.flags|=4}function kp(a,i,c,f,M){if((i=(a.mode&32)!==0)&&(i=!1),i){if(a.flags|=16777216,(M&335544128)===M)if(a.stateNode.complete)a.flags|=8192;else if(Eh())a.flags|=8192;else throw Ml=Rc,Gd}else a.flags&=-16777217}function ah(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!kw(i))if(Eh())a.flags|=8192;else throw Ml=Rc,Gd}function Qc(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?Qi():536870912,a.lanes|=i,_c|=i)}function Yc(a,i){if(!sr)switch(a.tailMode){case"hidden":i=a.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function na(a){var i=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(i)for(var M=a.child;M!==null;)c|=M.lanes|M.childLanes,f|=M.subtreeFlags&65011712,f|=M.flags&65011712,M.return=a,M=M.sibling;else for(M=a.child;M!==null;)c|=M.lanes|M.childLanes,f|=M.subtreeFlags,f|=M.flags,M.return=a,M=M.sibling;return a.subtreeFlags|=f,a.childLanes=c,i}function ih(a,i,c){var f=i.pendingProps;switch(Eu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(i),null;case 1:return na(i),null;case 3:return c=i.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),is($a),at(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(ec(i)?Oo(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nd())),na(i),null;case 26:var M=i.type,k=i.memoizedState;return a===null?(Oo(i),k!==null?(na(i),ah(i,k)):(na(i),kp(i,M,null,f,c))):k?k!==a.memoizedState?(Oo(i),na(i),ah(i,k)):(na(i),i.flags&=-16777217):(a=a.memoizedProps,a!==f&&Oo(i),na(i),kp(i,M,a,f,c)),null;case 27:if(ge(i),c=Te.current,M=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==f&&Oo(i);else{if(!f){if(i.stateNode===null)throw Error(r(166));return na(i),null}a=H.current,ec(i)?Bd(i):(a=Qs(M,f,c),i.stateNode=a,Oo(i))}return na(i),null;case 5:if(ge(i),M=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==f&&Oo(i);else{if(!f){if(i.stateNode===null)throw Error(r(166));return na(i),null}if(k=H.current,ec(i))Bd(i);else{var K=Mn(Te.current);switch(k){case 1:k=K.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:k=K.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":k=K.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":k=K.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":k=K.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof f.is=="string"?K.createElement("select",{is:f.is}):K.createElement("select"),f.multiple?k.multiple=!0:f.size&&(k.size=f.size);break;default:k=typeof f.is=="string"?K.createElement(M,{is:f.is}):K.createElement(M)}}k[Lt]=i,k[Qt]=f;e:for(K=i.child;K!==null;){if(K.tag===5||K.tag===6)k.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===i)break e;for(;K.sibling===null;){if(K.return===null||K.return===i)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}i.stateNode=k;e:switch(et(k,M,f),M){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Oo(i)}}return na(i),kp(i,i.type,a===null?null:a.memoizedProps,i.pendingProps,c),null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==f&&Oo(i);else{if(typeof f!="string"&&i.stateNode===null)throw Error(r(166));if(a=Te.current,ec(i)){if(a=i.stateNode,c=i.memoizedProps,f=null,M=ai,M!==null)switch(M.tag){case 27:case 5:f=M.memoizedProps}a[Lt]=i,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||he(a.nodeValue,c)),a||Ns(i,!0)}else a=Mn(a).createTextNode(f),a[Lt]=i,i.stateNode=a}return na(i),null;case 31:if(c=i.memoizedState,a===null||a.memoizedState!==null){if(f=ec(i),c!==null){if(a===null){if(!f)throw Error(r(318));if(a=i.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Lt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;na(i),a=!1}else c=Nd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return i.flags&256?(Ui(i),i):(Ui(i),null);if((i.flags&128)!==0)throw Error(r(558))}return na(i),null;case 13:if(f=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(M=ec(i),f!==null&&f.dehydrated!==null){if(a===null){if(!M)throw Error(r(318));if(M=i.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));M[Lt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;na(i),M=!1}else M=Nd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=M),M=!0;if(!M)return i.flags&256?(Ui(i),i):(Ui(i),null)}return Ui(i),(i.flags&128)!==0?(i.lanes=c,i):(c=f!==null,a=a!==null&&a.memoizedState!==null,c&&(f=i.child,M=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(M=f.alternate.memoizedState.cachePool.pool),k=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(k=f.memoizedState.cachePool.pool),k!==M&&(f.flags|=2048)),c!==a&&c&&(i.child.flags|=8192),Qc(i,i.updateQueue),na(i),null);case 4:return at(),a===null&&Xp(i.stateNode.containerInfo),na(i),null;case 10:return is(i.type),na(i),null;case 19:if(te(ca),f=i.memoizedState,f===null)return na(i),null;if(M=(i.flags&128)!==0,k=f.rendering,k===null)if(M)Yc(f,!1);else{if(va!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(k=Bc(a),k!==null){for(i.flags|=128,Yc(f,!1),a=k.updateQueue,i.updateQueue=a,Qc(i,a),i.subtreeFlags=0,a=c,c=i.child;c!==null;)Nf(c,a),c=c.sibling;return J(ca,ca.current&1|2),sr&&Ao(i,f.treeForkCount),i.child}a=a.sibling}f.tail!==null&&Tt()>Zu&&(i.flags|=128,M=!0,Yc(f,!1),i.lanes=4194304)}else{if(!M)if(a=Bc(k),a!==null){if(i.flags|=128,M=!0,a=a.updateQueue,i.updateQueue=a,Qc(i,a),Yc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!k.alternate&&!sr)return na(i),null}else 2*Tt()-f.renderingStartTime>Zu&&c!==536870912&&(i.flags|=128,M=!0,Yc(f,!1),i.lanes=4194304);f.isBackwards?(k.sibling=i.child,i.child=k):(a=f.last,a!==null?a.sibling=k:i.child=k,f.last=k)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Tt(),a.sibling=null,c=ca.current,J(ca,M?c&1|2:c&1),sr&&Ao(i,f.treeForkCount),a):(na(i),null);case 22:case 23:return Ui(i),Qd(),f=i.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(i.flags|=8192):f&&(i.flags|=8192),f?(c&536870912)!==0&&(i.flags&128)===0&&(na(i),i.subtreeFlags&6&&(i.flags|=8192)):na(i),c=i.updateQueue,c!==null&&Qc(i,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048),a!==null&&te(xl),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),is($a),na(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function c_(a,i){switch(Eu(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return is($a),at(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return ge(i),null;case 31:if(i.memoizedState!==null){if(Ui(i),i.alternate===null)throw Error(r(340));Us()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 13:if(Ui(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Us()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return te(ca),null;case 4:return at(),null;case 10:return is(i.type),null;case 22:case 23:return Ui(i),Qd(),a!==null&&te(xl),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return is($a),null;case 25:return null;default:return null}}function oh(a,i){switch(Eu(i),i.tag){case 3:is($a),at();break;case 26:case 27:case 5:ge(i);break;case 4:at();break;case 31:i.memoizedState!==null&&Ui(i);break;case 13:Ui(i);break;case 19:te(ca);break;case 10:is(i.type);break;case 22:case 23:Ui(i),Qd(),a!==null&&te(xl);break;case 24:is($a)}}function mc(a,i){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var M=f.next;c=M;do{if((c.tag&a)===a){f=void 0;var k=c.create,K=c.inst;f=k(),K.destroy=f}c=c.next}while(c!==M)}}catch(me){Fr(i,i.return,me)}}function Ks(a,i,c){try{var f=i.updateQueue,M=f!==null?f.lastEffect:null;if(M!==null){var k=M.next;f=k;do{if((f.tag&a)===a){var K=f.inst,me=K.destroy;if(me!==void 0){K.destroy=void 0,M=i;var De=c,ut=me;try{ut()}catch(Mt){Fr(M,De,Mt)}}}f=f.next}while(f!==k)}}catch(Mt){Fr(i,i.return,Mt)}}function sh(a){var i=a.updateQueue;if(i!==null){var c=a.stateNode;try{am(i,c)}catch(f){Fr(a,a.return,f)}}}function Ap(a,i,c){c.props=Pl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){Fr(a,i,f)}}function Zc(a,i){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(M){Fr(a,i,M)}}function $o(a,i){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(M){Fr(a,i,M)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(M){Fr(a,i,M)}else c.current=null}function Op(a){var i=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(M){Fr(a,a.return,M)}}function $p(a,i,c){try{var f=a.stateNode;bt(f,a.type,c,i),f[Qt]=i}catch(M){Fr(a,a.return,M)}}function lh(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&jr(a.type)||a.tag===4}function Ku(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||lh(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&jr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Dp(a,i,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(a),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=mn));else if(f!==4&&(f===27&&jr(a.type)&&(c=a.stateNode,i=null),a=a.child,a!==null))for(Dp(a,i,c),a=a.sibling;a!==null;)Dp(a,i,c),a=a.sibling}function Hu(a,i,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,i?c.insertBefore(a,i):c.appendChild(a);else if(f!==4&&(f===27&&jr(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Hu(a,i,c),a=a.sibling;a!==null;)Hu(a,i,c),a=a.sibling}function qu(a){var i=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,M=i.attributes;M.length;)i.removeAttributeNode(M[0]);et(i,f,c),i[Lt]=a,i[Qt]=c}catch(k){Fr(a,a.return,k)}}var ps=!1,Ia=!1,Ip=!1,ch=typeof WeakSet=="function"?WeakSet:Set,Wa=null;function Rp(a,i){if(a=a.containerInfo,en=I_,a=Z(a),ce(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var M=f.anchorOffset,k=f.focusNode;f=f.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var K=0,me=-1,De=-1,ut=0,Mt=0,Pt=a,ft=null;t:for(;;){for(var yt;Pt!==c||M!==0&&Pt.nodeType!==3||(me=K+M),Pt!==k||f!==0&&Pt.nodeType!==3||(De=K+f),Pt.nodeType===3&&(K+=Pt.nodeValue.length),(yt=Pt.firstChild)!==null;)ft=Pt,Pt=yt;for(;;){if(Pt===a)break t;if(ft===c&&++ut===M&&(me=K),ft===k&&++Mt===f&&(De=K),(yt=Pt.nextSibling)!==null)break;Pt=ft,ft=Pt.parentNode}Pt=yt}c=me===-1||De===-1?null:{start:me,end:De}}else c=null}c=c||{start:0,end:0}}else c=null;for(Sn={focusedElem:a,selectionRange:c},I_=!1,Wa=i;Wa!==null;)if(i=Wa,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,Wa=a;else for(;Wa!==null;){switch(i=Wa,k=i.alternate,a=i.flags,i.tag){case 0:if((a&4)!==0&&(a=i.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)M=a[c],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&k!==null){a=void 0,c=i,M=k.memoizedProps,k=k.memoizedState,f=c.stateNode;try{var sn=Pl(c.type,M);a=f.getSnapshotBeforeUpdate(sn,k),f.__reactInternalSnapshotBeforeUpdate=a}catch($n){Fr(c,c.return,$n)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,c=a.nodeType,c===9)Fa(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Fa(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=i.sibling,a!==null){a.return=i.return,Wa=a;break}Wa=i.return}}function u_(a,i,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ms(a,c),f&4&&mc(5,c);break;case 1:if(ms(a,c),f&4)if(a=c.stateNode,i===null)try{a.componentDidMount()}catch(K){Fr(c,c.return,K)}else{var M=Pl(c.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(M,i,a.__reactInternalSnapshotBeforeUpdate)}catch(K){Fr(c,c.return,K)}}f&64&&sh(c),f&512&&Zc(c,c.return);break;case 3:if(ms(a,c),f&64&&(a=c.updateQueue,a!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{am(a,i)}catch(K){Fr(c,c.return,K)}}break;case 27:i===null&&f&4&&qu(c);case 26:case 5:ms(a,c),i===null&&f&4&&Op(c),f&512&&Zc(c,c.return);break;case 12:ms(a,c);break;case 31:ms(a,c),f&4&&Lp(a,c);break;case 13:ms(a,c),f&4&&ph(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=wy.bind(null,c),Qp(a,c))));break;case 22:if(f=c.memoizedState!==null||ps,!f){i=i!==null&&i.memoizedState!==null||Ia,M=ps;var k=Ia;ps=f,(Ia=i)&&!k?fo(a,c,(c.subtreeFlags&8772)!==0):ms(a,c),ps=M,Ia=k}break;case 30:break;default:ms(a,c)}}function uh(a){var i=a.alternate;i!==null&&(a.alternate=null,uh(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Vr(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ua=null,xi=!1;function fs(a,i,c){for(c=c.child;c!==null;)dh(a,i,c),c=c.sibling}function dh(a,i,c){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(At,c)}catch{}switch(c.tag){case 26:Ia||$o(c,i),fs(a,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ia||$o(c,i);var f=ua,M=xi;jr(c.type)&&(ua=c.stateNode,xi=!1),fs(a,i,c),Fo(c.stateNode),ua=f,xi=M;break;case 5:Ia||$o(c,i);case 6:if(f=ua,M=xi,ua=null,fs(a,i,c),ua=f,xi=M,ua!==null)if(xi)try{(ua.nodeType===9?ua.body:ua.nodeName==="HTML"?ua.ownerDocument.body:ua).removeChild(c.stateNode)}catch(k){Fr(c,i,k)}else try{ua.removeChild(c.stateNode)}catch(k){Fr(c,i,k)}break;case 18:ua!==null&&(xi?(a=ua,Wn(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Jp(a)):Wn(ua,c.stateNode));break;case 4:f=ua,M=xi,ua=c.stateNode.containerInfo,xi=!0,fs(a,i,c),ua=f,xi=M;break;case 0:case 11:case 14:case 15:Ks(2,c,i),Ia||Ks(4,c,i),fs(a,i,c);break;case 1:Ia||($o(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Ap(c,i,f)),fs(a,i,c);break;case 21:fs(a,i,c);break;case 22:Ia=(f=Ia)||c.memoizedState!==null,fs(a,i,c),Ia=f;break;default:fs(a,i,c)}}function Lp(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Jp(a)}catch(c){Fr(i,i.return,c)}}}function ph(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Jp(a)}catch(c){Fr(i,i.return,c)}}function d_(a){switch(a.tag){case 31:case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new ch),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new ch),i;default:throw Error(r(435,a.tag))}}function Jc(a,i){var c=d_(a);i.forEach(function(f){if(!c.has(f)){c.add(f);var M=My.bind(null,a,f);f.then(M,M)}})}function Vi(a,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var M=c[f],k=a,K=i,me=K;e:for(;me!==null;){switch(me.tag){case 27:if(jr(me.type)){ua=me.stateNode,xi=!1;break e}break;case 5:ua=me.stateNode,xi=!1;break e;case 3:case 4:ua=me.stateNode.containerInfo,xi=!0;break e}me=me.return}if(ua===null)throw Error(r(160));dh(k,K,M),ua=null,xi=!1,k=M.alternate,k!==null&&(k.return=null),M.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)zp(i,a),i=i.sibling}var Do=null;function zp(a,i){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Vi(i,a),pi(a),f&4&&(Ks(3,a,a.return),mc(3,a),Ks(5,a,a.return));break;case 1:Vi(i,a),pi(a),f&512&&(Ia||c===null||$o(c,c.return)),f&64&&ps&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var M=Do;if(Vi(i,a),pi(a),f&512&&(Ia||c===null||$o(c,c.return)),f&4){var k=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,M=M.ownerDocument||M;t:switch(f){case"title":k=M.getElementsByTagName("title")[0],(!k||k[pr]||k[Lt]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=M.createElement(f),M.head.insertBefore(k,M.querySelector("head > title"))),et(k,f,c),k[Lt]=a,Cr(k),f=k;break e;case"link":var K=Cw("link","href",M).get(f+(c.href||""));if(K){for(var me=0;me<K.length;me++)if(k=K[me],k.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&k.getAttribute("rel")===(c.rel==null?null:c.rel)&&k.getAttribute("title")===(c.title==null?null:c.title)&&k.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){K.splice(me,1);break t}}k=M.createElement(f),et(k,f,c),M.head.appendChild(k);break;case"meta":if(K=Cw("meta","content",M).get(f+(c.content||""))){for(me=0;me<K.length;me++)if(k=K[me],k.getAttribute("content")===(c.content==null?null:""+c.content)&&k.getAttribute("name")===(c.name==null?null:c.name)&&k.getAttribute("property")===(c.property==null?null:c.property)&&k.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&k.getAttribute("charset")===(c.charSet==null?null:c.charSet)){K.splice(me,1);break t}}k=M.createElement(f),et(k,f,c),M.head.appendChild(k);break;default:throw Error(r(468,f))}k[Lt]=a,Cr(k),f=k}a.stateNode=f}else Pw(M,a.type,a.stateNode);else a.stateNode=Sw(M,f,a.memoizedProps);else k!==f?(k===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):k.count--,f===null?Pw(M,a.type,a.stateNode):Sw(M,f,a.memoizedProps)):f===null&&a.stateNode!==null&&$p(a,a.memoizedProps,c.memoizedProps)}break;case 27:Vi(i,a),pi(a),f&512&&(Ia||c===null||$o(c,c.return)),c!==null&&f&4&&$p(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Vi(i,a),pi(a),f&512&&(Ia||c===null||$o(c,c.return)),a.flags&32){M=a.stateNode;try{ke(M,"")}catch(sn){Fr(a,a.return,sn)}}f&4&&a.stateNode!=null&&(M=a.memoizedProps,$p(a,M,c!==null?c.memoizedProps:M)),f&1024&&(Ip=!0);break;case 6:if(Vi(i,a),pi(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(sn){Fr(a,a.return,sn)}}break;case 3:if(A_=null,M=Do,Do=ou(i.containerInfo),Vi(i,a),Do=M,pi(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Jp(i.containerInfo)}catch(sn){Fr(a,a.return,sn)}Ip&&(Ip=!1,fh(a));break;case 4:f=Do,Do=ou(a.stateNode.containerInfo),Vi(i,a),pi(a),Do=f;break;case 12:Vi(i,a),pi(a);break;case 31:Vi(i,a),pi(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Jc(a,f)));break;case 13:Vi(i,a),pi(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yu=Tt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Jc(a,f)));break;case 22:M=a.memoizedState!==null;var De=c!==null&&c.memoizedState!==null,ut=ps,Mt=Ia;if(ps=ut||M,Ia=Mt||De,Vi(i,a),Ia=Mt,ps=ut,pi(a),f&8192)e:for(i=a.stateNode,i._visibility=M?i._visibility&-2:i._visibility|1,M&&(c===null||De||ps||Ia||Al(a)),c=null,i=a;;){if(i.tag===5||i.tag===26){if(c===null){De=c=i;try{if(k=De.stateNode,M)K=k.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{me=De.stateNode;var Pt=De.memoizedProps.style,ft=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;me.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(sn){Fr(De,De.return,sn)}}}else if(i.tag===6){if(c===null){De=i;try{De.stateNode.nodeValue=M?"":De.memoizedProps}catch(sn){Fr(De,De.return,sn)}}}else if(i.tag===18){if(c===null){De=i;try{var yt=De.stateNode;M?pa(yt,!0):pa(De.stateNode,!1)}catch(sn){Fr(De,De.return,sn)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Jc(a,c))));break;case 19:Vi(i,a),pi(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Jc(a,f)));break;case 30:break;case 21:break;default:Vi(i,a),pi(a)}}function pi(a){var i=a.flags;if(i&2){try{for(var c,f=a.return;f!==null;){if(lh(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var M=c.stateNode,k=Ku(a);Hu(a,k,M);break;case 5:var K=c.stateNode;c.flags&32&&(ke(K,""),c.flags&=-33);var me=Ku(a);Hu(a,me,K);break;case 3:case 4:var De=c.stateNode.containerInfo,ut=Ku(a);Dp(a,ut,De);break;default:throw Error(r(161))}}catch(Mt){Fr(a,a.return,Mt)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function fh(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;fh(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function ms(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)u_(a,i.alternate,i),i=i.sibling}function Al(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Ks(4,i,i.return),Al(i);break;case 1:$o(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Ap(i,i.return,c),Al(i);break;case 27:Fo(i.stateNode);case 26:case 5:$o(i,i.return),Al(i);break;case 22:i.memoizedState===null&&Al(i);break;case 30:Al(i);break;default:Al(i)}a=a.sibling}}function fo(a,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var f=i.alternate,M=a,k=i,K=k.flags;switch(k.tag){case 0:case 11:case 15:fo(M,k,c),mc(4,k);break;case 1:if(fo(M,k,c),f=k,M=f.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(ut){Fr(f,f.return,ut)}if(f=k,M=f.updateQueue,M!==null){var me=f.stateNode;try{var De=M.shared.hiddenCallbacks;if(De!==null)for(M.shared.hiddenCallbacks=null,M=0;M<De.length;M++)rm(De[M],me)}catch(ut){Fr(f,f.return,ut)}}c&&K&64&&sh(k),Zc(k,k.return);break;case 27:qu(k);case 26:case 5:fo(M,k,c),c&&f===null&&K&4&&Op(k),Zc(k,k.return);break;case 12:fo(M,k,c);break;case 31:fo(M,k,c),c&&K&4&&Lp(M,k);break;case 13:fo(M,k,c),c&&K&4&&ph(M,k);break;case 22:k.memoizedState===null&&fo(M,k,c),Zc(k,k.return);break;case 30:break;default:fo(M,k,c)}i=i.sibling}}function Fp(a,i){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&$c(c))}function jp(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&$c(a))}function mo(a,i,c,f){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xu(a,i,c,f),i=i.sibling}function Xu(a,i,c,f){var M=i.flags;switch(i.tag){case 0:case 11:case 15:mo(a,i,c,f),M&2048&&mc(9,i);break;case 1:mo(a,i,c,f);break;case 3:mo(a,i,c,f),M&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&$c(a)));break;case 12:if(M&2048){mo(a,i,c,f),a=i.stateNode;try{var k=i.memoizedProps,K=k.id,me=k.onPostCommit;typeof me=="function"&&me(K,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(De){Fr(i,i.return,De)}}else mo(a,i,c,f);break;case 31:mo(a,i,c,f);break;case 13:mo(a,i,c,f);break;case 23:break;case 22:k=i.stateNode,K=i.alternate,i.memoizedState!==null?k._visibility&2?mo(a,i,c,f):eu(a,i):k._visibility&2?mo(a,i,c,f):(k._visibility|=2,hc(a,i,c,f,(i.subtreeFlags&10256)!==0||!1)),M&2048&&Fp(K,i);break;case 24:mo(a,i,c,f),M&2048&&jp(i.alternate,i);break;default:mo(a,i,c,f)}}function hc(a,i,c,f,M){for(M=M&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var k=a,K=i,me=c,De=f,ut=K.flags;switch(K.tag){case 0:case 11:case 15:hc(k,K,me,De,M),mc(8,K);break;case 23:break;case 22:var Mt=K.stateNode;K.memoizedState!==null?Mt._visibility&2?hc(k,K,me,De,M):eu(k,K):(Mt._visibility|=2,hc(k,K,me,De,M)),M&&ut&2048&&Fp(K.alternate,K);break;case 24:hc(k,K,me,De,M),M&&ut&2048&&jp(K.alternate,K);break;default:hc(k,K,me,De,M)}i=i.sibling}}function eu(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=a,f=i,M=f.flags;switch(f.tag){case 22:eu(c,f),M&2048&&Fp(f.alternate,f);break;case 24:eu(c,f),M&2048&&jp(f.alternate,f);break;default:eu(c,f)}i=i.sibling}}var tu=8192;function Hs(a,i,c){if(a.subtreeFlags&tu)for(a=a.child;a!==null;)mh(a,i,c),a=a.sibling}function mh(a,i,c){switch(a.tag){case 26:Hs(a,i,c),a.flags&tu&&a.memoizedState!==null&&L$(c,Do,a.memoizedState,a.memoizedProps);break;case 5:Hs(a,i,c);break;case 3:case 4:var f=Do;Do=ou(a.stateNode.containerInfo),Hs(a,i,c),Do=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=tu,tu=16777216,Hs(a,i,c),tu=f):Hs(a,i,c));break;default:Hs(a,i,c)}}function hh(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function nu(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];Wa=f,_h(f,a)}hh(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gh(a),a=a.sibling}function gh(a){switch(a.tag){case 0:case 11:case 15:nu(a),a.flags&2048&&Ks(9,a,a.return);break;case 3:nu(a);break;case 12:nu(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Qu(a)):nu(a);break;default:nu(a)}}function Qu(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];Wa=f,_h(f,a)}hh(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Ks(8,i,i.return),Qu(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Qu(i));break;default:Qu(i)}a=a.sibling}}function _h(a,i){for(;Wa!==null;){var c=Wa;switch(c.tag){case 0:case 11:case 15:Ks(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:$c(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Wa=f;else e:for(c=a;Wa!==null;){f=Wa;var M=f.sibling,k=f.return;if(uh(f),f===c){Wa=null;break e}if(M!==null){M.return=k,Wa=M;break e}Wa=k}}}var p_={getCacheForType:function(a){var i=ii($a),c=i.data.get(a);return c===void 0&&(c=a(),i.data.set(a,c)),c},cacheSignal:function(){return ii($a).controller.signal}},f_=typeof WeakMap=="function"?WeakMap:Map,vr=0,qr=null,Zn=null,rr=0,$r=0,Pi=null,qs=!1,gc=!1,Bp=!1,Io=0,va=0,Ro=0,Ol=0,Np=0,Wi=0,_c=0,ru=null,fi=null,Up=!1,Yu=0,vh=0,Zu=1/0,Ju=null,Lo=null,Ga=0,Xs=null,vc=null,Yn=0,yh=0,bh=null,m_=null,ed=0,td=null;function Gi(){return(vr&2)!==0&&rr!==0?rr&-rr:X.T!==null?Fh():Se()}function xh(){if(Wi===0)if((rr&536870912)===0||sr){var a=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),Wi=a}else Wi=536870912;return a=Bi.current,a!==null&&(a.flags|=32),Wi}function ki(a,i,c){(a===qr&&($r===2||$r===9)||a.cancelPendingCommit!==null)&&(Dl(a,0),$l(a,rr,Wi,!1)),sa(a,c),((vr&2)===0||a!==qr)&&(a===qr&&((vr&2)===0&&(Ol|=c),va===4&&$l(a,rr,Wi,!1)),hs(a))}function wh(a,i,c){if((vr&6)!==0)throw Error(r(327));var f=!c&&(i&127)===0&&(i&a.expiredLanes)===0||on(a,i),M=f?g_(a,i):Gp(a,i,!0),k=f;do{if(M===0){gc&&!f&&$l(a,i,0,!1);break}else{if(c=a.current.alternate,k&&!Mh(c)){M=Gp(a,i,!1),k=!1;continue}if(M===2){if(k=i,a.errorRecoveryDisabledLanes&k)var K=0;else K=a.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){i=K;e:{var me=a;M=ru;var De=me.current.memoizedState.isDehydrated;if(De&&(Dl(me,K).flags|=256),K=Gp(me,K,!1),K!==2){if(Bp&&!De){me.errorRecoveryDisabledLanes|=k,Ol|=k,M=4;break e}k=fi,fi=M,k!==null&&(fi===null?fi=k:fi.push.apply(fi,k))}M=K}if(k=!1,M!==2)continue}}if(M===1){Dl(a,0),$l(a,i,0,!0);break}e:{switch(f=a,k=M,k){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$l(f,i,Wi,!qs);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(M=Yu+300-Tt(),10<M)){if($l(f,i,Wi,!qs),qa(f,0,!0)!==0)break e;Yn=i,f.timeoutHandle=Jn(Vp.bind(null,f,c,fi,Ju,Up,i,Wi,Ol,_c,qs,k,"Throttled",-0,0),M);break e}Vp(f,c,fi,Ju,Up,i,Wi,Ol,_c,qs,k,null,-0,0)}}break}while(!0);hs(a)}function Vp(a,i,c,f,M,k,K,me,De,ut,Mt,Pt,ft,yt){if(a.timeoutHandle=-1,Pt=i.subtreeFlags,Pt&8192||(Pt&16785408)===16785408){Pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},mh(i,k,Pt);var sn=(k&62914560)===k?Yu-Tt():(k&4194048)===k?vh-Tt():0;if(sn=z$(Pt,sn),sn!==null){Yn=k,a.cancelPendingCommit=sn(Ah.bind(null,a,i,k,c,f,M,K,me,De,Mt,Pt,null,ft,yt)),$l(a,k,K,!ut);return}}Ah(a,i,k,c,f,M,K,me,De)}function Mh(a){for(var i=a;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var M=c[f],k=M.getSnapshot;M=M.value;try{if(!Va(k(),M))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $l(a,i,c,f){i&=~Np,i&=~Ol,a.suspendedLanes|=i,a.pingedLanes&=~i,f&&(a.warmLanes|=i),f=a.expirationTimes;for(var M=i;0<M;){var k=31-rt(M),K=1<<k;f[k]=-1,M&=~K}c!==0&&vi(a,c,i)}function nd(){return(vr&6)===0?(od(0),!1):!0}function Wp(){if(Zn!==null){if($r===0)var a=Zn.return;else a=Zn,rs=yl=null,rp(a),ic=null,Lc=0,a=Zn;for(;a!==null;)oh(a.alternate,a),a=a.return;Zn=null}}function Dl(a,i){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,yr(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Yn=0,Wp(),qr=a,Zn=c=Co(a.current,null),rr=i,$r=0,Pi=null,qs=!1,gc=on(a,i),Bp=!1,_c=Wi=Np=Ol=Ro=va=0,fi=ru=null,Up=!1,(i&8)!==0&&(i|=i&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=i;0<f;){var M=31-rt(f),k=1<<M;i|=a[M],f&=~k}return Io=i,Bn(),c}function Th(a,i){Vn=null,X.H=pc,i===ac||i===Ou?(i=Kd(),$r=3):i===Gd?(i=Kd(),$r=4):$r=i===Kc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pi=i,Zn===null&&(va=1,Vu(a,Ji(i,a.current)))}function Eh(){var a=Bi.current;return a===null?!0:(rr&4194048)===rr?Ni===null:(rr&62914560)===rr||(rr&536870912)!==0?a===Ni:!1}function h_(){var a=X.H;return X.H=pc,a===null?pc:a}function Sh(){var a=X.A;return X.A=p_,a}function rd(){va=4,qs||(rr&4194048)!==rr&&Bi.current!==null||(gc=!0),(Ro&134217727)===0&&(Ol&134217727)===0||qr===null||$l(qr,rr,Wi,!1)}function Gp(a,i,c){var f=vr;vr|=2;var M=h_(),k=Sh();(qr!==a||rr!==i)&&(Ju=null,Dl(a,i)),i=!1;var K=va;e:do try{if($r!==0&&Zn!==null){var me=Zn,De=Pi;switch($r){case 8:Wp(),K=6;break e;case 3:case 2:case 9:case 6:Bi.current===null&&(i=!0);var ut=$r;if($r=0,Pi=null,yc(a,me,De,ut),c&&gc){K=0;break e}break;default:ut=$r,$r=0,Pi=null,yc(a,me,De,ut)}}au(),K=va;break}catch(Mt){Th(a,Mt)}while(!0);return i&&a.shellSuspendCounter++,rs=yl=null,vr=f,X.H=M,X.A=k,Zn===null&&(qr=null,rr=0,Bn()),K}function au(){for(;Zn!==null;)Ch(Zn)}function g_(a,i){var c=vr;vr|=2;var f=h_(),M=Sh();qr!==a||rr!==i?(Ju=null,Zu=Tt()+500,Dl(a,i)):gc=on(a,i);e:do try{if($r!==0&&Zn!==null){i=Zn;var k=Pi;t:switch($r){case 1:$r=0,Pi=null,yc(a,i,k,1);break;case 2:case 9:if(Zf(k)){$r=0,Pi=null,Ph(i);break}i=function(){$r!==2&&$r!==9||qr!==a||($r=7),hs(a)},k.then(i,i);break e;case 3:$r=7;break e;case 4:$r=5;break e;case 7:Zf(k)?($r=0,Pi=null,Ph(i)):($r=0,Pi=null,yc(a,i,k,7));break;case 5:var K=null;switch(Zn.tag){case 26:K=Zn.memoizedState;case 5:case 27:var me=Zn;if(K?kw(K):me.stateNode.complete){$r=0,Pi=null;var De=me.sibling;if(De!==null)Zn=De;else{var ut=me.return;ut!==null?(Zn=ut,ad(ut)):Zn=null}break t}}$r=0,Pi=null,yc(a,i,k,5);break;case 6:$r=0,Pi=null,yc(a,i,k,6);break;case 8:Wp(),va=6;break e;default:throw Error(r(462))}}__();break}catch(Mt){Th(a,Mt)}while(!0);return rs=yl=null,X.H=f,X.A=M,vr=c,Zn!==null?0:(qr=null,rr=0,Bn(),va)}function __(){for(;Zn!==null&&!kt();)Ch(Zn)}function Ch(a){var i=rh(a.alternate,a,Io);a.memoizedProps=a.pendingProps,i===null?ad(a):Zn=i}function Ph(a){var i=a,c=i.alternate;switch(i.tag){case 15:case 0:i=Zm(c,i,i.pendingProps,i.type,void 0,rr);break;case 11:i=Zm(c,i,i.pendingProps,i.type.render,i.ref,rr);break;case 5:rp(i);default:oh(c,i),i=Zn=Nf(i,Io),i=rh(c,i,Io)}a.memoizedProps=a.pendingProps,i===null?ad(a):Zn=i}function yc(a,i,c,f){rs=yl=null,rp(i),ic=null,Lc=0;var M=i.return;try{if(i_(a,M,i,c,rr)){va=1,Vu(a,Ji(c,a.current)),Zn=null;return}}catch(k){if(M!==null)throw Zn=M,k;va=1,Vu(a,Ji(c,a.current)),Zn=null;return}i.flags&32768?(sr||f===1?a=!0:gc||(rr&536870912)!==0?a=!1:(qs=a=!0,(f===2||f===9||f===3||f===6)&&(f=Bi.current,f!==null&&f.tag===13&&(f.flags|=16384))),kh(i,a)):ad(i)}function ad(a){var i=a;do{if((i.flags&32768)!==0){kh(i,qs);return}a=i.return;var c=ih(i.alternate,i,Io);if(c!==null){Zn=c;return}if(i=i.sibling,i!==null){Zn=i;return}Zn=i=a}while(i!==null);va===0&&(va=5)}function kh(a,i){do{var c=c_(a.alternate,a);if(c!==null){c.flags&=32767,Zn=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(a=a.sibling,a!==null)){Zn=a;return}Zn=a=c}while(a!==null);va=6,Zn=null}function Ah(a,i,c,f,M,k,K,me,De){a.cancelPendingCommit=null;do id();while(Ga!==0);if((vr&6)!==0)throw Error(r(327));if(i!==null){if(i===a.current)throw Error(r(177));if(k=i.lanes|i.childLanes,k|=vn,wn(a,c,k,K,me,De),a===qr&&(Zn=qr=null,rr=0),vc=i,Xs=a,Yn=c,yh=k,bh=M,m_=f,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Ty(st,function(){return Ih(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||f){f=X.T,X.T=null,M=se.p,se.p=2,K=vr,vr|=4;try{Rp(a,i,c)}finally{vr=K,se.p=M,X.T=f}}Ga=1,v_(),Oh(),$h()}}function v_(){if(Ga===1){Ga=0;var a=Xs,i=vc,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var f=se.p;se.p=2;var M=vr;vr|=4;try{zp(i,a);var k=Sn,K=Z(a.containerInfo),me=k.focusedElem,De=k.selectionRange;if(K!==me&&me&&me.ownerDocument&&V(me.ownerDocument.documentElement,me)){if(De!==null&&ce(me)){var ut=De.start,Mt=De.end;if(Mt===void 0&&(Mt=ut),"selectionStart"in me)me.selectionStart=ut,me.selectionEnd=Math.min(Mt,me.value.length);else{var Pt=me.ownerDocument||document,ft=Pt&&Pt.defaultView||window;if(ft.getSelection){var yt=ft.getSelection(),sn=me.textContent.length,$n=Math.min(De.start,sn),ra=De.end===void 0?$n:Math.min(De.end,sn);!yt.extend&&$n>ra&&(K=ra,ra=$n,$n=K);var Je=j(me,$n),Ue=j(me,ra);if(Je&&Ue&&(yt.rangeCount!==1||yt.anchorNode!==Je.node||yt.anchorOffset!==Je.offset||yt.focusNode!==Ue.node||yt.focusOffset!==Ue.offset)){var ct=Pt.createRange();ct.setStart(Je.node,Je.offset),yt.removeAllRanges(),$n>ra?(yt.addRange(ct),yt.extend(Ue.node,Ue.offset)):(ct.setEnd(Ue.node,Ue.offset),yt.addRange(ct))}}}}for(Pt=[],yt=me;yt=yt.parentNode;)yt.nodeType===1&&Pt.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<Pt.length;me++){var St=Pt[me];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}I_=!!en,Sn=en=null}finally{vr=M,se.p=f,X.T=c}}a.current=i,Ga=2}}function Oh(){if(Ga===2){Ga=0;var a=Xs,i=vc,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var f=se.p;se.p=2;var M=vr;vr|=4;try{u_(a,i.alternate,i)}finally{vr=M,se.p=f,X.T=c}}Ga=3}}function $h(){if(Ga===4||Ga===3){Ga=0,mt();var a=Xs,i=vc,c=Yn,f=m_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ga=5:(Ga=0,vc=Xs=null,Dh(a,a.pendingLanes));var M=a.pendingLanes;if(M===0&&(Lo=null),we(c),i=i.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(At,i,void 0,(i.current.flags&128)===128)}catch{}if(f!==null){i=X.T,M=se.p,se.p=2,X.T=null;try{for(var k=a.onRecoverableError,K=0;K<f.length;K++){var me=f[K];k(me.value,{componentStack:me.stack})}}finally{X.T=i,se.p=M}}(Yn&3)!==0&&id(),hs(a),M=a.pendingLanes,(c&261930)!==0&&(M&42)!==0?a===td?ed++:(ed=0,td=a):ed=0,od(0)}}function Dh(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,$c(i)))}function id(){return v_(),Oh(),$h(),Ih()}function Ih(){if(Ga!==5)return!1;var a=Xs,i=yh;yh=0;var c=we(Yn),f=X.T,M=se.p;try{se.p=32>c?32:c,X.T=null,c=bh,bh=null;var k=Xs,K=Yn;if(Ga=0,vc=Xs=null,Yn=0,(vr&6)!==0)throw Error(r(331));var me=vr;if(vr|=4,gh(k.current),Xu(k,k.current,K,c),vr=me,od(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(At,k)}catch{}return!0}finally{se.p=M,X.T=f,Dh(a,i)}}function Rh(a,i,c){i=Ji(c,i),i=Mp(a.stateNode,i,2),a=Vs(a,i,2),a!==null&&(sa(a,2),hs(a))}function Fr(a,i,c){if(a.tag===3)Rh(a,a,c);else for(;i!==null;){if(i.tag===3){Rh(i,a,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Lo===null||!Lo.has(f))){a=Ji(c,a),c=Wm(2),f=Vs(i,c,2),f!==null&&(Gm(c,f,i,a),sa(f,2),hs(f));break}}i=i.return}}function Kp(a,i,c){var f=a.pingCache;if(f===null){f=a.pingCache=new f_;var M=new Set;f.set(i,M)}else M=f.get(i),M===void 0&&(M=new Set,f.set(i,M));M.has(c)||(Bp=!0,M.add(c),a=xy.bind(null,a,i,c),i.then(a,a))}function xy(a,i,c){var f=a.pingCache;f!==null&&f.delete(i),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,qr===a&&(rr&c)===c&&(va===4||va===3&&(rr&62914560)===rr&&300>Tt()-Yu?(vr&2)===0&&Dl(a,0):Np|=c,_c===rr&&(_c=0)),hs(a)}function y_(a,i){i===0&&(i=Qi()),a=Tr(a,i),a!==null&&(sa(a,i),hs(a))}function wy(a){var i=a.memoizedState,c=0;i!==null&&(c=i.retryLane),y_(a,c)}function My(a,i){var c=0;switch(a.tag){case 31:case 13:var f=a.stateNode,M=a.memoizedState;M!==null&&(c=M.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(i),y_(a,c)}function Ty(a,i){return Ne(a,i)}var Hp=null,iu=null,Lh=!1,qp=!1,zh=!1,Il=0;function hs(a){a!==iu&&a.next===null&&(iu===null?Hp=iu=a:iu=iu.next=a),qp=!0,Lh||(Lh=!0,Sy())}function od(a,i){if(!zh&&qp){zh=!0;do for(var c=!1,f=Hp;f!==null;){if(a!==0){var M=f.pendingLanes;if(M===0)var k=0;else{var K=f.suspendedLanes,me=f.pingedLanes;k=(1<<31-rt(42|a)+1)-1,k&=M&~(K&~me),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(c=!0,M_(f,k))}else k=rr,k=qa(f,f===qr?k:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(k&3)===0||on(f,k)||(c=!0,M_(f,k));f=f.next}while(c);zh=!1}}function Ey(){b_()}function b_(){qp=Lh=!1;var a=0;Il!==0&&dn()&&(a=Il);for(var i=Tt(),c=null,f=Hp;f!==null;){var M=f.next,k=x_(f,i);k===0?(f.next=null,c===null?Hp=M:c.next=M,M===null&&(iu=c)):(c=f,(a!==0||(k&3)!==0)&&(qp=!0)),f=M}Ga!==0&&Ga!==5||od(a),Il!==0&&(Il=0)}function x_(a,i){for(var c=a.suspendedLanes,f=a.pingedLanes,M=a.expirationTimes,k=a.pendingLanes&-62914561;0<k;){var K=31-rt(k),me=1<<K,De=M[K];De===-1?((me&c)===0||(me&f)!==0)&&(M[K]=wr(me,i)):De<=i&&(a.expiredLanes|=me),k&=~me}if(i=qr,c=rr,c=qa(a,a===i?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===i&&($r===2||$r===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Ye(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||on(a,c)){if(i=c&-c,i===a.callbackPriority)return i;switch(f!==null&&Ye(f),we(c)){case 2:case 8:c=wt;break;case 32:c=st;break;case 268435456:c=Bt;break;default:c=st}return f=w_.bind(null,a),c=Ne(c,f),a.callbackPriority=i,a.callbackNode=c,i}return f!==null&&f!==null&&Ye(f),a.callbackPriority=2,a.callbackNode=null,2}function w_(a,i){if(Ga!==0&&Ga!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(id()&&a.callbackNode!==c)return null;var f=rr;return f=qa(a,a===qr?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(wh(a,f,i),x_(a,Tt()),a.callbackNode!=null&&a.callbackNode===c?w_.bind(null,a):null)}function M_(a,i){if(id())return null;wh(a,i,!0)}function Sy(){da(function(){(vr&6)!==0?Ne(dt,Ey):b_()})}function Fh(){if(Il===0){var a=nc;a===0&&(a=Rt,Rt<<=1,(Rt&261888)===0&&(Rt=256)),Il=a}return Il}function T_(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:bn(""+a)}function E_(a,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,a.id&&c.setAttribute("form",a.id),i.parentNode.insertBefore(c,i),a=new FormData(a),c.parentNode.removeChild(c),a}function Cy(a,i,c,f,M){if(i==="submit"&&c&&c.stateNode===M){var k=T_((M[Qt]||null).action),K=f.submitter;K&&(i=(i=K[Qt]||null)?T_(i.formAction):K.getAttribute("formAction"),i!==null&&(k=i,K=null));var me=new Ua("action","action",null,f,M);a.push({event:me,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Il!==0){var De=K?E_(M,K):new FormData(M);mp(c,{pending:!0,data:De,method:M.method,action:k},null,De)}}else typeof k=="function"&&(me.preventDefault(),De=K?E_(M,K):new FormData(M),mp(c,{pending:!0,data:De,method:M.method,action:k},k,De))},currentTarget:M}]})}}for(var jh=0;jh<Ot.length;jh++){var Bh=Ot[jh],Py=Bh.toLowerCase(),ky=Bh[0].toUpperCase()+Bh.slice(1);Et(Py,"on"+ky)}Et(Q,"onAnimationEnd"),Et(ue,"onAnimationIteration"),Et(Ce,"onAnimationStart"),Et("dblclick","onDoubleClick"),Et("focusin","onFocus"),Et("focusout","onBlur"),Et(je,"onTransitionRun"),Et(nt,"onTransitionStart"),Et(pt,"onTransitionCancel"),Et(gt,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ay=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sd));function S_(a,i){i=(i&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],M=f.event;f=f.listeners;e:{var k=void 0;if(i)for(var K=f.length-1;0<=K;K--){var me=f[K],De=me.instance,ut=me.currentTarget;if(me=me.listener,De!==k&&M.isPropagationStopped())break e;k=me,M.currentTarget=ut;try{k(M)}catch(Mt){Yt(Mt)}M.currentTarget=null,k=De}else for(K=0;K<f.length;K++){if(me=f[K],De=me.instance,ut=me.currentTarget,me=me.listener,De!==k&&M.isPropagationStopped())break e;k=me,M.currentTarget=ut;try{k(M)}catch(Mt){Yt(Mt)}M.currentTarget=null,k=De}}}}function ar(a,i){var c=i[gn];c===void 0&&(c=i[gn]=new Set);var f=a+"__bubble";c.has(f)||(Ra(i,a,2,!1),c.add(f))}function Nh(a,i,c){var f=0;i&&(f|=4),Ra(c,a,f,i)}var Cn="_reactListening"+Math.random().toString(36).slice(2);function Xp(a){if(!a[Cn]){a[Cn]=!0,la.forEach(function(c){c!=="selectionchange"&&(Ay.has(c)||Nh(c,!1,a),Nh(c,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[Cn]||(i[Cn]=!0,Nh("selectionchange",!1,i))}}function Ra(a,i,c,f){switch(Lw(i)){case 2:var M=B$;break;case 8:M=N$;break;default:M=By}c=M.bind(null,i,c,a),M=void 0,!kr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(M=!0),f?M!==void 0?a.addEventListener(i,c,{capture:!0,passive:M}):a.addEventListener(i,c,!0):M!==void 0?a.addEventListener(i,c,{passive:M}):a.addEventListener(i,c,!1)}function La(a,i,c,f,M){var k=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var K=f.tag;if(K===3||K===4){var me=f.stateNode.containerInfo;if(me===M)break;if(K===4)for(K=f.return;K!==null;){var De=K.tag;if((De===3||De===4)&&K.stateNode.containerInfo===M)return;K=K.return}for(;me!==null;){if(K=fr(me),K===null)return;if(De=K.tag,De===5||De===6||De===26||De===27){f=k=K;continue e}me=me.parentNode}}f=f.return}Qa(function(){var ut=k,Mt=ta(c),Pt=[];e:{var ft=$t.get(a);if(ft!==void 0){var yt=Ua,sn=a;switch(a){case"keypress":if(Ya(c)===0)break e;case"keydown":case"keyup":yt=$s;break;case"focusin":sn="focus",yt=yo;break;case"focusout":sn="blur",yt=yo;break;case"beforeblur":case"afterblur":yt=yo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=ql;break;case Q:case ue:case Ce:yt=Hl;break;case gt:yt=Qo;break;case"scroll":case"scrollend":yt=Si;break;case"wheel":yt=wo;break;case"copy":case"cut":case"paste":yt=bo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=ml;break;case"toggle":case"beforetoggle":yt=Xl}var $n=(i&4)!==0,ra=!$n&&(a==="scroll"||a==="scrollend"),Je=$n?ft!==null?ft+"Capture":null:ft;$n=[];for(var Ue=ut,ct;Ue!==null;){var St=Ue;if(ct=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||ct===null||Je===null||(St=Gr(Ue,Je),St!=null&&$n.push(za(Ue,St,ct))),ra)break;Ue=Ue.return}0<$n.length&&(ft=new yt(ft,sn,null,c,Mt),Pt.push({event:ft,listeners:$n}))}}if((i&7)===0){e:{if(ft=a==="mouseover"||a==="pointerover",yt=a==="mouseout"||a==="pointerout",ft&&c!==or&&(sn=c.relatedTarget||c.fromElement)&&(fr(sn)||sn[jt]))break e;if((yt||ft)&&(ft=Mt.window===Mt?Mt:(ft=Mt.ownerDocument)?ft.defaultView||ft.parentWindow:window,yt?(sn=c.relatedTarget||c.toElement,yt=ut,sn=sn?fr(sn):null,sn!==null&&(ra=s(sn),$n=sn.tag,sn!==ra||$n!==5&&$n!==27&&$n!==6)&&(sn=null)):(yt=null,sn=ut),yt!==sn)){if($n=Cs,St="onMouseLeave",Je="onMouseEnter",Ue="mouse",(a==="pointerout"||a==="pointerover")&&($n=ml,St="onPointerLeave",Je="onPointerEnter",Ue="pointer"),ra=yt==null?ft:wa(yt),ct=sn==null?ft:wa(sn),ft=new $n(St,Ue+"leave",yt,c,Mt),ft.target=ra,ft.relatedTarget=ct,St=null,fr(Mt)===ut&&($n=new $n(Je,Ue+"enter",sn,c,Mt),$n.target=ct,$n.relatedTarget=ra,St=$n),ra=St,yt&&sn)t:{for($n=Oy,Je=yt,Ue=sn,ct=0,St=Je;St;St=$n(St))ct++;St=0;for(var Tn=Ue;Tn;Tn=$n(Tn))St++;for(;0<ct-St;)Je=$n(Je),ct--;for(;0<St-ct;)Ue=$n(Ue),St--;for(;ct--;){if(Je===Ue||Ue!==null&&Je===Ue.alternate){$n=Je;break t}Je=$n(Je),Ue=$n(Ue)}$n=null}else $n=null;yt!==null&&Uh(Pt,ft,yt,$n,!1),sn!==null&&ra!==null&&Uh(Pt,ra,sn,$n,!0)}}e:{if(ft=ut?wa(ut):window,yt=ft.nodeName&&ft.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ft.type==="file")var Dr=lo;else if(Ci(ft))if(bi)Dr=Li;else{Dr=Oa;var _n=ts}else yt=ft.nodeName,!yt||yt.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?ut&&Ht(ut.elementType)&&(Dr=lo):Dr=So;if(Dr&&(Dr=Dr(a,ut))){Ls(Pt,Dr,c,Mt);break e}_n&&_n(a,ft,ut),a==="focusout"&&ut&&ft.type==="number"&&ut.memoizedProps.value!=null&&Qe(ft,"number",ft.value)}switch(_n=ut?wa(ut):window,a){case"focusin":(Ci(_n)||_n.contentEditable==="true")&&(Me=_n,Le=ut,Ze=null);break;case"focusout":Ze=Le=Me=null;break;case"mousedown":ze=!0;break;case"contextmenu":case"mouseup":case"dragend":ze=!1,Ie(Pt,c,Mt);break;case"selectionchange":if(ve)break;case"keydown":case"keyup":Ie(Pt,c,Mt)}var er;if(Yo)e:{switch(a){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else Ri?Jo(a,c)&&(dr="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(dr="onCompositionStart");dr&&(Zo&&c.locale!=="ko"&&(Ri||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&Ri&&(er=Hr()):(Ar=Mt,ni="value"in Ar?Ar.value:Ar.textContent,Ri=!0)),_n=zo(ut,dr),0<_n.length&&(dr=new qo(dr,a,null,c,Mt),Pt.push({event:dr,listeners:_n}),er?dr.data=er:(er=Ql(c),er!==null&&(dr.data=er)))),(er=Pc?es(a,c):gl(a,c))&&(dr=zo(ut,"onBeforeInput"),0<dr.length&&(_n=new qo("onBeforeInput","beforeinput",null,c,Mt),Pt.push({event:_n,listeners:dr}),_n.data=er)),Cy(Pt,a,ut,c,Mt)}S_(Pt,i)})}function za(a,i,c){return{instance:a,listener:i,currentTarget:c}}function zo(a,i){for(var c=i+"Capture",f=[];a!==null;){var M=a,k=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||k===null||(M=Gr(a,c),M!=null&&f.unshift(za(a,M,k)),M=Gr(a,i),M!=null&&f.push(za(a,M,k))),a.tag===3)return f;a=a.return}return[]}function Oy(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Uh(a,i,c,f,M){for(var k=i._reactName,K=[];c!==null&&c!==f;){var me=c,De=me.alternate,ut=me.stateNode;if(me=me.tag,De!==null&&De===f)break;me!==5&&me!==26&&me!==27||ut===null||(De=ut,M?(ut=Gr(c,k),ut!=null&&K.unshift(za(c,ut,De))):M||(ut=Gr(c,k),ut!=null&&K.push(za(c,ut,De)))),c=c.return}K.length!==0&&a.push({event:i,listeners:K})}var C_=/\r\n?/g,L=/\u0000|\uFFFD/g;function z(a){return(typeof a=="string"?a:""+a).replace(C_,`
`).replace(L,"")}function he(a,i){return i=z(i),z(a)===i}function Ae(a,i,c,f,M,k){switch(c){case"children":typeof f=="string"?i==="body"||i==="textarea"&&f===""||ke(a,f):(typeof f=="number"||typeof f=="bigint")&&i!=="body"&&ke(a,""+f);break;case"className":yi(a,"class",f);break;case"tabIndex":yi(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":yi(a,c,f);break;case"style":Kt(a,f,k);break;case"data":if(i!=="object"){yi(a,"data",f);break}case"src":case"href":if(f===""&&(i!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=bn(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(c==="formAction"?(i!=="input"&&Ae(a,i,"name",M.name,M,null),Ae(a,i,"formEncType",M.formEncType,M,null),Ae(a,i,"formMethod",M.formMethod,M,null),Ae(a,i,"formTarget",M.formTarget,M,null)):(Ae(a,i,"encType",M.encType,M,null),Ae(a,i,"method",M.method,M,null),Ae(a,i,"target",M.target,M,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=bn(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=mn);break;case"onScroll":f!=null&&ar("scroll",a);break;case"onScrollEnd":f!=null&&ar("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(M.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=bn(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":ar("beforetoggle",a),ar("toggle",a),An(a,"popover",f);break;case"xlinkActuate":Aa(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Aa(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Aa(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Aa(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Aa(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Aa(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Aa(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Aa(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Aa(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":An(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xt.get(c)||c,An(a,c,f))}}function tt(a,i,c,f,M,k){switch(c){case"style":Kt(a,f,k);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(M.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?ke(a,f):(typeof f=="number"||typeof f=="bigint")&&ke(a,""+f);break;case"onScroll":f!=null&&ar("scroll",a);break;case"onScrollEnd":f!=null&&ar("scrollend",a);break;case"onClick":f!=null&&(a.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ha.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(M=c.endsWith("Capture"),i=c.slice(2,M?c.length-7:void 0),k=a[Qt]||null,k=k!=null?k[c]:null,typeof k=="function"&&a.removeEventListener(i,k,M),typeof f=="function")){typeof k!="function"&&k!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(i,f,M);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):An(a,c,f)}}}function et(a,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ar("error",a),ar("load",a);var f=!1,M=!1,k;for(k in c)if(c.hasOwnProperty(k)){var K=c[k];if(K!=null)switch(k){case"src":f=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ae(a,i,k,K,c,null)}}M&&Ae(a,i,"srcSet",c.srcSet,c,null),f&&Ae(a,i,"src",c.src,c,null);return;case"input":ar("invalid",a);var me=k=K=M=null,De=null,ut=null;for(f in c)if(c.hasOwnProperty(f)){var Mt=c[f];if(Mt!=null)switch(f){case"name":M=Mt;break;case"type":K=Mt;break;case"checked":De=Mt;break;case"defaultChecked":ut=Mt;break;case"value":k=Mt;break;case"defaultValue":me=Mt;break;case"children":case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(r(137,i));break;default:Ae(a,i,f,Mt,c,null)}}_o(a,k,me,De,ut,K,M,!1);return;case"select":ar("invalid",a),f=K=k=null;for(M in c)if(c.hasOwnProperty(M)&&(me=c[M],me!=null))switch(M){case"value":k=me;break;case"defaultValue":K=me;break;case"multiple":f=me;default:Ae(a,i,M,me,c,null)}i=k,c=K,a.multiple=!!f,i!=null?G(a,!!f,i,!1):c!=null&&G(a,!!f,c,!0);return;case"textarea":ar("invalid",a),k=M=f=null;for(K in c)if(c.hasOwnProperty(K)&&(me=c[K],me!=null))switch(K){case"value":f=me;break;case"defaultValue":M=me;break;case"children":k=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:Ae(a,i,K,me,c,null)}Pe(a,f,M,k);return;case"option":for(De in c)c.hasOwnProperty(De)&&(f=c[De],f!=null)&&(De==="selected"?a.selected=f&&typeof f!="function"&&typeof f!="symbol":Ae(a,i,De,f,c,null));return;case"dialog":ar("beforetoggle",a),ar("toggle",a),ar("cancel",a),ar("close",a);break;case"iframe":case"object":ar("load",a);break;case"video":case"audio":for(f=0;f<sd.length;f++)ar(sd[f],a);break;case"image":ar("error",a),ar("load",a);break;case"details":ar("toggle",a);break;case"embed":case"source":case"link":ar("error",a),ar("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in c)if(c.hasOwnProperty(ut)&&(f=c[ut],f!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ae(a,i,ut,f,c,null)}return;default:if(Ht(i)){for(Mt in c)c.hasOwnProperty(Mt)&&(f=c[Mt],f!==void 0&&tt(a,i,Mt,f,c,void 0));return}}for(me in c)c.hasOwnProperty(me)&&(f=c[me],f!=null&&Ae(a,i,me,f,c,null))}function bt(a,i,c,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,k=null,K=null,me=null,De=null,ut=null,Mt=null;for(yt in c){var Pt=c[yt];if(c.hasOwnProperty(yt)&&Pt!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":De=Pt;default:f.hasOwnProperty(yt)||Ae(a,i,yt,null,f,Pt)}}for(var ft in f){var yt=f[ft];if(Pt=c[ft],f.hasOwnProperty(ft)&&(yt!=null||Pt!=null))switch(ft){case"type":k=yt;break;case"name":M=yt;break;case"checked":ut=yt;break;case"defaultChecked":Mt=yt;break;case"value":K=yt;break;case"defaultValue":me=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,i));break;default:yt!==Pt&&Ae(a,i,ft,yt,f,Pt)}}ti(a,K,me,De,ut,Mt,k,M);return;case"select":yt=K=me=ft=null;for(k in c)if(De=c[k],c.hasOwnProperty(k)&&De!=null)switch(k){case"value":break;case"multiple":yt=De;default:f.hasOwnProperty(k)||Ae(a,i,k,null,f,De)}for(M in f)if(k=f[M],De=c[M],f.hasOwnProperty(M)&&(k!=null||De!=null))switch(M){case"value":ft=k;break;case"defaultValue":me=k;break;case"multiple":K=k;default:k!==De&&Ae(a,i,M,k,f,De)}i=me,c=K,f=yt,ft!=null?G(a,!!c,ft,!1):!!f!=!!c&&(i!=null?G(a,!!c,i,!0):G(a,!!c,c?[]:"",!1));return;case"textarea":yt=ft=null;for(me in c)if(M=c[me],c.hasOwnProperty(me)&&M!=null&&!f.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:Ae(a,i,me,null,f,M)}for(K in f)if(M=f[K],k=c[K],f.hasOwnProperty(K)&&(M!=null||k!=null))switch(K){case"value":ft=M;break;case"defaultValue":yt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:M!==k&&Ae(a,i,K,M,f,k)}ye(a,ft,yt);return;case"option":for(var sn in c)ft=c[sn],c.hasOwnProperty(sn)&&ft!=null&&!f.hasOwnProperty(sn)&&(sn==="selected"?a.selected=!1:Ae(a,i,sn,null,f,ft));for(De in f)ft=f[De],yt=c[De],f.hasOwnProperty(De)&&ft!==yt&&(ft!=null||yt!=null)&&(De==="selected"?a.selected=ft&&typeof ft!="function"&&typeof ft!="symbol":Ae(a,i,De,ft,f,yt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $n in c)ft=c[$n],c.hasOwnProperty($n)&&ft!=null&&!f.hasOwnProperty($n)&&Ae(a,i,$n,null,f,ft);for(ut in f)if(ft=f[ut],yt=c[ut],f.hasOwnProperty(ut)&&ft!==yt&&(ft!=null||yt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,i));break;default:Ae(a,i,ut,ft,f,yt)}return;default:if(Ht(i)){for(var ra in c)ft=c[ra],c.hasOwnProperty(ra)&&ft!==void 0&&!f.hasOwnProperty(ra)&&tt(a,i,ra,void 0,f,ft);for(Mt in f)ft=f[Mt],yt=c[Mt],!f.hasOwnProperty(Mt)||ft===yt||ft===void 0&&yt===void 0||tt(a,i,Mt,ft,f,yt);return}}for(var Je in c)ft=c[Je],c.hasOwnProperty(Je)&&ft!=null&&!f.hasOwnProperty(Je)&&Ae(a,i,Je,null,f,ft);for(Pt in f)ft=f[Pt],yt=c[Pt],!f.hasOwnProperty(Pt)||ft===yt||ft==null&&yt==null||Ae(a,i,Pt,ft,f,yt)}function It(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vt(){if(typeof performance.getEntriesByType=="function"){for(var a=0,i=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var M=c[f],k=M.transferSize,K=M.initiatorType,me=M.duration;if(k&&me&&It(K)){for(K=0,me=M.responseEnd,f+=1;f<c.length;f++){var De=c[f],ut=De.startTime;if(ut>me)break;var Mt=De.transferSize,Pt=De.initiatorType;Mt&&It(Pt)&&(De=De.responseEnd,K+=Mt*(De<me?1:(me-ut)/(De-ut)))}if(--f,i+=8*(k+K)/(M.duration/1e3),a++,10<a)break}}if(0<a)return i/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var en=null,Sn=null;function Mn(a){return a.nodeType===9?a:a.ownerDocument}function Dn(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cn(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function ir(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var un=null;function dn(){var a=window.event;return a&&a.type==="popstate"?a===un?!1:(un=a,!0):(un=null,!1)}var Jn=typeof setTimeout=="function"?setTimeout:void 0,yr=typeof clearTimeout=="function"?clearTimeout:void 0,Jr=typeof Promise=="function"?Promise:void 0,da=typeof queueMicrotask=="function"?queueMicrotask:typeof Jr<"u"?function(a){return Jr.resolve(null).then(a).catch(ya)}:Jn;function ya(a){setTimeout(function(){throw a})}function jr(a){return a==="head"}function Wn(a,i){var c=i,f=0;do{var M=c.nextSibling;if(a.removeChild(c),M&&M.nodeType===8)if(c=M.data,c==="/$"||c==="/&"){if(f===0){a.removeChild(M),Jp(i);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Fo(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,Fo(c);for(var k=c.firstChild;k;){var K=k.nextSibling,me=k.nodeName;k[pr]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&k.rel.toLowerCase()==="stylesheet"||c.removeChild(k),k=K}}else c==="body"&&Fo(a.ownerDocument.body);c=M}while(c);Jp(i)}function pa(a,i){var c=a;a=0;do{var f=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=f}while(c)}function Fa(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Fa(c),Vr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function bc(a,i,c,f){for(;a.nodeType===1;){var M=c;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[pr])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(k=a.getAttribute("rel"),k==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(k!==M.rel||a.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||a.getAttribute("title")!==(M.title==null?null:M.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(k=a.getAttribute("src"),(k!==(M.src==null?null:M.src)||a.getAttribute("type")!==(M.type==null?null:M.type)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&k&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var k=M.name==null?null:""+M.name;if(M.type==="hidden"&&a.getAttribute("name")===k)return a}else return a;if(a=wi(a.nextSibling),a===null)break}return null}function Ai(a,i,c){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=wi(a.nextSibling),a===null))return null;return a}function ho(a,i){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!i||(a=wi(a.nextSibling),a===null))return null;return a}function Rl(a){return a.data==="$?"||a.data==="$~"}function Ll(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function Qp(a,i){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=i;else if(a.data!=="$?"||c.readyState!=="loading")i();else{var f=function(){i(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function wi(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return a}var Vh=null;function ea(a){a=a.nextSibling;for(var i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(i===0)return wi(a.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}a=a.nextSibling}return null}function ja(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return a;i--}else c!=="/$"&&c!=="/&"||i++}a=a.previousSibling}return null}function Qs(a,i,c){switch(i=Mn(c),a){case"html":if(a=i.documentElement,!a)throw Error(r(452));return a;case"head":if(a=i.head,!a)throw Error(r(453));return a;case"body":if(a=i.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Fo(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Vr(a)}var mi=new Map,ld=new Set;function ou(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var jo=se.d;se.d={f:Wh,r:$y,D:Gh,C:P_,L:Kh,m:Yp,X:Iy,S:Dy,M:Ry};function Wh(){var a=jo.f(),i=nd();return a||i}function $y(a){var i=In(a);i!==null&&i.tag===5&&i.type==="form"?hp(i):jo.r(a)}var zl=typeof document>"u"?null:document;function cd(a,i,c){var f=zl;if(f&&typeof i=="string"&&i){var M=Qr(i);M='link[rel="'+a+'"][href="'+M+'"]',typeof c=="string"&&(M+='[crossorigin="'+c+'"]'),ld.has(M)||(ld.add(M),a={rel:a,crossOrigin:c,href:i},f.querySelector(M)===null&&(i=f.createElement("link"),et(i,"link",a),Cr(i),f.head.appendChild(i)))}}function Gh(a){jo.D(a),cd("dns-prefetch",a,null)}function P_(a,i){jo.C(a,i),cd("preconnect",a,i)}function Kh(a,i,c){jo.L(a,i,c);var f=zl;if(f&&a&&i){var M='link[rel="preload"][as="'+Qr(i)+'"]';i==="image"&&c&&c.imageSrcSet?(M+='[imagesrcset="'+Qr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(M+='[imagesizes="'+Qr(c.imageSizes)+'"]')):M+='[href="'+Qr(a)+'"]';var k=M;switch(i){case"style":k=Mi(a);break;case"script":k=Zp(a)}mi.has(k)||(a=h({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:a,as:i},c),mi.set(k,a),f.querySelector(M)!==null||i==="style"&&f.querySelector(Hh(k))||i==="script"&&f.querySelector(qh(k))||(i=f.createElement("link"),et(i,"link",a),Cr(i),f.head.appendChild(i)))}}function Yp(a,i){jo.m(a,i);var c=zl;if(c&&a){var f=i&&typeof i.as=="string"?i.as:"script",M='link[rel="modulepreload"][as="'+Qr(f)+'"][href="'+Qr(a)+'"]',k=M;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Zp(a)}if(!mi.has(k)&&(a=h({rel:"modulepreload",href:a},i),mi.set(k,a),c.querySelector(M)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(qh(k)))return}f=c.createElement("link"),et(f,"link",a),Cr(f),c.head.appendChild(f)}}}function Dy(a,i,c){jo.S(a,i,c);var f=zl;if(f&&a){var M=hr(f).hoistableStyles,k=Mi(a);i=i||"default";var K=M.get(k);if(!K){var me={loading:0,preload:null};if(K=f.querySelector(Hh(k)))me.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":i},c),(c=mi.get(k))&&Ly(a,c);var De=K=f.createElement("link");Cr(De),et(De,"link",a),De._p=new Promise(function(ut,Mt){De.onload=ut,De.onerror=Mt}),De.addEventListener("load",function(){me.loading|=1}),De.addEventListener("error",function(){me.loading|=2}),me.loading|=4,k_(K,i,f)}K={type:"stylesheet",instance:K,count:1,state:me},M.set(k,K)}}}function Iy(a,i){jo.X(a,i);var c=zl;if(c&&a){var f=hr(c).hoistableScripts,M=Zp(a),k=f.get(M);k||(k=c.querySelector(qh(M)),k||(a=h({src:a,async:!0},i),(i=mi.get(M))&&zy(a,i),k=c.createElement("script"),Cr(k),et(k,"link",a),c.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},f.set(M,k))}}function Ry(a,i){jo.M(a,i);var c=zl;if(c&&a){var f=hr(c).hoistableScripts,M=Zp(a),k=f.get(M);k||(k=c.querySelector(qh(M)),k||(a=h({src:a,async:!0,type:"module"},i),(i=mi.get(M))&&zy(a,i),k=c.createElement("script"),Cr(k),et(k,"link",a),c.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},f.set(M,k))}}function Fl(a,i,c,f){var M=(M=Te.current)?ou(M):null;if(!M)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Mi(c.href),c=hr(M).hoistableStyles,f=c.get(i),f||(f={type:"style",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Mi(c.href);var k=hr(M).hoistableStyles,K=k.get(a);if(K||(M=M.ownerDocument||M,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(a,K),(k=M.querySelector(Hh(a)))&&!k._p&&(K.instance=k,K.state.loading=5),mi.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},mi.set(a,c),k||I$(M,a,c,K.state))),i&&f===null)throw Error(r(528,""));return K}if(i&&f!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zp(c),c=hr(M).hoistableScripts,f=c.get(i),f||(f={type:"script",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Mi(a){return'href="'+Qr(a)+'"'}function Hh(a){return'link[rel="stylesheet"]['+a+"]"}function Ew(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function I$(a,i,c,f){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?f.loading=1:(i=a.createElement("link"),f.preload=i,i.addEventListener("load",function(){return f.loading|=1}),i.addEventListener("error",function(){return f.loading|=2}),et(i,"link",c),Cr(i),a.head.appendChild(i))}function Zp(a){return'[src="'+Qr(a)+'"]'}function qh(a){return"script[async]"+a}function Sw(a,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var f=a.querySelector('style[data-href~="'+Qr(c.href)+'"]');if(f)return i.instance=f,Cr(f),f;var M=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Cr(f),et(f,"style",M),k_(f,c.precedence,a),i.instance=f;case"stylesheet":M=Mi(c.href);var k=a.querySelector(Hh(M));if(k)return i.state.loading|=4,i.instance=k,Cr(k),k;f=Ew(c),(M=mi.get(M))&&Ly(f,M),k=(a.ownerDocument||a).createElement("link"),Cr(k);var K=k;return K._p=new Promise(function(me,De){K.onload=me,K.onerror=De}),et(k,"link",f),i.state.loading|=4,k_(k,c.precedence,a),i.instance=k;case"script":return k=Zp(c.src),(M=a.querySelector(qh(k)))?(i.instance=M,Cr(M),M):(f=c,(M=mi.get(k))&&(f=h({},c),zy(f,M)),a=a.ownerDocument||a,M=a.createElement("script"),Cr(M),et(M,"link",f),a.head.appendChild(M),i.instance=M);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(f=i.instance,i.state.loading|=4,k_(f,c.precedence,a));return i.instance}function k_(a,i,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=f.length?f[f.length-1]:null,k=M,K=0;K<f.length;K++){var me=f[K];if(me.dataset.precedence===i)k=me;else if(k!==M)break}k?k.parentNode.insertBefore(a,k.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(a,i.firstChild))}function Ly(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function zy(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var A_=null;function Cw(a,i,c){if(A_===null){var f=new Map,M=A_=new Map;M.set(c,f)}else M=A_,f=M.get(c),f||(f=new Map,M.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),M=0;M<c.length;M++){var k=c[M];if(!(k[pr]||k[Lt]||a==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var K=k.getAttribute(i)||"";K=a+K;var me=f.get(K);me?me.push(k):f.set(K,[k])}}return f}function Pw(a,i,c){a=a.ownerDocument||a,a.head.insertBefore(c,i==="title"?a.querySelector("head > title"):null)}function R$(a,i,c){if(c===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(a=i.disabled,typeof i.precedence=="string"&&a==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function kw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function L$(a,i,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var M=Mi(f.href),k=i.querySelector(Hh(M));if(k){i=k._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(a.count++,a=O_.bind(a),i.then(a,a)),c.state.loading|=4,c.instance=k,Cr(k);return}k=i.ownerDocument||i,f=Ew(f),(M=mi.get(M))&&Ly(f,M),k=k.createElement("link"),Cr(k);var K=k;K._p=new Promise(function(me,De){K.onload=me,K.onerror=De}),et(k,"link",f),c.instance=k}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=O_.bind(a),i.addEventListener("load",c),i.addEventListener("error",c))}}var Fy=0;function z$(a,i){return a.stylesheets&&a.count===0&&D_(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var f=setTimeout(function(){if(a.stylesheets&&D_(a,a.stylesheets),a.unsuspend){var k=a.unsuspend;a.unsuspend=null,k()}},6e4+i);0<a.imgBytes&&Fy===0&&(Fy=62500*Vt());var M=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&D_(a,a.stylesheets),a.unsuspend)){var k=a.unsuspend;a.unsuspend=null,k()}},(a.imgBytes>Fy?50:800)+i);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(M)}}:null}function O_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)D_(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $_=null;function D_(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,$_=new Map,i.forEach(F$,a),$_=null,O_.call(a))}function F$(a,i){if(!(i.state.loading&4)){var c=$_.get(a);if(c)var f=c.get(null);else{c=new Map,$_.set(a,c);for(var M=a.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<M.length;k++){var K=M[k];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(c.set(K.dataset.precedence,K),f=K)}f&&c.set(null,f)}M=i.instance,K=M.getAttribute("data-precedence"),k=c.get(K)||f,k===f&&c.set(null,M),c.set(K,M),this.count++,f=O_.bind(this),M.addEventListener("load",f),M.addEventListener("error",f),k?k.parentNode.insertBefore(M,k.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(M,a.firstChild)),i.state.loading|=4}}var Xh={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function j$(a,i,c,f,M,k,K,me,De){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.hiddenUpdates=Xa(null),this.identifierPrefix=f,this.onUncaughtError=M,this.onCaughtError=k,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function Aw(a,i,c,f,M,k,K,me,De,ut,Mt,Pt){return a=new j$(a,i,c,K,De,ut,Mt,Pt,me),i=1,k===!0&&(i|=24),k=Fi(3,null,null,i),a.current=k,k.stateNode=a,i=ku(),i.refCount++,a.pooledCache=i,i.refCount++,k.memoizedState={element:f,isDehydrated:c,cache:i},Hd(k),a}function Ow(a){return a?(a=Yl,a):Yl}function $w(a,i,c,f,M,k){M=Ow(M),f.context===null?f.context=M:f.pendingContext=M,f=ss(i),f.payload={element:c},k=k===void 0?null:k,k!==null&&(f.callback=k),c=Vs(a,f,i),c!==null&&(ki(c,a,i),zc(c,a,i))}function Dw(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<i?c:i}}function jy(a,i){Dw(a,i),(a=a.alternate)&&Dw(a,i)}function Iw(a){if(a.tag===13||a.tag===31){var i=Tr(a,67108864);i!==null&&ki(i,a,67108864),jy(a,67108864)}}function Rw(a){if(a.tag===13||a.tag===31){var i=Gi();i=pe(i);var c=Tr(a,i);c!==null&&ki(c,a,i),jy(a,i)}}var I_=!0;function B$(a,i,c,f){var M=X.T;X.T=null;var k=se.p;try{se.p=2,By(a,i,c,f)}finally{se.p=k,X.T=M}}function N$(a,i,c,f){var M=X.T;X.T=null;var k=se.p;try{se.p=8,By(a,i,c,f)}finally{se.p=k,X.T=M}}function By(a,i,c,f){if(I_){var M=Ny(f);if(M===null)La(a,i,f,R_,c),zw(a,f);else if(V$(M,a,i,c,f))f.stopPropagation();else if(zw(a,f),i&4&&-1<U$.indexOf(a)){for(;M!==null;){var k=In(M);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var K=mr(k.pendingLanes);if(K!==0){var me=k;for(me.pendingLanes|=2,me.entangledLanes|=2;K;){var De=1<<31-rt(K);me.entanglements[1]|=De,K&=~De}hs(k),(vr&6)===0&&(Zu=Tt()+500,od(0))}}break;case 31:case 13:me=Tr(k,2),me!==null&&ki(me,k,2),nd(),jy(k,2)}if(k=Ny(f),k===null&&La(a,i,f,R_,c),k===M)break;M=k}M!==null&&f.stopPropagation()}else La(a,i,f,null,c)}}function Ny(a){return a=ta(a),Uy(a)}var R_=null;function Uy(a){if(R_=null,a=fr(a),a!==null){var i=s(a);if(i===null)a=null;else{var c=i.tag;if(c===13){if(a=l(i),a!==null)return a;a=null}else if(c===31){if(a=u(i),a!==null)return a;a=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return R_=a,null}function Lw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case dt:return 2;case wt:return 8;case st:case He:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var Vy=!1,su=null,lu=null,cu=null,Qh=new Map,Yh=new Map,uu=[],U$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zw(a,i){switch(a){case"focusin":case"focusout":su=null;break;case"dragenter":case"dragleave":lu=null;break;case"mouseover":case"mouseout":cu=null;break;case"pointerover":case"pointerout":Qh.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(i.pointerId)}}function Zh(a,i,c,f,M,k){return a===null||a.nativeEvent!==k?(a={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:k,targetContainers:[M]},i!==null&&(i=In(i),i!==null&&Iw(i)),a):(a.eventSystemFlags|=f,i=a.targetContainers,M!==null&&i.indexOf(M)===-1&&i.push(M),a)}function V$(a,i,c,f,M){switch(i){case"focusin":return su=Zh(su,a,i,c,f,M),!0;case"dragenter":return lu=Zh(lu,a,i,c,f,M),!0;case"mouseover":return cu=Zh(cu,a,i,c,f,M),!0;case"pointerover":var k=M.pointerId;return Qh.set(k,Zh(Qh.get(k)||null,a,i,c,f,M)),!0;case"gotpointercapture":return k=M.pointerId,Yh.set(k,Zh(Yh.get(k)||null,a,i,c,f,M)),!0}return!1}function Fw(a){var i=fr(a.target);if(i!==null){var c=s(i);if(c!==null){if(i=c.tag,i===13){if(i=l(c),i!==null){a.blockedOn=i,Xe(a.priority,function(){Rw(c)});return}}else if(i===31){if(i=u(c),i!==null){a.blockedOn=i,Xe(a.priority,function(){Rw(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function L_(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var c=Ny(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);or=f,c.target.dispatchEvent(f),or=null}else return i=In(c),i!==null&&Iw(i),a.blockedOn=c,!1;i.shift()}return!0}function jw(a,i,c){L_(a)&&c.delete(i)}function W$(){Vy=!1,su!==null&&L_(su)&&(su=null),lu!==null&&L_(lu)&&(lu=null),cu!==null&&L_(cu)&&(cu=null),Qh.forEach(jw),Yh.forEach(jw)}function z_(a,i){a.blockedOn===i&&(a.blockedOn=null,Vy||(Vy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,W$)))}var F_=null;function Bw(a){F_!==a&&(F_=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){F_===a&&(F_=null);for(var i=0;i<a.length;i+=3){var c=a[i],f=a[i+1],M=a[i+2];if(typeof f!="function"){if(Uy(f||c)===null)continue;break}var k=In(c);k!==null&&(a.splice(i,3),i-=3,mp(k,{pending:!0,data:M,method:c.method,action:f},f,M))}}))}function Jp(a){function i(De){return z_(De,a)}su!==null&&z_(su,a),lu!==null&&z_(lu,a),cu!==null&&z_(cu,a),Qh.forEach(i),Yh.forEach(i);for(var c=0;c<uu.length;c++){var f=uu[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<uu.length&&(c=uu[0],c.blockedOn===null);)Fw(c),c.blockedOn===null&&uu.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var M=c[f],k=c[f+1],K=M[Qt]||null;if(typeof k=="function")K||Bw(c);else if(K){var me=null;if(k&&k.hasAttribute("formAction")){if(M=k,K=k[Qt]||null)me=K.formAction;else if(Uy(M)!==null)continue}else me=K.action;typeof me=="function"?c[f+1]=me:(c.splice(f,3),f-=3),Bw(c)}}}function Nw(){function a(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(K){return M=K})},focusReset:"manual",scroll:"manual"})}function i(){M!==null&&(M(),M=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,M=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),M!==null&&(M(),M=null)}}}function Wy(a){this._internalRoot=a}j_.prototype.render=Wy.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,f=Gi();$w(c,f,a,i,null,null)},j_.prototype.unmount=Wy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;$w(a.current,2,null,a,null,null),nd(),i[jt]=null}};function j_(a){this._internalRoot=a}j_.prototype.unstable_scheduleHydration=function(a){if(a){var i=Se();a={blockedOn:null,target:a,priority:i};for(var c=0;c<uu.length&&i!==0&&i<uu[c].priority;c++);uu.splice(c,0,a),c===0&&Fw(a)}};var Uw=t.version;if(Uw!=="19.2.4")throw Error(r(527,Uw,"19.2.4"));se.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(i),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var G$={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B_.isDisabled&&B_.supportsFiber)try{At=B_.inject(G$),nn=B_}catch{}}return eg.createRoot=function(a,i){if(!o(a))throw Error(r(299));var c=!1,f="",M=Nm,k=Um,K=Vm;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(M=i.onUncaughtError),i.onCaughtError!==void 0&&(k=i.onCaughtError),i.onRecoverableError!==void 0&&(K=i.onRecoverableError)),i=Aw(a,1,!1,null,null,c,f,null,M,k,K,Nw),a[jt]=i.current,Xp(a),new Wy(i)},eg.hydrateRoot=function(a,i,c){if(!o(a))throw Error(r(299));var f=!1,M="",k=Nm,K=Um,me=Vm,De=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(M=c.identifierPrefix),c.onUncaughtError!==void 0&&(k=c.onUncaughtError),c.onCaughtError!==void 0&&(K=c.onCaughtError),c.onRecoverableError!==void 0&&(me=c.onRecoverableError),c.formState!==void 0&&(De=c.formState)),i=Aw(a,1,!0,i,c??null,f,M,De,k,K,me,Nw),i.context=Ow(null),c=i.current,f=Gi(),f=pe(f),M=ss(f),M.callback=null,Vs(c,M,f),c=f,i.current.lanes=c,sa(i,c),hs(i),a[jt]=i.current,Xp(a),new j_(i)},eg.version="19.2.4",eg}var Zw;function nD(){if(Zw)return Hy.exports;Zw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Hy.exports=tD(),Hy.exports}var rD=nD(),o2=i2();const N_=Od(o2);function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$g.apply(this,arguments)}var _u;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_u||(_u={}));const Jw="popstate";function aD(e){e===void 0&&(e={});function t(r,o){let{pathname:s,search:l,hash:u}=r.location;return A0("",{pathname:s,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:s2(o)}return oD(t,n,null,e)}function gi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function iD(){return Math.random().toString(36).substr(2,8)}function e1(e,t){return{usr:e.state,key:e.key,idx:t}}function A0(e,t,n,r){return n===void 0&&(n=null),$g({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pf(t):t,{state:n,key:t&&t.key||r||iD()})}function s2(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Pf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oD(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,l=o.history,u=_u.Pop,d=null,p=g();p==null&&(p=0,l.replaceState($g({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function h(){u=_u.Pop;let I=g(),T=I==null?null:I-p;p=I,d&&d({action:u,location:b.location,delta:T})}function m(I,T){u=_u.Push;let S=A0(b.location,I,T);p=g()+1;let D=e1(S,p),E=b.createHref(S);try{l.pushState(D,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(E)}s&&d&&d({action:u,location:b.location,delta:1})}function x(I,T){u=_u.Replace;let S=A0(b.location,I,T);p=g();let D=e1(S,p),E=b.createHref(S);l.replaceState(D,"",E),s&&d&&d({action:u,location:b.location,delta:0})}function _(I){let T=o.location.origin!=="null"?o.location.origin:o.location.href,S=typeof I=="string"?I:s2(I);return S=S.replace(/ $/,"%20"),gi(T,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,T)}let b={get action(){return u},get location(){return e(o,l)},listen(I){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(Jw,h),d=I,()=>{o.removeEventListener(Jw,h),d=null}},createHref(I){return t(o,I)},createURL:_,encodeLocation(I){let T=_(I);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:x,go(I){return l.go(I)}};return b}var t1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(t1||(t1={}));function sD(e,t,n){return n===void 0&&(n="/"),lD(e,t,n)}function lD(e,t,n,r){let o=typeof t=="string"?Pf(t):t,s=u2(o.pathname||"/",n);if(s==null)return null;let l=l2(e);cD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=xD(s);u=vD(l[d],p)}return u}function l2(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(s,l,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};d.relativePath.startsWith("/")&&(gi(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=Td([r,d.relativePath]),g=n.concat(d);s.children&&s.children.length>0&&(gi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),l2(s.children,t,g,p)),!(s.path==null&&!s.index)&&t.push({path:p,score:gD(p,s.index),routesMeta:g})};return e.forEach((s,l)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))o(s,l);else for(let d of c2(s.path))o(s,l,d)}),t}function c2(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let l=c2(r.join("/")),u=[];return u.push(...l.map(d=>d===""?s:[s,d].join("/"))),o&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function cD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_D(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uD=/^:[\w-]+$/,dD=3,pD=2,fD=1,mD=10,hD=-2,n1=e=>e==="*";function gD(e,t){let n=e.split("/"),r=n.length;return n.some(n1)&&(r+=hD),t&&(r+=pD),n.filter(o=>!n1(o)).reduce((o,s)=>o+(uD.test(s)?dD:s===""?fD:mD),r)}function _D(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function vD(e,t,n){let{routesMeta:r}=e,o={},s="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,g=s==="/"?t:t.slice(s.length)||"/",h=yD({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),m=d.route;if(!h)return null;Object.assign(o,h.params),l.push({params:o,pathname:Td([s,h.pathname]),pathnameBase:PD(Td([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Td([s,h.pathnameBase]))}return l}function yD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=bD(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let s=o[0],l=s.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:r.reduce((p,g,h)=>{let{paramName:m,isOptional:x}=g;if(m==="*"){let b=u[h]||"";l=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const _=u[h];return x&&!_?p[m]=void 0:p[m]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:s,pathnameBase:l,pattern:e}}function bD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function xD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function u2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const wD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MD=e=>wD.test(e);function TD(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Pf(e):e,s;if(n)if(MD(n))s=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),yx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?s=r1(n.substring(1),"/"):s=r1(n,t)}else s=t;return{pathname:s,search:kD(r),hash:AD(o)}}function r1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Yy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ED(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SD(e,t){let n=ED(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function CD(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=Pf(e):(o=$g({},e),gi(!o.pathname||!o.pathname.includes("?"),Yy("?","pathname","search",o)),gi(!o.pathname||!o.pathname.includes("#"),Yy("#","pathname","hash",o)),gi(!o.search||!o.search.includes("#"),Yy("#","search","hash",o)));let s=e===""||o.pathname==="",l=s?"/":o.pathname,u;if(l==null)u=n;else{let h=t.length-1;if(!r&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),h-=1;o.pathname=m.join("/")}u=h>=0?t[h]:"/"}let d=TD(o,u),p=l&&l!=="/"&&l.endsWith("/"),g=(s||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}const Td=e=>e.join("/").replace(/\/\/+/g,"/"),PD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function OD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const d2=["post","put","patch","delete"];new Set(d2);const $D=["get",...d2];new Set($D);function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dg.apply(this,arguments)}const bx=ne.createContext(null),DD=ne.createContext(null),Kv=ne.createContext(null),Hv=ne.createContext(null),kf=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),p2=ne.createContext(null);function qv(){return ne.useContext(Hv)!=null}function xx(){return qv()||gi(!1),ne.useContext(Hv).location}function f2(e){ne.useContext(Kv).static||ne.useLayoutEffect(e)}function ID(){let{isDataRoute:e}=ne.useContext(kf);return e?HD():RD()}function RD(){qv()||gi(!1);let e=ne.useContext(bx),{basename:t,future:n,navigator:r}=ne.useContext(Kv),{matches:o}=ne.useContext(kf),{pathname:s}=xx(),l=JSON.stringify(SD(o,n.v7_relativeSplatPath)),u=ne.useRef(!1);return f2(()=>{u.current=!0}),ne.useCallback(function(p,g){if(g===void 0&&(g={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let h=CD(p,JSON.parse(l),s,g.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Td([t,h.pathname])),(g.replace?r.replace:r.push)(h,g.state,g)},[t,r,l,s,e])}function LD(e,t){return zD(e,t)}function zD(e,t,n,r){qv()||gi(!1);let{navigator:o}=ne.useContext(Kv),{matches:s}=ne.useContext(kf),l=s[s.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=xx(),g;if(t){var h;let I=typeof t=="string"?Pf(t):t;d==="/"||(h=I.pathname)!=null&&h.startsWith(d)||gi(!1),g=I}else g=p;let m=g.pathname||"/",x=m;if(d!=="/"){let I=d.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=sD(e,{pathname:x}),b=UD(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Td([d,o.encodeLocation?o.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:Td([d,o.encodeLocation?o.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return t&&b?ne.createElement(Hv.Provider,{value:{location:Dg({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:_u.Pop}},b):b}function FD(){let e=KD(),t=OD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},t),n?ne.createElement("pre",{style:o},n):null,null)}const jD=ne.createElement(FD,null);class BD extends ne.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ne.createElement(kf.Provider,{value:this.props.routeContext},ne.createElement(p2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ND(e){let{routeContext:t,match:n,children:r}=e,o=ne.useContext(bx);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),ne.createElement(kf.Provider,{value:t},r)}function UD(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(o=n)==null?void 0:o.errors;if(u!=null){let g=l.findIndex(h=>h.route.id&&u?.[h.route.id]!==void 0);g>=0||gi(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let h=l[g];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(p=g),h.route.id){let{loaderData:m,errors:x}=n,_=h.route.loader&&m[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||_){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,h,m)=>{let x,_=!1,b=null,I=null;n&&(x=u&&h.route.id?u[h.route.id]:void 0,b=h.route.errorElement||jD,d&&(p<0&&m===0?(qD("route-fallback"),_=!0,I=null):p===m&&(_=!0,I=h.route.hydrateFallbackElement||null)));let T=t.concat(l.slice(0,m+1)),S=()=>{let D;return x?D=b:_?D=I:h.route.Component?D=ne.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=g,ne.createElement(ND,{match:h,routeContext:{outlet:g,matches:T,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?ne.createElement(BD,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}var m2=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(m2||{}),h2=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(h2||{});function VD(e){let t=ne.useContext(bx);return t||gi(!1),t}function WD(e){let t=ne.useContext(DD);return t||gi(!1),t}function GD(e){let t=ne.useContext(kf);return t||gi(!1),t}function g2(e){let t=GD(),n=t.matches[t.matches.length-1];return n.route.id||gi(!1),n.route.id}function KD(){var e;let t=ne.useContext(p2),n=WD(),r=g2();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function HD(){let{router:e}=VD(m2.UseNavigateStable),t=g2(h2.UseNavigateStable),n=ne.useRef(!1);return f2(()=>{n.current=!0}),ne.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Dg({fromRouteId:t},s)))},[e,t])}const a1={};function qD(e,t,n){a1[e]||(a1[e]=!0)}function XD(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function dv(e){gi(!1)}function QD(e){let{basename:t="/",children:n=null,location:r,navigationType:o=_u.Pop,navigator:s,static:l=!1,future:u}=e;qv()&&gi(!1);let d=t.replace(/^\/*/,"/"),p=ne.useMemo(()=>({basename:d,navigator:s,static:l,future:Dg({v7_relativeSplatPath:!1},u)}),[d,u,s,l]);typeof r=="string"&&(r=Pf(r));let{pathname:g="/",search:h="",hash:m="",state:x=null,key:_="default"}=r,b=ne.useMemo(()=>{let I=u2(g,d);return I==null?null:{location:{pathname:I,search:h,hash:m,state:x,key:_},navigationType:o}},[d,g,h,m,x,_,o]);return b==null?null:ne.createElement(Kv.Provider,{value:p},ne.createElement(Hv.Provider,{children:n,value:b}))}function YD(e){let{children:t,location:n}=e;return LD(O0(t),n)}new Promise(()=>{});function O0(e,t){t===void 0&&(t=[]);let n=[];return ne.Children.forEach(e,(r,o)=>{if(!ne.isValidElement(r))return;let s=[...t,o];if(r.type===ne.Fragment){n.push.apply(n,O0(r.props.children,s));return}r.type!==dv&&gi(!1),!r.props.index||!r.props.children||gi(!1);let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=O0(r.props.children,s)),n.push(l)}),n}const ZD="6";try{window.__reactRouterVersion=ZD}catch{}const JD="startTransition",i1=Mv[JD];function eI(e){let{basename:t,children:n,future:r,window:o}=e,s=ne.useRef();s.current==null&&(s.current=aD({window:o,v5Compat:!0}));let l=s.current,[u,d]=ne.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},g=ne.useCallback(h=>{p&&i1?i1(()=>d(h)):d(h)},[d,p]);return ne.useLayoutEffect(()=>l.listen(g),[l,g]),ne.useEffect(()=>XD(r),[r]),ne.createElement(QD,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}var o1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(o1||(o1={}));var s1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(s1||(s1={}));const Gn=e=>typeof e=="string",tg=()=>{let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n},l1=e=>e==null?"":""+e,tI=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},nI=/###/g,c1=e=>e&&e.indexOf("###")>-1?e.replace(nI,"."):e,u1=e=>!e||Gn(e),Cg=(e,t,n)=>{const r=Gn(t)?t.split("."):t;let o=0;for(;o<r.length-1;){if(u1(e))return{};const s=c1(r[o]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++o}return u1(e)?{}:{obj:e,k:c1(r[o])}},d1=(e,t,n)=>{const{obj:r,k:o}=Cg(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],l=t.slice(0,t.length-1),u=Cg(e,l,Object);for(;u.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),u=Cg(e,l,Object),u&&u.obj&&typeof u.obj[`${u.k}.${s}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${s}`]=n},rI=(e,t,n,r)=>{const{obj:o,k:s}=Cg(e,t,Object);o[s]=o[s]||[],o[s].push(n)},Tv=(e,t)=>{const{obj:n,k:r}=Cg(e,t);if(n)return n[r]},aI=(e,t,n)=>{const r=Tv(e,n);return r!==void 0?r:Tv(t,n)},_2=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?Gn(e[r])||e[r]instanceof String||Gn(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):_2(e[r],t[r],n):e[r]=t[r]);return e},ef=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var iI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const oI=e=>Gn(e)?e.replace(/[&<>"'\/]/g,t=>iI[t]):e;class sI{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const lI=[" ",",","?","!",";"],cI=new sI(20),uI=(e,t,n)=>{t=t||"",n=n||"";const r=lI.filter(l=>t.indexOf(l)<0&&n.indexOf(l)<0);if(r.length===0)return!0;const o=cI.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!o.test(e);if(!s){const l=e.indexOf(n);l>0&&!o.test(e.substring(0,l))&&(s=!0)}return s},$0=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let l,u="";for(let d=s;d<r.length;++d)if(d!==s&&(u+=n),u+=r[d],l=o[u],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<r.length-1)continue;s+=d-s+1;break}o=l}return o},Ev=e=>e&&e.replace("_","-"),dI={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Sv{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||dI,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(Gn(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Sv(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Sv(this.logger,t)}}var Wl=new Sv;class Xv{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(l=>{let[u,d]=l;for(let p=0;p<d;p++)u(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[u,d]=l;for(let p=0;p<d;p++)u.apply(u,[t,...r])})}}class p1 extends Xv{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,n],r&&(Array.isArray(r)?u.push(...r):Gn(r)&&s?u.push(...r.split(s)):u.push(r)));const d=Tv(this.data,u);return!d&&!n&&!r&&t.indexOf(".")>-1&&(t=u[0],n=u[1],r=u.slice(2).join(".")),d||!l||!Gn(r)?d:$0(this.data&&this.data[t]&&this.data[t][n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let u=[t,n];r&&(u=u.concat(l?r.split(l):r)),t.indexOf(".")>-1&&(u=t.split("."),o=n,n=u[1]),this.addNamespaces(n),d1(this.data,u,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Gn(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[t,n];t.indexOf(".")>-1&&(u=t.split("."),o=r,r=n,n=u[1]),this.addNamespaces(n);let d=Tv(this.data,u)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?_2(d,r,s):d={...d,...r},d1(this.data,u,d),l.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var v2={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,n,r,o))}),t}};const f1={};class Cv extends Xv{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),tI(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Wl.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const l=r&&t.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!uI(t,r,o);if(l&&!u){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:Gn(s)?[s]:s};const p=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(p[0])>-1)&&(s=p.shift()),t=p.join(o)}return{key:t,namespaces:Gn(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(t[t.length-1],n),d=u[u.length-1],p=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(g){const E=n.nsSeparator||this.options.nsSeparator;return o?{res:`${d}${E}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:`${d}${E}${l}`}return o?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:l}const h=this.resolve(t,n);let m=h&&h.res;const x=h&&h.usedKey||l,_=h&&h.exactUsedKey||l,b=Object.prototype.toString.apply(m),I=["[object Number]","[object Function]","[object RegExp]"],T=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,D=!Gn(m)&&typeof m!="boolean"&&typeof m!="number";if(S&&m&&D&&I.indexOf(b)<0&&!(Gn(T)&&Array.isArray(m))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,m,{...n,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return o?(h.res=E,h.usedParams=this.getUsedParamsDetails(n),h):E}if(s){const E=Array.isArray(m),C=E?[]:{},P=E?_:x;for(const w in m)if(Object.prototype.hasOwnProperty.call(m,w)){const R=`${P}${s}${w}`;C[w]=this.translate(R,{...n,joinArrays:!1,ns:u}),C[w]===R&&(C[w]=m[w])}m=C}}else if(S&&Gn(T)&&Array.isArray(m))m=m.join(T),m&&(m=this.extendTranslation(m,t,n,r));else{let E=!1,C=!1;const P=n.count!==void 0&&!Gn(n.count),w=Cv.hasDefaultValue(n),R=P?this.pluralResolver.getSuffix(p,n.count,n):"",U=n.ordinal&&P?this.pluralResolver.getSuffix(p,n.count,{ordinal:!1}):"",N=P&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),ie=N&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${U}`]||n.defaultValue;!this.isValidLookup(m)&&w&&(E=!0,m=ie),this.isValidLookup(m)||(C=!0,m=l);const q=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:m,oe=w&&ie!==m&&this.options.updateMissing;if(C||E||oe){if(this.logger.log(oe?"updateKey":"missingKey",p,d,l,oe?ie:m),s){const le=this.resolve(l,{...n,keySeparator:!1});le&&le.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ae=[];const X=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&X&&X[0])for(let le=0;le<X.length;le++)ae.push(X[le]);else this.options.saveMissingTo==="all"?ae=this.languageUtils.toResolveHierarchy(n.lng||this.language):ae.push(n.lng||this.language);const se=(le,be,Ee)=>{const Y=w&&Ee!==m?Ee:q;this.options.missingKeyHandler?this.options.missingKeyHandler(le,d,be,Y,oe,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(le,d,be,Y,oe,n),this.emit("missingKey",le,d,be,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?ae.forEach(le=>{const be=this.pluralResolver.getSuffixes(le,n);N&&n[`defaultValue${this.options.pluralSeparator}zero`]&&be.indexOf(`${this.options.pluralSeparator}zero`)<0&&be.push(`${this.options.pluralSeparator}zero`),be.forEach(Ee=>{se([le],l+Ee,n[`defaultValue${Ee}`]||ie)})}):se(ae,l,ie))}m=this.extendTranslation(m,t,n,h,r),C&&m===l&&this.options.appendNamespaceToMissingKey&&(m=`${d}:${l}`),(C||E)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${l}`:l,E?m:void 0):m=this.options.parseMissingKeyHandler(m))}return o?(h.res=m,h.usedParams=this.getUsedParamsDetails(n),h):m}extendTranslation(t,n,r,o,s){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=Gn(t)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const m=t.match(this.interpolator.nestingRegexp);g=m&&m.length}let h=r.replace&&!Gn(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||o.usedLng,r),p){const m=t.match(this.interpolator.nestingRegexp),x=m&&m.length;g<x&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var m=arguments.length,x=new Array(m),_=0;_<m;_++)x[_]=arguments[_];return s&&s[0]===x[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${n[0]}`),null):l.translate(...x,n)},r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,d=Gn(u)?[u]:u;return t!=null&&d&&d.length&&r.applyPostProcessor!==!1&&(t=v2.handle(d,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,l,u;return Gn(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(r))return;const p=this.extractFromKey(d,n),g=p.key;o=g;let h=p.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=n.count!==void 0&&!Gn(n.count),x=m&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),_=n.context!==void 0&&(Gn(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(I=>{this.isValidLookup(r)||(u=I,!f1[`${b[0]}-${I}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(u)&&(f1[`${b[0]}-${I}`]=!0,this.logger.warn(`key "${o}" for languages "${b.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(T=>{if(this.isValidLookup(r))return;l=T;const S=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(S,g,T,I,n);else{let E;m&&(E=this.pluralResolver.getSuffix(T,n.count,n));const C=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(S.push(g+E),n.ordinal&&E.indexOf(P)===0&&S.push(g+E.replace(P,this.options.pluralSeparator)),x&&S.push(g+C)),_){const w=`${g}${this.options.contextSeparator}${n.context}`;S.push(w),m&&(S.push(w+E),n.ordinal&&E.indexOf(P)===0&&S.push(w+E.replace(P,this.options.pluralSeparator)),x&&S.push(w+C))}}let D;for(;D=S.pop();)this.isValidLookup(r)||(s=D,r=this.getResource(T,I,D,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:l,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!Gn(t.replace);let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const Zy=e=>e.charAt(0).toUpperCase()+e.slice(1);class m1{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Wl.create("languageUtils")}getScriptPartFromCode(t){if(t=Ev(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Ev(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(Gn(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let o=Intl.getCanonicalLocales(t)[0];if(o&&this.options.lowerCaseLng&&(o=o.toLowerCase()),o)return o}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Zy(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Zy(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Zy(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),Gn(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=l=>{l&&(this.isSupportedCode(l)?o.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Gn(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):Gn(t)&&s(this.formatLanguageCode(t)),r.forEach(l=>{o.indexOf(l)<0&&s(this.formatLanguageCode(l))}),o}}let pI=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fI={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const mI=["v1","v2","v3"],hI=["v4"],h1={zero:0,one:1,two:2,few:3,many:4,other:5},gI=()=>{const e={};return pI.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:fI[t.fc]}})}),e};class _I{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=Wl.create("pluralResolver"),(!this.options.compatibilityJSON||hI.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=gI(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Ev(t==="dev"?"en":t),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:o})}catch{if(!t.match(/-|_/))return;const d=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(d,n)}return this.pluralRulesCache[s]=l,l}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,s)=>h1[o]-h1[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):r.numbers.map(o=>this.getSuffix(t,o,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let o=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const s=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!mI.includes(this.options.compatibilityJSON)}}const g1=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=aI(e,t,n);return!s&&o&&Gn(n)&&(s=$0(e,n,r),s===void 0&&(s=$0(t,n,r))),s},Jy=e=>e.replace(/\$/g,"$$$$");class vI{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Wl.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:l,suffix:u,suffixEscaped:d,formatSeparator:p,unescapeSuffix:g,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:x,nestingSuffix:_,nestingSuffixEscaped:b,nestingOptionsSeparator:I,maxReplaces:T,alwaysFormat:S}=t.interpolation;this.escape=n!==void 0?n:oI,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?ef(s):l||"{{",this.suffix=u?ef(u):d||"}}",this.formatSeparator=p||",",this.unescapePrefix=g?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=m?ef(m):x||ef("$t("),this.nestingSuffix=_?ef(_):b||ef(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=T||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,l,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=x=>{if(x.indexOf(this.formatSeparator)<0){const T=g1(n,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...o,...n,interpolationkey:x}):T}const _=x.split(this.formatSeparator),b=_.shift().trim(),I=_.join(this.formatSeparator).trim();return this.format(g1(n,d,b,this.options.keySeparator,this.options.ignoreJSONStructure),I,r,{...o,...n,interpolationkey:b})};this.resetRegExp();const g=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>Jy(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?Jy(this.escape(x)):Jy(x)}].forEach(x=>{for(u=0;s=x.regex.exec(t);){const _=s[1].trim();if(l=p(_),l===void 0)if(typeof g=="function"){const I=g(t,s,o);l=Gn(I)?I:""}else if(o&&Object.prototype.hasOwnProperty.call(o,_))l="";else if(h){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${t}`),l="";else!Gn(l)&&!this.useRawValueToEscape&&(l=l1(l));const b=x.safeValue(l);if(t=t.replace(s[0],b),h?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=s[0].length):x.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,l;const u=(d,p)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const h=d.split(new RegExp(`${g}[ ]*{`));let m=`{${h[1]}`;d=h[0],m=this.interpolate(m,l);const x=m.match(/'/g),_=m.match(/"/g);(x&&x.length%2===0&&!_||_.length%2!==0)&&(m=m.replace(/'/g,'"'));try{l=JSON.parse(m),p&&(l={...p,...l})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,b),`${d}${g}${m}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;o=this.nestingRegexp.exec(t);){let d=[];l={...r},l=l.replace&&!Gn(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let p=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const g=o[1].split(this.formatSeparator).map(h=>h.trim());o[1]=g.shift(),d=g,p=!0}if(s=n(u.call(this,o[1].trim(),l),l),s&&o[0]===t&&!Gn(s))return s;Gn(s)||(s=l1(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),p&&(s=d.reduce((g,h)=>this.format(g,h,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}const yI=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(l=>{if(l){const[u,...d]=l.split(":"),p=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();n[g]||(n[g]=p),p==="false"&&(n[g]=!1),p==="true"&&(n[g]=!0),isNaN(p)||(n[g]=parseInt(p,10))}})}return{formatName:t,formatOptions:n}},tf=e=>{const t={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});const l=r+JSON.stringify(s);let u=t[l];return u||(u=e(Ev(r),o),t[l]=u),u(n)}};class bI{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Wl.create("formatter"),this.options=t,this.formats={number:tf((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:tf((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:tf((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:tf((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:tf((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=tf(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(u=>u.indexOf(")")>-1)){const u=s.findIndex(d=>d.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,u)].join(this.formatSeparator)}return s.reduce((u,d)=>{const{formatName:p,formatOptions:g}=yI(d);if(this.formats[p]){let h=u;try{const m=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},x=m.locale||m.lng||o.locale||o.lng||r;h=this.formats[p](u,x,{...g,...o,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${p}`);return u},t)}}const xI=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class wI extends Xv{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=Wl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(t,n,r,o){const s={},l={},u={},d={};return t.forEach(p=>{let g=!0;n.forEach(h=>{const m=`${p}|${h}`;!r.reload&&this.store.hasResourceBundle(p,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?l[m]===void 0&&(l[m]=!0):(this.state[m]=1,g=!1,l[m]===void 0&&(l[m]=!0),s[m]===void 0&&(s[m]=!0),d[h]===void 0&&(d[h]=!0)))}),g||(u[p]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(t,n,r){const o=t.split("|"),s=o[0],l=o[1];n&&this.emit("failedLoading",s,l,n),!n&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const u={};this.queue.forEach(d=>{rI(d.loaded,[s],l),xI(d,t),n&&d.errors.push(n),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(p=>{u[p]||(u[p]={});const g=d.loaded[p];g.length&&g.forEach(h=>{u[p][h]===void 0&&(u[p][h]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:l});return}this.readingCalls++;const u=(p,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(p&&g&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,l)},s);return}l(p,g)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const p=d(t,n);p&&typeof p.then=="function"?p.then(g=>u(null,g)).catch(u):u(null,p)}catch(p){u(p)}return}return d(t,n,u)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();Gn(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Gn(n)&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(l,u)=>{l&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,l),!l&&u&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,u),this.loaded(t,l,u)})}saveMissing(t,n,r,o,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const d={...l,isUpdate:s},p=this.backend.create.bind(this.backend);if(p.length<6)try{let g;p.length===5?g=p(t,n,r,o,d):g=p(t,n,r,o),g&&typeof g.then=="function"?g.then(h=>u(null,h)).catch(u):u(null,g)}catch(g){u(g)}else p(t,n,r,o,u,d)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}const _1=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Gn(e[1])&&(t.defaultValue=e[1]),Gn(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),v1=e=>(Gn(e.ns)&&(e.ns=[e.ns]),Gn(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Gn(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),U_=()=>{},MI=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Ig extends Xv{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=v1(t),this.services={},this.logger=Wl,this.modules={external:[]},MI(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(Gn(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=_1();this.options={...o,...this.options,...v1(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Wl.init(s(this.modules.logger),this.options):Wl.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=bI);const h=new m1(this.options);this.store=new p1(this.options.resources,this.options);const m=this.services;m.logger=Wl,m.resourceStore=this.store,m.languageUtils=h,m.pluralResolver=new _I(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(m.formatter=s(g),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new vI(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new wI(s(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(x){for(var _=arguments.length,b=new Array(_>1?_-1:0),I=1;I<_;I++)b[I-1]=arguments[I];t.emit(x,...b)}),this.modules.languageDetector&&(m.languageDetector=s(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=s(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Cv(this.services,this.options),this.translator.on("*",function(x){for(var _=arguments.length,b=new Array(_>1?_-1:0),I=1;I<_;I++)b[I-1]=arguments[I];t.emit(x,...b)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,r||(r=U_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return t.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return t.store[g](...arguments),t}});const d=tg(),p=()=>{const g=(h,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(m),r(h,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?p():setTimeout(p,0),d}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U_;const o=Gn(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(p=>{p!=="cimode"&&s.indexOf(p)<0&&s.push(p)})};o?l(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload&&this.options.preload.forEach(u=>l(u)),this.services.backendConnector.load(s,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(t,n,r){const o=tg();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=U_),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&v2.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=tg();this.emit("languageChanging",t);const s=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},l=(d,p)=>{p?(s(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(d,function(){return r.t(...arguments)})},u=d=>{!t&&!d&&this.services.languageDetector&&(d=[]);const p=Gn(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);p&&(this.language||s(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(p)),this.loadResources(p,g=>{l(g,p)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(t),o}getFixedT(t,n,r){var o=this;const s=function(l,u){let d;if(typeof u!="object"){for(var p=arguments.length,g=new Array(p>2?p-2:0),h=2;h<p;h++)g[h-2]=arguments[h];d=o.options.overloadTranslationOptionHandler([l,u].concat(g))}else d={...u};d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const m=o.options.keySeparator||".";let x;return d.keyPrefix&&Array.isArray(l)?x=l.map(_=>`${d.keyPrefix}${m}${_}`):x=d.keyPrefix?`${d.keyPrefix}${m}${l}`:l,o.t(x,d)};return Gn(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(u,d)=>{const p=this.services.backendConnector.state[`${u}|${d}`];return p===-1||p===0||p===2};if(n.precheck){const u=n.precheck(this,l);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,t)&&(!o||l(s,t)))}loadNamespaces(t,n){const r=tg();return this.options.ns?(Gn(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=tg();Gn(t)&&(t=[t]);const o=this.options.preload||[],s=t.filter(l=>o.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=o.concat(s),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new m1(_1());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Ig(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U_;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new Ig(o);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(u=>{s[u]=this[u]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new p1(this.store.data,o),s.services.resourceStore=s.store),s.translator=new Cv(s.services,o),s.translator.on("*",function(u){for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];s.emit(u,...p)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Xi=Ig.createInstance();Xi.createInstance=Ig.createInstance;Xi.createInstance;Xi.dir;Xi.init;Xi.loadResources;Xi.reloadResources;Xi.use;Xi.changeLanguage;Xi.getFixedT;Xi.t;Xi.exists;Xi.setDefaultNamespace;Xi.hasLoadedNamespace;Xi.loadNamespaces;Xi.loadLanguages;const TI=(e,t,n,r)=>{const o=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Ed(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},y1={},D0=(e,t,n,r)=>{Ed(n)&&y1[n]||(Ed(n)&&(y1[n]=new Date),TI(e,t,n,r))},y2=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},I0=(e,t,n)=>{e.loadNamespaces(t,y2(e,n))},b1=(e,t,n,r)=>{if(Ed(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return I0(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,y2(e,r))},EI=(e,t,n={})=>!t.languages||!t.languages.length?(D0(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),Ed=e=>typeof e=="string",SI=e=>typeof e=="object"&&e!==null,CI=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PI={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},kI=e=>PI[e],AI=e=>e.replace(CI,kI);let R0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:AI};const OI=(e={})=>{R0={...R0,...e}},$I=()=>R0;let b2;const DI=e=>{b2=e},II=()=>b2,RI={type:"3rdParty",init(e){OI(e.options.react),DI(e)}},LI=ne.createContext();class zI{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const FI=(e,t)=>{const n=ne.useRef();return ne.useEffect(()=>{n.current=e},[e,t]),n.current},x2=(e,t,n,r)=>e.getFixedT(t,n,r),jI=(e,t,n,r)=>ne.useCallback(x2(e,t,n,r),[e,t,n,r]),Qv=(e,t={})=>{const{i18n:n}=t,{i18n:r,defaultNS:o}=ne.useContext(LI)||{},s=n||r||II();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new zI),!s){D0(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(P,w)=>Ed(w)?w:SI(w)&&Ed(w.defaultValue)?w.defaultValue:Array.isArray(P)?P[P.length-1]:P,C=[E,{},!1];return C.t=E,C.i18n={},C.ready=!1,C}s.options.react?.wait&&D0(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...$I(),...s.options.react,...t},{useSuspense:u,keyPrefix:d}=l;let p=o||s.options?.defaultNS;p=Ed(p)?[p]:p||["translation"],s.reportNamespaces.addUsedNamespaces?.(p);const g=(s.isInitialized||s.initializedStoreOnce)&&p.every(E=>EI(E,s,l)),h=jI(s,t.lng||null,l.nsMode==="fallback"?p:p[0],d),m=()=>h,x=()=>x2(s,t.lng||null,l.nsMode==="fallback"?p:p[0],d),[_,b]=ne.useState(m);let I=p.join();t.lng&&(I=`${t.lng}${I}`);const T=FI(I),S=ne.useRef(!0);ne.useEffect(()=>{const{bindI18n:E,bindI18nStore:C}=l;S.current=!0,!g&&!u&&(t.lng?b1(s,t.lng,p,()=>{S.current&&b(x)}):I0(s,p,()=>{S.current&&b(x)})),g&&T&&T!==I&&S.current&&b(x);const P=()=>{S.current&&b(x)};return E&&s?.on(E,P),C&&s?.store.on(C,P),()=>{S.current=!1,s&&E&&E?.split(" ").forEach(w=>s.off(w,P)),C&&s&&C.split(" ").forEach(w=>s.store.off(w,P))}},[s,I]),ne.useEffect(()=>{S.current&&g&&b(m)},[s,d,g]);const D=[_,s,g];if(D.t=_,D.i18n=s,D.ready=g,g||!g&&!u)return D;throw new Promise(E=>{t.lng?b1(s,t.lng,p,()=>E()):I0(s,p,()=>E())})},BI={translation:{appName:"Mark Six Lucky Scan",tabs:{home:"Home",history:"History",about:"About"},upload:{title:"Upload Ticket",dropzone:"Drag & drop a ticket image, or click to select",scanning:"Running AI OCR... may take 515 seconds on first use",modelLoading:"Loading AI model (TrOCR)...",scanComplete:"Scan Complete",rescan:"Rescan",save:"Save Record",saved:"Record saved!",multipleBets:"Multiple bets detected  select one to verify:",selectBet:"Select Bet",betNumber:"Bet {{number}}",useNumbers:"Use These Numbers",privacyNote:" All processing happens in your browser  no image is uploaded to any server."},fields:{drawNumber:"Draw Number",drawDate:"Draw Date",numbers:"Selected Numbers",extraNumber:"Extra Number",units:"Units/Bets",amount:"Amount (HK$)",note:"Note"},history:{title:"Betting History",noRecords:"No records yet. Upload a ticket to get started.",delete:"Delete",edit:"Edit",exportJson:"Export JSON",importJson:"Import JSON",confirmDelete:"Delete this record?",imported:"Records imported successfully!"},results:{title:"Draw Results",fetch:"Check Results",fetching:"Fetching results...",loadLatest:"Load Latest Results",loadingLatest:"Fetching latest results...",loadedFromCache:"Results loaded from cache",fetchFailed:"Failed to load real results  using sample data",notFound:"Results not found for this draw.",winningNumbers:"Winning Numbers",extraNumber:"Extra Number",drawDate:"Draw Date",matches:"Matches",prizeCategory:"Prize Category",noMatch:"No prize",disclaimer:"Unofficial results fetched from HKJC  always verify on official site https://bet.hkjc.com/marksix",matchedNumbers:"Matched Numbers",networkError:"Network error. Check connection or try again.",corsWarning:"Due to CORS restrictions, results may not load directly. Try a CORS proxy or check results manually."},prizes:{first:"1st Prize (6 matches)",second:"2nd Prize (5 + extra)",third:"3rd Prize (5 matches)",fourth:"4th Prize (4 + extra)",fifth:"5th Prize (4 matches)",sixth:"6th Prize (3 + extra)",seventh:"7th Prize (3 matches)"},about:{title:"About",description:"Mark Six Lucky Scan is a privacy-focused, client-side lottery ticket checker. All processing happens in your browser  no data is sent to any server.",features:"Features",featureList:["AI OCR ticket scanning with TrOCR (microsoft/trocr-base-printed)","Local storage using IndexedDB","Draw result comparison","Multi-language support (EN/)","Dark mode","PWA  works offline"],disclaimer:"This app is unofficial and not affiliated with HKJC. Always verify results on the official website."},common:{cancel:"Cancel",confirm:"Confirm",close:"Close",error:"Error",success:"Success",loading:"Loading...",darkMode:"Dark Mode",language:"Language"}}},NI={translation:{appName:"",tabs:{home:"",history:"",about:""},upload:{title:"",dropzone:"",scanning:" AI OCR 515 ",modelLoading:" AI TrOCR",scanComplete:"",rescan:"",save:"",saved:"",multipleBets:"",selectBet:"",betNumber:"{{number}}",useNumbers:"",privacyNote:" "},fields:{drawNumber:"",drawDate:"",numbers:"",extraNumber:"",units:"",amount:" (HK$)",note:""},history:{title:"",noRecords:"",delete:"",edit:"",exportJson:" JSON",importJson:" JSON",confirmDelete:"",imported:""},results:{title:"",fetch:"",fetching:"...",loadLatest:"",loadingLatest:"...",loadedFromCache:"",fetchFailed:"",notFound:"",winningNumbers:"",extraNumber:"",drawDate:"",matches:"",prizeCategory:"",noMatch:"",disclaimer:" https://bet.hkjc.com/marksix ",matchedNumbers:"",networkError:"",corsWarning:" CORS  CORS "},prizes:{first:"6",second:"5+",third:"5",fourth:"4+",fifth:"4",sixth:"3+",seventh:"3"},about:{title:"",description:"",features:"",featureList:[" TrOCRmicrosoft/trocr-base-printedAI "," IndexedDB ","","EN/","","PWA"],disclaimer:""},common:{cancel:"",confirm:"",close:"",error:"",success:"",loading:"...",darkMode:"",language:""}}};Xi.use(RI).init({resources:{en:BI,zh:NI},lng:localStorage.getItem("lang")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const Rg={black:"#000",white:"#fff"},nf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},rf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},af={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},of={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},sf={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},ng={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},UI={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Sd(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const VI=Object.freeze(Object.defineProperty({__proto__:null,default:Sd},Symbol.toStringTag,{value:"Module"})),bf="$$material";function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(null,arguments)}function Zt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function WI(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function GI(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KI=(function(){function e(n){var r=this;this._insertTag=function(o){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,s),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(GI(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var s=WI(o);try{s.insertRule(r,s.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e})(),Hi="-ms-",Pv="-moz-",Br="-webkit-",w2="comm",wx="rule",Mx="decl",HI="@import",M2="@keyframes",qI="@layer",XI=Math.abs,Yv=String.fromCharCode,QI=Object.assign;function YI(e,t){return Oi(e,0)^45?(((t<<2^Oi(e,0))<<2^Oi(e,1))<<2^Oi(e,2))<<2^Oi(e,3):0}function T2(e){return e.trim()}function ZI(e,t){return(e=t.exec(e))?e[0]:e}function Ur(e,t,n){return e.replace(t,n)}function L0(e,t){return e.indexOf(t)}function Oi(e,t){return e.charCodeAt(t)|0}function Lg(e,t,n){return e.slice(t,n)}function Ul(e){return e.length}function Tx(e){return e.length}function V_(e,t){return t.push(e),e}function JI(e,t){return e.map(t).join("")}var Zv=1,xf=1,E2=0,go=0,si=0,Af="";function Jv(e,t,n,r,o,s,l){return{value:e,root:t,parent:n,type:r,props:o,children:s,line:Zv,column:xf,length:l,return:""}}function rg(e,t){return QI(Jv("",null,null,"",null,null,0),e,{length:-e.length},t)}function e3(){return si}function t3(){return si=go>0?Oi(Af,--go):0,xf--,si===10&&(xf=1,Zv--),si}function Wo(){return si=go<E2?Oi(Af,go++):0,xf++,si===10&&(xf=1,Zv++),si}function Gl(){return Oi(Af,go)}function pv(){return go}function Kg(e,t){return Lg(Af,e,t)}function zg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function S2(e){return Zv=xf=1,E2=Ul(Af=e),go=0,[]}function C2(e){return Af="",e}function fv(e){return T2(Kg(go-1,z0(e===91?e+2:e===40?e+1:e)))}function n3(e){for(;(si=Gl())&&si<33;)Wo();return zg(e)>2||zg(si)>3?"":" "}function r3(e,t){for(;--t&&Wo()&&!(si<48||si>102||si>57&&si<65||si>70&&si<97););return Kg(e,pv()+(t<6&&Gl()==32&&Wo()==32))}function z0(e){for(;Wo();)switch(si){case e:return go;case 34:case 39:e!==34&&e!==39&&z0(si);break;case 40:e===41&&z0(e);break;case 92:Wo();break}return go}function a3(e,t){for(;Wo()&&e+si!==57;)if(e+si===84&&Gl()===47)break;return"/*"+Kg(t,go-1)+"*"+Yv(e===47?e:Wo())}function i3(e){for(;!zg(Gl());)Wo();return Kg(e,go)}function o3(e){return C2(mv("",null,null,null,[""],e=S2(e),0,[0],e))}function mv(e,t,n,r,o,s,l,u,d){for(var p=0,g=0,h=l,m=0,x=0,_=0,b=1,I=1,T=1,S=0,D="",E=o,C=s,P=r,w=D;I;)switch(_=S,S=Wo()){case 40:if(_!=108&&Oi(w,h-1)==58){L0(w+=Ur(fv(S),"&","&\f"),"&\f")!=-1&&(T=-1);break}case 34:case 39:case 91:w+=fv(S);break;case 9:case 10:case 13:case 32:w+=n3(_);break;case 92:w+=r3(pv()-1,7);continue;case 47:switch(Gl()){case 42:case 47:V_(s3(a3(Wo(),pv()),t,n),d);break;default:w+="/"}break;case 123*b:u[p++]=Ul(w)*T;case 125*b:case 59:case 0:switch(S){case 0:case 125:I=0;case 59+g:T==-1&&(w=Ur(w,/\f/g,"")),x>0&&Ul(w)-h&&V_(x>32?w1(w+";",r,n,h-1):w1(Ur(w," ","")+";",r,n,h-2),d);break;case 59:w+=";";default:if(V_(P=x1(w,t,n,p,g,o,u,D,E=[],C=[],h),s),S===123)if(g===0)mv(w,t,P,P,E,s,h,u,C);else switch(m===99&&Oi(w,3)===110?100:m){case 100:case 108:case 109:case 115:mv(e,P,P,r&&V_(x1(e,P,P,0,0,o,u,D,o,E=[],h),C),o,C,h,u,r?E:C);break;default:mv(w,P,P,P,[""],C,0,u,C)}}p=g=x=0,b=T=1,D=w="",h=l;break;case 58:h=1+Ul(w),x=_;default:if(b<1){if(S==123)--b;else if(S==125&&b++==0&&t3()==125)continue}switch(w+=Yv(S),S*b){case 38:T=g>0?1:(w+="\f",-1);break;case 44:u[p++]=(Ul(w)-1)*T,T=1;break;case 64:Gl()===45&&(w+=fv(Wo())),m=Gl(),g=h=Ul(D=w+=i3(pv())),S++;break;case 45:_===45&&Ul(w)==2&&(b=0)}}return s}function x1(e,t,n,r,o,s,l,u,d,p,g){for(var h=o-1,m=o===0?s:[""],x=Tx(m),_=0,b=0,I=0;_<r;++_)for(var T=0,S=Lg(e,h+1,h=XI(b=l[_])),D=e;T<x;++T)(D=T2(b>0?m[T]+" "+S:Ur(S,/&\f/g,m[T])))&&(d[I++]=D);return Jv(e,t,n,o===0?wx:u,d,p,g)}function s3(e,t,n){return Jv(e,t,n,w2,Yv(e3()),Lg(e,2,-2),0)}function w1(e,t,n,r){return Jv(e,t,n,Mx,Lg(e,0,r),Lg(e,r+1,-1),r)}function _f(e,t){for(var n="",r=Tx(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function l3(e,t,n,r){switch(e.type){case qI:if(e.children.length)break;case HI:case Mx:return e.return=e.return||e.value;case w2:return"";case M2:return e.return=e.value+"{"+_f(e.children,r)+"}";case wx:e.value=e.props.join(",")}return Ul(n=_f(e.children,r))?e.return=e.value+"{"+n+"}":""}function c3(e){var t=Tx(e);return function(n,r,o,s){for(var l="",u=0;u<t;u++)l+=e[u](n,r,o,s)||"";return l}}function u3(e){return function(t){t.root||(t=t.return)&&e(t)}}function P2(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var d3=function(t,n,r){for(var o=0,s=0;o=s,s=Gl(),o===38&&s===12&&(n[r]=1),!zg(s);)Wo();return Kg(t,go)},p3=function(t,n){var r=-1,o=44;do switch(zg(o)){case 0:o===38&&Gl()===12&&(n[r]=1),t[r]+=d3(go-1,n,r);break;case 2:t[r]+=fv(o);break;case 4:if(o===44){t[++r]=Gl()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=Yv(o)}while(o=Wo());return t},f3=function(t,n){return C2(p3(S2(t),n))},M1=new WeakMap,m3=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,o=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!M1.get(r))&&!o){M1.set(t,!0);for(var s=[],l=f3(n,s),u=r.props,d=0,p=0;d<l.length;d++)for(var g=0;g<u.length;g++,p++)t.props[p]=s[d]?l[d].replace(/&\f/g,u[g]):u[g]+" "+l[d]}}},h3=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function k2(e,t){switch(YI(e,t)){case 5103:return Br+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+e+Pv+e+Hi+e+e;case 6828:case 4268:return Br+e+Hi+e+e;case 6165:return Br+e+Hi+"flex-"+e+e;case 5187:return Br+e+Ur(e,/(\w+).+(:[^]+)/,Br+"box-$1$2"+Hi+"flex-$1$2")+e;case 5443:return Br+e+Hi+"flex-item-"+Ur(e,/flex-|-self/,"")+e;case 4675:return Br+e+Hi+"flex-line-pack"+Ur(e,/align-content|flex-|-self/,"")+e;case 5548:return Br+e+Hi+Ur(e,"shrink","negative")+e;case 5292:return Br+e+Hi+Ur(e,"basis","preferred-size")+e;case 6060:return Br+"box-"+Ur(e,"-grow","")+Br+e+Hi+Ur(e,"grow","positive")+e;case 4554:return Br+Ur(e,/([^-])(transform)/g,"$1"+Br+"$2")+e;case 6187:return Ur(Ur(Ur(e,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),e,"")+e;case 5495:case 3959:return Ur(e,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return Ur(Ur(e,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+Hi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+e+e;case 4095:case 3583:case 4068:case 2532:return Ur(e,/(.+)-inline(.+)/,Br+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ul(e)-1-t>6)switch(Oi(e,t+1)){case 109:if(Oi(e,t+4)!==45)break;case 102:return Ur(e,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+Pv+(Oi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~L0(e,"stretch")?k2(Ur(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Oi(e,t+1)!==115)break;case 6444:switch(Oi(e,Ul(e)-3-(~L0(e,"!important")&&10))){case 107:return Ur(e,":",":"+Br)+e;case 101:return Ur(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Br+(Oi(e,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+Hi+"$2box$3")+e}break;case 5936:switch(Oi(e,t+11)){case 114:return Br+e+Hi+Ur(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Br+e+Hi+Ur(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Br+e+Hi+Ur(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Br+e+Hi+e+e}return e}var g3=function(t,n,r,o){if(t.length>-1&&!t.return)switch(t.type){case Mx:t.return=k2(t.value,t.length);break;case M2:return _f([rg(t,{value:Ur(t.value,"@","@"+Br)})],o);case wx:if(t.length)return JI(t.props,function(s){switch(ZI(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _f([rg(t,{props:[Ur(s,/:(read-\w+)/,":"+Pv+"$1")]})],o);case"::placeholder":return _f([rg(t,{props:[Ur(s,/:(plac\w+)/,":"+Br+"input-$1")]}),rg(t,{props:[Ur(s,/:(plac\w+)/,":"+Pv+"$1")]}),rg(t,{props:[Ur(s,/:(plac\w+)/,Hi+"input-$1")]})],o)}return""})}},_3=[g3],A2=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var I=b.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var o=t.stylisPlugins||_3,s={},l,u=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var I=b.getAttribute("data-emotion").split(" "),T=1;T<I.length;T++)s[I[T]]=!0;u.push(b)});var d,p=[m3,h3];{var g,h=[l3,u3(function(b){g.insert(b)})],m=c3(p.concat(o,h)),x=function(I){return _f(o3(I),m)};d=function(I,T,S,D){g=S,x(I?I+"{"+T.styles+"}":T.styles),D&&(_.inserted[T.name]=!0)}}var _={key:n,sheet:new KI({key:n,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:d};return _.sheet.hydrate(u),_},eb={exports:{}},Xr={};var T1;function v3(){if(T1)return Xr;T1=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,_=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function D(C){if(typeof C=="object"&&C!==null){var P=C.$$typeof;switch(P){case t:switch(C=C.type,C){case d:case p:case r:case s:case o:case h:return C;default:switch(C=C&&C.$$typeof,C){case u:case g:case _:case x:case l:return C;default:return P}}case n:return P}}}function E(C){return D(C)===p}return Xr.AsyncMode=d,Xr.ConcurrentMode=p,Xr.ContextConsumer=u,Xr.ContextProvider=l,Xr.Element=t,Xr.ForwardRef=g,Xr.Fragment=r,Xr.Lazy=_,Xr.Memo=x,Xr.Portal=n,Xr.Profiler=s,Xr.StrictMode=o,Xr.Suspense=h,Xr.isAsyncMode=function(C){return E(C)||D(C)===d},Xr.isConcurrentMode=E,Xr.isContextConsumer=function(C){return D(C)===u},Xr.isContextProvider=function(C){return D(C)===l},Xr.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},Xr.isForwardRef=function(C){return D(C)===g},Xr.isFragment=function(C){return D(C)===r},Xr.isLazy=function(C){return D(C)===_},Xr.isMemo=function(C){return D(C)===x},Xr.isPortal=function(C){return D(C)===n},Xr.isProfiler=function(C){return D(C)===s},Xr.isStrictMode=function(C){return D(C)===o},Xr.isSuspense=function(C){return D(C)===h},Xr.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===p||C===s||C===o||C===h||C===m||typeof C=="object"&&C!==null&&(C.$$typeof===_||C.$$typeof===x||C.$$typeof===l||C.$$typeof===u||C.$$typeof===g||C.$$typeof===I||C.$$typeof===T||C.$$typeof===S||C.$$typeof===b)},Xr.typeOf=D,Xr}var E1;function y3(){return E1||(E1=1,eb.exports=v3()),eb.exports}var tb,S1;function b3(){if(S1)return tb;S1=1;var e=y3(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=o;function l(_){return e.isMemo(_)?o:s[_.$$typeof]||t}var u=Object.defineProperty,d=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function x(_,b,I){if(typeof b!="string"){if(m){var T=h(b);T&&T!==m&&x(_,T,I)}var S=d(b);p&&(S=S.concat(p(b)));for(var D=l(_),E=l(b),C=0;C<S.length;++C){var P=S[C];if(!n[P]&&!(I&&I[P])&&!(E&&E[P])&&!(D&&D[P])){var w=g(b,P);try{u(_,P,w)}catch{}}}}return _}return tb=x,tb}b3();var x3=!0;function O2(e,t,n){var r="";return n.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(r+=o+" ")}),r}var Ex=function(t,n,r){var o=t.key+"-"+n.name;(r===!1||x3===!1)&&t.registered[o]===void 0&&(t.registered[o]=n.styles)},Sx=function(t,n,r){Ex(t,n,r);var o=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+o:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function w3(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var M3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},T3=/[A-Z]|^ms/g,E3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$2=function(t){return t.charCodeAt(1)===45},C1=function(t){return t!=null&&typeof t!="boolean"},nb=P2(function(e){return $2(e)?e:e.replace(T3,"-$&").toLowerCase()}),P1=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(E3,function(r,o,s){return Vl={name:o,styles:s,next:Vl},o})}return M3[t]!==1&&!$2(t)&&typeof n=="number"&&n!==0?n+"px":n};function Fg(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return Vl={name:o.name,styles:o.styles,next:Vl},o.name;var s=n;if(s.styles!==void 0){var l=s.next;if(l!==void 0)for(;l!==void 0;)Vl={name:l.name,styles:l.styles,next:Vl},l=l.next;var u=s.styles+";";return u}return S3(e,t,n)}case"function":{if(e!==void 0){var d=Vl,p=n(e);return Vl=d,Fg(e,t,p)}break}}var g=n;if(t==null)return g;var h=t[g];return h!==void 0?h:g}function S3(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Fg(e,t,n[o])+";";else for(var s in n){var l=n[s];if(typeof l!="object"){var u=l;t!=null&&t[u]!==void 0?r+=s+"{"+t[u]+"}":C1(u)&&(r+=nb(s)+":"+P1(s,u)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var d=0;d<l.length;d++)C1(l[d])&&(r+=nb(s)+":"+P1(s,l[d])+";");else{var p=Fg(e,t,l);switch(s){case"animation":case"animationName":{r+=nb(s)+":"+p+";";break}default:r+=s+"{"+p+"}"}}}return r}var k1=/label:\s*([^\s;{]+)\s*(;|$)/g,Vl;function Hg(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";Vl=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,o+=Fg(n,t,s);else{var l=s;o+=l[0]}for(var u=1;u<e.length;u++)if(o+=Fg(n,t,e[u]),r){var d=s;o+=d[u]}k1.lastIndex=0;for(var p="",g;(g=k1.exec(o))!==null;)p+="-"+g[1];var h=w3(o)+p;return{name:h,styles:o,next:Vl}}var C3=function(t){return t()},D2=Mv.useInsertionEffect?Mv.useInsertionEffect:!1,I2=D2||C3,A1=D2||ne.useLayoutEffect,R2=ne.createContext(typeof HTMLElement<"u"?A2({key:"css"}):null),P3=R2.Provider,Cx=function(t){return ne.forwardRef(function(n,r){var o=ne.useContext(R2);return t(n,o,r)})},Of=ne.createContext({}),Px={}.hasOwnProperty,F0="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",k3=function(t,n){var r={};for(var o in n)Px.call(n,o)&&(r[o]=n[o]);return r[F0]=t,r},A3=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return Ex(n,r,o),I2(function(){return Sx(n,r,o)}),null},O3=Cx(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var o=e[F0],s=[r],l="";typeof e.className=="string"?l=O2(t.registered,s,e.className):e.className!=null&&(l=e.className+" ");var u=Hg(s,void 0,ne.useContext(Of));l+=t.key+"-"+u.name;var d={};for(var p in e)Px.call(e,p)&&p!=="css"&&p!==F0&&(d[p]=e[p]);return d.className=l,n&&(d.ref=n),ne.createElement(ne.Fragment,null,ne.createElement(A3,{cache:t,serialized:u,isStringTag:typeof o=="string"}),ne.createElement(o,d))}),$3=O3,O1=function(t,n){var r=arguments;if(n==null||!Px.call(n,"css"))return ne.createElement.apply(void 0,r);var o=r.length,s=new Array(o);s[0]=$3,s[1]=k3(t,n);for(var l=2;l<o;l++)s[l]=r[l];return ne.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(O1||(O1={}));var D3=Cx(function(e,t){var n=e.styles,r=Hg([n],void 0,ne.useContext(Of)),o=ne.useRef();return A1(function(){var s=t.key+"-global",l=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,d=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),d!==null&&(u=!0,d.setAttribute("data-emotion",s),l.hydrate([d])),o.current=[l,u],function(){l.flush()}},[t]),A1(function(){var s=o.current,l=s[0],u=s[1];if(u){s[1]=!1;return}if(r.next!==void 0&&Sx(t,r.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}t.insert("",r,l,!1)},[t,r.name]),null});function qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hg(t)}function $d(){var e=qg.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var I3=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,R3=P2(function(e){return I3.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),L3=R3,z3=function(t){return t!=="theme"},$1=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?L3:z3},D1=function(t,n,r){var o;if(n){var s=n.shouldForwardProp;o=t.__emotion_forwardProp&&s?function(l){return t.__emotion_forwardProp(l)&&s(l)}:s}return typeof o!="function"&&r&&(o=t.__emotion_forwardProp),o},F3=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return Ex(n,r,o),I2(function(){return Sx(n,r,o)}),null},j3=function e(t,n){var r=t.__emotion_real===t,o=r&&t.__emotion_base||t,s,l;n!==void 0&&(s=n.label,l=n.target);var u=D1(t,n,r),d=u||$1(o),p=!d("as");return function(){var g=arguments,h=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),g[0]==null||g[0].raw===void 0)h.push.apply(h,g);else{var m=g[0];h.push(m[0]);for(var x=g.length,_=1;_<x;_++)h.push(g[_],m[_])}var b=Cx(function(I,T,S){var D=p&&I.as||o,E="",C=[],P=I;if(I.theme==null){P={};for(var w in I)P[w]=I[w];P.theme=ne.useContext(Of)}typeof I.className=="string"?E=O2(T.registered,C,I.className):I.className!=null&&(E=I.className+" ");var R=Hg(h.concat(C),T.registered,P);E+=T.key+"-"+R.name,l!==void 0&&(E+=" "+l);var U=p&&u===void 0?$1(D):d,N={};for(var ie in I)p&&ie==="as"||U(ie)&&(N[ie]=I[ie]);return N.className=E,S&&(N.ref=S),ne.createElement(ne.Fragment,null,ne.createElement(F3,{cache:T,serialized:R,isStringTag:typeof D=="string"}),ne.createElement(D,N))});return b.displayName=s!==void 0?s:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=o,b.__emotion_styles=h,b.__emotion_forwardProp=u,Object.defineProperty(b,"toString",{value:function(){return"."+l}}),b.withComponent=function(I,T){var S=e(I,fe({},n,T,{shouldForwardProp:D1(b,T,!0)}));return S.apply(void 0,h)},b}},B3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],j0=j3.bind(null);B3.forEach(function(e){j0[e]=j0(e)});var rb={exports:{}},ab,I1;function N3(){if(I1)return ab;I1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ab=e,ab}var ib,R1;function U3(){if(R1)return ib;R1=1;var e=N3();function t(){}function n(){}return n.resetWarningCache=t,ib=function(){function r(l,u,d,p,g,h){if(h!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function o(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},ib}var L1;function V3(){return L1||(L1=1,rb.exports=U3()()),rb.exports}var W3=V3();const fa=Od(W3);function G3(e,t){const n=A2({key:"css",prepend:e});if(t){const r=n.insert;n.insert=(...o)=>(o[1].styles.match(/^@layer\s+[^{]*$/)||(o[1].styles=`@layer mui {${o[1].styles}}`),r(...o))}return n}const ob=new Map;function K3(e){const{injectFirst:t,enableCssLayer:n,children:r}=e,o=ne.useMemo(()=>{const s=`${t}-${n}`;if(typeof document=="object"&&ob.has(s))return ob.get(s);const l=G3(t,n);return ob.set(s,l),l},[t,n]);return t||n?de.jsx(P3,{value:o,children:r}):r}function H3(e){return e==null||Object.keys(e).length===0}function L2(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?o=>t(H3(o)?n:o):t;return de.jsx(D3,{styles:r})}function kx(e,t){return j0(e,t)}const z2=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},z1=[];function kv(e){return z1[0]=e,Hg(z1)}const q3=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:L2,StyledEngineProvider:K3,ThemeContext:Of,css:qg,default:kx,internal_processStyles:z2,internal_serializeStyles:kv,keyframes:$d},Symbol.toStringTag,{value:"Module"}));function wc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function F2(e){if(ne.isValidElement(e)||!wc(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=F2(e[n])}),t}function ro(e,t,n={clone:!0}){const r=n.clone?fe({},e):e;return wc(e)&&wc(t)&&Object.keys(t).forEach(o=>{ne.isValidElement(t[o])?r[o]=t[o]:wc(t[o])&&Object.prototype.hasOwnProperty.call(e,o)&&wc(e[o])?r[o]=ro(e[o],t[o],n):n.clone?r[o]=wc(t[o])?F2(t[o]):t[o]:r[o]=t[o]}),r}const X3=Object.freeze(Object.defineProperty({__proto__:null,default:ro,isPlainObject:wc},Symbol.toStringTag,{value:"Module"})),Q3=["values","unit","step"],Y3=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>fe({},n,{[r.key]:r.val}),{})};function j2(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,o=Zt(e,Q3),s=Y3(t),l=Object.keys(s);function u(m){return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n})`}function d(m){return`@media (max-width:${(typeof t[m]=="number"?t[m]:m)-r/100}${n})`}function p(m,x){const _=l.indexOf(x);return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n}) and (max-width:${(_!==-1&&typeof t[l[_]]=="number"?t[l[_]]:x)-r/100}${n})`}function g(m){return l.indexOf(m)+1<l.length?p(m,l[l.indexOf(m)+1]):u(m)}function h(m){const x=l.indexOf(m);return x===0?u(l[1]):x===l.length-1?d(l[x]):p(m,l[l.indexOf(m)+1]).replace("@media","@media not all and")}return fe({keys:l,values:s,up:u,down:d,between:p,only:g,not:h,unit:n},o)}const Z3={borderRadius:4};function Pg(e,t){return t?ro(e,t,{clone:!1}):e}const Ax={xs:0,sm:600,md:900,lg:1200,xl:1536},F1={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ax[e]}px)`};function sl(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const s=r.breakpoints||F1;return t.reduce((l,u,d)=>(l[s.up(s.keys[d])]=n(t[d]),l),{})}if(typeof t=="object"){const s=r.breakpoints||F1;return Object.keys(t).reduce((l,u)=>{if(Object.keys(s.values||Ax).indexOf(u)!==-1){const d=s.up(u);l[d]=n(t[u],u)}else{const d=u;l[d]=t[d]}return l},{})}return n(t)}function B2(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,o)=>{const s=e.up(o);return r[s]={},r},{}))||{}}function B0(e,t){return e.reduce((n,r)=>{const o=n[r];return(!o||Object.keys(o).length===0)&&delete n[r],n},t)}function J3(e,...t){const n=B2(e),r=[n,...t].reduce((o,s)=>ro(o,s),{});return B0(Object.keys(n),r)}function eR(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((o,s)=>{s<e.length&&(n[o]=!0)}):r.forEach(o=>{e[o]!=null&&(n[o]=!0)}),n}function sb({values:e,breakpoints:t,base:n}){const r=n||eR(e,t),o=Object.keys(r);if(o.length===0)return e;let s;return o.reduce((l,u,d)=>(Array.isArray(e)?(l[u]=e[d]!=null?e[d]:e[s],s=d):typeof e=="object"?(l[u]=e[u]!=null?e[u]:e[s],s=u):l[u]=e,l),{})}function Nt(e){if(typeof e!="string")throw new Error(Sd(7));return e.charAt(0).toUpperCase()+e.slice(1)}const tR=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));function ey(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((o,s)=>o&&o[s]?o[s]:null,e);if(r!=null)return r}return t.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function Av(e,t,n,r=n){let o;return typeof e=="function"?o=e(n):Array.isArray(e)?o=e[n]||r:o=ey(e,n)||r,t&&(o=t(o,r,e)),o}function Za(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:o}=e,s=l=>{if(l[t]==null)return null;const u=l[t],d=l.theme,p=ey(d,r)||{};return sl(l,u,h=>{let m=Av(p,o,h);return h===m&&typeof h=="string"&&(m=Av(p,o,`${t}${h==="default"?"":Nt(h)}`,h)),n===!1?m:{[n]:m}})};return s.propTypes={},s.filterProps=[t],s}function nR(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const rR={m:"margin",p:"padding"},aR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},j1={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},iR=nR(e=>{if(e.length>2)if(j1[e])e=j1[e];else return[e];const[t,n]=e.split(""),r=rR[t],o=aR[n]||"";return Array.isArray(o)?o.map(s=>r+s):[r+o]}),Ox=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$x=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Ox,...$x];function Xg(e,t,n,r){var o;const s=(o=ey(e,t,!1))!=null?o:n;return typeof s=="number"?l=>typeof l=="string"?l:s*l:Array.isArray(s)?l=>typeof l=="string"?l:s[l]:typeof s=="function"?s:()=>{}}function Dx(e){return Xg(e,"spacing",8)}function Cd(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function oR(e,t){return n=>e.reduce((r,o)=>(r[o]=Cd(t,n),r),{})}function sR(e,t,n,r){if(t.indexOf(n)===-1)return null;const o=iR(n),s=oR(o,r),l=e[n];return sl(e,l,s)}function N2(e,t){const n=Dx(e.theme);return Object.keys(e).map(r=>sR(e,t,r,n)).reduce(Pg,{})}function Ka(e){return N2(e,Ox)}Ka.propTypes={};Ka.filterProps=Ox;function Ha(e){return N2(e,$x)}Ha.propTypes={};Ha.filterProps=$x;function lR(e=8){if(e.mui)return e;const t=Dx({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const l=t(s);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function ty(...e){const t=e.reduce((r,o)=>(o.filterProps.forEach(s=>{r[s]=o}),r),{}),n=r=>Object.keys(r).reduce((o,s)=>t[s]?Pg(o,t[s](r)):o,{});return n.propTypes={},n.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),n}function bs(e){return typeof e!="number"?e:`${e}px solid`}function Ts(e,t){return Za({prop:e,themeKey:"borders",transform:t})}const cR=Ts("border",bs),uR=Ts("borderTop",bs),dR=Ts("borderRight",bs),pR=Ts("borderBottom",bs),fR=Ts("borderLeft",bs),mR=Ts("borderColor"),hR=Ts("borderTopColor"),gR=Ts("borderRightColor"),_R=Ts("borderBottomColor"),vR=Ts("borderLeftColor"),yR=Ts("outline",bs),bR=Ts("outlineColor"),ny=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Xg(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Cd(t,r)});return sl(e,e.borderRadius,n)}return null};ny.propTypes={};ny.filterProps=["borderRadius"];ty(cR,uR,dR,pR,fR,mR,hR,gR,_R,vR,ny,yR,bR);const ry=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Xg(e.theme,"spacing",8),n=r=>({gap:Cd(t,r)});return sl(e,e.gap,n)}return null};ry.propTypes={};ry.filterProps=["gap"];const ay=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Xg(e.theme,"spacing",8),n=r=>({columnGap:Cd(t,r)});return sl(e,e.columnGap,n)}return null};ay.propTypes={};ay.filterProps=["columnGap"];const iy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Xg(e.theme,"spacing",8),n=r=>({rowGap:Cd(t,r)});return sl(e,e.rowGap,n)}return null};iy.propTypes={};iy.filterProps=["rowGap"];const xR=Za({prop:"gridColumn"}),wR=Za({prop:"gridRow"}),MR=Za({prop:"gridAutoFlow"}),TR=Za({prop:"gridAutoColumns"}),ER=Za({prop:"gridAutoRows"}),SR=Za({prop:"gridTemplateColumns"}),CR=Za({prop:"gridTemplateRows"}),PR=Za({prop:"gridTemplateAreas"}),kR=Za({prop:"gridArea"});ty(ry,ay,iy,xR,wR,MR,TR,ER,SR,CR,PR,kR);function vf(e,t){return t==="grey"?t:e}const AR=Za({prop:"color",themeKey:"palette",transform:vf}),OR=Za({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:vf}),$R=Za({prop:"backgroundColor",themeKey:"palette",transform:vf});ty(AR,OR,$R);function Uo(e){return e<=1&&e!==0?`${e*100}%`:e}const DR=Za({prop:"width",transform:Uo}),Ix=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,o;const s=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Ax[n];return s?((o=e.theme)==null||(o=o.breakpoints)==null?void 0:o.unit)!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Uo(n)}};return sl(e,e.maxWidth,t)}return null};Ix.filterProps=["maxWidth"];const IR=Za({prop:"minWidth",transform:Uo}),RR=Za({prop:"height",transform:Uo}),LR=Za({prop:"maxHeight",transform:Uo}),zR=Za({prop:"minHeight",transform:Uo});Za({prop:"size",cssProperty:"width",transform:Uo});Za({prop:"size",cssProperty:"height",transform:Uo});const FR=Za({prop:"boxSizing"});ty(DR,Ix,IR,RR,LR,zR,FR);const Qg={border:{themeKey:"borders",transform:bs},borderTop:{themeKey:"borders",transform:bs},borderRight:{themeKey:"borders",transform:bs},borderBottom:{themeKey:"borders",transform:bs},borderLeft:{themeKey:"borders",transform:bs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ny},color:{themeKey:"palette",transform:vf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:vf},backgroundColor:{themeKey:"palette",transform:vf},p:{style:Ha},pt:{style:Ha},pr:{style:Ha},pb:{style:Ha},pl:{style:Ha},px:{style:Ha},py:{style:Ha},padding:{style:Ha},paddingTop:{style:Ha},paddingRight:{style:Ha},paddingBottom:{style:Ha},paddingLeft:{style:Ha},paddingX:{style:Ha},paddingY:{style:Ha},paddingInline:{style:Ha},paddingInlineStart:{style:Ha},paddingInlineEnd:{style:Ha},paddingBlock:{style:Ha},paddingBlockStart:{style:Ha},paddingBlockEnd:{style:Ha},m:{style:Ka},mt:{style:Ka},mr:{style:Ka},mb:{style:Ka},ml:{style:Ka},mx:{style:Ka},my:{style:Ka},margin:{style:Ka},marginTop:{style:Ka},marginRight:{style:Ka},marginBottom:{style:Ka},marginLeft:{style:Ka},marginX:{style:Ka},marginY:{style:Ka},marginInline:{style:Ka},marginInlineStart:{style:Ka},marginInlineEnd:{style:Ka},marginBlock:{style:Ka},marginBlockStart:{style:Ka},marginBlockEnd:{style:Ka},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ry},rowGap:{style:iy},columnGap:{style:ay},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uo},maxWidth:{style:Ix},minWidth:{transform:Uo},height:{transform:Uo},maxHeight:{transform:Uo},minHeight:{transform:Uo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function jR(...e){const t=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function BR(e,t){return typeof e=="function"?e(t):e}function U2(){function e(n,r,o,s){const l={[n]:r,theme:o},u=s[n];if(!u)return{[n]:r};const{cssProperty:d=n,themeKey:p,transform:g,style:h}=u;if(r==null)return null;if(p==="typography"&&r==="inherit")return{[n]:r};const m=ey(o,p)||{};return h?h(l):sl(l,r,_=>{let b=Av(m,g,_);return _===b&&typeof _=="string"&&(b=Av(m,g,`${n}${_==="default"?"":Nt(_)}`,_)),d===!1?b:{[d]:b}})}function t(n){var r;const{sx:o,theme:s={},nested:l}=n||{};if(!o)return null;const u=(r=s.unstable_sxConfig)!=null?r:Qg;function d(p){let g=p;if(typeof p=="function")g=p(s);else if(typeof p!="object")return p;if(!g)return null;const h=B2(s.breakpoints),m=Object.keys(h);let x=h;return Object.keys(g).forEach(_=>{const b=BR(g[_],s);if(b!=null)if(typeof b=="object")if(u[_])x=Pg(x,e(_,b,s,u));else{const I=sl({theme:s},b,T=>({[_]:T}));jR(I,b)?x[_]=t({sx:b,theme:s,nested:!0}):x=Pg(x,I)}else x=Pg(x,e(_,b,s,u))}),!l&&s.modularCssLayers?{"@layer sx":B0(m,x)}:B0(m,x)}return Array.isArray(o)?o.map(d):d(o)}return t}const $f=U2();$f.filterProps=["sx"];function V2(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const NR=["breakpoints","palette","spacing","shape"];function Df(e={},...t){const{breakpoints:n={},palette:r={},spacing:o,shape:s={}}=e,l=Zt(e,NR),u=j2(n),d=lR(o);let p=ro({breakpoints:u,direction:"ltr",components:{},palette:fe({mode:"light"},r),spacing:d,shape:fe({},Z3,s)},l);return p.applyStyles=V2,p=t.reduce((g,h)=>ro(g,h),p),p.unstable_sxConfig=fe({},Qg,l?.unstable_sxConfig),p.unstable_sx=function(h){return $f({sx:h,theme:this})},p}const UR=Object.freeze(Object.defineProperty({__proto__:null,default:Df,private_createBreakpoints:j2,unstable_applyStyles:V2},Symbol.toStringTag,{value:"Module"}));function VR(e){return Object.keys(e).length===0}function oy(e=null){const t=ne.useContext(Of);return!t||VR(t)?e:t}const WR=Df();function sy(e=WR){return oy(e)}function lb(e){const t=kv(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function W2({styles:e,themeId:t,defaultTheme:n={}}){const r=sy(n),o=t&&r[t]||r;let s=typeof e=="function"?e(o):e;return o.modularCssLayers&&(Array.isArray(s)?s=s.map(l=>lb(typeof l=="function"?l(o):l)):s=lb(s)),de.jsx(L2,{styles:s})}const GR=["sx"],KR=e=>{var t,n;const r={systemProps:{},otherProps:{}},o=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Qg;return Object.keys(e).forEach(s=>{o[s]?r.systemProps[s]=e[s]:r.otherProps[s]=e[s]}),r};function ly(e){const{sx:t}=e,n=Zt(e,GR),{systemProps:r,otherProps:o}=KR(n);let s;return Array.isArray(t)?s=[r,...t]:typeof t=="function"?s=(...l)=>{const u=t(...l);return wc(u)?fe({},r,u):r}:s=fe({},r,t),fe({},o,{sx:s})}const HR=Object.freeze(Object.defineProperty({__proto__:null,default:$f,extendSxProp:ly,unstable_createStyleFunctionSx:U2,unstable_defaultSxConfig:Qg},Symbol.toStringTag,{value:"Module"})),B1=e=>e,qR=()=>{let e=B1;return{configure(t){e=t},generate(t){return e(t)},reset(){e=B1}}},G2=qR();function K2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=K2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tn(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=K2(e))&&(r&&(r+=" "),r+=t);return r}const XR=["className","component"];function QR(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:o}=e,s=kx("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})($f);return ne.forwardRef(function(d,p){const g=sy(n),h=ly(d),{className:m,component:x="div"}=h,_=Zt(h,XR);return de.jsx(s,fe({as:x,ref:p,className:tn(m,o?o(r):r),theme:t&&g[t]||g},_))})}const YR={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Rn(e,t,n="Mui"){const r=YR[t];return r?`${n}-${r}`:`${G2.generate(e)}-${t}`}function Ln(e,t,n="Mui"){const r={};return t.forEach(o=>{r[o]=Rn(e,o,n)}),r}var cb={exports:{}},aa={};var N1;function ZR(){if(N1)return aa;N1=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function _(b){if(typeof b=="object"&&b!==null){var I=b.$$typeof;switch(I){case e:switch(b=b.type,b){case n:case o:case r:case d:case p:case m:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case h:case g:return b;case s:return b;default:return I}}case t:return I}}}return aa.ContextConsumer=s,aa.ContextProvider=l,aa.Element=e,aa.ForwardRef=u,aa.Fragment=n,aa.Lazy=h,aa.Memo=g,aa.Portal=t,aa.Profiler=o,aa.StrictMode=r,aa.Suspense=d,aa.SuspenseList=p,aa.isContextConsumer=function(b){return _(b)===s},aa.isContextProvider=function(b){return _(b)===l},aa.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},aa.isForwardRef=function(b){return _(b)===u},aa.isFragment=function(b){return _(b)===n},aa.isLazy=function(b){return _(b)===h},aa.isMemo=function(b){return _(b)===g},aa.isPortal=function(b){return _(b)===t},aa.isProfiler=function(b){return _(b)===o},aa.isStrictMode=function(b){return _(b)===r},aa.isSuspense=function(b){return _(b)===d},aa.isSuspenseList=function(b){return _(b)===p},aa.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===o||b===r||b===d||b===p||typeof b=="object"&&b!==null&&(b.$$typeof===h||b.$$typeof===g||b.$$typeof===l||b.$$typeof===s||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},aa.typeOf=_,aa}var U1;function JR(){return U1||(U1=1,cb.exports=ZR()),cb.exports}var V1=JR();const eL=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function H2(e){const t=`${e}`.match(eL);return t&&t[1]||""}function q2(e,t=""){return e.displayName||e.name||H2(e)||t}function W1(e,t,n){const r=q2(t);return e.displayName||(r!==""?`${n}(${r})`:n)}function tL(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return q2(e,"Component");if(typeof e=="object")switch(e.$$typeof){case V1.ForwardRef:return W1(e,e.render,"ForwardRef");case V1.Memo:return W1(e,e.type,"memo");default:return}}}const nL=Object.freeze(Object.defineProperty({__proto__:null,default:tL,getFunctionName:H2},Symbol.toStringTag,{value:"Module"})),rL=["ownerState"],aL=["variants"],iL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function oL(e){return Object.keys(e).length===0}function sL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function ub(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function G1(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}const lL=Df(),cL=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function W_({defaultTheme:e,theme:t,themeId:n}){return oL(t)?e:t[n]||t}function uL(e){return e?(t,n)=>n[e]:null}function hv(e,t,n){let{ownerState:r}=t,o=Zt(t,rL);const s=typeof e=="function"?e(fe({ownerState:r},o)):e;if(Array.isArray(s))return s.flatMap(l=>hv(l,fe({ownerState:r},o),n));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:l=[]}=s;let d=Zt(s,aL);return l.forEach(p=>{let g=!0;if(typeof p.props=="function"?g=p.props(fe({ownerState:r},o,r)):Object.keys(p.props).forEach(h=>{r?.[h]!==p.props[h]&&o[h]!==p.props[h]&&(g=!1)}),g){Array.isArray(d)||(d=[d]);const h=typeof p.style=="function"?p.style(fe({ownerState:r},o,r)):p.style;d.push(n?G1(kv(h),n):h)}}),d}return n?G1(kv(s),n):s}function dL(e={}){const{themeId:t,defaultTheme:n=lL,rootShouldForwardProp:r=ub,slotShouldForwardProp:o=ub}=e,s=l=>$f(fe({},l,{theme:W_(fe({},l,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(l,u={})=>{z2(l,P=>P.filter(w=>!(w!=null&&w.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:g,skipSx:h,overridesResolver:m=uL(cL(p))}=u,x=Zt(u,iL),_=d&&d.startsWith("Mui")||p?"components":"custom",b=g!==void 0?g:p&&p!=="Root"&&p!=="root"||!1,I=h||!1;let T,S=ub;p==="Root"||p==="root"?S=r:p?S=o:sL(l)&&(S=void 0);const D=kx(l,fe({shouldForwardProp:S,label:T},x)),E=P=>typeof P=="function"&&P.__emotion_real!==P||wc(P)?w=>{const R=W_({theme:w.theme,defaultTheme:n,themeId:t});return hv(P,fe({},w,{theme:R}),R.modularCssLayers?_:void 0)}:P,C=(P,...w)=>{let R=E(P);const U=w?w.map(E):[];d&&m&&U.push(ee=>{const q=W_(fe({},ee,{defaultTheme:n,themeId:t}));if(!q.components||!q.components[d]||!q.components[d].styleOverrides)return null;const oe=q.components[d].styleOverrides,ae={};return Object.entries(oe).forEach(([X,se])=>{ae[X]=hv(se,fe({},ee,{theme:q}),q.modularCssLayers?"theme":void 0)}),m(ee,ae)}),d&&!b&&U.push(ee=>{var q;const oe=W_(fe({},ee,{defaultTheme:n,themeId:t})),ae=oe==null||(q=oe.components)==null||(q=q[d])==null?void 0:q.variants;return hv({variants:ae},fe({},ee,{theme:oe}),oe.modularCssLayers?"theme":void 0)}),I||U.push(s);const N=U.length-w.length;if(Array.isArray(P)&&N>0){const ee=new Array(N).fill("");R=[...P,...ee],R.raw=[...P.raw,...ee]}const ie=D(R,...U);return l.muiName&&(ie.muiName=l.muiName),ie};return D.withConfig&&(C.withConfig=D.withConfig),C}}const X2=dL();function jg(e,t){const n=fe({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=fe({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const o=e[r]||{},s=t[r];n[r]={},!s||!Object.keys(s)?n[r]=o:!o||!Object.keys(o)?n[r]=s:(n[r]=fe({},s),Object.keys(o).forEach(l=>{n[r][l]=jg(o[l],s[l])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function Q2(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:jg(t.components[n].defaultProps,r)}function Y2({props:e,name:t,defaultTheme:n,themeId:r}){let o=sy(n);return r&&(o=o[r]||o),Q2({theme:o,name:t,props:e})}const Ms=typeof window<"u"?ne.useLayoutEffect:ne.useEffect;function pL(e,t,n,r,o){const[s,l]=ne.useState(()=>o&&n?n(e).matches:r?r(e).matches:t);return Ms(()=>{let u=!0;if(!n)return;const d=n(e),p=()=>{u&&l(d.matches)};return p(),d.addListener(p),()=>{u=!1,d.removeListener(p)}},[e,n]),s}const Z2=ne.useSyncExternalStore;function fL(e,t,n,r,o){const s=ne.useCallback(()=>t,[t]),l=ne.useMemo(()=>{if(o&&n)return()=>n(e).matches;if(r!==null){const{matches:g}=r(e);return()=>g}return s},[s,e,r,o,n]),[u,d]=ne.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const g=n(e);return[()=>g.matches,h=>(g.addListener(h),()=>{g.removeListener(h)})]},[s,n,e]);return Z2(d,u,l)}function mL(e,t={}){const n=oy(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:l=null,noSsr:u=!1}=Q2({name:"MuiUseMediaQuery",props:t,theme:n});let d=e;return d=d.replace(/^@media( ?)/m,""),(Z2!==void 0?fL:pL)(d,o,s,l,u)}function hL(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const gL=Object.freeze(Object.defineProperty({__proto__:null,default:hL},Symbol.toStringTag,{value:"Module"}));function K1(...e){return e.reduce((t,n)=>n==null?t:function(...o){t.apply(this,o),n.apply(this,o)},()=>{})}function cy(e,t=166){let n;function r(...o){const s=()=>{e.apply(this,o)};clearTimeout(n),n=setTimeout(s,t)}return r.clear=()=>{clearTimeout(n)},r}function gv(e,t){var n,r;return ne.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Di(e){return e&&e.ownerDocument||document}function Ec(e){return Di(e).defaultView||window}function N0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let H1=0;function _L(e){const[t,n]=ne.useState(e),r=e||t;return ne.useEffect(()=>{t==null&&(H1+=1,n(`mui-${H1}`))},[t]),r}const q1=Mv.useId;function uy(e){if(q1!==void 0){const t=q1();return e??t}return _L(e)}function X1({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=ne.useRef(e!==void 0),[s,l]=ne.useState(t),u=o?e:s,d=ne.useCallback(p=>{o||l(p)},[]);return[u,d]}function Vo(e){const t=ne.useRef(e);return Ms(()=>{t.current=e}),ne.useRef((...n)=>(0,t.current)(...n)).current}function li(...e){return ne.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{N0(n,t)})},e)}const Q1={};function vL(e,t){const n=ne.useRef(Q1);return n.current===Q1&&(n.current=e(t)),n}const yL=[];function bL(e){ne.useEffect(e,yL)}class dy{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new dy}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function py(){const e=vL(dy.create).current;return bL(e.disposeEffect),e}let fy=!0,U0=!1;const xL=new dy,wL={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ML(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&wL[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function TL(e){e.metaKey||e.altKey||e.ctrlKey||(fy=!0)}function db(){fy=!1}function EL(){this.visibilityState==="hidden"&&U0&&(fy=!0)}function SL(e){e.addEventListener("keydown",TL,!0),e.addEventListener("mousedown",db,!0),e.addEventListener("pointerdown",db,!0),e.addEventListener("touchstart",db,!0),e.addEventListener("visibilitychange",EL,!0)}function CL(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return fy||ML(t)}function PL(){const e=ne.useCallback(o=>{o!=null&&SL(o.ownerDocument)},[]),t=ne.useRef(!1);function n(){return t.current?(U0=!0,xL.start(100,()=>{U0=!1}),t.current=!1,!0):!1}function r(o){return CL(o)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function J2(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let lf;function eP(){if(lf)return lf;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),lf="reverse",e.scrollLeft>0?lf="default":(e.scrollLeft=1,e.scrollLeft===0&&(lf="negative")),document.body.removeChild(e),lf}function kL(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(eP()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function jn(e,t,n=void 0){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o].reduce((s,l)=>{if(l){const u=t(l);u!==""&&s.push(u),n&&n[l]&&s.push(n[l])}return s},[]).join(" ")}),r}function wf(e){return typeof e=="string"}function tP(e,t,n){return e===void 0||wf(e)?t:fe({},t,{ownerState:fe({},t.ownerState,n)})}function Ov(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function Y1(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function nP(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:o,className:s}=e;if(!t){const x=tn(n?.className,s,o?.className,r?.className),_=fe({},n?.style,o?.style,r?.style),b=fe({},n,o,r);return x.length>0&&(b.className=x),Object.keys(_).length>0&&(b.style=_),{props:b,internalRef:void 0}}const l=Ov(fe({},o,r)),u=Y1(r),d=Y1(o),p=t(l),g=tn(p?.className,n?.className,s,o?.className,r?.className),h=fe({},p?.style,n?.style,o?.style,r?.style),m=fe({},p,n,d,u);return g.length>0&&(m.className=g),Object.keys(h).length>0&&(m.style=h),{props:m,internalRef:p.ref}}function rP(e,t,n){return typeof e=="function"?e(t,n):e}const AL=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function ll(e){var t;const{elementType:n,externalSlotProps:r,ownerState:o,skipResolvingSlotProps:s=!1}=e,l=Zt(e,AL),u=s?{}:rP(r,o),{props:d,internalRef:p}=nP(fe({},l,{externalSlotProps:u})),g=li(p,u?.ref,(t=e.additionalProps)==null?void 0:t.ref);return tP(n,fe({},d,{ref:g}),o)}function If(e){if(parseInt(ne.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return e?.ref||null}const aP=ne.createContext(null);function iP(){return ne.useContext(aP)}const OL=typeof Symbol=="function"&&Symbol.for,$L=OL?Symbol.for("mui.nested"):"__THEME_NESTED__";function DL(e,t){return typeof t=="function"?t(e):fe({},e,t)}function IL(e){const{children:t,theme:n}=e,r=iP(),o=ne.useMemo(()=>{const s=r===null?n:DL(r,n);return s!=null&&(s[$L]=r!==null),s},[n,r]);return de.jsx(aP.Provider,{value:o,children:t})}const RL=["value"],oP=ne.createContext();function LL(e){let{value:t}=e,n=Zt(e,RL);return de.jsx(oP.Provider,fe({value:t??!0},n))}const my=()=>{const e=ne.useContext(oP);return e??!1},sP=ne.createContext(void 0);function zL({value:e,children:t}){return de.jsx(sP.Provider,{value:e,children:t})}function FL(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?jg(o.defaultProps,r):!o.styleOverrides&&!o.variants?jg(o,r):r}function jL({props:e,name:t}){const n=ne.useContext(sP);return FL({props:e,name:t,theme:{components:n}})}function BL(e){const t=oy(),n=uy()||"",{modularCssLayers:r}=e;let o="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||t!==null?o="":typeof r=="string"?o=r.replace(/mui(?!\.)/g,o):o=`@layer ${o};`,Ms(()=>{const s=document.querySelector("head");if(!s)return;const l=s.firstChild;if(o){var u;if(l&&(u=l.hasAttribute)!=null&&u.call(l,"data-mui-layer-order")&&l.getAttribute("data-mui-layer-order")===n)return;const p=document.createElement("style");p.setAttribute("data-mui-layer-order",n),p.textContent=o,s.prepend(p)}else{var d;(d=s.querySelector(`style[data-mui-layer-order="${n}"]`))==null||d.remove()}},[o,n]),o?de.jsx(W2,{styles:o}):null}const Z1={};function J1(e,t,n,r=!1){return ne.useMemo(()=>{const o=e&&t[e]||t;if(typeof n=="function"){const s=n(o),l=e?fe({},t,{[e]:s}):s;return r?()=>l:l}return e?fe({},t,{[e]:n}):fe({},t,n)},[e,t,n,r])}function NL(e){const{children:t,theme:n,themeId:r}=e,o=oy(Z1),s=iP()||Z1,l=J1(r,o,n),u=J1(r,s,n,!0),d=l.direction==="rtl",p=BL(l);return de.jsx(IL,{theme:u,children:de.jsx(Of.Provider,{value:l,children:de.jsx(LL,{value:d,children:de.jsxs(zL,{value:l?.components,children:[p,t]})})})})}const UL=["className","component","disableGutters","fixed","maxWidth","classes"],VL=Df(),WL=X2("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Nt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),GL=e=>Y2({props:e,name:"MuiContainer",defaultTheme:VL}),KL=(e,t)=>{const n=d=>Rn(t,d),{classes:r,fixed:o,disableGutters:s,maxWidth:l}=e,u={root:["root",l&&`maxWidth${Nt(String(l))}`,o&&"fixed",s&&"disableGutters"]};return jn(u,n,r)};function HL(e={}){const{createStyledComponent:t=WL,useThemeProps:n=GL,componentName:r="MuiContainer"}=e,o=t(({theme:l,ownerState:u})=>fe({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((d,p)=>{const g=p,h=l.breakpoints.values[g];return h!==0&&(d[l.breakpoints.up(g)]={maxWidth:`${h}${l.breakpoints.unit}`}),d},{}),({theme:l,ownerState:u})=>fe({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return ne.forwardRef(function(u,d){const p=n(u),{className:g,component:h="div",disableGutters:m=!1,fixed:x=!1,maxWidth:_="lg"}=p,b=Zt(p,UL),I=fe({},p,{component:h,disableGutters:m,fixed:x,maxWidth:_}),T=KL(I,r);return de.jsx(o,fe({as:h,ownerState:I,className:tn(T.root,g),ref:d},b))})}const qL=["component","direction","spacing","divider","children","className","useFlexGap"],XL=Df(),QL=X2("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function YL(e){return Y2({props:e,name:"MuiStack",defaultTheme:XL})}function ZL(e,t){const n=ne.Children.toArray(e).filter(Boolean);return n.reduce((r,o,s)=>(r.push(o),s<n.length-1&&r.push(ne.cloneElement(t,{key:`separator-${s}`})),r),[])}const JL=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],ez=({ownerState:e,theme:t})=>{let n=fe({display:"flex",flexDirection:"column"},sl({theme:t},sb({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r})));if(e.spacing){const r=Dx(t),o=Object.keys(t.breakpoints.values).reduce((d,p)=>((typeof e.spacing=="object"&&e.spacing[p]!=null||typeof e.direction=="object"&&e.direction[p]!=null)&&(d[p]=!0),d),{}),s=sb({values:e.direction,base:o}),l=sb({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((d,p,g)=>{if(!s[d]){const m=p>0?s[g[p-1]]:"column";s[d]=m}}),n=ro(n,sl({theme:t},l,(d,p)=>e.useFlexGap?{gap:Cd(r,d)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${JL(p?s[p]:e.direction)}`]:Cd(r,d)}}))}return n=J3(t.breakpoints,n),n};function tz(e={}){const{createStyledComponent:t=QL,useThemeProps:n=YL,componentName:r="MuiStack"}=e,o=()=>jn({root:["root"]},d=>Rn(r,d),{}),s=t(ez);return ne.forwardRef(function(d,p){const g=n(d),h=ly(g),{component:m="div",direction:x="column",spacing:_=0,divider:b,children:I,className:T,useFlexGap:S=!1}=h,D=Zt(h,qL),E={direction:x,spacing:_,useFlexGap:S},C=o();return de.jsx(s,fe({as:m,ownerState:E,ref:p,className:tn(C.root,T)},D,{children:b?ZL(I,b):I}))})}function nz(e,t){return fe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Ba={},pb={exports:{}},eM;function lP(){return eM||(eM=1,(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(pb)),pb.exports}const rz=bu(VI),az=bu(gL);var tM;function iz(){if(tM)return Ba;tM=1;var e=lP();Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.alpha=_,Ba.blend=P,Ba.colorChannel=void 0,Ba.darken=I,Ba.decomposeColor=l,Ba.emphasize=E,Ba.getContrastRatio=x,Ba.getLuminance=m,Ba.hexToRgb=o,Ba.hslToRgb=h,Ba.lighten=S,Ba.private_safeAlpha=b,Ba.private_safeColorChannel=void 0,Ba.private_safeDarken=T,Ba.private_safeEmphasize=C,Ba.private_safeLighten=D,Ba.recomposeColor=p,Ba.rgbToHex=g;var t=e(rz),n=e(az);function r(w,R=0,U=1){return(0,n.default)(w,R,U)}function o(w){w=w.slice(1);const R=new RegExp(`.{1,${w.length>=6?2:1}}`,"g");let U=w.match(R);return U&&U[0].length===1&&(U=U.map(N=>N+N)),U?`rgb${U.length===4?"a":""}(${U.map((N,ie)=>ie<3?parseInt(N,16):Math.round(parseInt(N,16)/255*1e3)/1e3).join(", ")})`:""}function s(w){const R=w.toString(16);return R.length===1?`0${R}`:R}function l(w){if(w.type)return w;if(w.charAt(0)==="#")return l(o(w));const R=w.indexOf("("),U=w.substring(0,R);if(["rgb","rgba","hsl","hsla","color"].indexOf(U)===-1)throw new Error((0,t.default)(9,w));let N=w.substring(R+1,w.length-1),ie;if(U==="color"){if(N=N.split(" "),ie=N.shift(),N.length===4&&N[3].charAt(0)==="/"&&(N[3]=N[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ie)===-1)throw new Error((0,t.default)(10,ie))}else N=N.split(",");return N=N.map(ee=>parseFloat(ee)),{type:U,values:N,colorSpace:ie}}const u=w=>{const R=l(w);return R.values.slice(0,3).map((U,N)=>R.type.indexOf("hsl")!==-1&&N!==0?`${U}%`:U).join(" ")};Ba.colorChannel=u;const d=(w,R)=>{try{return u(w)}catch{return w}};Ba.private_safeColorChannel=d;function p(w){const{type:R,colorSpace:U}=w;let{values:N}=w;return R.indexOf("rgb")!==-1?N=N.map((ie,ee)=>ee<3?parseInt(ie,10):ie):R.indexOf("hsl")!==-1&&(N[1]=`${N[1]}%`,N[2]=`${N[2]}%`),R.indexOf("color")!==-1?N=`${U} ${N.join(" ")}`:N=`${N.join(", ")}`,`${R}(${N})`}function g(w){if(w.indexOf("#")===0)return w;const{values:R}=l(w);return`#${R.map((U,N)=>s(N===3?Math.round(255*U):U)).join("")}`}function h(w){w=l(w);const{values:R}=w,U=R[0],N=R[1]/100,ie=R[2]/100,ee=N*Math.min(ie,1-ie),q=(X,se=(X+U/30)%12)=>ie-ee*Math.max(Math.min(se-3,9-se,1),-1);let oe="rgb";const ae=[Math.round(q(0)*255),Math.round(q(8)*255),Math.round(q(4)*255)];return w.type==="hsla"&&(oe+="a",ae.push(R[3])),p({type:oe,values:ae})}function m(w){w=l(w);let R=w.type==="hsl"||w.type==="hsla"?l(h(w)).values:w.values;return R=R.map(U=>(w.type!=="color"&&(U/=255),U<=.03928?U/12.92:((U+.055)/1.055)**2.4)),Number((.2126*R[0]+.7152*R[1]+.0722*R[2]).toFixed(3))}function x(w,R){const U=m(w),N=m(R);return(Math.max(U,N)+.05)/(Math.min(U,N)+.05)}function _(w,R){return w=l(w),R=r(R),(w.type==="rgb"||w.type==="hsl")&&(w.type+="a"),w.type==="color"?w.values[3]=`/${R}`:w.values[3]=R,p(w)}function b(w,R,U){try{return _(w,R)}catch{return w}}function I(w,R){if(w=l(w),R=r(R),w.type.indexOf("hsl")!==-1)w.values[2]*=1-R;else if(w.type.indexOf("rgb")!==-1||w.type.indexOf("color")!==-1)for(let U=0;U<3;U+=1)w.values[U]*=1-R;return p(w)}function T(w,R,U){try{return I(w,R)}catch{return w}}function S(w,R){if(w=l(w),R=r(R),w.type.indexOf("hsl")!==-1)w.values[2]+=(100-w.values[2])*R;else if(w.type.indexOf("rgb")!==-1)for(let U=0;U<3;U+=1)w.values[U]+=(255-w.values[U])*R;else if(w.type.indexOf("color")!==-1)for(let U=0;U<3;U+=1)w.values[U]+=(1-w.values[U])*R;return p(w)}function D(w,R,U){try{return S(w,R)}catch{return w}}function E(w,R=.15){return m(w)>.5?I(w,R):S(w,R)}function C(w,R,U){try{return E(w,R)}catch{return w}}function P(w,R,U,N=1){const ie=(ae,X)=>Math.round((ae**(1/N)*(1-U)+X**(1/N)*U)**N),ee=l(w),q=l(R),oe=[ie(ee.values[0],q.values[0]),ie(ee.values[1],q.values[1]),ie(ee.values[2],q.values[2])];return p({type:"rgb",values:oe})}return Ba}var cr=iz();const oz=["mode","contrastThreshold","tonalOffset"],nM={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Rg.white,default:Rg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},fb={text:{primary:Rg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Rg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function rM(e,t,n,r){const o=r.light||r,s=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=cr.lighten(e.main,o):t==="dark"&&(e.dark=cr.darken(e.main,s)))}function sz(e="light"){return e==="dark"?{main:af[200],light:af[50],dark:af[400]}:{main:af[700],light:af[400],dark:af[800]}}function lz(e="light"){return e==="dark"?{main:rf[200],light:rf[50],dark:rf[400]}:{main:rf[500],light:rf[300],dark:rf[700]}}function cz(e="light"){return e==="dark"?{main:nf[500],light:nf[300],dark:nf[700]}:{main:nf[700],light:nf[400],dark:nf[800]}}function uz(e="light"){return e==="dark"?{main:of[400],light:of[300],dark:of[700]}:{main:of[700],light:of[500],dark:of[900]}}function dz(e="light"){return e==="dark"?{main:sf[400],light:sf[300],dark:sf[700]}:{main:sf[800],light:sf[500],dark:sf[900]}}function pz(e="light"){return e==="dark"?{main:ng[400],light:ng[300],dark:ng[700]}:{main:"#ed6c02",light:ng[500],dark:ng[900]}}function fz(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,o=Zt(e,oz),s=e.primary||sz(t),l=e.secondary||lz(t),u=e.error||cz(t),d=e.info||uz(t),p=e.success||dz(t),g=e.warning||pz(t);function h(b){return cr.getContrastRatio(b,fb.text.primary)>=n?fb.text.primary:nM.text.primary}const m=({color:b,name:I,mainShade:T=500,lightShade:S=300,darkShade:D=700})=>{if(b=fe({},b),!b.main&&b[T]&&(b.main=b[T]),!b.hasOwnProperty("main"))throw new Error(Sd(11,I?` (${I})`:"",T));if(typeof b.main!="string")throw new Error(Sd(12,I?` (${I})`:"",JSON.stringify(b.main)));return rM(b,"light",S,r),rM(b,"dark",D,r),b.contrastText||(b.contrastText=h(b.main)),b},x={dark:fb,light:nM};return ro(fe({common:fe({},Rg),mode:t,primary:m({color:s,name:"primary"}),secondary:m({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:u,name:"error"}),warning:m({color:g,name:"warning"}),info:m({color:d,name:"info"}),success:m({color:p,name:"success"}),grey:UI,contrastThreshold:n,getContrastText:h,augmentColor:m,tonalOffset:r},x[t]),o)}const mz=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function hz(e){return Math.round(e*1e5)/1e5}const aM={textTransform:"uppercase"},iM='"Roboto", "Helvetica", "Arial", sans-serif';function gz(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=iM,fontSize:o=14,fontWeightLight:s=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:p=16,allVariants:g,pxToRem:h}=n,m=Zt(n,mz),x=o/14,_=h||(T=>`${T/p*x}rem`),b=(T,S,D,E,C)=>fe({fontFamily:r,fontWeight:T,fontSize:_(S),lineHeight:D},r===iM?{letterSpacing:`${hz(E/S)}em`}:{},C,g),I={h1:b(s,96,1.167,-1.5),h2:b(s,60,1.2,-.5),h3:b(l,48,1.167,0),h4:b(l,34,1.235,.25),h5:b(l,24,1.334,0),h6:b(u,20,1.6,.15),subtitle1:b(l,16,1.75,.15),subtitle2:b(u,14,1.57,.1),body1:b(l,16,1.5,.15),body2:b(l,14,1.43,.15),button:b(u,14,1.75,.4,aM),caption:b(l,12,1.66,.4),overline:b(l,12,2.66,1,aM),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ro(fe({htmlFontSize:p,pxToRem:_,fontFamily:r,fontSize:o,fontWeightLight:s,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:d},I),m,{clone:!1})}const _z=.2,vz=.14,yz=.12;function Pa(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${_z})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${vz})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${yz})`].join(",")}const bz=["none",Pa(0,2,1,-1,0,1,1,0,0,1,3,0),Pa(0,3,1,-2,0,2,2,0,0,1,5,0),Pa(0,3,3,-2,0,3,4,0,0,1,8,0),Pa(0,2,4,-1,0,4,5,0,0,1,10,0),Pa(0,3,5,-1,0,5,8,0,0,1,14,0),Pa(0,3,5,-1,0,6,10,0,0,1,18,0),Pa(0,4,5,-2,0,7,10,1,0,2,16,1),Pa(0,5,5,-3,0,8,10,1,0,3,14,2),Pa(0,5,6,-3,0,9,12,1,0,3,16,2),Pa(0,6,6,-3,0,10,14,1,0,4,18,3),Pa(0,6,7,-4,0,11,15,1,0,4,20,3),Pa(0,7,8,-4,0,12,17,2,0,5,22,4),Pa(0,7,8,-4,0,13,19,2,0,5,24,4),Pa(0,7,9,-4,0,14,21,2,0,5,26,4),Pa(0,8,9,-5,0,15,22,2,0,6,28,5),Pa(0,8,10,-5,0,16,24,2,0,6,30,5),Pa(0,8,11,-5,0,17,26,2,0,6,32,5),Pa(0,9,11,-5,0,18,28,2,0,7,34,6),Pa(0,9,12,-6,0,19,29,2,0,7,36,6),Pa(0,10,13,-6,0,20,31,3,0,8,38,7),Pa(0,10,13,-6,0,21,33,3,0,8,40,7),Pa(0,10,14,-6,0,22,35,3,0,8,42,7),Pa(0,11,14,-7,0,23,36,3,0,9,44,8),Pa(0,11,15,-7,0,24,38,3,0,9,46,8)],xz=["duration","easing","delay"],wz={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},cP={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function oM(e){return`${Math.round(e)}ms`}function Mz(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Tz(e){const t=fe({},wz,e.easing),n=fe({},cP,e.duration);return fe({getAutoHeightDuration:Mz,create:(o=["all"],s={})=>{const{duration:l=n.standard,easing:u=t.easeInOut,delay:d=0}=s;return Zt(s,xz),(Array.isArray(o)?o:[o]).map(p=>`${p} ${typeof l=="string"?l:oM(l)} ${u} ${typeof d=="string"?d:oM(d)}`).join(",")}},e,{easing:t,duration:n})}const Ez={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Sz=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Rx(e={},...t){const{mixins:n={},palette:r={},transitions:o={},typography:s={}}=e,l=Zt(e,Sz);if(e.vars&&e.generateCssVars===void 0)throw new Error(Sd(18));const u=fz(r),d=Df(e);let p=ro(d,{mixins:nz(d.breakpoints,n),palette:u,shadows:bz.slice(),typography:gz(u,s),transitions:Tz(o),zIndex:fe({},Ez)});return p=ro(p,l),p=t.reduce((g,h)=>ro(g,h),p),p.unstable_sxConfig=fe({},Qg,l?.unstable_sxConfig),p.unstable_sx=function(h){return $f({sx:h,theme:this})},p}const Lx=Rx();function Rf(){const e=sy(Lx);return e[bf]||e}var ud={},mb={exports:{}},sM;function Cz(){return sM||(sM=1,(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)({}).hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(mb)),mb.exports}var hb={exports:{}},lM;function Pz(){return lM||(lM=1,(function(e){function t(n,r){if(n==null)return{};var o={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.indexOf(s)!==-1)continue;o[s]=n[s]}return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(hb)),hb.exports}const kz=bu(q3),Az=bu(X3),Oz=bu(tR),$z=bu(nL),Dz=bu(UR),Iz=bu(HR);var cM;function Rz(){if(cM)return ud;cM=1;var e=lP();Object.defineProperty(ud,"__esModule",{value:!0}),ud.default=C,ud.shouldForwardProp=_,ud.systemDefaultTheme=void 0;var t=e(Cz()),n=e(Pz()),r=h(kz),o=Az;e(Oz),e($z);var s=e(Dz),l=e(Iz);const u=["ownerState"],d=["variants"],p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function g(P){if(typeof WeakMap!="function")return null;var w=new WeakMap,R=new WeakMap;return(g=function(U){return U?R:w})(P)}function h(P,w){if(P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var R=g(w);if(R&&R.has(P))return R.get(P);var U={__proto__:null},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in P)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(P,ie)){var ee=N?Object.getOwnPropertyDescriptor(P,ie):null;ee&&(ee.get||ee.set)?Object.defineProperty(U,ie,ee):U[ie]=P[ie]}return U.default=P,R&&R.set(P,U),U}function m(P){return Object.keys(P).length===0}function x(P){return typeof P=="string"&&P.charCodeAt(0)>96}function _(P){return P!=="ownerState"&&P!=="theme"&&P!=="sx"&&P!=="as"}function b(P,w){return w&&P&&typeof P=="object"&&P.styles&&!P.styles.startsWith("@layer")&&(P.styles=`@layer ${w}{${String(P.styles)}}`),P}const I=ud.systemDefaultTheme=(0,s.default)(),T=P=>P&&P.charAt(0).toLowerCase()+P.slice(1);function S({defaultTheme:P,theme:w,themeId:R}){return m(w)?P:w[R]||w}function D(P){return P?(w,R)=>R[P]:null}function E(P,w,R){let{ownerState:U}=w,N=(0,n.default)(w,u);const ie=typeof P=="function"?P((0,t.default)({ownerState:U},N)):P;if(Array.isArray(ie))return ie.flatMap(ee=>E(ee,(0,t.default)({ownerState:U},N),R));if(ie&&typeof ie=="object"&&Array.isArray(ie.variants)){const{variants:ee=[]}=ie;let oe=(0,n.default)(ie,d);return ee.forEach(ae=>{let X=!0;if(typeof ae.props=="function"?X=ae.props((0,t.default)({ownerState:U},N,U)):Object.keys(ae.props).forEach(se=>{U?.[se]!==ae.props[se]&&N[se]!==ae.props[se]&&(X=!1)}),X){Array.isArray(oe)||(oe=[oe]);const se=typeof ae.style=="function"?ae.style((0,t.default)({ownerState:U},N,U)):ae.style;oe.push(R?b((0,r.internal_serializeStyles)(se),R):se)}}),oe}return R?b((0,r.internal_serializeStyles)(ie),R):ie}function C(P={}){const{themeId:w,defaultTheme:R=I,rootShouldForwardProp:U=_,slotShouldForwardProp:N=_}=P,ie=ee=>(0,l.default)((0,t.default)({},ee,{theme:S((0,t.default)({},ee,{defaultTheme:R,themeId:w}))}));return ie.__mui_systemSx=!0,(ee,q={})=>{(0,r.internal_processStyles)(ee,We=>We.filter(at=>!(at!=null&&at.__mui_systemSx)));const{name:oe,slot:ae,skipVariantsResolver:X,skipSx:se,overridesResolver:le=D(T(ae))}=q,be=(0,n.default)(q,p),Ee=oe&&oe.startsWith("Mui")||ae?"components":"custom",Y=X!==void 0?X:ae&&ae!=="Root"&&ae!=="root"||!1,te=se||!1;let J,H=_;ae==="Root"||ae==="root"?H=U:ae?H=N:x(ee)&&(H=void 0);const _e=(0,r.default)(ee,(0,t.default)({shouldForwardProp:H,label:J},be)),Te=We=>typeof We=="function"&&We.__emotion_real!==We||(0,o.isPlainObject)(We)?at=>{const Oe=S({theme:at.theme,defaultTheme:R,themeId:w});return E(We,(0,t.default)({},at,{theme:Oe}),Oe.modularCssLayers?Ee:void 0)}:We,Re=(We,...at)=>{let Oe=Te(We);const ge=at?at.map(Te):[];oe&&le&&ge.push(Ge=>{const qe=S((0,t.default)({},Ge,{defaultTheme:R,themeId:w}));if(!qe.components||!qe.components[oe]||!qe.components[oe].styleOverrides)return null;const it=qe.components[oe].styleOverrides,Ve={};return Object.entries(it).forEach(([Be,_t])=>{Ve[Be]=E(_t,(0,t.default)({},Ge,{theme:qe}),qe.modularCssLayers?"theme":void 0)}),le(Ge,Ve)}),oe&&!Y&&ge.push(Ge=>{var qe;const it=S((0,t.default)({},Ge,{defaultTheme:R,themeId:w})),Ve=it==null||(qe=it.components)==null||(qe=qe[oe])==null?void 0:qe.variants;return E({variants:Ve},(0,t.default)({},Ge,{theme:it}),it.modularCssLayers?"theme":void 0)}),te||ge.push(ie);const re=ge.length-at.length;if(Array.isArray(We)&&re>0){const Ge=new Array(re).fill("");Oe=[...We,...Ge],Oe.raw=[...We.raw,...Ge]}const $e=_e(Oe,...ge);return ee.muiName&&($e.muiName=ee.muiName),$e};return _e.withConfig&&(Re.withConfig=_e.withConfig),Re}}return ud}var Lz=Rz();const zz=Od(Lz);function uP(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Es=e=>uP(e)&&e!=="classes",Wt=zz({themeId:bf,defaultTheme:Lx,rootShouldForwardProp:Es}),Fz=["theme"];function jz(e){let{theme:t}=e,n=Zt(e,Fz);const r=t[bf];let o=r||t;return typeof t!="function"&&(r&&!r.vars?o=fe({},r,{vars:null}):t&&!t.vars&&(o=fe({},t,{vars:null}))),de.jsx(NL,fe({},n,{themeId:r?bf:void 0,theme:o}))}const uM=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function zn(e){return jL(e)}function Bz(e){return Rn("MuiSvgIcon",e)}Ln("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Nz=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Uz=e=>{const{color:t,fontSize:n,classes:r}=e,o={root:["root",t!=="inherit"&&`color${Nt(t)}`,`fontSize${Nt(n)}`]};return jn(o,Bz,r)},Vz=Wt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Nt(n.color)}`],t[`fontSize${Nt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,o,s,l,u,d,p,g,h,m,x,_;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(o=e.transitions)==null||(o=o.duration)==null?void 0:o.shorter}),fontSize:{inherit:"inherit",small:((s=e.typography)==null||(l=s.pxToRem)==null?void 0:l.call(s,20))||"1.25rem",medium:((u=e.typography)==null||(d=u.pxToRem)==null?void 0:d.call(u,24))||"1.5rem",large:((p=e.typography)==null||(g=p.pxToRem)==null?void 0:g.call(p,35))||"2.1875rem"}[t.fontSize],color:(h=(m=(e.vars||e).palette)==null||(m=m[t.color])==null?void 0:m.main)!=null?h:{action:(x=(e.vars||e).palette)==null||(x=x.action)==null?void 0:x.active,disabled:(_=(e.vars||e).palette)==null||(_=_.action)==null?void 0:_.disabled,inherit:void 0}[t.color]}}),V0=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiSvgIcon"}),{children:o,className:s,color:l="inherit",component:u="svg",fontSize:d="medium",htmlColor:p,inheritViewBox:g=!1,titleAccess:h,viewBox:m="0 0 24 24"}=r,x=Zt(r,Nz),_=ne.isValidElement(o)&&o.type==="svg",b=fe({},r,{color:l,component:u,fontSize:d,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:m,hasSvgAsChild:_}),I={};g||(I.viewBox=m);const T=Uz(b);return de.jsxs(Vz,fe({as:u,className:tn(T.root,s),focusable:"false",color:p,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n},I,x,_&&o.props,{ownerState:b,children:[_?o.props.children:o,h?de.jsx("title",{children:h}):null]}))});V0.muiName="SvgIcon";function xa(e,t){function n(r,o){return de.jsx(V0,fe({"data-testid":`${t}Icon`,ref:o},r,{children:e}))}return n.muiName=V0.muiName,ne.memo(ne.forwardRef(n))}function W0(e,t){return W0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},W0(e,t)}function dP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,W0(e,t)}const dM={disabled:!1},$v=$i.createContext(null);var Wz=function(t){return t.scrollTop},bg="unmounted",gd="exited",_d="entering",df="entered",G0="exiting",ul=(function(e){dP(t,e);function t(r,o){var s;s=e.call(this,r,o)||this;var l=o,u=l&&!l.isMounting?r.enter:r.appear,d;return s.appearStatus=null,r.in?u?(d=gd,s.appearStatus=_d):d=df:r.unmountOnExit||r.mountOnEnter?d=bg:d=gd,s.state={status:d},s.nextCallback=null,s}t.getDerivedStateFromProps=function(o,s){var l=o.in;return l&&s.status===bg?{status:gd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var s=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==_d&&l!==df&&(s=_d):(l===_d||l===df)&&(s=G0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,s,l,u;return s=l=u=o,o!=null&&typeof o!="number"&&(s=o.exit,l=o.enter,u=o.appear!==void 0?o.appear:l),{exit:s,enter:l,appear:u}},n.updateStatus=function(o,s){if(o===void 0&&(o=!1),s!==null)if(this.cancelNextCallback(),s===_d){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:N_.findDOMNode(this);l&&Wz(l)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===gd&&this.setState({status:bg})},n.performEnter=function(o){var s=this,l=this.props.enter,u=this.context?this.context.isMounting:o,d=this.props.nodeRef?[u]:[N_.findDOMNode(this),u],p=d[0],g=d[1],h=this.getTimeouts(),m=u?h.appear:h.enter;if(!o&&!l||dM.disabled){this.safeSetState({status:df},function(){s.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:_d},function(){s.props.onEntering(p,g),s.onTransitionEnd(m,function(){s.safeSetState({status:df},function(){s.props.onEntered(p,g)})})})},n.performExit=function(){var o=this,s=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:N_.findDOMNode(this);if(!s||dM.disabled){this.safeSetState({status:gd},function(){o.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:G0},function(){o.props.onExiting(u),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:gd},function(){o.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,s){s=this.setNextCallback(s),this.setState(o,s)},n.setNextCallback=function(o){var s=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,s.nextCallback=null,o(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(o,s){this.setNextCallback(s);var l=this.props.nodeRef?this.props.nodeRef.current:N_.findDOMNode(this),u=o==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],g=d[1];this.props.addEndListener(p,g)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===bg)return null;var s=this.props,l=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var u=Zt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return $i.createElement($v.Provider,{value:null},typeof l=="function"?l(o,u):$i.cloneElement($i.Children.only(l),u))},t})($i.Component);ul.contextType=$v;ul.propTypes={};function cf(){}ul.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cf,onEntering:cf,onEntered:cf,onExit:cf,onExiting:cf,onExited:cf};ul.UNMOUNTED=bg;ul.EXITED=gd;ul.ENTERING=_d;ul.ENTERED=df;ul.EXITING=G0;function Gz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zx(e,t){var n=function(s){return t&&ne.isValidElement(s)?t(s):s},r=Object.create(null);return e&&ne.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function Kz(e,t){e=e||{},t=t||{};function n(g){return g in t?t[g]:e[g]}var r=Object.create(null),o=[];for(var s in e)s in t?o.length&&(r[s]=o,o=[]):o.push(s);var l,u={};for(var d in t){if(r[d])for(l=0;l<r[d].length;l++){var p=r[d][l];u[r[d][l]]=n(p)}u[d]=n(d)}for(l=0;l<o.length;l++)u[o[l]]=n(o[l]);return u}function wd(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Hz(e,t){return zx(e.children,function(n){return ne.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:wd(n,"appear",e),enter:wd(n,"enter",e),exit:wd(n,"exit",e)})})}function qz(e,t,n){var r=zx(e.children),o=Kz(t,r);return Object.keys(o).forEach(function(s){var l=o[s];if(ne.isValidElement(l)){var u=s in t,d=s in r,p=t[s],g=ne.isValidElement(p)&&!p.props.in;d&&(!u||g)?o[s]=ne.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:wd(l,"exit",e),enter:wd(l,"enter",e)}):!d&&u&&!g?o[s]=ne.cloneElement(l,{in:!1}):d&&u&&ne.isValidElement(p)&&(o[s]=ne.cloneElement(l,{onExited:n.bind(null,l),in:p.props.in,exit:wd(l,"exit",e),enter:wd(l,"enter",e)}))}}),o}var Xz=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Qz={component:"div",childFactory:function(t){return t}},Fx=(function(e){dP(t,e);function t(r,o){var s;s=e.call(this,r,o)||this;var l=s.handleExited.bind(Gz(s));return s.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(o,s){var l=s.children,u=s.handleExited,d=s.firstRender;return{children:d?Hz(o,u):qz(o,l,u),firstRender:!1}},n.handleExited=function(o,s){var l=zx(this.props.children);o.key in l||(o.props.onExited&&o.props.onExited(s),this.mounted&&this.setState(function(u){var d=fe({},u.children);return delete d[o.key],{children:d}}))},n.render=function(){var o=this.props,s=o.component,l=o.childFactory,u=Zt(o,["component","childFactory"]),d=this.state.contextValue,p=Xz(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,s===null?$i.createElement($v.Provider,{value:d},p):$i.createElement($v.Provider,{value:d},$i.createElement(s,u,p))},t})($i.Component);Fx.propTypes={};Fx.defaultProps=Qz;const pP=e=>e.scrollTop;function Mf(e,t){var n,r;const{timeout:o,easing:s,style:l={}}=e;return{duration:(n=l.transitionDuration)!=null?n:typeof o=="number"?o:o[t.mode]||0,easing:(r=l.transitionTimingFunction)!=null?r:typeof s=="object"?s[t.mode]:s,delay:l.transitionDelay}}function Yz(e){return Rn("MuiCollapse",e)}Ln("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Zz=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Jz=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return jn(r,Yz,n)},eF=Wt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>fe({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&fe({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),tF=Wt("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>fe({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),nF=Wt("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>fe({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),fP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiCollapse"}),{addEndListener:o,children:s,className:l,collapsedSize:u="0px",component:d,easing:p,in:g,onEnter:h,onEntered:m,onEntering:x,onExit:_,onExited:b,onExiting:I,orientation:T="vertical",style:S,timeout:D=cP.standard,TransitionComponent:E=ul}=r,C=Zt(r,Zz),P=fe({},r,{orientation:T,collapsedSize:u}),w=Jz(P),R=Rf(),U=py(),N=ne.useRef(null),ie=ne.useRef(),ee=typeof u=="number"?`${u}px`:u,q=T==="horizontal",oe=q?"width":"height",ae=ne.useRef(null),X=li(n,ae),se=Te=>Re=>{if(Te){const We=ae.current;Re===void 0?Te(We):Te(We,Re)}},le=()=>N.current?N.current[q?"clientWidth":"clientHeight"]:0,be=se((Te,Re)=>{N.current&&q&&(N.current.style.position="absolute"),Te.style[oe]=ee,h&&h(Te,Re)}),Ee=se((Te,Re)=>{const We=le();N.current&&q&&(N.current.style.position="");const{duration:at,easing:Oe}=Mf({style:S,timeout:D,easing:p},{mode:"enter"});if(D==="auto"){const ge=R.transitions.getAutoHeightDuration(We);Te.style.transitionDuration=`${ge}ms`,ie.current=ge}else Te.style.transitionDuration=typeof at=="string"?at:`${at}ms`;Te.style[oe]=`${We}px`,Te.style.transitionTimingFunction=Oe,x&&x(Te,Re)}),Y=se((Te,Re)=>{Te.style[oe]="auto",m&&m(Te,Re)}),te=se(Te=>{Te.style[oe]=`${le()}px`,_&&_(Te)}),J=se(b),H=se(Te=>{const Re=le(),{duration:We,easing:at}=Mf({style:S,timeout:D,easing:p},{mode:"exit"});if(D==="auto"){const Oe=R.transitions.getAutoHeightDuration(Re);Te.style.transitionDuration=`${Oe}ms`,ie.current=Oe}else Te.style.transitionDuration=typeof We=="string"?We:`${We}ms`;Te.style[oe]=ee,Te.style.transitionTimingFunction=at,I&&I(Te)}),_e=Te=>{D==="auto"&&U.start(ie.current||0,Te),o&&o(ae.current,Te)};return de.jsx(E,fe({in:g,onEnter:be,onEntered:Y,onEntering:Ee,onExit:te,onExited:J,onExiting:H,addEndListener:_e,nodeRef:ae,timeout:D==="auto"?null:D},C,{children:(Te,Re)=>de.jsx(eF,fe({as:d,className:tn(w.root,l,{entered:w.entered,exited:!g&&ee==="0px"&&w.hidden}[Te]),style:fe({[q?"minWidth":"minHeight"]:ee},S),ref:X},Re,{ownerState:fe({},P,{state:Te}),children:de.jsx(tF,{ownerState:fe({},P,{state:Te}),className:w.wrapper,ref:N,children:de.jsx(nF,{ownerState:fe({},P,{state:Te}),className:w.wrapperInner,children:s})})}))}))});fP.muiSupportAuto=!0;function rF(e){return Rn("MuiPaper",e)}Ln("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const aF=["className","component","elevation","square","variant"],iF=e=>{const{square:t,elevation:n,variant:r,classes:o}=e,s={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return jn(s,rF,o)},oF=Wt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return fe({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&fe({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${cr.alpha("#fff",uM(t.elevation))}, ${cr.alpha("#fff",uM(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),il=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiPaper"}),{className:o,component:s="div",elevation:l=1,square:u=!1,variant:d="elevation"}=r,p=Zt(r,aF),g=fe({},r,{component:s,elevation:l,square:u,variant:d}),h=iF(g);return de.jsx(oF,fe({as:s,ownerState:g,className:tn(h.root,o),ref:n},p))}),sF=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],lF=["component","slots","slotProps"],cF=["component"];function pM(e,t){const{className:n,elementType:r,ownerState:o,externalForwardedProps:s,getSlotOwnerState:l,internalForwardedProps:u}=t,d=Zt(t,sF),{component:p,slots:g={[e]:void 0},slotProps:h={[e]:void 0}}=s,m=Zt(s,lF),x=g[e]||r,_=rP(h[e],o),b=nP(fe({className:n},d,{externalForwardedProps:e==="root"?m:void 0,externalSlotProps:_})),{props:{component:I},internalRef:T}=b,S=Zt(b.props,cF),D=li(T,_?.ref,t.ref),E=l?l(S):{},C=fe({},o,E),P=e==="root"?I||p:I,w=tP(x,fe({},e==="root"&&!p&&!g[e]&&u,e!=="root"&&!g[e]&&u,S,P&&{as:P},{ref:D}),C);return Object.keys(E).forEach(R=>{delete w[R]}),[x,w]}function uF(e){const{className:t,classes:n,pulsate:r=!1,rippleX:o,rippleY:s,rippleSize:l,in:u,onExited:d,timeout:p}=e,[g,h]=ne.useState(!1),m=tn(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),x={width:l,height:l,top:-(l/2)+s,left:-(l/2)+o},_=tn(n.child,g&&n.childLeaving,r&&n.childPulsate);return!u&&!g&&h(!0),ne.useEffect(()=>{if(!u&&d!=null){const b=setTimeout(d,p);return()=>{clearTimeout(b)}}},[d,u,p]),de.jsx("span",{className:m,style:x,children:de.jsx("span",{className:_})})}const vs=Ln("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),dF=["center","classes","className"];let hy=e=>e,fM,mM,hM,gM;const K0=550,pF=80,fF=$d(fM||(fM=hy`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),mF=$d(mM||(mM=hy`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hF=$d(hM||(hM=hy`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),gF=Wt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),_F=Wt(uF,{name:"MuiTouchRipple",slot:"Ripple"})(gM||(gM=hy`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),vs.rippleVisible,fF,K0,({theme:e})=>e.transitions.easing.easeInOut,vs.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,vs.child,vs.childLeaving,mF,K0,({theme:e})=>e.transitions.easing.easeInOut,vs.childPulsate,hF,({theme:e})=>e.transitions.easing.easeInOut),vF=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiTouchRipple"}),{center:o=!1,classes:s={},className:l}=r,u=Zt(r,dF),[d,p]=ne.useState([]),g=ne.useRef(0),h=ne.useRef(null);ne.useEffect(()=>{h.current&&(h.current(),h.current=null)},[d]);const m=ne.useRef(!1),x=py(),_=ne.useRef(null),b=ne.useRef(null),I=ne.useCallback(E=>{const{pulsate:C,rippleX:P,rippleY:w,rippleSize:R,cb:U}=E;p(N=>[...N,de.jsx(_F,{classes:{ripple:tn(s.ripple,vs.ripple),rippleVisible:tn(s.rippleVisible,vs.rippleVisible),ripplePulsate:tn(s.ripplePulsate,vs.ripplePulsate),child:tn(s.child,vs.child),childLeaving:tn(s.childLeaving,vs.childLeaving),childPulsate:tn(s.childPulsate,vs.childPulsate)},timeout:K0,pulsate:C,rippleX:P,rippleY:w,rippleSize:R},g.current)]),g.current+=1,h.current=U},[s]),T=ne.useCallback((E={},C={},P=()=>{})=>{const{pulsate:w=!1,center:R=o||C.pulsate,fakeElement:U=!1}=C;if(E?.type==="mousedown"&&m.current){m.current=!1;return}E?.type==="touchstart"&&(m.current=!0);const N=U?null:b.current,ie=N?N.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ee,q,oe;if(R||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)ee=Math.round(ie.width/2),q=Math.round(ie.height/2);else{const{clientX:ae,clientY:X}=E.touches&&E.touches.length>0?E.touches[0]:E;ee=Math.round(ae-ie.left),q=Math.round(X-ie.top)}if(R)oe=Math.sqrt((2*ie.width**2+ie.height**2)/3),oe%2===0&&(oe+=1);else{const ae=Math.max(Math.abs((N?N.clientWidth:0)-ee),ee)*2+2,X=Math.max(Math.abs((N?N.clientHeight:0)-q),q)*2+2;oe=Math.sqrt(ae**2+X**2)}E!=null&&E.touches?_.current===null&&(_.current=()=>{I({pulsate:w,rippleX:ee,rippleY:q,rippleSize:oe,cb:P})},x.start(pF,()=>{_.current&&(_.current(),_.current=null)})):I({pulsate:w,rippleX:ee,rippleY:q,rippleSize:oe,cb:P})},[o,I,x]),S=ne.useCallback(()=>{T({},{pulsate:!0})},[T]),D=ne.useCallback((E,C)=>{if(x.clear(),E?.type==="touchend"&&_.current){_.current(),_.current=null,x.start(0,()=>{D(E,C)});return}_.current=null,p(P=>P.length>0?P.slice(1):P),h.current=C},[x]);return ne.useImperativeHandle(n,()=>({pulsate:S,start:T,stop:D}),[S,T,D]),de.jsx(gF,fe({className:tn(vs.root,s.root,l),ref:b},u,{children:de.jsx(Fx,{component:null,exit:!0,children:d})}))});function yF(e){return Rn("MuiButtonBase",e)}const bF=Ln("MuiButtonBase",["root","disabled","focusVisible"]),xF=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],wF=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:o}=e,l=jn({root:["root",t&&"disabled",n&&"focusVisible"]},yF,o);return n&&r&&(l.root+=` ${r}`),l},MF=Wt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bF.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),vu=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiButtonBase"}),{action:o,centerRipple:s=!1,children:l,className:u,component:d="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:h=!1,focusRipple:m=!1,LinkComponent:x="a",onBlur:_,onClick:b,onContextMenu:I,onDragLeave:T,onFocus:S,onFocusVisible:D,onKeyDown:E,onKeyUp:C,onMouseDown:P,onMouseLeave:w,onMouseUp:R,onTouchEnd:U,onTouchMove:N,onTouchStart:ie,tabIndex:ee=0,TouchRippleProps:q,touchRippleRef:oe,type:ae}=r,X=Zt(r,xF),se=ne.useRef(null),le=ne.useRef(null),be=li(le,oe),{isFocusVisibleRef:Ee,onFocus:Y,onBlur:te,ref:J}=PL(),[H,_e]=ne.useState(!1);p&&H&&_e(!1),ne.useImperativeHandle(o,()=>({focusVisible:()=>{_e(!0),se.current.focus()}}),[]);const[Te,Re]=ne.useState(!1);ne.useEffect(()=>{Re(!0)},[]);const We=Te&&!g&&!p;ne.useEffect(()=>{H&&m&&!g&&Te&&le.current.pulsate()},[g,m,H,Te]);function at(He,Bt,qt=h){return Vo(xn=>(Bt&&Bt(xn),!qt&&le.current&&le.current[He](xn),!0))}const Oe=at("start",P),ge=at("stop",I),re=at("stop",T),$e=at("stop",R),Ge=at("stop",He=>{H&&He.preventDefault(),w&&w(He)}),qe=at("start",ie),it=at("stop",U),Ve=at("stop",N),Be=at("stop",He=>{te(He),Ee.current===!1&&_e(!1),_&&_(He)},!1),_t=Vo(He=>{se.current||(se.current=He.currentTarget),Y(He),Ee.current===!0&&(_e(!0),D&&D(He)),S&&S(He)}),Ne=()=>{const He=se.current;return d&&d!=="button"&&!(He.tagName==="A"&&He.href)},Ye=ne.useRef(!1),kt=Vo(He=>{m&&!Ye.current&&H&&le.current&&He.key===" "&&(Ye.current=!0,le.current.stop(He,()=>{le.current.start(He)})),He.target===He.currentTarget&&Ne()&&He.key===" "&&He.preventDefault(),E&&E(He),He.target===He.currentTarget&&Ne()&&He.key==="Enter"&&!p&&(He.preventDefault(),b&&b(He))}),mt=Vo(He=>{m&&He.key===" "&&le.current&&H&&!He.defaultPrevented&&(Ye.current=!1,le.current.stop(He,()=>{le.current.pulsate(He)})),C&&C(He),b&&He.target===He.currentTarget&&Ne()&&He.key===" "&&!He.defaultPrevented&&b(He)});let Tt=d;Tt==="button"&&(X.href||X.to)&&(Tt=x);const Ke={};Tt==="button"?(Ke.type=ae===void 0?"button":ae,Ke.disabled=p):(!X.href&&!X.to&&(Ke.role="button"),p&&(Ke["aria-disabled"]=p));const dt=li(n,J,se),wt=fe({},r,{centerRipple:s,component:d,disabled:p,disableRipple:g,disableTouchRipple:h,focusRipple:m,tabIndex:ee,focusVisible:H}),st=wF(wt);return de.jsxs(MF,fe({as:Tt,className:tn(st.root,u),ownerState:wt,onBlur:Be,onClick:b,onContextMenu:ge,onFocus:_t,onKeyDown:kt,onKeyUp:mt,onMouseDown:Oe,onMouseLeave:Ge,onMouseUp:$e,onDragLeave:re,onTouchEnd:it,onTouchMove:Ve,onTouchStart:qe,ref:dt,tabIndex:p?-1:ee,type:ae},Ke,X,{children:[l,We?de.jsx(vF,fe({ref:be,center:s},q)):null]}))});function TF(e){return Rn("MuiAlert",e)}const _M=Ln("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function EF(e){return Rn("MuiIconButton",e)}const SF=Ln("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),CF=["edge","children","className","color","disabled","disableFocusRipple","size"],PF=e=>{const{classes:t,disabled:n,color:r,edge:o,size:s}=e,l={root:["root",n&&"disabled",r!=="default"&&`color${Nt(r)}`,o&&`edge${Nt(o)}`,`size${Nt(s)}`]};return jn(l,EF,t)},kF=Wt(vu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Nt(n.color)}`],n.edge&&t[`edge${Nt(n.edge)}`],t[`size${Nt(n.size)}`]]}})(({theme:e,ownerState:t})=>fe({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return fe({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&fe({color:r?.main},!t.disableRipple&&{"&:hover":fe({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${SF.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),Bg=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiIconButton"}),{edge:o=!1,children:s,className:l,color:u="default",disabled:d=!1,disableFocusRipple:p=!1,size:g="medium"}=r,h=Zt(r,CF),m=fe({},r,{edge:o,color:u,disabled:d,disableFocusRipple:p,size:g}),x=PF(m);return de.jsx(kF,fe({className:tn(x.root,l),centerRipple:!0,focusRipple:!p,disabled:d,ref:n},h,{ownerState:m,children:s}))}),AF=xa(de.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),OF=xa(de.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),$F=xa(de.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),DF=xa(de.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),IF=xa(de.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),RF=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],LF=e=>{const{variant:t,color:n,severity:r,classes:o}=e,s={root:["root",`color${Nt(n||r)}`,`${t}${Nt(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return jn(s,TF,o)},zF=Wt(il,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Nt(n.color||n.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?cr.darken:cr.lighten,n=e.palette.mode==="light"?cr.lighten:cr.darken;return fe({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:n(e.palette[r].light,.9),[`& .${_M.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${_M.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:fe({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)})}))]})}),FF=Wt("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),jF=Wt("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),vM=Wt("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),yM={success:de.jsx(AF,{fontSize:"inherit"}),warning:de.jsx(OF,{fontSize:"inherit"}),error:de.jsx($F,{fontSize:"inherit"}),info:de.jsx(DF,{fontSize:"inherit"})},Nl=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiAlert"}),{action:o,children:s,className:l,closeText:u="Close",color:d,components:p={},componentsProps:g={},icon:h,iconMapping:m=yM,onClose:x,role:_="alert",severity:b="success",slotProps:I={},slots:T={},variant:S="standard"}=r,D=Zt(r,RF),E=fe({},r,{color:d,severity:b,variant:S,colorSeverity:d||b}),C=LF(E),P={slots:fe({closeButton:p.CloseButton,closeIcon:p.CloseIcon},T),slotProps:fe({},g,I)},[w,R]=pM("closeButton",{elementType:Bg,externalForwardedProps:P,ownerState:E}),[U,N]=pM("closeIcon",{elementType:IF,externalForwardedProps:P,ownerState:E});return de.jsxs(zF,fe({role:_,elevation:0,ownerState:E,className:tn(C.root,l),ref:n},D,{children:[h!==!1?de.jsx(FF,{ownerState:E,className:C.icon,children:h||m[b]||yM[b]}):null,de.jsx(jF,{ownerState:E,className:C.message,children:s}),o!=null?de.jsx(vM,{ownerState:E,className:C.action,children:o}):null,o==null&&x?de.jsx(vM,{ownerState:E,className:C.action,children:de.jsx(w,fe({size:"small","aria-label":u,title:u,color:"inherit",onClick:x},R,{children:de.jsx(U,fe({fontSize:"small"},N))}))}):null]}))});function BF(e){return Rn("MuiTypography",e)}Ln("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const NF=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],UF=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:s,classes:l}=e,u={root:["root",s,e.align!=="inherit"&&`align${Nt(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return jn(u,BF,l)},VF=Wt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Nt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>fe({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),bM={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},WF={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},GF=e=>WF[e]||e,ia=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiTypography"}),o=GF(r.color),s=ly(fe({},r,{color:o})),{align:l="inherit",className:u,component:d,gutterBottom:p=!1,noWrap:g=!1,paragraph:h=!1,variant:m="body1",variantMapping:x=bM}=s,_=Zt(s,NF),b=fe({},s,{align:l,color:o,className:u,component:d,gutterBottom:p,noWrap:g,paragraph:h,variant:m,variantMapping:x}),I=d||(h?"p":x[m]||bM[m])||"span",T=UF(b);return de.jsx(VF,fe({as:I,ref:n,ownerState:b,className:tn(T.root,u)},_))});function KF(e){return Rn("MuiAppBar",e)}Ln("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const HF=["className","color","enableColorOnDark","position"],qF=e=>{const{color:t,position:n,classes:r}=e,o={root:["root",`color${Nt(t)}`,`position${Nt(n)}`]};return jn(o,KF,r)},G_=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,XF=Wt(il,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Nt(n.position)}`],t[`color${Nt(n.color)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return fe({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&fe({},t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&fe({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&fe({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:G_(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:G_(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:G_(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:G_(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},!["inherit","transparent"].includes(t.color)&&{backgroundColor:"var(--AppBar-background)"},{color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),QF=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiAppBar"}),{className:o,color:s="primary",enableColorOnDark:l=!1,position:u="fixed"}=r,d=Zt(r,HF),p=fe({},r,{color:s,position:u,enableColorOnDark:l}),g=qF(p);return de.jsx(XF,fe({square:!0,component:"header",ownerState:p,elevation:4,className:tn(g.root,o,u==="fixed"&&"mui-fixed"),ref:n},d))});function YF(e){return typeof e=="function"?e():e}const ZF=ne.forwardRef(function(t,n){const{children:r,container:o,disablePortal:s=!1}=t,[l,u]=ne.useState(null),d=li(ne.isValidElement(r)?If(r):null,n);if(Ms(()=>{s||u(YF(o)||document.body)},[o,s]),Ms(()=>{if(l&&!s)return N0(n,l),()=>{N0(n,null)}},[n,l,s]),s){if(ne.isValidElement(r)){const p={ref:d};return ne.cloneElement(r,p)}return de.jsx(ne.Fragment,{children:r})}return de.jsx(ne.Fragment,{children:l&&o2.createPortal(r,l)})}),JF=xa(de.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ej(e){return Rn("MuiChip",e)}const Rr=Ln("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),tj=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],nj=e=>{const{classes:t,disabled:n,size:r,color:o,iconColor:s,onDelete:l,clickable:u,variant:d}=e,p={root:["root",d,n&&"disabled",`size${Nt(r)}`,`color${Nt(o)}`,u&&"clickable",u&&`clickableColor${Nt(o)}`,l&&"deletable",l&&`deletableColor${Nt(o)}`,`${d}${Nt(o)}`],label:["label",`label${Nt(r)}`],avatar:["avatar",`avatar${Nt(r)}`,`avatarColor${Nt(o)}`],icon:["icon",`icon${Nt(r)}`,`iconColor${Nt(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Nt(r)}`,`deleteIconColor${Nt(o)}`,`deleteIcon${Nt(d)}Color${Nt(o)}`]};return jn(p,ej,t)},rj=Wt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:o,clickable:s,onDelete:l,size:u,variant:d}=n;return[{[`& .${Rr.avatar}`]:t.avatar},{[`& .${Rr.avatar}`]:t[`avatar${Nt(u)}`]},{[`& .${Rr.avatar}`]:t[`avatarColor${Nt(r)}`]},{[`& .${Rr.icon}`]:t.icon},{[`& .${Rr.icon}`]:t[`icon${Nt(u)}`]},{[`& .${Rr.icon}`]:t[`iconColor${Nt(o)}`]},{[`& .${Rr.deleteIcon}`]:t.deleteIcon},{[`& .${Rr.deleteIcon}`]:t[`deleteIcon${Nt(u)}`]},{[`& .${Rr.deleteIcon}`]:t[`deleteIconColor${Nt(r)}`]},{[`& .${Rr.deleteIcon}`]:t[`deleteIcon${Nt(d)}Color${Nt(r)}`]},t.root,t[`size${Nt(u)}`],t[`color${Nt(r)}`],s&&t.clickable,s&&r!=="default"&&t[`clickableColor${Nt(r)})`],l&&t.deletable,l&&r!=="default"&&t[`deletableColor${Nt(r)}`],t[d],t[`${d}${Nt(r)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return fe({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Rr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Rr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${Rr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Rr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Rr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Rr.icon}`]:fe({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&fe({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${Rr.deleteIcon}`]:fe({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:cr.alpha(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:cr.alpha(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:cr.alpha(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Rr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cr.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Rr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>fe({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:cr.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Rr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cr.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Rr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>fe({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Rr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Rr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Rr.avatar}`]:{marginLeft:4},[`& .${Rr.avatarSmall}`]:{marginLeft:2},[`& .${Rr.icon}`]:{marginLeft:4},[`& .${Rr.iconSmall}`]:{marginLeft:2},[`& .${Rr.deleteIcon}`]:{marginRight:5},[`& .${Rr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:cr.alpha(e.palette[t.color].main,.7)}`,[`&.${Rr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Rr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:cr.alpha(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Rr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:cr.alpha(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),aj=Wt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${Nt(r)}`]]}})(({ownerState:e})=>fe({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function xM(e){return e.key==="Backspace"||e.key==="Delete"}const _v=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiChip"}),{avatar:o,className:s,clickable:l,color:u="default",component:d,deleteIcon:p,disabled:g=!1,icon:h,label:m,onClick:x,onDelete:_,onKeyDown:b,onKeyUp:I,size:T="medium",variant:S="filled",tabIndex:D,skipFocusWhenDisabled:E=!1}=r,C=Zt(r,tj),P=ne.useRef(null),w=li(P,n),R=be=>{be.stopPropagation(),_&&_(be)},U=be=>{be.currentTarget===be.target&&xM(be)&&be.preventDefault(),b&&b(be)},N=be=>{be.currentTarget===be.target&&(_&&xM(be)?_(be):be.key==="Escape"&&P.current&&P.current.blur()),I&&I(be)},ie=l!==!1&&x?!0:l,ee=ie||_?vu:d||"div",q=fe({},r,{component:ee,disabled:g,size:T,color:u,iconColor:ne.isValidElement(h)&&h.props.color||u,onDelete:!!_,clickable:ie,variant:S}),oe=nj(q),ae=ee===vu?fe({component:d||"div",focusVisibleClassName:oe.focusVisible},_&&{disableRipple:!0}):{};let X=null;_&&(X=p&&ne.isValidElement(p)?ne.cloneElement(p,{className:tn(p.props.className,oe.deleteIcon),onClick:R}):de.jsx(JF,{className:tn(oe.deleteIcon),onClick:R}));let se=null;o&&ne.isValidElement(o)&&(se=ne.cloneElement(o,{className:tn(oe.avatar,o.props.className)}));let le=null;return h&&ne.isValidElement(h)&&(le=ne.cloneElement(h,{className:tn(oe.icon,h.props.className)})),de.jsxs(rj,fe({as:ee,className:tn(oe.root,s),disabled:ie&&g?!0:void 0,onClick:x,onKeyDown:U,onKeyUp:N,ref:w,tabIndex:E&&g?-1:D,ownerState:q},ae,C,{children:[se||le,de.jsx(aj,{className:tn(oe.label),ownerState:q,children:m}),X]}))}),ij=["onChange","maxRows","minRows","style","value"];function K_(e){return parseInt(e,10)||0}const oj={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function sj(e){for(const t in e)return!1;return!0}function wM(e){return sj(e)||e.outerHeightStyle===0&&!e.overflowing}const lj=ne.forwardRef(function(t,n){const{onChange:r,maxRows:o,minRows:s=1,style:l,value:u}=t,d=Zt(t,ij),{current:p}=ne.useRef(u!=null),g=ne.useRef(null),h=li(n,g),m=ne.useRef(null),x=ne.useRef(null),_=ne.useCallback(()=>{const D=g.current,E=x.current;if(!D||!E)return;const P=Ec(D).getComputedStyle(D);if(P.width==="0px")return{outerHeightStyle:0,overflowing:!1};E.style.width=P.width,E.value=D.value||t.placeholder||"x",E.value.slice(-1)===`
`&&(E.value+=" ");const w=P.boxSizing,R=K_(P.paddingBottom)+K_(P.paddingTop),U=K_(P.borderBottomWidth)+K_(P.borderTopWidth),N=E.scrollHeight;E.value="x";const ie=E.scrollHeight;let ee=N;s&&(ee=Math.max(Number(s)*ie,ee)),o&&(ee=Math.min(Number(o)*ie,ee)),ee=Math.max(ee,ie);const q=ee+(w==="border-box"?R+U:0),oe=Math.abs(ee-N)<=1;return{outerHeightStyle:q,overflowing:oe}},[o,s,t.placeholder]),b=Vo(()=>{const D=g.current,E=_();if(!D||!E||wM(E))return!1;const C=E.outerHeightStyle;return m.current!=null&&m.current!==C}),I=ne.useCallback(()=>{const D=g.current,E=_();if(!D||!E||wM(E))return;const C=E.outerHeightStyle;m.current!==C&&(m.current=C,D.style.height=`${C}px`),D.style.overflow=E.overflowing?"hidden":""},[_]),T=ne.useRef(-1);Ms(()=>{const D=cy(I),E=g?.current;if(!E)return;const C=Ec(E);C.addEventListener("resize",D);let P;return typeof ResizeObserver<"u"&&(P=new ResizeObserver(()=>{b()&&(P.unobserve(E),cancelAnimationFrame(T.current),I(),T.current=requestAnimationFrame(()=>{P.observe(E)}))}),P.observe(E)),()=>{D.clear(),cancelAnimationFrame(T.current),C.removeEventListener("resize",D),P&&P.disconnect()}},[_,I,b]),Ms(()=>{I()});const S=D=>{p||I(),r&&r(D)};return de.jsxs(ne.Fragment,{children:[de.jsx("textarea",fe({value:u,onChange:S,ref:h,rows:s,style:l},d)),de.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:x,tabIndex:-1,style:fe({},oj.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function Lf({props:e,states:t,muiFormControl:n}){return t.reduce((r,o)=>(r[o]=e[o],n&&typeof e[o]>"u"&&(r[o]=n[o]),r),{})}const jx=ne.createContext(void 0);function zf(){return ne.useContext(jx)}function mP(e){return de.jsx(W2,fe({},e,{defaultTheme:Lx,themeId:bf}))}function MM(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Dv(e,t=!1){return e&&(MM(e.value)&&e.value!==""||t&&MM(e.defaultValue)&&e.defaultValue!=="")}function cj(e){return e.startAdornment}function uj(e){return Rn("MuiInputBase",e)}const Tf=Ln("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),dj=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],gy=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Nt(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},_y=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},pj=e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:s,focused:l,formControl:u,fullWidth:d,hiddenLabel:p,multiline:g,readOnly:h,size:m,startAdornment:x,type:_}=e,b={root:["root",`color${Nt(n)}`,r&&"disabled",o&&"error",d&&"fullWidth",l&&"focused",u&&"formControl",m&&m!=="medium"&&`size${Nt(m)}`,g&&"multiline",x&&"adornedStart",s&&"adornedEnd",p&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",_==="search"&&"inputTypeSearch",g&&"inputMultiline",m==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",x&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return jn(b,uj,t)},vy=Wt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:gy})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Tf.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&fe({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),yy=Wt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:_y})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=fe({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return fe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Tf.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Tf.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),fj=de.jsx(mP,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Bx=ne.forwardRef(function(t,n){var r;const o=zn({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:l,autoFocus:u,className:d,components:p={},componentsProps:g={},defaultValue:h,disabled:m,disableInjectingGlobalStyles:x,endAdornment:_,fullWidth:b=!1,id:I,inputComponent:T="input",inputProps:S={},inputRef:D,maxRows:E,minRows:C,multiline:P=!1,name:w,onBlur:R,onChange:U,onClick:N,onFocus:ie,onKeyDown:ee,onKeyUp:q,placeholder:oe,readOnly:ae,renderSuffix:X,rows:se,slotProps:le={},slots:be={},startAdornment:Ee,type:Y="text",value:te}=o,J=Zt(o,dj),H=S.value!=null?S.value:te,{current:_e}=ne.useRef(H!=null),Te=ne.useRef(),Re=ne.useCallback(st=>{},[]),We=li(Te,D,S.ref,Re),[at,Oe]=ne.useState(!1),ge=zf(),re=Lf({props:o,muiFormControl:ge,states:["color","disabled","error","hiddenLabel","size","required","filled"]});re.focused=ge?ge.focused:at,ne.useEffect(()=>{!ge&&m&&at&&(Oe(!1),R&&R())},[ge,m,at,R]);const $e=ge&&ge.onFilled,Ge=ge&&ge.onEmpty,qe=ne.useCallback(st=>{Dv(st)?$e&&$e():Ge&&Ge()},[$e,Ge]);Ms(()=>{_e&&qe({value:H})},[H,qe,_e]);const it=st=>{if(re.disabled){st.stopPropagation();return}ie&&ie(st),S.onFocus&&S.onFocus(st),ge&&ge.onFocus?ge.onFocus(st):Oe(!0)},Ve=st=>{R&&R(st),S.onBlur&&S.onBlur(st),ge&&ge.onBlur?ge.onBlur(st):Oe(!1)},Be=(st,...He)=>{if(!_e){const Bt=st.target||Te.current;if(Bt==null)throw new Error(Sd(1));qe({value:Bt.value})}S.onChange&&S.onChange(st,...He),U&&U(st,...He)};ne.useEffect(()=>{qe(Te.current)},[]);const _t=st=>{Te.current&&st.currentTarget===st.target&&Te.current.focus(),N&&N(st)};let Ne=T,Ye=S;P&&Ne==="input"&&(se?Ye=fe({type:void 0,minRows:se,maxRows:se},Ye):Ye=fe({type:void 0,maxRows:E,minRows:C},Ye),Ne=lj);const kt=st=>{qe(st.animationName==="mui-auto-fill-cancel"?Te.current:{value:"x"})};ne.useEffect(()=>{ge&&ge.setAdornedStart(!!Ee)},[ge,Ee]);const mt=fe({},o,{color:re.color||"primary",disabled:re.disabled,endAdornment:_,error:re.error,focused:re.focused,formControl:ge,fullWidth:b,hiddenLabel:re.hiddenLabel,multiline:P,size:re.size,startAdornment:Ee,type:Y}),Tt=pj(mt),Ke=be.root||p.Root||vy,dt=le.root||g.root||{},wt=be.input||p.Input||yy;return Ye=fe({},Ye,(r=le.input)!=null?r:g.input),de.jsxs(ne.Fragment,{children:[!x&&fj,de.jsxs(Ke,fe({},dt,!wf(Ke)&&{ownerState:fe({},mt,dt.ownerState)},{ref:n,onClick:_t},J,{className:tn(Tt.root,dt.className,d,ae&&"MuiInputBase-readOnly"),children:[Ee,de.jsx(jx.Provider,{value:null,children:de.jsx(wt,fe({ownerState:mt,"aria-invalid":re.error,"aria-describedby":s,autoComplete:l,autoFocus:u,defaultValue:h,disabled:re.disabled,id:I,onAnimationStart:kt,name:w,placeholder:oe,readOnly:ae,required:re.required,rows:se,value:H,onKeyDown:ee,onKeyUp:q,type:Y},Ye,!wf(wt)&&{as:Ne,ownerState:fe({},mt,Ye.ownerState)},{ref:We,className:tn(Tt.input,Ye.className,ae&&"MuiInputBase-readOnly"),onBlur:Ve,onChange:Be,onFocus:it}))}),_,X?X(fe({},re,{startAdornment:Ee})):null]}))]})});function mj(e){return Rn("MuiInput",e)}const ag=fe({},Tf,Ln("MuiInput",["root","underline","input"]));function hj(e){return Rn("MuiOutlinedInput",e)}const pu=fe({},Tf,Ln("MuiOutlinedInput",["root","notchedOutline","input"]));function gj(e){return Rn("MuiFilledInput",e)}const dd=fe({},Tf,Ln("MuiFilledInput",["root","underline","input"])),_j=xa(de.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),vj=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],yj={entering:{opacity:1},entered:{opacity:1}},hP=ne.forwardRef(function(t,n){const r=Rf(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:l=!0,children:u,easing:d,in:p,onEnter:g,onEntered:h,onEntering:m,onExit:x,onExited:_,onExiting:b,style:I,timeout:T=o,TransitionComponent:S=ul}=t,D=Zt(t,vj),E=ne.useRef(null),C=li(E,If(u),n),P=oe=>ae=>{if(oe){const X=E.current;ae===void 0?oe(X):oe(X,ae)}},w=P(m),R=P((oe,ae)=>{pP(oe);const X=Mf({style:I,timeout:T,easing:d},{mode:"enter"});oe.style.webkitTransition=r.transitions.create("opacity",X),oe.style.transition=r.transitions.create("opacity",X),g&&g(oe,ae)}),U=P(h),N=P(b),ie=P(oe=>{const ae=Mf({style:I,timeout:T,easing:d},{mode:"exit"});oe.style.webkitTransition=r.transitions.create("opacity",ae),oe.style.transition=r.transitions.create("opacity",ae),x&&x(oe)}),ee=P(_),q=oe=>{s&&s(E.current,oe)};return de.jsx(S,fe({appear:l,in:p,nodeRef:E,onEnter:R,onEntered:U,onEntering:w,onExit:ie,onExited:ee,onExiting:N,addEndListener:q,timeout:T},D,{children:(oe,ae)=>ne.cloneElement(u,fe({style:fe({opacity:0,visibility:oe==="exited"&&!p?"hidden":void 0},yj[oe],I,u.props.style),ref:C},ae))}))});function bj(e){return Rn("MuiBackdrop",e)}Ln("MuiBackdrop",["root","invisible"]);const xj=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],wj=e=>{const{classes:t,invisible:n}=e;return jn({root:["root",n&&"invisible"]},bj,t)},Mj=Wt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>fe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),gP=ne.forwardRef(function(t,n){var r,o,s;const l=zn({props:t,name:"MuiBackdrop"}),{children:u,className:d,component:p="div",components:g={},componentsProps:h={},invisible:m=!1,open:x,slotProps:_={},slots:b={},TransitionComponent:I=hP,transitionDuration:T}=l,S=Zt(l,xj),D=fe({},l,{component:p,invisible:m}),E=wj(D),C=(r=_.root)!=null?r:h.root;return de.jsx(I,fe({in:x,timeout:T},S,{children:de.jsx(Mj,fe({"aria-hidden":!0},C,{as:(o=(s=b.root)!=null?s:g.Root)!=null?o:p,className:tn(E.root,d,C?.className),ownerState:fe({},D,C?.ownerState),classes:E,ref:n,children:u}))}))}),Tj=Ln("MuiBox",["root"]),Ej=Rx(),hi=QR({themeId:bf,defaultTheme:Ej,defaultClassName:Tj.root,generateClassName:G2.generate});function Sj(e){return Rn("MuiButton",e)}const H_=Ln("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Cj=ne.createContext({}),Pj=ne.createContext(void 0),kj=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Aj=e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:s,classes:l}=e,u={root:["root",s,`${s}${Nt(t)}`,`size${Nt(o)}`,`${s}Size${Nt(o)}`,`color${Nt(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Nt(o)}`],endIcon:["icon","endIcon",`iconSize${Nt(o)}`]},d=jn(u,Sj,l);return fe({},l,d)},_P=e=>fe({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Oj=Wt(vu,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Nt(n.color)}`],t[`size${Nt(n.size)}`],t[`${n.variant}Size${Nt(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,r;const o=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],s=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return fe({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":fe({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:cr.alpha(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${H_.focusVisible}`]:fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${H_.disabled}`]:fe({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${cr.alpha(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:o,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${H_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${H_.disabled}`]:{boxShadow:"none"}}),$j=Wt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Nt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},_P(e))),Dj=Wt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Nt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},_P(e))),ys=ne.forwardRef(function(t,n){const r=ne.useContext(Cj),o=ne.useContext(Pj),s=jg(r,t),l=zn({props:s,name:"MuiButton"}),{children:u,color:d="primary",component:p="button",className:g,disabled:h=!1,disableElevation:m=!1,disableFocusRipple:x=!1,endIcon:_,focusVisibleClassName:b,fullWidth:I=!1,size:T="medium",startIcon:S,type:D,variant:E="text"}=l,C=Zt(l,kj),P=fe({},l,{color:d,component:p,disabled:h,disableElevation:m,disableFocusRipple:x,fullWidth:I,size:T,type:D,variant:E}),w=Aj(P),R=S&&de.jsx($j,{className:w.startIcon,ownerState:P,children:S}),U=_&&de.jsx(Dj,{className:w.endIcon,ownerState:P,children:_}),N=o||"";return de.jsxs(Oj,fe({ownerState:P,className:tn(r.className,w.root,g,N),component:p,disabled:h,focusRipple:!x,focusVisibleClassName:tn(w.focusVisible,b),ref:n,type:D},C,{classes:w,children:[R,u,U]}))});function Ij(e){return Rn("MuiCard",e)}Ln("MuiCard",["root"]);const Rj=["className","raised"],Lj=e=>{const{classes:t}=e;return jn({root:["root"]},Ij,t)},zj=Wt(il,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),vP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiCard"}),{className:o,raised:s=!1}=r,l=Zt(r,Rj),u=fe({},r,{raised:s}),d=Lj(u);return de.jsx(zj,fe({className:tn(d.root,o),elevation:s?8:void 0,ref:n,ownerState:u},l))});function Fj(e){return Rn("MuiCardActions",e)}Ln("MuiCardActions",["root","spacing"]);const jj=["disableSpacing","className"],Bj=e=>{const{classes:t,disableSpacing:n}=e;return jn({root:["root",!n&&"spacing"]},Fj,t)},Nj=Wt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>fe({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Uj=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiCardActions"}),{disableSpacing:o=!1,className:s}=r,l=Zt(r,jj),u=fe({},r,{disableSpacing:o}),d=Bj(u);return de.jsx(Nj,fe({className:tn(d.root,s),ownerState:u,ref:n},l))});function Vj(e){return Rn("MuiCardContent",e)}Ln("MuiCardContent",["root"]);const Wj=["className","component"],Gj=e=>{const{classes:t}=e;return jn({root:["root"]},Vj,t)},Kj=Wt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),yP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiCardContent"}),{className:o,component:s="div"}=r,l=Zt(r,Wj),u=fe({},r,{component:s}),d=Gj(u);return de.jsx(Kj,fe({as:s,className:tn(d.root,o),ownerState:u,ref:n},l))});function TM(e){return e.substring(2).toLowerCase()}function Hj(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function qj(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:s="onTouchEnd"}=e,l=ne.useRef(!1),u=ne.useRef(null),d=ne.useRef(!1),p=ne.useRef(!1);ne.useEffect(()=>(setTimeout(()=>{d.current=!0},0),()=>{d.current=!1}),[]);const g=li(If(t),u),h=Vo(_=>{const b=p.current;p.current=!1;const I=Di(u.current);if(!d.current||!u.current||"clientX"in _&&Hj(_,I))return;if(l.current){l.current=!1;return}let T;_.composedPath?T=_.composedPath().indexOf(u.current)>-1:T=!I.documentElement.contains(_.target)||u.current.contains(_.target),!T&&(n||!b)&&o(_)}),m=_=>b=>{p.current=!0;const I=t.props[_];I&&I(b)},x={ref:g};return s!==!1&&(x[s]=m(s)),ne.useEffect(()=>{if(s!==!1){const _=TM(s),b=Di(u.current),I=()=>{l.current=!0};return b.addEventListener(_,h),b.addEventListener("touchmove",I),()=>{b.removeEventListener(_,h),b.removeEventListener("touchmove",I)}}},[h,s]),r!==!1&&(x[r]=m(r)),ne.useEffect(()=>{if(r!==!1){const _=TM(r),b=Di(u.current);return b.addEventListener(_,h),()=>{b.removeEventListener(_,h)}}},[h,r]),de.jsx(ne.Fragment,{children:ne.cloneElement(t,x)})}const Xj=HL({createStyledComponent:Wt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Nt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>zn({props:e,name:"MuiContainer"})}),Qj=(e,t)=>fe({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),Yj=e=>fe({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Zj=(e,t=!1)=>{var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([l,u])=>{var d;r[e.getColorSchemeSelector(l).replace(/\s*&/,"")]={colorScheme:(d=u.palette)==null?void 0:d.mode}});let o=fe({html:Qj(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:fe({margin:0},Yj(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const s=(n=e.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(o=[o,s]),o};function Jj(e){const t=zn({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return de.jsxs(ne.Fragment,{children:[de.jsx(mP,{styles:o=>Zj(o,r)}),n]})}function eB(e){const t=Di(e);return t.body===e?Ec(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function kg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function EM(e){return parseInt(Ec(e).getComputedStyle(e).paddingRight,10)||0}function tB(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function SM(e,t,n,r,o){const s=[t,n,...r];[].forEach.call(e.children,l=>{const u=s.indexOf(l)===-1,d=!tB(l);u&&d&&kg(l,o)})}function gb(e,t){let n=-1;return e.some((r,o)=>t(r)?(n=o,!0):!1),n}function nB(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(eB(r)){const l=J2(Di(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${EM(r)+l}px`;const u=Di(r).querySelectorAll(".mui-fixed");[].forEach.call(u,d=>{n.push({value:d.style.paddingRight,property:"padding-right",el:d}),d.style.paddingRight=`${EM(d)+l}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Di(r).body;else{const l=r.parentElement,u=Ec(r);s=l?.nodeName==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:l,property:u})=>{s?l.style.setProperty(u,s):l.style.removeProperty(u)})}}function rB(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class aB{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&kg(t.modalRef,!1);const o=rB(n);SM(n,t.mount,t.modalRef,o,!0);const s=gb(this.containers,l=>l.container===n);return s!==-1?(this.containers[s].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:o}),r)}mount(t,n){const r=gb(this.containers,s=>s.modals.indexOf(t)!==-1),o=this.containers[r];o.restore||(o.restore=nB(o,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const o=gb(this.containers,l=>l.modals.indexOf(t)!==-1),s=this.containers[o];if(s.modals.splice(s.modals.indexOf(t),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),t.modalRef&&kg(t.modalRef,n),SM(s.container,t.mount,t.modalRef,s.hiddenSiblings,!1),this.containers.splice(o,1);else{const l=s.modals[s.modals.length-1];l.modalRef&&kg(l.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const iB=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function oB(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function sB(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function lB(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||sB(e))}function cB(e){const t=[],n=[];return Array.from(e.querySelectorAll(iB)).forEach((r,o)=>{const s=oB(r);s===-1||!lB(r)||(s===0?t.push(r):n.push({documentOrder:o,tabIndex:s,node:r}))}),n.sort((r,o)=>r.tabIndex===o.tabIndex?r.documentOrder-o.documentOrder:r.tabIndex-o.tabIndex).map(r=>r.node).concat(t)}function uB(){return!0}function dB(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:s=cB,isEnabled:l=uB,open:u}=e,d=ne.useRef(!1),p=ne.useRef(null),g=ne.useRef(null),h=ne.useRef(null),m=ne.useRef(null),x=ne.useRef(!1),_=ne.useRef(null),b=li(If(t),_),I=ne.useRef(null);ne.useEffect(()=>{!u||!_.current||(x.current=!n)},[n,u]),ne.useEffect(()=>{if(!u||!_.current)return;const D=Di(_.current);return _.current.contains(D.activeElement)||(_.current.hasAttribute("tabIndex")||_.current.setAttribute("tabIndex","-1"),x.current&&_.current.focus()),()=>{o||(h.current&&h.current.focus&&(d.current=!0,h.current.focus()),h.current=null)}},[u]),ne.useEffect(()=>{if(!u||!_.current)return;const D=Di(_.current),E=w=>{I.current=w,!(r||!l()||w.key!=="Tab")&&D.activeElement===_.current&&w.shiftKey&&(d.current=!0,g.current&&g.current.focus())},C=()=>{const w=_.current;if(w===null)return;if(!D.hasFocus()||!l()||d.current){d.current=!1;return}if(w.contains(D.activeElement)||r&&D.activeElement!==p.current&&D.activeElement!==g.current)return;if(D.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!x.current)return;let R=[];if((D.activeElement===p.current||D.activeElement===g.current)&&(R=s(_.current)),R.length>0){var U,N;const ie=!!((U=I.current)!=null&&U.shiftKey&&((N=I.current)==null?void 0:N.key)==="Tab"),ee=R[0],q=R[R.length-1];typeof ee!="string"&&typeof q!="string"&&(ie?q.focus():ee.focus())}else w.focus()};D.addEventListener("focusin",C),D.addEventListener("keydown",E,!0);const P=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&C()},50);return()=>{clearInterval(P),D.removeEventListener("focusin",C),D.removeEventListener("keydown",E,!0)}},[n,r,o,l,u,s]);const T=D=>{h.current===null&&(h.current=D.relatedTarget),x.current=!0,m.current=D.target;const E=t.props.onFocus;E&&E(D)},S=D=>{h.current===null&&(h.current=D.relatedTarget),x.current=!0};return de.jsxs(ne.Fragment,{children:[de.jsx("div",{tabIndex:u?0:-1,onFocus:S,ref:p,"data-testid":"sentinelStart"}),ne.cloneElement(t,{ref:b,onFocus:T}),de.jsx("div",{tabIndex:u?0:-1,onFocus:S,ref:g,"data-testid":"sentinelEnd"})]})}function pB(e){return typeof e=="function"?e():e}function fB(e){return e?e.props.hasOwnProperty("in"):!1}const mB=new aB;function hB(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:o=mB,closeAfterTransition:s=!1,onTransitionEnter:l,onTransitionExited:u,children:d,onClose:p,open:g,rootRef:h}=e,m=ne.useRef({}),x=ne.useRef(null),_=ne.useRef(null),b=li(_,h),[I,T]=ne.useState(!g),S=fB(d);let D=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(D=!1);const E=()=>Di(x.current),C=()=>(m.current.modalRef=_.current,m.current.mount=x.current,m.current),P=()=>{o.mount(C(),{disableScrollLock:r}),_.current&&(_.current.scrollTop=0)},w=Vo(()=>{const X=pB(t)||E().body;o.add(C(),X),_.current&&P()}),R=ne.useCallback(()=>o.isTopModal(C()),[o]),U=Vo(X=>{x.current=X,X&&(g&&R()?P():_.current&&kg(_.current,D))}),N=ne.useCallback(()=>{o.remove(C(),D)},[D,o]);ne.useEffect(()=>()=>{N()},[N]),ne.useEffect(()=>{g?w():(!S||!s)&&N()},[g,N,S,s,w]);const ie=X=>se=>{var le;(le=X.onKeyDown)==null||le.call(X,se),!(se.key!=="Escape"||se.which===229||!R())&&(n||(se.stopPropagation(),p&&p(se,"escapeKeyDown")))},ee=X=>se=>{var le;(le=X.onClick)==null||le.call(X,se),se.target===se.currentTarget&&p&&p(se,"backdropClick")};return{getRootProps:(X={})=>{const se=Ov(e);delete se.onTransitionEnter,delete se.onTransitionExited;const le=fe({},se,X);return fe({role:"presentation"},le,{onKeyDown:ie(le),ref:b})},getBackdropProps:(X={})=>{const se=X;return fe({"aria-hidden":!0},se,{onClick:ee(se),open:g})},getTransitionProps:()=>{const X=()=>{T(!1),l&&l()},se=()=>{T(!0),u&&u(),s&&N()};return{onEnter:K1(X,d?.props.onEnter),onExited:K1(se,d?.props.onExited)}},rootRef:b,portalRef:U,isTopModal:R,exited:I,hasTransition:S}}function gB(e){return Rn("MuiModal",e)}Ln("MuiModal",["root","hidden","backdrop"]);const _B=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],vB=e=>{const{open:t,exited:n,classes:r}=e;return jn({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},gB,r)},yB=Wt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>fe({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),bB=Wt(gP,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),bP=ne.forwardRef(function(t,n){var r,o,s,l,u,d;const p=zn({name:"MuiModal",props:t}),{BackdropComponent:g=bB,BackdropProps:h,className:m,closeAfterTransition:x=!1,children:_,container:b,component:I,components:T={},componentsProps:S={},disableAutoFocus:D=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:C=!1,disablePortal:P=!1,disableRestoreFocus:w=!1,disableScrollLock:R=!1,hideBackdrop:U=!1,keepMounted:N=!1,onBackdropClick:ie,open:ee,slotProps:q,slots:oe}=p,ae=Zt(p,_B),X=fe({},p,{closeAfterTransition:x,disableAutoFocus:D,disableEnforceFocus:E,disableEscapeKeyDown:C,disablePortal:P,disableRestoreFocus:w,disableScrollLock:R,hideBackdrop:U,keepMounted:N}),{getRootProps:se,getBackdropProps:le,getTransitionProps:be,portalRef:Ee,isTopModal:Y,exited:te,hasTransition:J}=hB(fe({},X,{rootRef:n})),H=fe({},X,{exited:te}),_e=vB(H),Te={};if(_.props.tabIndex===void 0&&(Te.tabIndex="-1"),J){const{onEnter:$e,onExited:Ge}=be();Te.onEnter=$e,Te.onExited=Ge}const Re=(r=(o=oe?.root)!=null?o:T.Root)!=null?r:yB,We=(s=(l=oe?.backdrop)!=null?l:T.Backdrop)!=null?s:g,at=(u=q?.root)!=null?u:S.root,Oe=(d=q?.backdrop)!=null?d:S.backdrop,ge=ll({elementType:Re,externalSlotProps:at,externalForwardedProps:ae,getSlotProps:se,additionalProps:{ref:n,as:I},ownerState:H,className:tn(m,at?.className,_e?.root,!H.open&&H.exited&&_e?.hidden)}),re=ll({elementType:We,externalSlotProps:Oe,additionalProps:h,getSlotProps:$e=>le(fe({},$e,{onClick:Ge=>{ie&&ie(Ge),$e!=null&&$e.onClick&&$e.onClick(Ge)}})),className:tn(Oe?.className,h?.className,_e?.backdrop),ownerState:H});return!N&&!ee&&(!J||te)?null:de.jsx(ZF,{ref:Ee,container:b,disablePortal:P,children:de.jsxs(Re,fe({},ge,{children:[!U&&g?de.jsx(We,fe({},re)):null,de.jsx(dB,{disableEnforceFocus:E,disableAutoFocus:D,disableRestoreFocus:w,isEnabled:Y,open:ee,children:ne.cloneElement(_,Te)})]}))})});function xB(e){return Rn("MuiDialog",e)}const _b=Ln("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),xP=ne.createContext({}),wB=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],MB=Wt(gP,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),TB=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:o,fullScreen:s}=e,l={root:["root"],container:["container",`scroll${Nt(n)}`],paper:["paper",`paperScroll${Nt(n)}`,`paperWidth${Nt(String(r))}`,o&&"paperFullWidth",s&&"paperFullScreen"]};return jn(l,xB,t)},EB=Wt(bP,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),SB=Wt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Nt(n.scroll)}`]]}})(({ownerState:e})=>fe({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),CB=Wt(il,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Nt(n.scroll)}`],t[`paperWidth${Nt(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>fe({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${_b.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${_b.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${_b.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),CM=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiDialog"}),o=Rf(),s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:d,BackdropProps:p,children:g,className:h,disableEscapeKeyDown:m=!1,fullScreen:x=!1,fullWidth:_=!1,maxWidth:b="sm",onBackdropClick:I,onClick:T,onClose:S,open:D,PaperComponent:E=il,PaperProps:C={},scroll:P="paper",TransitionComponent:w=hP,transitionDuration:R=s,TransitionProps:U}=r,N=Zt(r,wB),ie=fe({},r,{disableEscapeKeyDown:m,fullScreen:x,fullWidth:_,maxWidth:b,scroll:P}),ee=TB(ie),q=ne.useRef(),oe=le=>{q.current=le.target===le.currentTarget},ae=le=>{T&&T(le),q.current&&(q.current=null,I&&I(le),S&&S(le,"backdropClick"))},X=uy(u),se=ne.useMemo(()=>({titleId:X}),[X]);return de.jsx(EB,fe({className:tn(ee.root,h),closeAfterTransition:!0,components:{Backdrop:MB},componentsProps:{backdrop:fe({transitionDuration:R,as:d},p)},disableEscapeKeyDown:m,onClose:S,open:D,ref:n,onClick:ae,ownerState:ie},N,{children:de.jsx(w,fe({appear:!0,in:D,timeout:R,role:"presentation"},U,{children:de.jsx(SB,{className:tn(ee.container),onMouseDown:oe,ownerState:ie,children:de.jsx(CB,fe({as:E,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":X},C,{className:tn(ee.paper,C.className),ownerState:ie,children:de.jsx(xP.Provider,{value:se,children:g})}))})}))}))});function PB(e){return Rn("MuiDialogActions",e)}Ln("MuiDialogActions",["root","spacing"]);const kB=["className","disableSpacing"],AB=e=>{const{classes:t,disableSpacing:n}=e;return jn({root:["root",!n&&"spacing"]},PB,t)},OB=Wt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>fe({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),PM=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiDialogActions"}),{className:o,disableSpacing:s=!1}=r,l=Zt(r,kB),u=fe({},r,{disableSpacing:s}),d=AB(u);return de.jsx(OB,fe({className:tn(d.root,o),ownerState:u,ref:n},l))});function $B(e){return Rn("MuiDialogContent",e)}Ln("MuiDialogContent",["root","dividers"]);function DB(e){return Rn("MuiDialogTitle",e)}const IB=Ln("MuiDialogTitle",["root"]),RB=["className","dividers"],LB=e=>{const{classes:t,dividers:n}=e;return jn({root:["root",n&&"dividers"]},$B,t)},zB=Wt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>fe({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${IB.root} + &`]:{paddingTop:0}})),FB=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiDialogContent"}),{className:o,dividers:s=!1}=r,l=Zt(r,RB),u=fe({},r,{dividers:s}),d=LB(u);return de.jsx(zB,fe({className:tn(d.root,o),ownerState:u,ref:n},l))}),jB=["className","id"],BB=e=>{const{classes:t}=e;return jn({root:["root"]},DB,t)},NB=Wt(ia,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),kM=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiDialogTitle"}),{className:o,id:s}=r,l=Zt(r,jB),u=r,d=BB(u),{titleId:p=s}=ne.useContext(xP);return de.jsx(NB,fe({component:"h2",className:tn(d.root,o),ownerState:u,ref:n,variant:"h6",id:s??p},l))});function UB(e){return Rn("MuiDivider",e)}const AM=Ln("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),VB=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],WB=e=>{const{absolute:t,children:n,classes:r,flexItem:o,light:s,orientation:l,textAlign:u,variant:d}=e;return jn({root:["root",t&&"absolute",d,s&&"light",l==="vertical"&&"vertical",o&&"flexItem",n&&"withChildren",n&&l==="vertical"&&"withChildrenVertical",u==="right"&&l!=="vertical"&&"textAlignRight",u==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},UB,r)},GB=Wt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>fe({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:cr.alpha(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>fe({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>fe({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}),({theme:e,ownerState:t})=>fe({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}),({ownerState:e})=>fe({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),KB=Wt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>fe({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),wP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiDivider"}),{absolute:o=!1,children:s,className:l,component:u=s?"div":"hr",flexItem:d=!1,light:p=!1,orientation:g="horizontal",role:h=u!=="hr"?"separator":void 0,textAlign:m="center",variant:x="fullWidth"}=r,_=Zt(r,VB),b=fe({},r,{absolute:o,component:u,flexItem:d,light:p,orientation:g,role:h,textAlign:m,variant:x}),I=WB(b);return de.jsx(GB,fe({as:u,className:tn(I.root,l),role:h,ref:n,ownerState:b},_,{children:s?de.jsx(KB,{className:I.wrapper,ownerState:b,children:s}):null}))});wP.muiSkipListHighlight=!0;const HB=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],qB=e=>{const{classes:t,disableUnderline:n}=e,o=jn({root:["root",!n&&"underline"],input:["input"]},gj,t);return fe({},t,o)},XB=Wt(vy,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...gy(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",o=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return fe({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${dd.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${dd.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:u}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${dd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${dd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${dd.disabled}, .${dd.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${dd.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&fe({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),QB=Wt(yy,{name:"MuiFilledInput",slot:"Input",overridesResolver:_y})(({theme:e,ownerState:t})=>fe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),Nx=ne.forwardRef(function(t,n){var r,o,s,l;const u=zn({props:t,name:"MuiFilledInput"}),{components:d={},componentsProps:p,fullWidth:g=!1,inputComponent:h="input",multiline:m=!1,slotProps:x,slots:_={},type:b="text"}=u,I=Zt(u,HB),T=fe({},u,{fullWidth:g,inputComponent:h,multiline:m,type:b}),S=qB(u),D={root:{ownerState:T},input:{ownerState:T}},E=x??p?ro(D,x??p):D,C=(r=(o=_.root)!=null?o:d.Root)!=null?r:XB,P=(s=(l=_.input)!=null?l:d.Input)!=null?s:QB;return de.jsx(Bx,fe({slots:{root:C,input:P},componentsProps:E,fullWidth:g,inputComponent:h,multiline:m,ref:n,type:b},I,{classes:S}))});Nx.muiName="Input";function YB(e){return Rn("MuiFormControl",e)}Ln("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const ZB=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],JB=e=>{const{classes:t,margin:n,fullWidth:r}=e,o={root:["root",n!=="none"&&`margin${Nt(n)}`,r&&"fullWidth"]};return jn(o,YB,t)},eN=Wt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,t[`margin${Nt(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>fe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),tN=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiFormControl"}),{children:o,className:s,color:l="primary",component:u="div",disabled:d=!1,error:p=!1,focused:g,fullWidth:h=!1,hiddenLabel:m=!1,margin:x="none",required:_=!1,size:b="medium",variant:I="outlined"}=r,T=Zt(r,ZB),S=fe({},r,{color:l,component:u,disabled:d,error:p,fullWidth:h,hiddenLabel:m,margin:x,required:_,size:b,variant:I}),D=JB(S),[E,C]=ne.useState(()=>{let q=!1;return o&&ne.Children.forEach(o,oe=>{if(!gv(oe,["Input","Select"]))return;const ae=gv(oe,["Select"])?oe.props.input:oe;ae&&cj(ae.props)&&(q=!0)}),q}),[P,w]=ne.useState(()=>{let q=!1;return o&&ne.Children.forEach(o,oe=>{gv(oe,["Input","Select"])&&(Dv(oe.props,!0)||Dv(oe.props.inputProps,!0))&&(q=!0)}),q}),[R,U]=ne.useState(!1);d&&R&&U(!1);const N=g!==void 0&&!d?g:R;let ie;const ee=ne.useMemo(()=>({adornedStart:E,setAdornedStart:C,color:l,disabled:d,error:p,filled:P,focused:N,fullWidth:h,hiddenLabel:m,size:b,onBlur:()=>{U(!1)},onEmpty:()=>{w(!1)},onFilled:()=>{w(!0)},onFocus:()=>{U(!0)},registerEffect:ie,required:_,variant:I}),[E,l,d,p,P,N,h,m,ie,_,b,I]);return de.jsx(jx.Provider,{value:ee,children:de.jsx(eN,fe({as:u,ownerState:S,className:tn(D.root,s),ref:n},T,{children:o}))})}),yf=tz({createStyledComponent:Wt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>zn({props:e,name:"MuiStack"})});function nN(e){return Rn("MuiFormHelperText",e)}const OM=Ln("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var $M;const rN=["children","className","component","disabled","error","filled","focused","margin","required","variant"],aN=e=>{const{classes:t,contained:n,size:r,disabled:o,error:s,filled:l,focused:u,required:d}=e,p={root:["root",o&&"disabled",s&&"error",r&&`size${Nt(r)}`,n&&"contained",u&&"focused",l&&"filled",d&&"required"]};return jn(p,nN,t)},iN=Wt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Nt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${OM.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${OM.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),oN=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiFormHelperText"}),{children:o,className:s,component:l="p"}=r,u=Zt(r,rN),d=zf(),p=Lf({props:r,muiFormControl:d,states:["variant","size","disabled","error","filled","focused","required"]}),g=fe({},r,{component:l,contained:p.variant==="filled"||p.variant==="outlined",variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),h=aN(g);return de.jsx(iN,fe({as:l,ownerState:g,className:tn(h.root,s),ref:n},u,{children:o===" "?$M||($M=de.jsx("span",{className:"notranslate",children:""})):o}))});function sN(e){return Rn("MuiFormLabel",e)}const Ag=Ln("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),lN=["children","className","color","component","disabled","error","filled","focused","required"],cN=e=>{const{classes:t,color:n,focused:r,disabled:o,error:s,filled:l,required:u}=e,d={root:["root",`color${Nt(n)}`,o&&"disabled",s&&"error",l&&"filled",r&&"focused",u&&"required"],asterisk:["asterisk",s&&"error"]};return jn(d,sN,t)},uN=Wt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Ag.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Ag.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ag.error}`]:{color:(e.vars||e).palette.error.main}})),dN=Wt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Ag.error}`]:{color:(e.vars||e).palette.error.main}})),pN=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiFormLabel"}),{children:o,className:s,component:l="label"}=r,u=Zt(r,lN),d=zf(),p=Lf({props:r,muiFormControl:d,states:["color","required","focused","disabled","error","filled"]}),g=fe({},r,{color:p.color||"primary",component:l,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),h=cN(g);return de.jsxs(uN,fe({as:l,ownerState:g,className:tn(h.root,s),ref:n},u,{children:[o,p.required&&de.jsxs(dN,{ownerState:g,"aria-hidden":!0,className:h.asterisk,children:["","*"]})]}))}),fN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function H0(e){return`scale(${e}, ${e**2})`}const mN={entering:{opacity:1,transform:H0(1)},entered:{opacity:1,transform:"none"}},vb=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ux=ne.forwardRef(function(t,n){const{addEndListener:r,appear:o=!0,children:s,easing:l,in:u,onEnter:d,onEntered:p,onEntering:g,onExit:h,onExited:m,onExiting:x,style:_,timeout:b="auto",TransitionComponent:I=ul}=t,T=Zt(t,fN),S=py(),D=ne.useRef(),E=Rf(),C=ne.useRef(null),P=li(C,If(s),n),w=ae=>X=>{if(ae){const se=C.current;X===void 0?ae(se):ae(se,X)}},R=w(g),U=w((ae,X)=>{pP(ae);const{duration:se,delay:le,easing:be}=Mf({style:_,timeout:b,easing:l},{mode:"enter"});let Ee;b==="auto"?(Ee=E.transitions.getAutoHeightDuration(ae.clientHeight),D.current=Ee):Ee=se,ae.style.transition=[E.transitions.create("opacity",{duration:Ee,delay:le}),E.transitions.create("transform",{duration:vb?Ee:Ee*.666,delay:le,easing:be})].join(","),d&&d(ae,X)}),N=w(p),ie=w(x),ee=w(ae=>{const{duration:X,delay:se,easing:le}=Mf({style:_,timeout:b,easing:l},{mode:"exit"});let be;b==="auto"?(be=E.transitions.getAutoHeightDuration(ae.clientHeight),D.current=be):be=X,ae.style.transition=[E.transitions.create("opacity",{duration:be,delay:se}),E.transitions.create("transform",{duration:vb?be:be*.666,delay:vb?se:se||be*.333,easing:le})].join(","),ae.style.opacity=0,ae.style.transform=H0(.75),h&&h(ae)}),q=w(m),oe=ae=>{b==="auto"&&S.start(D.current||0,ae),r&&r(C.current,ae)};return de.jsx(I,fe({appear:o,in:u,nodeRef:C,onEnter:U,onEntered:N,onEntering:R,onExit:ee,onExited:q,onExiting:ie,addEndListener:oe,timeout:b==="auto"?null:b},T,{children:(ae,X)=>ne.cloneElement(s,fe({style:fe({opacity:0,transform:H0(.75),visibility:ae==="exited"&&!u?"hidden":void 0},mN[ae],_,s.props.style),ref:P},X))}))});Ux.muiSupportAuto=!0;const hN=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],gN=e=>{const{classes:t,disableUnderline:n}=e,o=jn({root:["root",!n&&"underline"],input:["input"]},mj,t);return fe({},t,o)},_N=Wt(vy,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...gy(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),fe({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ag.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ag.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ag.disabled}, .${ag.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${ag.disabled}:before`]:{borderBottomStyle:"dotted"}})}),vN=Wt(yy,{name:"MuiInput",slot:"Input",overridesResolver:_y})({}),Vx=ne.forwardRef(function(t,n){var r,o,s,l;const u=zn({props:t,name:"MuiInput"}),{disableUnderline:d,components:p={},componentsProps:g,fullWidth:h=!1,inputComponent:m="input",multiline:x=!1,slotProps:_,slots:b={},type:I="text"}=u,T=Zt(u,hN),S=gN(u),E={root:{ownerState:{disableUnderline:d}}},C=_??g?ro(_??g,E):E,P=(r=(o=b.root)!=null?o:p.Root)!=null?r:_N,w=(s=(l=b.input)!=null?l:p.Input)!=null?s:vN;return de.jsx(Bx,fe({slots:{root:P,input:w},slotProps:C,fullWidth:h,inputComponent:m,multiline:x,ref:n,type:I},T,{classes:S}))});Vx.muiName="Input";function yN(e){return Rn("MuiInputLabel",e)}Ln("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const bN=["disableAnimation","margin","shrink","variant","className"],xN=e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:s,variant:l,required:u}=e,d={root:["root",n&&"formControl",!s&&"animated",o&&"shrink",r&&r!=="normal"&&`size${Nt(r)}`,l],asterisk:[u&&"asterisk"]},p=jn(d,yN,t);return fe({},t,p)},wN=Wt(pN,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ag.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>fe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&fe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),MN=ne.forwardRef(function(t,n){const r=zn({name:"MuiInputLabel",props:t}),{disableAnimation:o=!1,shrink:s,className:l}=r,u=Zt(r,bN),d=zf();let p=s;typeof p>"u"&&d&&(p=d.filled||d.focused||d.adornedStart);const g=Lf({props:r,muiFormControl:d,states:["size","variant","required","focused"]}),h=fe({},r,{disableAnimation:o,formControl:d,shrink:p,size:g.size,variant:g.variant,required:g.required,focused:g.focused}),m=xN(h);return de.jsx(wN,fe({"data-shrink":p,ownerState:h,ref:n,className:tn(m.root,l)},u,{classes:m}))});function TN(e){return Rn("MuiLinearProgress",e)}Ln("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const EN=["className","color","value","valueBuffer","variant"];let Ff=e=>e,DM,IM,RM,LM,zM,FM;const q0=4,SN=$d(DM||(DM=Ff`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),CN=$d(IM||(IM=Ff`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),PN=$d(RM||(RM=Ff`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),kN=e=>{const{classes:t,variant:n,color:r}=e,o={root:["root",`color${Nt(r)}`,n],dashed:["dashed",`dashedColor${Nt(r)}`],bar1:["bar",`barColor${Nt(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${Nt(r)}`,n==="buffer"&&`color${Nt(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return jn(o,TN,t)},Wx=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?cr.lighten(e.palette[t].main,.62):cr.darken(e.palette[t].main,.5),AN=Wt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Nt(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>fe({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Wx(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),ON=Wt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Nt(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=Wx(t,e.color);return fe({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},qg(LM||(LM=Ff`
    animation: ${0} 3s infinite linear;
  `),PN)),$N=Wt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${Nt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>fe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${q0}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${q0}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&qg(zM||(zM=Ff`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),SN)),DN=Wt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${Nt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>fe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:Wx(t,e.color),transition:`transform .${q0}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&qg(FM||(FM=Ff`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),CN)),jM=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiLinearProgress"}),{className:o,color:s="primary",value:l,valueBuffer:u,variant:d="indeterminate"}=r,p=Zt(r,EN),g=fe({},r,{color:s,variant:d}),h=kN(g),m=my(),x={},_={bar1:{},bar2:{}};if((d==="determinate"||d==="buffer")&&l!==void 0){x["aria-valuenow"]=Math.round(l),x["aria-valuemin"]=0,x["aria-valuemax"]=100;let b=l-100;m&&(b=-b),_.bar1.transform=`translateX(${b}%)`}if(d==="buffer"&&u!==void 0){let b=(u||0)-100;m&&(b=-b),_.bar2.transform=`translateX(${b}%)`}return de.jsxs(AN,fe({className:tn(h.root,o),ownerState:g,role:"progressbar"},x,{ref:n},p,{children:[d==="buffer"?de.jsx(ON,{className:h.dashed,ownerState:g}):null,de.jsx($N,{className:h.bar1,ownerState:g,style:_.bar1}),d==="determinate"?null:de.jsx(DN,{className:h.bar2,ownerState:g,style:_.bar2})]}))}),Tc=ne.createContext({});function IN(e){return Rn("MuiList",e)}Ln("MuiList",["root","padding","dense","subheader"]);const RN=["children","className","component","dense","disablePadding","subheader"],LN=e=>{const{classes:t,disablePadding:n,dense:r,subheader:o}=e;return jn({root:["root",!n&&"padding",r&&"dense",o&&"subheader"]},IN,t)},zN=Wt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>fe({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),MP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiList"}),{children:o,className:s,component:l="ul",dense:u=!1,disablePadding:d=!1,subheader:p}=r,g=Zt(r,RN),h=ne.useMemo(()=>({dense:u}),[u]),m=fe({},r,{component:l,dense:u,disablePadding:d}),x=LN(m);return de.jsx(Tc.Provider,{value:h,children:de.jsxs(zN,fe({as:l,className:tn(x.root,s),ref:n,ownerState:m},g,{children:[p,o]}))})});function FN(e){return Rn("MuiListItem",e)}const pf=Ln("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),jN=Ln("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function BN(e){return Rn("MuiListItemSecondaryAction",e)}Ln("MuiListItemSecondaryAction",["root","disableGutters"]);const NN=["className"],UN=e=>{const{disableGutters:t,classes:n}=e;return jn({root:["root",t&&"disableGutters"]},BN,n)},VN=Wt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>fe({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),TP=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiListItemSecondaryAction"}),{className:o}=r,s=Zt(r,NN),l=ne.useContext(Tc),u=fe({},r,{disableGutters:l.disableGutters}),d=UN(u);return de.jsx(VN,fe({className:tn(d.root,o),ownerState:u,ref:n},s))});TP.muiName="ListItemSecondaryAction";const WN=["className"],GN=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],KN=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},HN=e=>{const{alignItems:t,button:n,classes:r,dense:o,disabled:s,disableGutters:l,disablePadding:u,divider:d,hasSecondaryAction:p,selected:g}=e;return jn({root:["root",o&&"dense",!l&&"gutters",!u&&"padding",d&&"divider",s&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",p&&"secondaryAction",g&&"selected"],container:["container"]},FN,r)},qN=Wt("div",{name:"MuiListItem",slot:"Root",overridesResolver:KN})(({theme:e,ownerState:t})=>fe({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&fe({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${jN.root}`]:{paddingRight:48}},{[`&.${pf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${pf.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${pf.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${pf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pf.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),XN=Wt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),QN=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiListItem"}),{alignItems:o="center",autoFocus:s=!1,button:l=!1,children:u,className:d,component:p,components:g={},componentsProps:h={},ContainerComponent:m="li",ContainerProps:{className:x}={},dense:_=!1,disabled:b=!1,disableGutters:I=!1,disablePadding:T=!1,divider:S=!1,focusVisibleClassName:D,secondaryAction:E,selected:C=!1,slotProps:P={},slots:w={}}=r,R=Zt(r.ContainerProps,WN),U=Zt(r,GN),N=ne.useContext(Tc),ie=ne.useMemo(()=>({dense:_||N.dense||!1,alignItems:o,disableGutters:I}),[o,N.dense,_,I]),ee=ne.useRef(null);Ms(()=>{s&&ee.current&&ee.current.focus()},[s]);const q=ne.Children.toArray(u),oe=q.length&&gv(q[q.length-1],["ListItemSecondaryAction"]),ae=fe({},r,{alignItems:o,autoFocus:s,button:l,dense:ie.dense,disabled:b,disableGutters:I,disablePadding:T,divider:S,hasSecondaryAction:oe,selected:C}),X=HN(ae),se=li(ee,n),le=w.root||g.Root||qN,be=P.root||h.root||{},Ee=fe({className:tn(X.root,be.className,d),disabled:b},U);let Y=p||"li";return l&&(Ee.component=p||"div",Ee.focusVisibleClassName=tn(pf.focusVisible,D),Y=vu),oe?(Y=!Ee.component&&!p?"div":Y,m==="li"&&(Y==="li"?Y="div":Ee.component==="li"&&(Ee.component="div")),de.jsx(Tc.Provider,{value:ie,children:de.jsxs(XN,fe({as:m,className:tn(X.container,x),ref:se,ownerState:ae},R,{children:[de.jsx(le,fe({},be,!wf(le)&&{as:Y,ownerState:fe({},ae,be.ownerState)},Ee,{children:q})),q.pop()]}))})):de.jsx(Tc.Provider,{value:ie,children:de.jsxs(le,fe({},be,{as:Y,ref:se},!wf(le)&&{ownerState:fe({},ae,be.ownerState)},Ee,{children:[q,E&&de.jsx(TP,{children:E})]}))})});function YN(e){return Rn("MuiListItemIcon",e)}const BM=Ln("MuiListItemIcon",["root","alignItemsFlexStart"]),ZN=["className"],JN=e=>{const{alignItems:t,classes:n}=e;return jn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},YN,n)},e4=Wt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>fe({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),t4=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiListItemIcon"}),{className:o}=r,s=Zt(r,ZN),l=ne.useContext(Tc),u=fe({},r,{alignItems:l.alignItems}),d=JN(u);return de.jsx(e4,fe({className:tn(d.root,o),ownerState:u,ref:n},s))});function n4(e){return Rn("MuiListItemText",e)}const Iv=Ln("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),r4=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],a4=e=>{const{classes:t,inset:n,primary:r,secondary:o,dense:s}=e;return jn({root:["root",n&&"inset",s&&"dense",r&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},n4,t)},i4=Wt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Iv.primary}`]:t.primary},{[`& .${Iv.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>fe({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),o4=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiListItemText"}),{children:o,className:s,disableTypography:l=!1,inset:u=!1,primary:d,primaryTypographyProps:p,secondary:g,secondaryTypographyProps:h}=r,m=Zt(r,r4),{dense:x}=ne.useContext(Tc);let _=d??o,b=g;const I=fe({},r,{disableTypography:l,inset:u,primary:!!_,secondary:!!b,dense:x}),T=a4(I);return _!=null&&_.type!==ia&&!l&&(_=de.jsx(ia,fe({variant:x?"body2":"body1",className:T.primary,component:p!=null&&p.variant?void 0:"span",display:"block"},p,{children:_}))),b!=null&&b.type!==ia&&!l&&(b=de.jsx(ia,fe({variant:"body2",className:T.secondary,color:"text.secondary",display:"block"},h,{children:b}))),de.jsxs(i4,fe({className:tn(T.root,s),ownerState:I,ref:n},m,{children:[_,b]}))}),s4=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function yb(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function NM(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function EP(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function ig(e,t,n,r,o,s){let l=!1,u=o(e,t,t?n:!1);for(;u;){if(u===e.firstChild){if(l)return!1;l=!0}const d=r?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!EP(u,s)||d)u=o(e,u,n);else return u.focus(),!0}return!1}const l4=ne.forwardRef(function(t,n){const{actions:r,autoFocus:o=!1,autoFocusItem:s=!1,children:l,className:u,disabledItemsFocusable:d=!1,disableListWrap:p=!1,onKeyDown:g,variant:h="selectedMenu"}=t,m=Zt(t,s4),x=ne.useRef(null),_=ne.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ms(()=>{o&&x.current.focus()},[o]),ne.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(D,{direction:E})=>{const C=!x.current.style.width;if(D.clientHeight<x.current.clientHeight&&C){const P=`${J2(Di(D))}px`;x.current.style[E==="rtl"?"paddingLeft":"paddingRight"]=P,x.current.style.width=`calc(100% + ${P})`}return x.current}}),[]);const b=D=>{const E=x.current,C=D.key,P=Di(E).activeElement;if(C==="ArrowDown")D.preventDefault(),ig(E,P,p,d,yb);else if(C==="ArrowUp")D.preventDefault(),ig(E,P,p,d,NM);else if(C==="Home")D.preventDefault(),ig(E,null,p,d,yb);else if(C==="End")D.preventDefault(),ig(E,null,p,d,NM);else if(C.length===1){const w=_.current,R=C.toLowerCase(),U=performance.now();w.keys.length>0&&(U-w.lastTime>500?(w.keys=[],w.repeating=!0,w.previousKeyMatched=!0):w.repeating&&R!==w.keys[0]&&(w.repeating=!1)),w.lastTime=U,w.keys.push(R);const N=P&&!w.repeating&&EP(P,w);w.previousKeyMatched&&(N||ig(E,P,!1,d,yb,w))?D.preventDefault():w.previousKeyMatched=!1}g&&g(D)},I=li(x,n);let T=-1;ne.Children.forEach(l,(D,E)=>{if(!ne.isValidElement(D)){T===E&&(T+=1,T>=l.length&&(T=-1));return}D.props.disabled||(h==="selectedMenu"&&D.props.selected||T===-1)&&(T=E),T===E&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(T+=1,T>=l.length&&(T=-1))});const S=ne.Children.map(l,(D,E)=>{if(E===T){const C={};return s&&(C.autoFocus=!0),D.props.tabIndex===void 0&&h==="selectedMenu"&&(C.tabIndex=0),ne.cloneElement(D,C)}return D});return de.jsx(MP,fe({role:"menu",ref:I,className:u,onKeyDown:b,tabIndex:o?0:-1},m,{children:S}))});function c4(e){return Rn("MuiPopover",e)}Ln("MuiPopover",["root","paper"]);const u4=["onEntering"],d4=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],p4=["slotProps"];function UM(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function VM(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function WM(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function bb(e){return typeof e=="function"?e():e}const f4=e=>{const{classes:t}=e;return jn({root:["root"],paper:["paper"]},c4,t)},m4=Wt(bP,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SP=Wt(il,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),h4=ne.forwardRef(function(t,n){var r,o,s;const l=zn({props:t,name:"MuiPopover"}),{action:u,anchorEl:d,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:g,anchorReference:h="anchorEl",children:m,className:x,container:_,elevation:b=8,marginThreshold:I=16,open:T,PaperProps:S={},slots:D,slotProps:E,transformOrigin:C={vertical:"top",horizontal:"left"},TransitionComponent:P=Ux,transitionDuration:w="auto",TransitionProps:{onEntering:R}={},disableScrollLock:U=!1}=l,N=Zt(l.TransitionProps,u4),ie=Zt(l,d4),ee=(r=E?.paper)!=null?r:S,q=ne.useRef(),oe=li(q,ee.ref),ae=fe({},l,{anchorOrigin:p,anchorReference:h,elevation:b,marginThreshold:I,externalPaperSlotProps:ee,transformOrigin:C,TransitionComponent:P,transitionDuration:w,TransitionProps:N}),X=f4(ae),se=ne.useCallback(()=>{if(h==="anchorPosition")return g;const $e=bb(d),qe=($e&&$e.nodeType===1?$e:Di(q.current).body).getBoundingClientRect();return{top:qe.top+UM(qe,p.vertical),left:qe.left+VM(qe,p.horizontal)}},[d,p.horizontal,p.vertical,g,h]),le=ne.useCallback($e=>({vertical:UM($e,C.vertical),horizontal:VM($e,C.horizontal)}),[C.horizontal,C.vertical]),be=ne.useCallback($e=>{const Ge={width:$e.offsetWidth,height:$e.offsetHeight},qe=le(Ge);if(h==="none")return{top:null,left:null,transformOrigin:WM(qe)};const it=se();let Ve=it.top-qe.vertical,Be=it.left-qe.horizontal;const _t=Ve+Ge.height,Ne=Be+Ge.width,Ye=Ec(bb(d)),kt=Ye.innerHeight-I,mt=Ye.innerWidth-I;if(I!==null&&Ve<I){const Tt=Ve-I;Ve-=Tt,qe.vertical+=Tt}else if(I!==null&&_t>kt){const Tt=_t-kt;Ve-=Tt,qe.vertical+=Tt}if(I!==null&&Be<I){const Tt=Be-I;Be-=Tt,qe.horizontal+=Tt}else if(Ne>mt){const Tt=Ne-mt;Be-=Tt,qe.horizontal+=Tt}return{top:`${Math.round(Ve)}px`,left:`${Math.round(Be)}px`,transformOrigin:WM(qe)}},[d,h,se,le,I]),[Ee,Y]=ne.useState(T),te=ne.useCallback(()=>{const $e=q.current;if(!$e)return;const Ge=be($e);Ge.top!==null&&($e.style.top=Ge.top),Ge.left!==null&&($e.style.left=Ge.left),$e.style.transformOrigin=Ge.transformOrigin,Y(!0)},[be]);ne.useEffect(()=>(U&&window.addEventListener("scroll",te),()=>window.removeEventListener("scroll",te)),[d,U,te]);const J=($e,Ge)=>{R&&R($e,Ge),te()},H=()=>{Y(!1)};ne.useEffect(()=>{T&&te()}),ne.useImperativeHandle(u,()=>T?{updatePosition:()=>{te()}}:null,[T,te]),ne.useEffect(()=>{if(!T)return;const $e=cy(()=>{te()}),Ge=Ec(d);return Ge.addEventListener("resize",$e),()=>{$e.clear(),Ge.removeEventListener("resize",$e)}},[d,T,te]);let _e=w;w==="auto"&&!P.muiSupportAuto&&(_e=void 0);const Te=_||(d?Di(bb(d)).body:void 0),Re=(o=D?.root)!=null?o:m4,We=(s=D?.paper)!=null?s:SP,at=ll({elementType:We,externalSlotProps:fe({},ee,{style:Ee?ee.style:fe({},ee.style,{opacity:0})}),additionalProps:{elevation:b,ref:oe},ownerState:ae,className:tn(X.paper,ee?.className)}),Oe=ll({elementType:Re,externalSlotProps:E?.root||{},externalForwardedProps:ie,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Te,open:T},ownerState:ae,className:tn(X.root,x)}),{slotProps:ge}=Oe,re=Zt(Oe,p4);return de.jsx(Re,fe({},re,!wf(Re)&&{slotProps:ge,disableScrollLock:U},{children:de.jsx(P,fe({appear:!0,in:T,onEntering:J,onExited:H,timeout:_e},N,{children:de.jsx(We,fe({},at,{children:m}))}))}))});function g4(e){return Rn("MuiMenu",e)}Ln("MuiMenu",["root","paper","list"]);const _4=["onEntering"],v4=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],y4={vertical:"top",horizontal:"right"},b4={vertical:"top",horizontal:"left"},x4=e=>{const{classes:t}=e;return jn({root:["root"],paper:["paper"],list:["list"]},g4,t)},w4=Wt(h4,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),M4=Wt(SP,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),T4=Wt(l4,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),CP=ne.forwardRef(function(t,n){var r,o;const s=zn({props:t,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:d,disableAutoFocusItem:p=!1,MenuListProps:g={},onClose:h,open:m,PaperProps:x={},PopoverClasses:_,transitionDuration:b="auto",TransitionProps:{onEntering:I}={},variant:T="selectedMenu",slots:S={},slotProps:D={}}=s,E=Zt(s.TransitionProps,_4),C=Zt(s,v4),P=my(),w=fe({},s,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:g,onEntering:I,PaperProps:x,transitionDuration:b,TransitionProps:E,variant:T}),R=x4(w),U=l&&!p&&m,N=ne.useRef(null),ie=(le,be)=>{N.current&&N.current.adjustStyleForScrollbar(le,{direction:P?"rtl":"ltr"}),I&&I(le,be)},ee=le=>{le.key==="Tab"&&(le.preventDefault(),h&&h(le,"tabKeyDown"))};let q=-1;ne.Children.map(u,(le,be)=>{ne.isValidElement(le)&&(le.props.disabled||(T==="selectedMenu"&&le.props.selected||q===-1)&&(q=be))});const oe=(r=S.paper)!=null?r:M4,ae=(o=D.paper)!=null?o:x,X=ll({elementType:S.root,externalSlotProps:D.root,ownerState:w,className:[R.root,d]}),se=ll({elementType:oe,externalSlotProps:ae,ownerState:w,className:R.paper});return de.jsx(w4,fe({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?y4:b4,slots:{paper:oe,root:S.root},slotProps:{root:X,paper:se},open:m,ref:n,transitionDuration:b,TransitionProps:fe({onEntering:ie},E),ownerState:w},C,{classes:_,children:de.jsx(T4,fe({onKeyDown:ee,actions:N,autoFocus:l&&(q===-1||p),autoFocusItem:U,variant:T},g,{className:tn(R.list,g.className),children:u}))}))});function E4(e){return Rn("MuiMenuItem",e)}const og=Ln("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),S4=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],C4=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},P4=e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:s,classes:l}=e,d=jn({root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",s&&"selected"]},E4,l);return fe({},l,d)},k4=Wt(vu,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:C4})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${og.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${og.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${og.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:cr.alpha(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${og.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${og.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${AM.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${AM.inset}`]:{marginLeft:52},[`& .${Iv.root}`]:{marginTop:0,marginBottom:0},[`& .${Iv.inset}`]:{paddingLeft:36},[`& .${BM.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&fe({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${BM.root} svg`]:{fontSize:"1.25rem"}}))),GM=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiMenuItem"}),{autoFocus:o=!1,component:s="li",dense:l=!1,divider:u=!1,disableGutters:d=!1,focusVisibleClassName:p,role:g="menuitem",tabIndex:h,className:m}=r,x=Zt(r,S4),_=ne.useContext(Tc),b=ne.useMemo(()=>({dense:l||_.dense||!1,disableGutters:d}),[_.dense,l,d]),I=ne.useRef(null);Ms(()=>{o&&I.current&&I.current.focus()},[o]);const T=fe({},r,{dense:b.dense,divider:u,disableGutters:d}),S=P4(r),D=li(I,n);let E;return r.disabled||(E=h!==void 0?h:-1),de.jsx(Tc.Provider,{value:b,children:de.jsx(k4,fe({ref:D,role:g,tabIndex:E,component:s,focusVisibleClassName:tn(S.focusVisible,p),className:tn(S.root,m)},x,{ownerState:T,classes:S}))})});function A4(e){return Rn("MuiNativeSelect",e)}const Gx=Ln("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),O4=["className","disabled","error","IconComponent","inputRef","variant"],$4=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:s,error:l}=e,u={select:["select",n,r&&"disabled",o&&"multiple",l&&"error"],icon:["icon",`icon${Nt(n)}`,s&&"iconOpen",r&&"disabled"]};return jn(u,A4,t)},PP=({ownerState:e,theme:t})=>fe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":fe({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Gx.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),D4=Wt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Es,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${Gx.multiple}`]:t.multiple}]}})(PP),kP=({ownerState:e,theme:t})=>fe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Gx.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),I4=Wt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Nt(n.variant)}`],n.open&&t.iconOpen]}})(kP),R4=ne.forwardRef(function(t,n){const{className:r,disabled:o,error:s,IconComponent:l,inputRef:u,variant:d="standard"}=t,p=Zt(t,O4),g=fe({},t,{disabled:o,variant:d,error:s}),h=$4(g);return de.jsxs(ne.Fragment,{children:[de.jsx(D4,fe({ownerState:g,className:tn(h.select,r),disabled:o,ref:u||n},p)),t.multiple?null:de.jsx(I4,{as:l,ownerState:g,className:h.icon})]})});var KM;const L4=["children","classes","className","label","notched"],z4=Wt("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Es})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),F4=Wt("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Es})(({ownerState:e,theme:t})=>fe({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&fe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function j4(e){const{className:t,label:n,notched:r}=e,o=Zt(e,L4),s=n!=null&&n!=="",l=fe({},e,{notched:r,withLabel:s});return de.jsx(z4,fe({"aria-hidden":!0,className:t,ownerState:l},o,{children:de.jsx(F4,{ownerState:l,children:s?de.jsx("span",{children:n}):KM||(KM=de.jsx("span",{className:"notranslate",children:""}))})}))}const B4=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],N4=e=>{const{classes:t}=e,r=jn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},hj,t);return fe({},t,r)},U4=Wt(vy,{shouldForwardProp:e=>Es(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:gy})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return fe({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${pu.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${pu.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${pu.focused} .${pu.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${pu.error} .${pu.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${pu.disabled} .${pu.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&fe({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),V4=Wt(j4,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),W4=Wt(yy,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:_y})(({theme:e,ownerState:t})=>fe({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),Kx=ne.forwardRef(function(t,n){var r,o,s,l,u;const d=zn({props:t,name:"MuiOutlinedInput"}),{components:p={},fullWidth:g=!1,inputComponent:h="input",label:m,multiline:x=!1,notched:_,slots:b={},type:I="text"}=d,T=Zt(d,B4),S=N4(d),D=zf(),E=Lf({props:d,muiFormControl:D,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C=fe({},d,{color:E.color||"primary",disabled:E.disabled,error:E.error,focused:E.focused,formControl:D,fullWidth:g,hiddenLabel:E.hiddenLabel,multiline:x,size:E.size,type:I}),P=(r=(o=b.root)!=null?o:p.Root)!=null?r:U4,w=(s=(l=b.input)!=null?l:p.Input)!=null?s:W4;return de.jsx(Bx,fe({slots:{root:P,input:w},renderSuffix:R=>de.jsx(V4,{ownerState:C,className:S.notchedOutline,label:m!=null&&m!==""&&E.required?u||(u=de.jsxs(ne.Fragment,{children:[m,"","*"]})):m,notched:typeof _<"u"?_:!!(R.startAdornment||R.filled||R.focused)}),fullWidth:g,inputComponent:h,multiline:x,ref:n,type:I},T,{classes:fe({},S,{notchedOutline:null})}))});Kx.muiName="Input";function G4(e){return Rn("MuiSelect",e)}const sg=Ln("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var HM;const K4=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],H4=Wt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${sg.select}`]:t.select},{[`&.${sg.select}`]:t[n.variant]},{[`&.${sg.error}`]:t.error},{[`&.${sg.multiple}`]:t.multiple}]}})(PP,{[`&.${sg.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),q4=Wt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Nt(n.variant)}`],n.open&&t.iconOpen]}})(kP),X4=Wt("input",{shouldForwardProp:e=>uP(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qM(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Q4(e){return e==null||typeof e=="string"&&!e.trim()}const Y4=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:s,error:l}=e,u={select:["select",n,r&&"disabled",o&&"multiple",l&&"error"],icon:["icon",`icon${Nt(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return jn(u,G4,t)},Z4=ne.forwardRef(function(t,n){var r;const{"aria-describedby":o,"aria-label":s,autoFocus:l,autoWidth:u,children:d,className:p,defaultOpen:g,defaultValue:h,disabled:m,displayEmpty:x,error:_=!1,IconComponent:b,inputRef:I,labelId:T,MenuProps:S={},multiple:D,name:E,onBlur:C,onChange:P,onClose:w,onFocus:R,onOpen:U,open:N,readOnly:ie,renderValue:ee,SelectDisplayProps:q={},tabIndex:oe,value:ae,variant:X="standard"}=t,se=Zt(t,K4),[le,be]=X1({controlled:ae,default:h,name:"Select"}),[Ee,Y]=X1({controlled:N,default:g,name:"Select"}),te=ne.useRef(null),J=ne.useRef(null),[H,_e]=ne.useState(null),{current:Te}=ne.useRef(N!=null),[Re,We]=ne.useState(),at=li(n,I),Oe=ne.useCallback(At=>{J.current=At,At&&_e(At)},[]),ge=H?.parentNode;ne.useImperativeHandle(at,()=>({focus:()=>{J.current.focus()},node:te.current,value:le}),[le]),ne.useEffect(()=>{g&&Ee&&H&&!Te&&(We(u?null:ge.clientWidth),J.current.focus())},[H,u]),ne.useEffect(()=>{l&&J.current.focus()},[l]),ne.useEffect(()=>{if(!T)return;const At=Di(J.current).getElementById(T);if(At){const nn=()=>{getSelection().isCollapsed&&J.current.focus()};return At.addEventListener("click",nn),()=>{At.removeEventListener("click",nn)}}},[T]);const re=(At,nn)=>{At?U&&U(nn):w&&w(nn),Te||(We(u?null:ge.clientWidth),Y(At))},$e=At=>{At.button===0&&(At.preventDefault(),J.current.focus(),re(!0,At))},Ge=At=>{re(!1,At)},qe=ne.Children.toArray(d),it=At=>{const nn=qe.find(Ct=>Ct.props.value===At.target.value);nn!==void 0&&(be(nn.props.value),P&&P(At,nn))},Ve=At=>nn=>{let Ct;if(nn.currentTarget.hasAttribute("tabindex")){if(D){Ct=Array.isArray(le)?le.slice():[];const rt=le.indexOf(At.props.value);rt===-1?Ct.push(At.props.value):Ct.splice(rt,1)}else Ct=At.props.value;if(At.props.onClick&&At.props.onClick(nn),le!==Ct&&(be(Ct),P)){const rt=nn.nativeEvent||nn,hn=new rt.constructor(rt.type,rt);Object.defineProperty(hn,"target",{writable:!0,value:{value:Ct,name:E}}),P(hn,At)}D||re(!1,nn)}},Be=At=>{ie||[" ","ArrowUp","ArrowDown","Enter"].indexOf(At.key)!==-1&&(At.preventDefault(),re(!0,At))},_t=H!==null&&Ee,Ne=At=>{!_t&&C&&(Object.defineProperty(At,"target",{writable:!0,value:{value:le,name:E}}),C(At))};delete se["aria-invalid"];let Ye,kt;const mt=[];let Tt=!1;(Dv({value:le})||x)&&(ee?Ye=ee(le):Tt=!0);const Ke=qe.map(At=>{if(!ne.isValidElement(At))return null;let nn;if(D){if(!Array.isArray(le))throw new Error(Sd(2));nn=le.some(Ct=>qM(Ct,At.props.value)),nn&&Tt&&mt.push(At.props.children)}else nn=qM(le,At.props.value),nn&&Tt&&(kt=At.props.children);return ne.cloneElement(At,{"aria-selected":nn?"true":"false",onClick:Ve(At),onKeyUp:Ct=>{Ct.key===" "&&Ct.preventDefault(),At.props.onKeyUp&&At.props.onKeyUp(Ct)},role:"option",selected:nn,value:void 0,"data-value":At.props.value})});Tt&&(D?mt.length===0?Ye=null:Ye=mt.reduce((At,nn,Ct)=>(At.push(nn),Ct<mt.length-1&&At.push(", "),At),[]):Ye=kt);let dt=Re;!u&&Te&&H&&(dt=ge.clientWidth);let wt;typeof oe<"u"?wt=oe:wt=m?null:0;const st=q.id||(E?`mui-component-select-${E}`:void 0),He=fe({},t,{variant:X,value:le,open:_t,error:_}),Bt=Y4(He),qt=fe({},S.PaperProps,(r=S.slotProps)==null?void 0:r.paper),xn=uy();return de.jsxs(ne.Fragment,{children:[de.jsx(H4,fe({ref:Oe,tabIndex:wt,role:"combobox","aria-controls":xn,"aria-disabled":m?"true":void 0,"aria-expanded":_t?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[T,st].filter(Boolean).join(" ")||void 0,"aria-describedby":o,onKeyDown:Be,onMouseDown:m||ie?null:$e,onBlur:Ne,onFocus:R},q,{ownerState:He,className:tn(q.className,Bt.select,p),id:st,children:Q4(Ye)?HM||(HM=de.jsx("span",{className:"notranslate",children:""})):Ye})),de.jsx(X4,fe({"aria-invalid":_,value:Array.isArray(le)?le.join(","):le,name:E,ref:te,"aria-hidden":!0,onChange:it,tabIndex:-1,disabled:m,className:Bt.nativeInput,autoFocus:l,ownerState:He},se)),de.jsx(q4,{as:b,className:Bt.icon,ownerState:He}),de.jsx(CP,fe({id:`menu-${E||""}`,anchorEl:ge,open:_t,onClose:Ge,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},S,{MenuListProps:fe({"aria-labelledby":T,role:"listbox","aria-multiselectable":D?"true":void 0,disableListWrap:!0,id:xn},S.MenuListProps),slotProps:fe({},S.slotProps,{paper:fe({},qt,{style:fe({minWidth:dt},qt!=null?qt.style:null)})}),children:Ke}))]})}),J4=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],eU=["root"],tU=e=>{const{classes:t}=e;return t},Hx={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Es(e)&&e!=="variant",slot:"Root"},nU=Wt(Vx,Hx)(""),rU=Wt(Kx,Hx)(""),aU=Wt(Nx,Hx)(""),AP=ne.forwardRef(function(t,n){const r=zn({name:"MuiSelect",props:t}),{autoWidth:o=!1,children:s,classes:l={},className:u,defaultOpen:d=!1,displayEmpty:p=!1,IconComponent:g=_j,id:h,input:m,inputProps:x,label:_,labelId:b,MenuProps:I,multiple:T=!1,native:S=!1,onClose:D,onOpen:E,open:C,renderValue:P,SelectDisplayProps:w,variant:R="outlined"}=r,U=Zt(r,J4),N=S?R4:Z4,ie=zf(),ee=Lf({props:r,muiFormControl:ie,states:["variant","error"]}),q=ee.variant||R,oe=fe({},r,{variant:q,classes:l}),ae=tU(oe),X=Zt(ae,eU),se=m||{standard:de.jsx(nU,{ownerState:oe}),outlined:de.jsx(rU,{label:_,ownerState:oe}),filled:de.jsx(aU,{ownerState:oe})}[q],le=li(n,If(se));return de.jsx(ne.Fragment,{children:ne.cloneElement(se,fe({inputComponent:N,inputProps:fe({children:s,error:ee.error,IconComponent:g,variant:q,type:void 0,multiple:T},S?{id:h}:{autoWidth:o,defaultOpen:d,displayEmpty:p,labelId:b,MenuProps:I,onClose:D,onOpen:E,open:C,renderValue:P,SelectDisplayProps:fe({id:h},w)},x,{classes:x?ro(X,x.classes):X},m?m.props.inputProps:{})},(T&&S||p)&&q==="outlined"?{notched:!0}:{},{ref:le,className:tn(se.props.className,u,ae.root)},!m&&{variant:q},U))})});AP.muiName="Select";function iU(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:o,resumeHideDuration:s}=e,l=py();ne.useEffect(()=>{if(!o)return;function T(S){S.defaultPrevented||(S.key==="Escape"||S.key==="Esc")&&r?.(S,"escapeKeyDown")}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[o,r]);const u=Vo((T,S)=>{r?.(T,S)}),d=Vo(T=>{!r||T==null||l.start(T,()=>{u(null,"timeout")})});ne.useEffect(()=>(o&&d(t),l.clear),[o,t,d,l]);const p=T=>{r?.(T,"clickaway")},g=l.clear,h=ne.useCallback(()=>{t!=null&&d(s??t*.5)},[t,s,d]),m=T=>S=>{const D=T.onBlur;D?.(S),h()},x=T=>S=>{const D=T.onFocus;D?.(S),g()},_=T=>S=>{const D=T.onMouseEnter;D?.(S),g()},b=T=>S=>{const D=T.onMouseLeave;D?.(S),h()};return ne.useEffect(()=>{if(!n&&o)return window.addEventListener("focus",h),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",g)}},[n,o,h,g]),{getRootProps:(T={})=>{const S=fe({},Ov(e),Ov(T));return fe({role:"presentation"},T,S,{onBlur:m(S),onFocus:x(S),onMouseEnter:_(S),onMouseLeave:b(S)})},onClickAway:p}}function oU(e){return Rn("MuiSnackbarContent",e)}Ln("MuiSnackbarContent",["root","message","action"]);const sU=["action","className","message","role"],lU=e=>{const{classes:t}=e;return jn({root:["root"],action:["action"],message:["message"]},oU,t)},cU=Wt(il,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=cr.emphasize(e.palette.background.default,t);return fe({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),uU=Wt("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),dU=Wt("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),pU=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiSnackbarContent"}),{action:o,className:s,message:l,role:u="alert"}=r,d=Zt(r,sU),p=r,g=lU(p);return de.jsxs(cU,fe({role:u,square:!0,elevation:6,className:tn(g.root,s),ownerState:p,ref:n},d,{children:[de.jsx(uU,{className:g.message,ownerState:p,children:l}),o?de.jsx(dU,{className:g.action,ownerState:p,children:o}):null]}))});function fU(e){return Rn("MuiSnackbar",e)}Ln("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const mU=["onEnter","onExited"],hU=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],gU=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${Nt(n.vertical)}${Nt(n.horizontal)}`]};return jn(r,fU,t)},XM=Wt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${Nt(n.anchorOrigin.vertical)}${Nt(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return fe({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:fe({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),_U=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiSnackbar"}),o=Rf(),s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:u,horizontal:d}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:g,className:h,ClickAwayListenerProps:m,ContentProps:x,disableWindowBlurListener:_=!1,message:b,open:I,TransitionComponent:T=Ux,transitionDuration:S=s,TransitionProps:{onEnter:D,onExited:E}={}}=r,C=Zt(r.TransitionProps,mU),P=Zt(r,hU),w=fe({},r,{anchorOrigin:{vertical:u,horizontal:d},autoHideDuration:p,disableWindowBlurListener:_,TransitionComponent:T,transitionDuration:S}),R=gU(w),{getRootProps:U,onClickAway:N}=iU(fe({},w)),[ie,ee]=ne.useState(!0),q=ll({elementType:XM,getSlotProps:U,externalForwardedProps:P,ownerState:w,additionalProps:{ref:n},className:[R.root,h]}),oe=X=>{ee(!0),E&&E(X)},ae=(X,se)=>{ee(!1),D&&D(X,se)};return!I&&ie?null:de.jsx(qj,fe({onClickAway:N},m,{children:de.jsx(XM,fe({},q,{children:de.jsx(T,fe({appear:!0,in:I,timeout:S,direction:u==="top"?"down":"up",onEnter:ae,onExited:oe},C,{children:g||de.jsx(pU,fe({message:b,action:l},x))}))}))}))});function vU(e){return Rn("MuiTab",e)}const fu=Ln("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),yU=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],bU=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:o,icon:s,label:l,selected:u,disabled:d}=e,p={root:["root",s&&l&&"labelIcon",`textColor${Nt(n)}`,r&&"fullWidth",o&&"wrapped",u&&"selected",d&&"disabled"],iconWrapper:["iconWrapper"]};return jn(p,vU,t)},xU=Wt(vu,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Nt(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${fu.iconWrapper}`]:t.iconWrapper}]}})(({theme:e,ownerState:t})=>fe({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${fu.iconWrapper}`]:fe({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${fu.selected}`]:{opacity:1},[`&.${fu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${fu.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${fu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${fu.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${fu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),xb=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiTab"}),{className:o,disabled:s=!1,disableFocusRipple:l=!1,fullWidth:u,icon:d,iconPosition:p="top",indicator:g,label:h,onChange:m,onClick:x,onFocus:_,selected:b,selectionFollowsFocus:I,textColor:T="inherit",value:S,wrapped:D=!1}=r,E=Zt(r,yU),C=fe({},r,{disabled:s,disableFocusRipple:l,selected:b,icon:!!d,iconPosition:p,label:!!h,fullWidth:u,textColor:T,wrapped:D}),P=bU(C),w=d&&h&&ne.isValidElement(d)?ne.cloneElement(d,{className:tn(P.iconWrapper,d.props.className)}):d,R=N=>{!b&&m&&m(N,S),x&&x(N)},U=N=>{I&&!b&&m&&m(N,S),_&&_(N)};return de.jsxs(xU,fe({focusRipple:!l,className:tn(P.root,o),ref:n,role:"tab","aria-selected":b,disabled:s,onClick:R,onFocus:U,ownerState:C,tabIndex:b?0:-1},E,{children:[p==="top"||p==="start"?de.jsxs(ne.Fragment,{children:[w,h]}):de.jsxs(ne.Fragment,{children:[h,w]}),g]}))});function wU(e){return Rn("MuiToolbar",e)}Ln("MuiToolbar",["root","gutters","regular","dense"]);const MU=["className","component","disableGutters","variant"],TU=e=>{const{classes:t,disableGutters:n,variant:r}=e;return jn({root:["root",!n&&"gutters",r]},wU,t)},EU=Wt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>fe({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),SU=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiToolbar"}),{className:o,component:s="div",disableGutters:l=!1,variant:u="regular"}=r,d=Zt(r,MU),p=fe({},r,{component:s,disableGutters:l,variant:u}),g=TU(p);return de.jsx(EU,fe({as:s,className:tn(g.root,o),ref:n,ownerState:p},d))}),CU=xa(de.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),PU=xa(de.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function kU(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function AU(e,t,n,r={},o=()=>{}){const{ease:s=kU,duration:l=300}=r;let u=null;const d=t[e];let p=!1;const g=()=>{p=!0},h=m=>{if(p){o(new Error("Animation cancelled"));return}u===null&&(u=m);const x=Math.min(1,(m-u)/l);if(t[e]=s(x)*(n-d)+d,x>=1){requestAnimationFrame(()=>{o(null)});return}requestAnimationFrame(h)};return d===n?(o(new Error("Element already at target position")),g):(requestAnimationFrame(h),g)}const OU=["onChange"],$U={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function DU(e){const{onChange:t}=e,n=Zt(e,OU),r=ne.useRef(),o=ne.useRef(null),s=()=>{r.current=o.current.offsetHeight-o.current.clientHeight};return Ms(()=>{const l=cy(()=>{const d=r.current;s(),d!==r.current&&t(r.current)}),u=Ec(o.current);return u.addEventListener("resize",l),()=>{l.clear(),u.removeEventListener("resize",l)}},[t]),ne.useEffect(()=>{s(),t(r.current)},[t]),de.jsx("div",fe({style:$U},n,{ref:o}))}function IU(e){return Rn("MuiTabScrollButton",e)}const RU=Ln("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),LU=["className","slots","slotProps","direction","orientation","disabled"],zU=e=>{const{classes:t,orientation:n,disabled:r}=e;return jn({root:["root",n,r&&"disabled"]},IU,t)},FU=Wt(vu,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>fe({width:40,flexShrink:0,opacity:.8,[`&.${RU.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),jU=ne.forwardRef(function(t,n){var r,o;const s=zn({props:t,name:"MuiTabScrollButton"}),{className:l,slots:u={},slotProps:d={},direction:p}=s,g=Zt(s,LU),h=my(),m=fe({isRtl:h},s),x=zU(m),_=(r=u.StartScrollButtonIcon)!=null?r:CU,b=(o=u.EndScrollButtonIcon)!=null?o:PU,I=ll({elementType:_,externalSlotProps:d.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m}),T=ll({elementType:b,externalSlotProps:d.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m});return de.jsx(FU,fe({component:"div",className:tn(x.root,l),ref:n,role:null,ownerState:m,tabIndex:null},g,{children:p==="left"?de.jsx(_,fe({},I)):de.jsx(b,fe({},T))}))});function BU(e){return Rn("MuiTabs",e)}const wb=Ln("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),NU=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],QM=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,YM=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,q_=(e,t,n)=>{let r=!1,o=n(e,t);for(;o;){if(o===e.firstChild){if(r)return;r=!0}const s=o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||s)o=n(e,o);else{o.focus();return}}},UU=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:o,scrollableY:s,centered:l,scrollButtonsHideMobile:u,classes:d}=e;return jn({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",o&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",u&&"scrollButtonsHideMobile"],scrollableX:[o&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},BU,d)},VU=Wt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wb.scrollButtons}`]:t.scrollButtons},{[`& .${wb.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>fe({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${wb.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),WU=Wt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>fe({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),GU=Wt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>fe({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),KU=Wt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>fe({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),HU=Wt(DU)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),ZM={},qU=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiTabs"}),o=Rf(),s=my(),{"aria-label":l,"aria-labelledby":u,action:d,centered:p=!1,children:g,className:h,component:m="div",allowScrollButtonsMobile:x=!1,indicatorColor:_="primary",onChange:b,orientation:I="horizontal",ScrollButtonComponent:T=jU,scrollButtons:S="auto",selectionFollowsFocus:D,slots:E={},slotProps:C={},TabIndicatorProps:P={},TabScrollButtonProps:w={},textColor:R="primary",value:U,variant:N="standard",visibleScrollbar:ie=!1}=r,ee=Zt(r,NU),q=N==="scrollable",oe=I==="vertical",ae=oe?"scrollTop":"scrollLeft",X=oe?"top":"left",se=oe?"bottom":"right",le=oe?"clientHeight":"clientWidth",be=oe?"height":"width",Ee=fe({},r,{component:m,allowScrollButtonsMobile:x,indicatorColor:_,orientation:I,vertical:oe,scrollButtons:S,textColor:R,variant:N,visibleScrollbar:ie,fixed:!q,hideScrollbar:q&&!ie,scrollableX:q&&!oe,scrollableY:q&&oe,centered:p&&!q,scrollButtonsHideMobile:!x}),Y=UU(Ee),te=ll({elementType:E.StartScrollButtonIcon,externalSlotProps:C.startScrollButtonIcon,ownerState:Ee}),J=ll({elementType:E.EndScrollButtonIcon,externalSlotProps:C.endScrollButtonIcon,ownerState:Ee}),[H,_e]=ne.useState(!1),[Te,Re]=ne.useState(ZM),[We,at]=ne.useState(!1),[Oe,ge]=ne.useState(!1),[re,$e]=ne.useState(!1),[Ge,qe]=ne.useState({overflow:"hidden",scrollbarWidth:0}),it=new Map,Ve=ne.useRef(null),Be=ne.useRef(null),_t=()=>{const Ct=Ve.current;let rt;if(Ct){const En=Ct.getBoundingClientRect();rt={clientWidth:Ct.clientWidth,scrollLeft:Ct.scrollLeft,scrollTop:Ct.scrollTop,scrollLeftNormalized:kL(Ct,s?"rtl":"ltr"),scrollWidth:Ct.scrollWidth,top:En.top,bottom:En.bottom,left:En.left,right:En.right}}let hn;if(Ct&&U!==!1){const En=Be.current.children;if(En.length>0){const tr=En[it.get(U)];hn=tr?tr.getBoundingClientRect():null}}return{tabsMeta:rt,tabMeta:hn}},Ne=Vo(()=>{const{tabsMeta:Ct,tabMeta:rt}=_t();let hn=0,En;if(oe)En="top",rt&&Ct&&(hn=rt.top-Ct.top+Ct.scrollTop);else if(En=s?"right":"left",rt&&Ct){const Rt=s?Ct.scrollLeftNormalized+Ct.clientWidth-Ct.scrollWidth:Ct.scrollLeft;hn=(s?-1:1)*(rt[En]-Ct[En]+Rt)}const tr={[En]:hn,[be]:rt?rt[be]:0};if(isNaN(Te[En])||isNaN(Te[be]))Re(tr);else{const Rt=Math.abs(Te[En]-tr[En]),Kn=Math.abs(Te[be]-tr[be]);(Rt>=1||Kn>=1)&&Re(tr)}}),Ye=(Ct,{animation:rt=!0}={})=>{rt?AU(ae,Ve.current,Ct,{duration:o.transitions.duration.standard}):Ve.current[ae]=Ct},kt=Ct=>{let rt=Ve.current[ae];oe?rt+=Ct:(rt+=Ct*(s?-1:1),rt*=s&&eP()==="reverse"?-1:1),Ye(rt)},mt=()=>{const Ct=Ve.current[le];let rt=0;const hn=Array.from(Be.current.children);for(let En=0;En<hn.length;En+=1){const tr=hn[En];if(rt+tr[le]>Ct){En===0&&(rt=Ct);break}rt+=tr[le]}return rt},Tt=()=>{kt(-1*mt())},Ke=()=>{kt(mt())},dt=ne.useCallback(Ct=>{qe({overflow:null,scrollbarWidth:Ct})},[]),wt=()=>{const Ct={};Ct.scrollbarSizeListener=q?de.jsx(HU,{onChange:dt,className:tn(Y.scrollableX,Y.hideScrollbar)}):null;const hn=q&&(S==="auto"&&(We||Oe)||S===!0);return Ct.scrollButtonStart=hn?de.jsx(T,fe({slots:{StartScrollButtonIcon:E.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:te},orientation:I,direction:s?"right":"left",onClick:Tt,disabled:!We},w,{className:tn(Y.scrollButtons,w.className)})):null,Ct.scrollButtonEnd=hn?de.jsx(T,fe({slots:{EndScrollButtonIcon:E.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:J},orientation:I,direction:s?"left":"right",onClick:Ke,disabled:!Oe},w,{className:tn(Y.scrollButtons,w.className)})):null,Ct},st=Vo(Ct=>{const{tabsMeta:rt,tabMeta:hn}=_t();if(!(!hn||!rt)){if(hn[X]<rt[X]){const En=rt[ae]+(hn[X]-rt[X]);Ye(En,{animation:Ct})}else if(hn[se]>rt[se]){const En=rt[ae]+(hn[se]-rt[se]);Ye(En,{animation:Ct})}}}),He=Vo(()=>{q&&S!==!1&&$e(!re)});ne.useEffect(()=>{const Ct=cy(()=>{Ve.current&&Ne()});let rt;const hn=Rt=>{Rt.forEach(Kn=>{Kn.removedNodes.forEach(xr=>{var mr;(mr=rt)==null||mr.unobserve(xr)}),Kn.addedNodes.forEach(xr=>{var mr;(mr=rt)==null||mr.observe(xr)})}),Ct(),He()},En=Ec(Ve.current);En.addEventListener("resize",Ct);let tr;return typeof ResizeObserver<"u"&&(rt=new ResizeObserver(Ct),Array.from(Be.current.children).forEach(Rt=>{rt.observe(Rt)})),typeof MutationObserver<"u"&&(tr=new MutationObserver(hn),tr.observe(Be.current,{childList:!0})),()=>{var Rt,Kn;Ct.clear(),En.removeEventListener("resize",Ct),(Rt=tr)==null||Rt.disconnect(),(Kn=rt)==null||Kn.disconnect()}},[Ne,He]),ne.useEffect(()=>{const Ct=Array.from(Be.current.children),rt=Ct.length;if(typeof IntersectionObserver<"u"&&rt>0&&q&&S!==!1){const hn=Ct[0],En=Ct[rt-1],tr={root:Ve.current,threshold:.99},Rt=qa=>{at(!qa[0].isIntersecting)},Kn=new IntersectionObserver(Rt,tr);Kn.observe(hn);const xr=qa=>{ge(!qa[0].isIntersecting)},mr=new IntersectionObserver(xr,tr);return mr.observe(En),()=>{Kn.disconnect(),mr.disconnect()}}},[q,S,re,g?.length]),ne.useEffect(()=>{_e(!0)},[]),ne.useEffect(()=>{Ne()}),ne.useEffect(()=>{st(ZM!==Te)},[st,Te]),ne.useImperativeHandle(d,()=>({updateIndicator:Ne,updateScrollButtons:He}),[Ne,He]);const Bt=de.jsx(KU,fe({},P,{className:tn(Y.indicator,P.className),ownerState:Ee,style:fe({},Te,P.style)}));let qt=0;const xn=ne.Children.map(g,Ct=>{if(!ne.isValidElement(Ct))return null;const rt=Ct.props.value===void 0?qt:Ct.props.value;it.set(rt,qt);const hn=rt===U;return qt+=1,ne.cloneElement(Ct,fe({fullWidth:N==="fullWidth",indicator:hn&&!H&&Bt,selected:hn,selectionFollowsFocus:D,onChange:b,textColor:R,value:rt},qt===1&&U===!1&&!Ct.props.tabIndex?{tabIndex:0}:{}))}),At=Ct=>{const rt=Be.current,hn=Di(rt).activeElement;if(hn.getAttribute("role")!=="tab")return;let tr=I==="horizontal"?"ArrowLeft":"ArrowUp",Rt=I==="horizontal"?"ArrowRight":"ArrowDown";switch(I==="horizontal"&&s&&(tr="ArrowRight",Rt="ArrowLeft"),Ct.key){case tr:Ct.preventDefault(),q_(rt,hn,YM);break;case Rt:Ct.preventDefault(),q_(rt,hn,QM);break;case"Home":Ct.preventDefault(),q_(rt,null,QM);break;case"End":Ct.preventDefault(),q_(rt,null,YM);break}},nn=wt();return de.jsxs(VU,fe({className:tn(Y.root,h),ownerState:Ee,ref:n,as:m},ee,{children:[nn.scrollButtonStart,nn.scrollbarSizeListener,de.jsxs(WU,{className:Y.scroller,ownerState:Ee,style:{overflow:Ge.overflow,[oe?`margin${s?"Left":"Right"}`:"marginBottom"]:ie?void 0:-Ge.scrollbarWidth},ref:Ve,children:[de.jsx(GU,{"aria-label":l,"aria-labelledby":u,"aria-orientation":I==="vertical"?"vertical":null,className:Y.flexContainer,ownerState:Ee,onKeyDown:At,ref:Be,role:"tablist",children:xn}),H&&Bt]}),nn.scrollButtonEnd]}))});function XU(e){return Rn("MuiTextField",e)}Ln("MuiTextField",["root"]);const QU=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],YU={standard:Vx,filled:Nx,outlined:Kx},ZU=e=>{const{classes:t}=e;return jn({root:["root"]},XU,t)},JU=Wt(tN,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nl=ne.forwardRef(function(t,n){const r=zn({props:t,name:"MuiTextField"}),{autoComplete:o,autoFocus:s=!1,children:l,className:u,color:d="primary",defaultValue:p,disabled:g=!1,error:h=!1,FormHelperTextProps:m,fullWidth:x=!1,helperText:_,id:b,InputLabelProps:I,inputProps:T,InputProps:S,inputRef:D,label:E,maxRows:C,minRows:P,multiline:w=!1,name:R,onBlur:U,onChange:N,onFocus:ie,placeholder:ee,required:q=!1,rows:oe,select:ae=!1,SelectProps:X,type:se,value:le,variant:be="outlined"}=r,Ee=Zt(r,QU),Y=fe({},r,{autoFocus:s,color:d,disabled:g,error:h,fullWidth:x,multiline:w,required:q,select:ae,variant:be}),te=ZU(Y),J={};be==="outlined"&&(I&&typeof I.shrink<"u"&&(J.notched=I.shrink),J.label=E),ae&&((!X||!X.native)&&(J.id=void 0),J["aria-describedby"]=void 0);const H=uy(b),_e=_&&H?`${H}-helper-text`:void 0,Te=E&&H?`${H}-label`:void 0,Re=YU[be],We=de.jsx(Re,fe({"aria-describedby":_e,autoComplete:o,autoFocus:s,defaultValue:p,fullWidth:x,multiline:w,name:R,rows:oe,maxRows:C,minRows:P,type:se,value:le,id:H,inputRef:D,onBlur:U,onChange:N,onFocus:ie,placeholder:ee,inputProps:T},J,S));return de.jsxs(JU,fe({className:tn(te.root,u),disabled:g,error:h,fullWidth:x,ref:n,required:q,color:d,variant:be,ownerState:Y},Ee,{children:[E!=null&&E!==""&&de.jsx(MN,fe({htmlFor:H,id:Te},I,{children:E})),ae?de.jsx(AP,fe({"aria-describedby":_e,id:H,labelId:Te,value:le,input:We},X,{children:l})):We,_&&de.jsx(oN,fe({id:_e},m,{children:_}))]}))}),e5=e=>Rx({palette:{mode:e?"dark":"light",primary:{main:"#003366"},secondary:{main:"#FFD700"},success:{main:"#4CAF50"},error:{main:"#F44336"},...e?{background:{default:"#121212",paper:"#1e1e1e"}}:{background:{default:"#f5f5f5",paper:"#ffffff"}}},typography:{fontFamily:'"Roboto", "Noto Sans TC", sans-serif'},shape:{borderRadius:12}}),t5={},JM=e=>{let t;const n=new Set,r=(g,h)=>{const m=typeof g=="function"?g(t):g;if(!Object.is(m,t)){const x=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(_=>_(t,x))}},o=()=>t,d={setState:r,getState:o,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(t5?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(r,o,d);return d},n5=e=>e?JM(e):JM;var Mb={exports:{}},Tb={},Eb={exports:{}},Sb={};var eT;function r5(){if(eT)return Sb;eT=1;var e=Gg();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(h,m){var x=m(),_=r({inst:{value:x,getSnapshot:m}}),b=_[0].inst,I=_[1];return s(function(){b.value=x,b.getSnapshot=m,d(b)&&I({inst:b})},[h,x,m]),o(function(){return d(b)&&I({inst:b}),h(function(){d(b)&&I({inst:b})})},[h]),l(x),x}function d(h){var m=h.getSnapshot;h=h.value;try{var x=m();return!n(h,x)}catch{return!0}}function p(h,m){return m()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Sb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,Sb}var tT;function a5(){return tT||(tT=1,Eb.exports=r5()),Eb.exports}var nT;function i5(){if(nT)return Tb;nT=1;var e=Gg(),t=a5();function n(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Tb.useSyncExternalStoreWithSelector=function(p,g,h,m,x){var _=s(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=u(function(){function T(P){if(!S){if(S=!0,D=P,P=m(P),x!==void 0&&b.hasValue){var w=b.value;if(x(w,P))return E=w}return E=P}if(w=E,r(D,P))return w;var R=m(P);return x!==void 0&&x(w,R)?(D=P,w):(D=P,E=R)}var S=!1,D,E,C=h===void 0?null:h;return[function(){return T(g())},C===null?void 0:function(){return T(C())}]},[g,h,m,x]);var I=o(p,_[0],_[1]);return l(function(){b.hasValue=!0,b.value=I},[I]),d(I),I},Tb}var rT;function o5(){return rT||(rT=1,Mb.exports=i5()),Mb.exports}var s5=o5();const l5=Od(s5),OP={},{useDebugValue:c5}=$i,{useSyncExternalStoreWithSelector:u5}=l5;let aT=!1;const d5=e=>e;function p5(e,t=d5,n){(OP?"production":void 0)!=="production"&&n&&!aT&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),aT=!0);const r=u5(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return c5(r),r}const iT=e=>{(OP?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?n5(e):e,n=(r,o)=>p5(t,r,o);return Object.assign(n,t),n},f5=e=>e?iT(e):iT,by=f5(e=>({darkMode:localStorage.getItem("darkMode")==="true",toggleDarkMode:()=>e(t=>{const n=!t.darkMode;return localStorage.setItem("darkMode",String(n)),{darkMode:n}}),snackbar:{open:!1,message:"",severity:"info"},showSnackbar:(t,n="success")=>e({snackbar:{open:!0,message:t,severity:n}}),hideSnackbar:()=>e(t=>({snackbar:{...t.snackbar,open:!1}}))})),m5=xa(de.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),h5=xa(de.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),g5=xa(de.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),_5=xa(de.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),v5=xa(de.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),y5=xa(de.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),b5=xa(de.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),x5=xa(de.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),w5=xa(de.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),M5=xa(de.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),T5=xa(de.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),E5=xa(de.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language"),S5=xa(de.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode"),C5=xa(de.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),P5=xa(de.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),$P=xa(de.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),oT=["/","/history","/about"];function k5({children:e}){const{t,i18n:n}=Qv(),r=ID(),o=xx(),{darkMode:s,toggleDarkMode:l}=by(),u=mL("(max-width:600px)"),[d,p]=ne.useState(null),g=oT.indexOf(o.pathname),h=(x,_)=>{r(oT[_])},m=x=>{n.changeLanguage(x),localStorage.setItem("lang",x),p(null)};return de.jsxs(hi,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[de.jsxs(QF,{position:"sticky",sx:{bgcolor:"primary.main"},children:[de.jsxs(SU,{children:[de.jsxs(ia,{variant:"h6",sx:{flexGrow:1,fontWeight:"bold",color:"secondary.main"},children:[" ",t("appName")]}),de.jsx(Bg,{color:"inherit",onClick:x=>p(x.currentTarget),"aria-label":t("common.language"),children:de.jsx(E5,{})}),de.jsxs(CP,{anchorEl:d,open:!!d,onClose:()=>p(null),children:[de.jsx(GM,{onClick:()=>m("en"),children:"English"}),de.jsx(GM,{onClick:()=>m("zh"),children:""})]}),de.jsx(Bg,{color:"inherit",onClick:l,"aria-label":t("common.darkMode"),children:s?de.jsx(S5,{}):de.jsx(g5,{})})]}),de.jsxs(qU,{value:g===-1?0:g,onChange:h,variant:u?"fullWidth":"standard",textColor:"inherit",sx:{"& .MuiTabs-indicator":{backgroundColor:"secondary.main"},bgcolor:"rgba(0,0,0,0.1)"},children:[de.jsx(xb,{icon:u?de.jsx(M5,{}):void 0,label:t("tabs.home"),"aria-label":t("tabs.home")}),de.jsx(xb,{icon:u?de.jsx(w5,{}):void 0,label:t("tabs.history"),"aria-label":t("tabs.history")}),de.jsx(xb,{icon:u?de.jsx(T5,{}):void 0,label:t("tabs.about"),"aria-label":t("tabs.about")})]})]}),de.jsx(Xj,{maxWidth:"md",sx:{flex:1,py:3},children:e})]})}function Dd(e,t,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(g){try{p(r.next(g))}catch(h){l(h)}}function d(g){try{p(r.throw(g))}catch(h){l(h)}}function p(g){g.done?s(g.value):o(g.value).then(u,d)}p((r=r.apply(e,t||[])).next())})}const A5=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Ef(e,t,n){const r=O5(e),{webkitRelativePath:o}=e,s=typeof t=="string"?t:typeof o=="string"&&o.length>0?o:`./${e.name}`;return typeof r.path!="string"&&sT(r,"path",s),sT(r,"relativePath",s),r}function O5(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),o=A5.get(r);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}function sT(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const $5=[".DS_Store","Thumbs.db"];function D5(e){return Dd(this,void 0,void 0,function*(){return Rv(e)&&I5(e.dataTransfer)?F5(e.dataTransfer,e.type):R5(e)?L5(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?z5(e):[]})}function I5(e){return Rv(e)}function R5(e){return Rv(e)&&Rv(e.target)}function Rv(e){return typeof e=="object"&&e!==null}function L5(e){return X0(e.target.files).map(t=>Ef(t))}function z5(e){return Dd(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>Ef(n))})}function F5(e,t){return Dd(this,void 0,void 0,function*(){if(e.items){const n=X0(e.items).filter(o=>o.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(j5));return lT(DP(r))}return lT(X0(e.files).map(n=>Ef(n)))})}function lT(e){return e.filter(t=>$5.indexOf(t.name)===-1)}function X0(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function j5(e){if(typeof e.webkitGetAsEntry!="function")return cT(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?IP(t):cT(e,t)}function DP(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?DP(n):[n]],[])}function cT(e,t){return Dd(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const s=yield e.getAsFileSystemHandle();if(s===null)throw new Error(`${e} is not a File`);if(s!==void 0){const l=yield s.getFile();return l.handle=s,Ef(l)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return Ef(r,(n=t?.fullPath)!==null&&n!==void 0?n:void 0)})}function B5(e){return Dd(this,void 0,void 0,function*(){return e.isDirectory?IP(e):N5(e)})}function IP(e){const t=e.createReader();return new Promise((n,r)=>{const o=[];function s(){t.readEntries(l=>Dd(this,void 0,void 0,function*(){if(l.length){const u=Promise.all(l.map(B5));o.push(u),s()}else try{const u=yield Promise.all(o);n(u)}catch(u){r(u)}}),l=>{r(l)})}s()})}function N5(e){return Dd(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const o=Ef(r,e.fullPath);t(o)},r=>{n(r)})})})}var X_={},uT;function U5(){return uT||(uT=1,X_.__esModule=!0,X_.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",o=(e.type||"").toLowerCase(),s=o.replace(/\/.*$/,"");return n.some(function(l){var u=l.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?s===u.replace(/\/.*$/,""):o===u})}return!0}),X_}var V5=U5();const Cb=Od(V5);function dT(e){return K5(e)||G5(e)||LP(e)||W5()}function W5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function K5(e){if(Array.isArray(e))return Q0(e)}function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function fT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(r){RP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ng(e,t){return X5(e)||q5(e,t)||LP(e,t)||H5()}function H5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LP(e,t){if(e){if(typeof e=="string")return Q0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q0(e,t)}}function Q0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q5(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,l,u;try{for(n=n.call(e);!(o=(l=n.next()).done)&&(r.push(l.value),!(t&&r.length===t));o=!0);}catch(d){s=!0,u=d}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw u}}return r}}function X5(e){if(Array.isArray(e))return e}var Q5=typeof Cb=="function"?Cb:Cb.default,Y5="file-invalid-type",Z5="file-too-large",J5="file-too-small",e6="too-many-files",t6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Y5,message:"File type must be ".concat(r)}},mT=function(t){return{code:Z5,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},hT=function(t){return{code:J5,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},n6={code:e6,message:"Too many files"};function r6(e){return e.type===""&&typeof e.getAsFile=="function"}function zP(e,t){var n=e.type==="application/x-moz-file"||Q5(e,t)||r6(e);return[n,n?null:t6(t)]}function FP(e,t,n){if(yd(e.size))if(yd(t)&&yd(n)){if(e.size>n)return[!1,mT(n)];if(e.size<t)return[!1,hT(t)]}else{if(yd(t)&&e.size<t)return[!1,hT(t)];if(yd(n)&&e.size>n)return[!1,mT(n)]}return[!0,null]}function yd(e){return e!=null}function a6(e){var t=e.files,n=e.accept,r=e.minSize,o=e.maxSize,s=e.multiple,l=e.maxFiles,u=e.validator;return!s&&t.length>1||s&&l>=1&&t.length>l?!1:t.every(function(d){var p=zP(d,n),g=Ng(p,1),h=g[0],m=FP(d,r,o),x=Ng(m,1),_=x[0],b=u?u(d):null;return h&&_&&!b})}function Lv(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function lg(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function gT(e){e.preventDefault()}function i6(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function o6(e){return e.indexOf("Edge/")!==-1}function s6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return i6(e)||o6(e)}function jl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return t.some(function(u){return!Lv(r)&&u&&u.apply(void 0,[r].concat(s)),Lv(r)})}}function l6(){return"showOpenFilePicker"in window}function c6(e){if(yd(e)){var t=Object.entries(e).filter(function(n){var r=Ng(n,2),o=r[0],s=r[1],l=!0;return jP(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(s)||!s.every(BP))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(n,r){var o=Ng(r,2),s=o[0],l=o[1];return fT(fT({},n),{},RP({},s,l))},{});return[{description:"Files",accept:t}]}return e}function u6(e){if(yd(e))return Object.entries(e).reduce(function(t,n){var r=Ng(n,2),o=r[0],s=r[1];return[].concat(dT(t),[o],dT(s))},[]).filter(function(t){return jP(t)||BP(t)}).join(",")}function d6(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function p6(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function jP(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function BP(e){return/^.*\.[\w]+$/.test(e)}var f6=["children"],m6=["open"],h6=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],g6=["refKey","onChange","onClick"];function _T(e){return y6(e)||v6(e)||NP(e)||_6()}function _6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y6(e){if(Array.isArray(e))return Y0(e)}function Pb(e,t){return w6(e)||x6(e,t)||NP(e,t)||b6()}function b6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NP(e,t){if(e){if(typeof e=="string")return Y0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y0(e,t)}}function Y0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,l,u;try{for(n=n.call(e);!(o=(l=n.next()).done)&&(r.push(l.value),!(t&&r.length===t));o=!0);}catch(d){s=!0,u=d}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw u}}return r}}function w6(e){if(Array.isArray(e))return e}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){Z0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Z0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zv(e,t){if(e==null)return{};var n=M6(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function M6(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var qx=ne.forwardRef(function(e,t){var n=e.children,r=zv(e,f6),o=VP(r),s=o.open,l=zv(o,m6);return ne.useImperativeHandle(t,function(){return{open:s}},[s]),$i.createElement(ne.Fragment,null,n(ba(ba({},l),{},{open:s})))});qx.displayName="Dropzone";var UP={disabled:!1,getFilesFromEvent:D5,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};qx.defaultProps=UP;qx.propTypes={children:fa.func,accept:fa.objectOf(fa.arrayOf(fa.string)),multiple:fa.bool,preventDropOnDocument:fa.bool,noClick:fa.bool,noKeyboard:fa.bool,noDrag:fa.bool,noDragEventsBubbling:fa.bool,minSize:fa.number,maxSize:fa.number,maxFiles:fa.number,disabled:fa.bool,getFilesFromEvent:fa.func,onFileDialogCancel:fa.func,onFileDialogOpen:fa.func,useFsAccessApi:fa.bool,autoFocus:fa.bool,onDragEnter:fa.func,onDragLeave:fa.func,onDragOver:fa.func,onDrop:fa.func,onDropAccepted:fa.func,onDropRejected:fa.func,onError:fa.func,validator:fa.func};var J0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,isDragGlobal:!1,acceptedFiles:[],fileRejections:[]};function VP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ba(ba({},UP),e),n=t.accept,r=t.disabled,o=t.getFilesFromEvent,s=t.maxSize,l=t.minSize,u=t.multiple,d=t.maxFiles,p=t.onDragEnter,g=t.onDragLeave,h=t.onDragOver,m=t.onDrop,x=t.onDropAccepted,_=t.onDropRejected,b=t.onFileDialogCancel,I=t.onFileDialogOpen,T=t.useFsAccessApi,S=t.autoFocus,D=t.preventDropOnDocument,E=t.noClick,C=t.noKeyboard,P=t.noDrag,w=t.noDragEventsBubbling,R=t.onError,U=t.validator,N=ne.useMemo(function(){return u6(n)},[n]),ie=ne.useMemo(function(){return c6(n)},[n]),ee=ne.useMemo(function(){return typeof I=="function"?I:yT},[I]),q=ne.useMemo(function(){return typeof b=="function"?b:yT},[b]),oe=ne.useRef(null),ae=ne.useRef(null),X=ne.useReducer(T6,J0),se=Pb(X,2),le=se[0],be=se[1],Ee=le.isFocused,Y=le.isFileDialogActive,te=ne.useRef(typeof window<"u"&&window.isSecureContext&&T&&l6()),J=function(){!te.current&&Y&&setTimeout(function(){if(ae.current){var dt=ae.current.files;dt.length||(be({type:"closeDialog"}),q())}},300)};ne.useEffect(function(){return window.addEventListener("focus",J,!1),function(){window.removeEventListener("focus",J,!1)}},[ae,Y,q,te]);var H=ne.useRef([]),_e=ne.useRef([]),Te=function(dt){oe.current&&oe.current.contains(dt.target)||(dt.preventDefault(),H.current=[])};ne.useEffect(function(){return D&&(document.addEventListener("dragover",gT,!1),document.addEventListener("drop",Te,!1)),function(){D&&(document.removeEventListener("dragover",gT),document.removeEventListener("drop",Te))}},[oe,D]),ne.useEffect(function(){var Ke=function(Bt){_e.current=[].concat(_T(_e.current),[Bt.target]),lg(Bt)&&be({isDragGlobal:!0,type:"setDragGlobal"})},dt=function(Bt){_e.current=_e.current.filter(function(qt){return qt!==Bt.target&&qt!==null}),!(_e.current.length>0)&&be({isDragGlobal:!1,type:"setDragGlobal"})},wt=function(){_e.current=[],be({isDragGlobal:!1,type:"setDragGlobal"})},st=function(){_e.current=[],be({isDragGlobal:!1,type:"setDragGlobal"})};return document.addEventListener("dragenter",Ke,!1),document.addEventListener("dragleave",dt,!1),document.addEventListener("dragend",wt,!1),document.addEventListener("drop",st,!1),function(){document.removeEventListener("dragenter",Ke),document.removeEventListener("dragleave",dt),document.removeEventListener("dragend",wt),document.removeEventListener("drop",st)}},[oe]),ne.useEffect(function(){return!r&&S&&oe.current&&oe.current.focus(),function(){}},[oe,S,r]);var Re=ne.useCallback(function(Ke){R?R(Ke):console.error(Ke)},[R]),We=ne.useCallback(function(Ke){Ke.preventDefault(),Ke.persist(),Ye(Ke),H.current=[].concat(_T(H.current),[Ke.target]),lg(Ke)&&Promise.resolve(o(Ke)).then(function(dt){if(!(Lv(Ke)&&!w)){var wt=dt.length,st=wt>0&&a6({files:dt,accept:N,minSize:l,maxSize:s,multiple:u,maxFiles:d,validator:U}),He=wt>0&&!st;be({isDragAccept:st,isDragReject:He,isDragActive:!0,type:"setDraggedFiles"}),p&&p(Ke)}}).catch(function(dt){return Re(dt)})},[o,p,Re,w,N,l,s,u,d,U]),at=ne.useCallback(function(Ke){Ke.preventDefault(),Ke.persist(),Ye(Ke);var dt=lg(Ke);if(dt&&Ke.dataTransfer)try{Ke.dataTransfer.dropEffect="copy"}catch{}return dt&&h&&h(Ke),!1},[h,w]),Oe=ne.useCallback(function(Ke){Ke.preventDefault(),Ke.persist(),Ye(Ke);var dt=H.current.filter(function(st){return oe.current&&oe.current.contains(st)}),wt=dt.indexOf(Ke.target);wt!==-1&&dt.splice(wt,1),H.current=dt,!(dt.length>0)&&(be({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),lg(Ke)&&g&&g(Ke))},[oe,g,w]),ge=ne.useCallback(function(Ke,dt){var wt=[],st=[];Ke.forEach(function(He){var Bt=zP(He,N),qt=Pb(Bt,2),xn=qt[0],At=qt[1],nn=FP(He,l,s),Ct=Pb(nn,2),rt=Ct[0],hn=Ct[1],En=U?U(He):null;if(xn&&rt&&!En)wt.push(He);else{var tr=[At,hn];En&&(tr=tr.concat(En)),st.push({file:He,errors:tr.filter(function(Rt){return Rt})})}}),(!u&&wt.length>1||u&&d>=1&&wt.length>d)&&(wt.forEach(function(He){st.push({file:He,errors:[n6]})}),wt.splice(0)),be({acceptedFiles:wt,fileRejections:st,isDragReject:st.length>0,type:"setFiles"}),m&&m(wt,st,dt),st.length>0&&_&&_(st,dt),wt.length>0&&x&&x(wt,dt)},[be,u,N,l,s,d,m,x,_,U]),re=ne.useCallback(function(Ke){Ke.preventDefault(),Ke.persist(),Ye(Ke),H.current=[],lg(Ke)&&Promise.resolve(o(Ke)).then(function(dt){Lv(Ke)&&!w||ge(dt,Ke)}).catch(function(dt){return Re(dt)}),be({type:"reset"})},[o,ge,Re,w]),$e=ne.useCallback(function(){if(te.current){be({type:"openDialog"}),ee();var Ke={multiple:u,types:ie};window.showOpenFilePicker(Ke).then(function(dt){return o(dt)}).then(function(dt){ge(dt,null),be({type:"closeDialog"})}).catch(function(dt){d6(dt)?(q(dt),be({type:"closeDialog"})):p6(dt)?(te.current=!1,ae.current?(ae.current.value=null,ae.current.click()):Re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Re(dt)});return}ae.current&&(be({type:"openDialog"}),ee(),ae.current.value=null,ae.current.click())},[be,ee,q,T,ge,Re,ie,u]),Ge=ne.useCallback(function(Ke){!oe.current||!oe.current.isEqualNode(Ke.target)||(Ke.key===" "||Ke.key==="Enter"||Ke.keyCode===32||Ke.keyCode===13)&&(Ke.preventDefault(),$e())},[oe,$e]),qe=ne.useCallback(function(){be({type:"focus"})},[]),it=ne.useCallback(function(){be({type:"blur"})},[]),Ve=ne.useCallback(function(){E||(s6()?setTimeout($e,0):$e())},[E,$e]),Be=function(dt){return r?null:dt},_t=function(dt){return C?null:Be(dt)},Ne=function(dt){return P?null:Be(dt)},Ye=function(dt){w&&dt.stopPropagation()},kt=ne.useMemo(function(){return function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=Ke.refKey,wt=dt===void 0?"ref":dt,st=Ke.role,He=Ke.onKeyDown,Bt=Ke.onFocus,qt=Ke.onBlur,xn=Ke.onClick,At=Ke.onDragEnter,nn=Ke.onDragOver,Ct=Ke.onDragLeave,rt=Ke.onDrop,hn=zv(Ke,h6);return ba(ba(Z0({onKeyDown:_t(jl(He,Ge)),onFocus:_t(jl(Bt,qe)),onBlur:_t(jl(qt,it)),onClick:Be(jl(xn,Ve)),onDragEnter:Ne(jl(At,We)),onDragOver:Ne(jl(nn,at)),onDragLeave:Ne(jl(Ct,Oe)),onDrop:Ne(jl(rt,re)),role:typeof st=="string"&&st!==""?st:"presentation"},wt,oe),!r&&!C?{tabIndex:0}:{}),hn)}},[oe,Ge,qe,it,Ve,We,at,Oe,re,C,P,r]),mt=ne.useCallback(function(Ke){Ke.stopPropagation()},[]),Tt=ne.useMemo(function(){return function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=Ke.refKey,wt=dt===void 0?"ref":dt,st=Ke.onChange,He=Ke.onClick,Bt=zv(Ke,g6),qt=Z0({accept:N,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Be(jl(st,re)),onClick:Be(jl(He,mt)),tabIndex:-1},wt,ae);return ba(ba({},qt),Bt)}},[ae,n,u,re,r]);return ba(ba({},le),{},{isFocused:Ee&&!r,getRootProps:kt,getInputProps:Tt,rootRef:oe,inputRef:ae,open:Be($e)})}function T6(e,t){switch(t.type){case"focus":return ba(ba({},e),{},{isFocused:!0});case"blur":return ba(ba({},e),{},{isFocused:!1});case"openDialog":return ba(ba({},J0),{},{isFileDialogActive:!0});case"closeDialog":return ba(ba({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ba(ba({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ba(ba({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"setDragGlobal":return ba(ba({},e),{},{isDragGlobal:t.isDragGlobal});case"reset":return ba({},J0);default:return e}}function yT(){}const vv=new Map,vd=[],E6=(e,t,n)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const r=vv.get(e);if(r===void 0)vv.set(e,{backend:t,priority:n});else{if(r.priority>n)return;if(r.priority===n&&r.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){const o=vd.indexOf(e);o!==-1&&vd.splice(o,1);for(let s=0;s<vd.length;s++)if(vv.get(vd[s]).priority<=n){vd.splice(s,0,e);return}vd.push(e)}return}throw new TypeError("not a valid backend")},S6=async e=>{const t=vv.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const n=!!t.initPromise;try{return n||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(r){return n||(t.error=`${r}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},C6=async e=>{const t=e.executionProviders||[],n=t.map(d=>typeof d=="string"?d:d.name),r=n.length===0?vd:n;let o;const s=[],l=new Set;for(const d of r){const p=await S6(d);typeof p=="string"?s.push({name:d,err:p}):(o||(o=p),o===p&&l.add(d))}if(!o)throw new Error(`no available backend found. ERR: ${s.map(d=>`[${d.name}] ${d.err}`).join(", ")}`);for(const{name:d,err:p}of s)n.includes(d)&&console.warn(`removing requested execution provider "${d}" from session options because it is not available: ${p}`);const u=t.filter(d=>l.has(typeof d=="string"?d:d.name));return[o,new Proxy(e,{get:(d,p)=>p==="executionProviders"?u:Reflect.get(d,p)})]},P6="1.21.0";let bT="warning";const ol={wasm:{},webgl:{},webgpu:{},versions:{common:P6},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);bT=e}},get logLevel(){return bT}};Object.defineProperty(ol,"logLevel",{enumerable:!0});const k6=ol,A6=(e,t)=>{const n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=e.dims[3],n.height=e.dims[2];const r=n.getContext("2d");if(r!=null){let o,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[3]):(o=e.dims[3],s=e.dims[2]);const l=t?.format!==void 0?t.format:"RGB",u=t?.norm;let d,p;u===void 0||u.mean===void 0?d=[255,255,255,255]:typeof u.mean=="number"?d=[u.mean,u.mean,u.mean,u.mean]:(d=[u.mean[0],u.mean[1],u.mean[2],0],u.mean[3]!==void 0&&(d[3]=u.mean[3])),u===void 0||u.bias===void 0?p=[0,0,0,0]:typeof u.bias=="number"?p=[u.bias,u.bias,u.bias,u.bias]:(p=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(p[3]=u.bias[3]));const g=s*o;let h=0,m=g,x=g*2,_=-1;l==="RGBA"?(h=0,m=g,x=g*2,_=g*3):l==="RGB"?(h=0,m=g,x=g*2):l==="RBG"&&(h=0,x=g,m=g*2);for(let b=0;b<s;b++)for(let I=0;I<o;I++){const T=(e.data[h++]-p[0])*d[0],S=(e.data[m++]-p[1])*d[1],D=(e.data[x++]-p[2])*d[2],E=_===-1?255:(e.data[_++]-p[3])*d[3];r.fillStyle="rgba("+T+","+S+","+D+","+E+")",r.fillRect(I,b,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},O6=(e,t)=>{const n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let r;if(n!=null){let o,s,l;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[1],l=e.dims[3]):(o=e.dims[3],s=e.dims[2],l=e.dims[1]);const u=t!==void 0&&t.format!==void 0?t.format:"RGB",d=t?.norm;let p,g;d===void 0||d.mean===void 0?p=[255,255,255,255]:typeof d.mean=="number"?p=[d.mean,d.mean,d.mean,d.mean]:(p=[d.mean[0],d.mean[1],d.mean[2],255],d.mean[3]!==void 0&&(p[3]=d.mean[3])),d===void 0||d.bias===void 0?g=[0,0,0,0]:typeof d.bias=="number"?g=[d.bias,d.bias,d.bias,d.bias]:(g=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(g[3]=d.bias[3]));const h=s*o;if(t!==void 0&&(t.format!==void 0&&l===4&&t.format!=="RGBA"||l===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const m=4;let x=0,_=1,b=2,I=3,T=0,S=h,D=h*2,E=-1;u==="RGBA"?(T=0,S=h,D=h*2,E=h*3):u==="RGB"?(T=0,S=h,D=h*2):u==="RBG"&&(T=0,D=h,S=h*2),r=n.createImageData(o,s);for(let C=0;C<s*o;x+=m,_+=m,b+=m,I+=m,C++)r.data[x]=(e.data[T++]-g[0])*p[0],r.data[_]=(e.data[S++]-g[1])*p[1],r.data[b]=(e.data[D++]-g[2])*p[2],r.data[I]=E===-1?255:(e.data[E++]-g[3])*p[3]}else throw new Error("Can not access image data");return r},kb=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:n,width:r}=t,o=t.norm??{mean:255,bias:0};let s,l;typeof o.mean=="number"?s=[o.mean,o.mean,o.mean,o.mean]:s=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?l=[o.bias,o.bias,o.bias,o.bias]:l=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];const u=t.format!==void 0?t.format:"RGBA",d=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",p=n*r,g=d==="RGBA"?new Float32Array(p*4):new Float32Array(p*3);let h=4,m=0,x=1,_=2,b=3,I=0,T=p,S=p*2,D=-1;u==="RGB"&&(h=3,m=0,x=1,_=2,b=-1),d==="RGBA"?D=p*3:d==="RBG"?(I=0,S=p,T=p*2):d==="BGR"&&(S=0,T=p,I=p*2);for(let C=0;C<p;C++,m+=h,_+=h,x+=h,b+=h)g[I++]=(e[m]+l[0])/s[0],g[T++]=(e[x]+l[1])/s[1],g[S++]=(e[_]+l[2])/s[2],D!==-1&&b!==-1&&(g[D++]=(e[b]+l[3])/s[3]);return d==="RGBA"?new xs("float32",g,[1,4,n,r]):new xs("float32",g,[1,3,n,r])},$6=async(e,t)=>{const n=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,r=typeof ImageData<"u"&&e instanceof ImageData,o=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string";let l,u=t??{};const d=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},p=g=>typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||g instanceof OffscreenCanvas?g.getContext("2d"):null;if(n){const g=d();g.width=e.width,g.height=e.height;const h=p(g);if(h!=null){let m=e.height,x=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,x=t.resizedWidth),t!==void 0){if(u=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=m,u.width=x}else u.tensorFormat="RGBA",u.height=m,u.width=x;h.drawImage(e,0,0),l=h.getImageData(0,0,x,m).data}else throw new Error("Can not access image data")}else if(r){let g,h;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(g=t.resizedHeight,h=t.resizedWidth):(g=e.height,h=e.width),t!==void 0&&(u=t),u.format="RGBA",u.height=g,u.width=h,t!==void 0){const m=d();m.width=h,m.height=g;const x=p(m);if(x!=null)x.putImageData(e,0,0),l=x.getImageData(0,0,h,g).data;else throw new Error("Can not access image data")}else l=e.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const g=d();g.width=e.width,g.height=e.height;const h=p(g);if(h!=null){const m=e.height,x=e.width;return h.drawImage(e,0,0,x,m),l=h.getImageData(0,0,x,m).data,u.height=m,u.width=x,kb(l,u)}else throw new Error("Can not access image data")}else{if(s)return new Promise((g,h)=>{const m=d(),x=p(m);if(!e||!x)return h();const _=new Image;_.crossOrigin="Anonymous",_.src=e,_.onload=()=>{m.width=_.width,m.height=_.height,x.drawImage(_,0,0,m.width,m.height);const b=x.getImageData(0,0,m.width,m.height);u.height=m.height,u.width=m.width,g(kb(b.data,u))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return kb(l,u);throw new Error("Input data provided is not supported - aborted tensor creation")},D6=(e,t)=>{const{width:n,height:r,download:o,dispose:s}=t,l=[1,r,n,4];return new xs({location:"texture",type:"float32",texture:e,dims:l,download:o,dispose:s})},I6=(e,t)=>{const{dataType:n,dims:r,download:o,dispose:s}=t;return new xs({location:"gpu-buffer",type:n??"float32",gpuBuffer:e,dims:r,download:o,dispose:s})},R6=(e,t)=>{const{dataType:n,dims:r,download:o,dispose:s}=t;return new xs({location:"ml-tensor",type:n??"float32",mlTensor:e,dims:r,download:o,dispose:s})},L6=(e,t,n)=>new xs({location:"cpu-pinned",type:e,data:t,dims:n??[t.length]}),hf=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),yv=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let xT=!1;const z6=()=>{if(!xT){xT=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,n=globalThis.Float16Array,r=typeof n<"u"&&n.from;e&&(hf.set("int64",BigInt64Array),yv.set(BigInt64Array,"int64")),t&&(hf.set("uint64",BigUint64Array),yv.set(BigUint64Array,"uint64")),r?(hf.set("float16",n),yv.set(n,"float16")):hf.set("float16",Uint16Array)}},F6=e=>{let t=1;for(let n=0;n<e.length;n++){const r=e[n];if(typeof r!="number"||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);t*=r}return t},j6=(e,t)=>{switch(e.location){case"cpu":return new xs(e.type,e.data,t);case"cpu-pinned":return new xs({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new xs({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new xs({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new xs({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let xs=class{constructor(t,n,r){z6();let o,s;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,o=t.type,s=t.dims,t.location){case"cpu-pinned":{const u=hf.get(o);if(!u)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint64"&&o!=="int8"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,d;if(typeof t=="string")if(o=t,d=r,t==="string"){if(!Array.isArray(n))throw new TypeError("A string tensor's data must be a string array.");u=n}else{const p=hf.get(t);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(n)){if(t==="float16"&&p===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${p.name} as data.`);t==="uint64"||t==="int64"?u=p.from(n,BigInt):u=p.from(n)}else if(n instanceof p)u=n;else if(n instanceof Uint8ClampedArray)if(t==="uint8")u=Uint8Array.from(n);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&n instanceof Uint16Array&&p!==Uint16Array)u=new globalThis.Float16Array(n.buffer,n.byteOffset,n.length);else throw new TypeError(`A ${o} tensor's data must be type of ${p}`)}else if(d=n,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const p=typeof t[0];if(p==="string")o="string",u=t;else if(p==="boolean")o="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else if(t instanceof Uint8ClampedArray)o="uint8",u=Uint8Array.from(t);else{const p=yv.get(t.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);o=p,u=t}if(d===void 0)d=[u.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");s=d,this.cpuData=u,this.dataLocation="cpu"}const l=F6(s);if(this.cpuData&&l!==this.cpuData.length&&!((o==="uint4"||o==="int4")&&Math.ceil(l/2)===this.cpuData.length))throw new Error(`Tensor's size(${l}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=s,this.size=l}static async fromImage(t,n){return $6(t,n)}static fromTexture(t,n){return D6(t,n)}static fromGpuBuffer(t,n){return I6(t,n)}static fromMLTensor(t,n){return R6(t,n)}static fromPinnedBuffer(t,n,r){return L6(t,n,r)}toDataURL(t){return A6(this,t)}toImageData(t){return O6(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const n=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=n,t&&this.disposer&&(this.disposer(),this.disposer=void 0),n}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return j6(this,t)}};const ff=xs,WP=(e,t)=>{(typeof ol.trace>"u"?!ol.wasm.trace:!ol.trace)||console.timeStamp(`${e}::ORT::${t}`)},GP=(e,t)=>{const n=new Error().stack?.split(/\r\n|\r|\n/g)||[];let r=!1;for(let o=0;o<n.length;o++){if(r&&!n[o].includes("TRACE_FUNC")){let s=`FUNC_${e}::${n[o].trim().split(" ")[1]}`;t&&(s+=`::${t}`),WP("CPU",s);return}n[o].includes("TRACE_FUNC")&&(r=!0)}},ex=e=>{(typeof ol.trace>"u"?!ol.wasm.trace:!ol.trace)||GP("BEGIN",e)},tx=e=>{(typeof ol.trace>"u"?!ol.wasm.trace:!ol.trace)||GP("END",e)};let B6=class KP{constructor(t){this.handler=t}async run(t,n,r){ex();const o={};let s={};if(typeof t!="object"||t===null||t instanceof ff||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof ff)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(const p of n){if(typeof p!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(p)===-1)throw new RangeError(`'fetches' contains invalid output name: ${p}.`);o[p]=null}if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let p=!1;const g=Object.getOwnPropertyNames(n);for(const h of this.outputNames)if(g.indexOf(h)!==-1){const m=n[h];(m===null||m instanceof ff)&&(p=!0,l=!1,o[h]=m)}if(p){if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else s=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const p of this.inputNames)if(typeof t[p]>"u")throw new Error(`input '${p}' is missing in 'feeds'.`);if(l)for(const p of this.outputNames)o[p]=null;const u=await this.handler.run(t,o,s),d={};for(const p in u)if(Object.hasOwnProperty.call(u,p)){const g=u[p];g instanceof ff?d[p]=g:d[p]=new ff(g.type,g.data,g.dims)}return tx(),d}async release(){return this.handler.dispose()}static async create(t,n,r,o){ex();let s,l={};if(typeof t=="string"){if(s=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const g=t;let h=0,m=t.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(m=t.byteLength-h,typeof r=="number"){if(m=r,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||h+m>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-h}].`);if(typeof o=="object"&&o!==null)l=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof r<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(g,h,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[u,d]=await C6(l),p=await u.createInferenceSessionHandler(s,d);return tx(),new KP(p)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const N6=B6,U6=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:N6,TRACE:WP,TRACE_FUNC_BEGIN:ex,TRACE_FUNC_END:tx,Tensor:ff,env:k6,registerBackend:E6},Symbol.toStringTag,{value:"Module"}));var Xx=Object.defineProperty,V6=Object.getOwnPropertyDescriptor,W6=Object.getOwnPropertyNames,G6=Object.prototype.hasOwnProperty,K6=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Ut=(e,t)=>()=>(e&&(t=e(e=0)),t),jf=(e,t)=>{for(var n in t)Xx(e,n,{get:t[n],enumerable:!0})},H6=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of W6(t))!G6.call(e,o)&&o!==n&&Xx(e,o,{get:()=>t[o],enumerable:!(r=V6(t,o))||r.enumerable});return e},Ug=e=>H6(Xx({},"__esModule",{value:!0}),e),cg,mu,Md,wT,HP,qP=Ut(()=>{cg=new Map,mu=[],Md=(e,t,n)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let r=cg.get(e);if(r===void 0)cg.set(e,{backend:t,priority:n});else{if(r.priority>n)return;if(r.priority===n&&r.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){let o=mu.indexOf(e);o!==-1&&mu.splice(o,1);for(let s=0;s<mu.length;s++)if(cg.get(mu[s]).priority<=n){mu.splice(s,0,e);return}mu.push(e)}return}throw new TypeError("not a valid backend")},wT=async e=>{let t=cg.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let n=!!t.initPromise;try{return n||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(r){return n||(t.error=`${r}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},HP=async e=>{let t=e.executionProviders||[],n=t.map(d=>typeof d=="string"?d:d.name),r=n.length===0?mu:n,o,s=[],l=new Set;for(let d of r){let p=await wT(d);typeof p=="string"?s.push({name:d,err:p}):(o||(o=p),o===p&&l.add(d))}if(!o)throw new Error(`no available backend found. ERR: ${s.map(d=>`[${d.name}] ${d.err}`).join(", ")}`);for(let{name:d,err:p}of s)n.includes(d)&&console.warn(`removing requested execution provider "${d}" from session options because it is not available: ${p}`);let u=t.filter(d=>l.has(typeof d=="string"?d:d.name));return[o,new Proxy(e,{get:(d,p)=>p==="executionProviders"?u:Reflect.get(d,p)})]}}),q6=Ut(()=>{qP()}),XP,X6=Ut(()=>{XP="1.22.0-dev.20250409-89f8206ba4"}),Ab,_s,QP=Ut(()=>{X6(),Ab="warning",_s={wasm:{},webgl:{},webgpu:{},versions:{common:XP},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ab=e}},get logLevel(){return Ab}},Object.defineProperty(_s,"logLevel",{enumerable:!0})}),ma,Q6=Ut(()=>{QP(),ma=_s}),YP,ZP,Y6=Ut(()=>{YP=(e,t)=>{let n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=e.dims[3],n.height=e.dims[2];let r=n.getContext("2d");if(r!=null){let o,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[3]):(o=e.dims[3],s=e.dims[2]);let l=t?.format!==void 0?t.format:"RGB",u=t?.norm,d,p;u===void 0||u.mean===void 0?d=[255,255,255,255]:typeof u.mean=="number"?d=[u.mean,u.mean,u.mean,u.mean]:(d=[u.mean[0],u.mean[1],u.mean[2],0],u.mean[3]!==void 0&&(d[3]=u.mean[3])),u===void 0||u.bias===void 0?p=[0,0,0,0]:typeof u.bias=="number"?p=[u.bias,u.bias,u.bias,u.bias]:(p=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(p[3]=u.bias[3]));let g=s*o,h=0,m=g,x=g*2,_=-1;l==="RGBA"?(h=0,m=g,x=g*2,_=g*3):l==="RGB"?(h=0,m=g,x=g*2):l==="RBG"&&(h=0,x=g,m=g*2);for(let b=0;b<s;b++)for(let I=0;I<o;I++){let T=(e.data[h++]-p[0])*d[0],S=(e.data[m++]-p[1])*d[1],D=(e.data[x++]-p[2])*d[2],E=_===-1?255:(e.data[_++]-p[3])*d[3];r.fillStyle="rgba("+T+","+S+","+D+","+E+")",r.fillRect(I,b,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ZP=(e,t)=>{let n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),r;if(n!=null){let o,s,l;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[1],l=e.dims[3]):(o=e.dims[3],s=e.dims[2],l=e.dims[1]);let u=t!==void 0&&t.format!==void 0?t.format:"RGB",d=t?.norm,p,g;d===void 0||d.mean===void 0?p=[255,255,255,255]:typeof d.mean=="number"?p=[d.mean,d.mean,d.mean,d.mean]:(p=[d.mean[0],d.mean[1],d.mean[2],255],d.mean[3]!==void 0&&(p[3]=d.mean[3])),d===void 0||d.bias===void 0?g=[0,0,0,0]:typeof d.bias=="number"?g=[d.bias,d.bias,d.bias,d.bias]:(g=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(g[3]=d.bias[3]));let h=s*o;if(t!==void 0&&(t.format!==void 0&&l===4&&t.format!=="RGBA"||l===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let m=4,x=0,_=1,b=2,I=3,T=0,S=h,D=h*2,E=-1;u==="RGBA"?(T=0,S=h,D=h*2,E=h*3):u==="RGB"?(T=0,S=h,D=h*2):u==="RBG"&&(T=0,D=h,S=h*2),r=n.createImageData(o,s);for(let C=0;C<s*o;x+=m,_+=m,b+=m,I+=m,C++)r.data[x]=(e.data[T++]-g[0])*p[0],r.data[_]=(e.data[S++]-g[1])*p[1],r.data[b]=(e.data[D++]-g[2])*p[2],r.data[I]=E===-1?255:(e.data[E++]-g[3])*p[3]}else throw new Error("Can not access image data");return r}}),Q_,JP,ek,tk,nk,rk,Z6=Ut(()=>{Qx(),Q_=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:r}=t,o=t.norm??{mean:255,bias:0},s,l;typeof o.mean=="number"?s=[o.mean,o.mean,o.mean,o.mean]:s=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?l=[o.bias,o.bias,o.bias,o.bias]:l=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let u=t.format!==void 0?t.format:"RGBA",d=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",p=n*r,g=d==="RGBA"?new Float32Array(p*4):new Float32Array(p*3),h=4,m=0,x=1,_=2,b=3,I=0,T=p,S=p*2,D=-1;u==="RGB"&&(h=3,m=0,x=1,_=2,b=-1),d==="RGBA"?D=p*3:d==="RBG"?(I=0,S=p,T=p*2):d==="BGR"&&(S=0,T=p,I=p*2);for(let E=0;E<p;E++,m+=h,_+=h,x+=h,b+=h)g[I++]=(e[m]+l[0])/s[0],g[T++]=(e[x]+l[1])/s[1],g[S++]=(e[_]+l[2])/s[2],D!==-1&&b!==-1&&(g[D++]=(e[b]+l[3])/s[3]);return d==="RGBA"?new No("float32",g,[1,4,n,r]):new No("float32",g,[1,3,n,r])},JP=async(e,t)=>{let n=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,r=typeof ImageData<"u"&&e instanceof ImageData,o=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",l,u=t??{},d=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},p=g=>typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||g instanceof OffscreenCanvas?g.getContext("2d"):null;if(n){let g=d();g.width=e.width,g.height=e.height;let h=p(g);if(h!=null){let m=e.height,x=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,x=t.resizedWidth),t!==void 0){if(u=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=m,u.width=x}else u.tensorFormat="RGBA",u.height=m,u.width=x;h.drawImage(e,0,0),l=h.getImageData(0,0,x,m).data}else throw new Error("Can not access image data")}else if(r){let g,h;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(g=t.resizedHeight,h=t.resizedWidth):(g=e.height,h=e.width),t!==void 0&&(u=t),u.format="RGBA",u.height=g,u.width=h,t!==void 0){let m=d();m.width=h,m.height=g;let x=p(m);if(x!=null)x.putImageData(e,0,0),l=x.getImageData(0,0,h,g).data;else throw new Error("Can not access image data")}else l=e.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let g=d();g.width=e.width,g.height=e.height;let h=p(g);if(h!=null){let m=e.height,x=e.width;return h.drawImage(e,0,0,x,m),l=h.getImageData(0,0,x,m).data,u.height=m,u.width=x,Q_(l,u)}else throw new Error("Can not access image data")}else{if(s)return new Promise((g,h)=>{let m=d(),x=p(m);if(!e||!x)return h();let _=new Image;_.crossOrigin="Anonymous",_.src=e,_.onload=()=>{m.width=_.width,m.height=_.height,x.drawImage(_,0,0,m.width,m.height);let b=x.getImageData(0,0,m.width,m.height);u.height=m.height,u.width=m.width,g(Q_(b.data,u))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return Q_(l,u);throw new Error("Input data provided is not supported - aborted tensor creation")},ek=(e,t)=>{let{width:n,height:r,download:o,dispose:s}=t,l=[1,r,n,4];return new No({location:"texture",type:"float32",texture:e,dims:l,download:o,dispose:s})},tk=(e,t)=>{let{dataType:n,dims:r,download:o,dispose:s}=t;return new No({location:"gpu-buffer",type:n??"float32",gpuBuffer:e,dims:r,download:o,dispose:s})},nk=(e,t)=>{let{dataType:n,dims:r,download:o,dispose:s}=t;return new No({location:"ml-tensor",type:n??"float32",mlTensor:e,dims:r,download:o,dispose:s})},rk=(e,t,n)=>new No({location:"cpu-pinned",type:e,data:t,dims:n??[t.length]})}),bd,xg,Ob,ak,J6=Ut(()=>{bd=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),xg=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Ob=!1,ak=()=>{if(!Ob){Ob=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,n=globalThis.Float16Array,r=typeof n<"u"&&n.from;e&&(bd.set("int64",BigInt64Array),xg.set(BigInt64Array,"int64")),t&&(bd.set("uint64",BigUint64Array),xg.set(BigUint64Array,"uint64")),r?(bd.set("float16",n),xg.set(n,"float16")):bd.set("float16",Uint16Array)}}}),ik,ok,eV=Ut(()=>{Qx(),ik=e=>{let t=1;for(let n=0;n<e.length;n++){let r=e[n];if(typeof r!="number"||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);t*=r}return t},ok=(e,t)=>{switch(e.location){case"cpu":return new No(e.type,e.data,t);case"cpu-pinned":return new No({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new No({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new No({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new No({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),No,Qx=Ut(()=>{Y6(),Z6(),J6(),eV(),No=class{constructor(e,t,n){ak();let r,o;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,r=e.type,o=e.dims,e.location){case"cpu-pinned":{let l=bd.get(r);if(!l)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(e.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=e.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="uint8"&&r!=="bool"&&r!=="uint4"&&r!=="int4")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="uint64"&&r!=="int8"&&r!=="uint8"&&r!=="bool"&&r!=="uint4"&&r!=="int4")throw new TypeError(`unsupported type "${r}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,u;if(typeof e=="string")if(r=e,u=n,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");l=t}else{let d=bd.get(e);if(d===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&d===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${d.name} as data.`);e==="uint64"||e==="int64"?l=d.from(t,BigInt):l=d.from(t)}else if(t instanceof d)l=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")l=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&d!==Uint16Array)l=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${r} tensor's data must be type of ${d}`)}else if(u=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let d=typeof e[0];if(d==="string")r="string",l=e;else if(d==="boolean")r="bool",l=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${d}.`)}else if(e instanceof Uint8ClampedArray)r="uint8",l=Uint8Array.from(e);else{let d=xg.get(e.constructor);if(d===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);r=d,l=e}if(u===void 0)u=[l.length];else if(!Array.isArray(u))throw new TypeError("A tensor's dims must be a number array");o=u,this.cpuData=l,this.dataLocation="cpu"}let s=ik(o);if(this.cpuData&&s!==this.cpuData.length&&!((r==="uint4"||r==="int4")&&Math.ceil(s/2)===this.cpuData.length))throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=o,this.size=s}static async fromImage(e,t){return JP(e,t)}static fromTexture(e,t){return ek(e,t)}static fromGpuBuffer(e,t){return tk(e,t)}static fromMLTensor(e,t){return nk(e,t)}static fromPinnedBuffer(e,t,n){return rk(e,t,n)}toDataURL(e){return YP(this,e)}toImageData(e){return ZP(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ok(this,e)}}}),al,sk=Ut(()=>{Qx(),al=No}),Vg,$b,cl,ws,lk=Ut(()=>{QP(),Vg=(e,t)=>{(typeof _s.trace>"u"?!_s.wasm.trace:!_s.trace)||console.timeStamp(`${e}::ORT::${t}`)},$b=(e,t)=>{let n=new Error().stack?.split(/\r\n|\r|\n/g)||[],r=!1;for(let o=0;o<n.length;o++){if(r&&!n[o].includes("TRACE_FUNC")){let s=`FUNC_${e}::${n[o].trim().split(" ")[1]}`;t&&(s+=`::${t}`),Vg("CPU",s);return}n[o].includes("TRACE_FUNC")&&(r=!0)}},cl=e=>{(typeof _s.trace>"u"?!_s.wasm.trace:!_s.trace)||$b("BEGIN",e)},ws=e=>{(typeof _s.trace>"u"?!_s.wasm.trace:!_s.trace)||$b("END",e)}}),ck,tV=Ut(()=>{qP(),sk(),lk(),ck=class uk{constructor(t){this.handler=t}async run(t,n,r){cl();let o={},s={};if(typeof t!="object"||t===null||t instanceof al||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof al)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let p of n){if(typeof p!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(p)===-1)throw new RangeError(`'fetches' contains invalid output name: ${p}.`);o[p]=null}if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let p=!1,g=Object.getOwnPropertyNames(n);for(let h of this.outputNames)if(g.indexOf(h)!==-1){let m=n[h];(m===null||m instanceof al)&&(p=!0,l=!1,o[h]=m)}if(p){if(typeof r=="object"&&r!==null)s=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else s=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let p of this.inputNames)if(typeof t[p]>"u")throw new Error(`input '${p}' is missing in 'feeds'.`);if(l)for(let p of this.outputNames)o[p]=null;let u=await this.handler.run(t,o,s),d={};for(let p in u)if(Object.hasOwnProperty.call(u,p)){let g=u[p];g instanceof al?d[p]=g:d[p]=new al(g.type,g.data,g.dims)}return ws(),d}async release(){return this.handler.dispose()}static async create(t,n,r,o){cl();let s,l={};if(typeof t=="string"){if(s=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let g=t,h=0,m=t.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(m=t.byteLength-h,typeof r=="number"){if(m=r,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||h+m>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-h}].`);if(typeof o=="object"&&o!==null)l=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof r<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(g,h,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[u,d]=await HP(l),p=await u.createInferenceSessionHandler(s,d);return ws(),new uk(p)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),Yx,nV=Ut(()=>{tV(),Yx=ck}),rV=Ut(()=>{}),aV=Ut(()=>{}),iV=Ut(()=>{}),oV=Ut(()=>{}),dk={};jf(dk,{InferenceSession:()=>Yx,TRACE:()=>Vg,TRACE_FUNC_BEGIN:()=>cl,TRACE_FUNC_END:()=>ws,Tensor:()=>al,env:()=>ma,registerBackend:()=>Md});var dl=Ut(()=>{q6(),Q6(),nV(),sk(),rV(),aV(),lk(),iV(),oV()}),Zx=Ut(()=>{}),pk={};jf(pk,{default:()=>fk});var Db,Ib,fk,sV=Ut(()=>{v$(),Id(),Jx(),Db="ort-wasm-proxy-worker",Ib=globalThis.self?.name===Db,Ib&&(self.onmessage=e=>{let{type:t,in:n}=e.data;try{switch(t){case"init-wasm":ew(n.wasm).then(()=>{vw(n).then(()=>{postMessage({type:t})},r=>{postMessage({type:t,err:r})})},r=>{postMessage({type:t,err:r})});break;case"init-ep":{let{epName:r,env:o}=n;yw(o,r).then(()=>{postMessage({type:t})},s=>{postMessage({type:t,err:s})});break}case"copy-from":{let{buffer:r}=n,o=Wv(r);postMessage({type:t,out:o});break}case"create":{let{model:r,options:o}=n;bw(r,o).then(s=>{postMessage({type:t,out:s})},s=>{postMessage({type:t,err:s})});break}case"release":xw(n),postMessage({type:t});break;case"run":{let{sessionId:r,inputIndices:o,inputs:s,outputIndices:l,options:u}=n;ww(r,o,s,l,new Array(l.length).fill(null),u).then(d=>{d.some(p=>p[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:d},Tw([...s,...d]))},d=>{postMessage({type:t,err:d})});break}case"end-profiling":Mw(n),postMessage({type:t});break;default:}}catch(r){postMessage({type:t,err:r})}}),fk=Ib?null:e=>new Worker(e??Bo,{type:"module",name:Db})}),mk={};jf(mk,{default:()=>hk});var Rb,Lb,hk,MT,lV=Ut(()=>{Lb=(Rb=import.meta.url,async function(e={}){var t,n,r=e,o=new Promise((y,$)=>{t=y,n=$}),s=typeof window=="object",l=typeof WorkerGlobalScope<"u",u=l&&self.name?.startsWith("em-pthread");r.mountExternalData=(y,$)=>{y.startsWith("./")&&(y=y.substring(2)),(r.Eb||(r.Eb=new Map)).set(y,$)},r.unmountExternalData=()=>{delete r.Eb};var d=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let p=y=>async(...$)=>{try{if(r.Fb)throw Error("Session already started");let F=r.Fb={dc:$[0],errors:[]},W=await y(...$);if(r.Fb!==F)throw Error("Session mismatch");r.Jb?.flush();let Q=F.errors;if(0<Q.length){let ue=await Promise.all(Q);if(ue=ue.filter(Ce=>Ce),0<ue.length)throw Error(ue.join(`
`))}return W}finally{r.Fb=null}};r.jsepInit=(y,$)=>{if(y==="webgpu"){[r.Jb,r.Ub,r.Yb,r.Kb,r.Xb,r.jb,r.Zb,r.ac,r.Vb,r.Wb,r.$b]=$;let F=r.Jb;r.jsepRegisterBuffer=(W,Q,ue,Ce)=>F.registerBuffer(W,Q,ue,Ce),r.jsepGetBuffer=W=>F.getBuffer(W),r.jsepCreateDownloader=(W,Q,ue)=>F.createDownloader(W,Q,ue),r.jsepOnCreateSession=W=>{F.onCreateSession(W)},r.jsepOnReleaseSession=W=>{F.onReleaseSession(W)},r.jsepOnRunStart=W=>F.onRunStart(W),r.bc=(W,Q)=>{F.upload(W,Q)}}else if(y==="webnn"){let F=$[0];[r.nc,r.Nb,r.webnnEnsureTensor,r.Ob,r.webnnDownloadTensor]=$.slice(1),r.webnnReleaseTensorId=r.Nb,r.webnnUploadTensor=r.Ob,r.webnnOnRunStart=W=>F.onRunStart(W),r.webnnOnRunEnd=F.onRunEnd.bind(F),r.webnnRegisterMLContext=(W,Q)=>{F.registerMLContext(W,Q)},r.webnnOnReleaseSession=W=>{F.onReleaseSession(W)},r.webnnCreateMLTensorDownloader=(W,Q)=>F.createMLTensorDownloader(W,Q),r.webnnRegisterMLTensor=(W,Q,ue,Ce)=>F.registerMLTensor(W,Q,ue,Ce),r.webnnCreateMLContext=W=>F.createMLContext(W),r.webnnRegisterMLConstant=(W,Q,ue,Ce,je,nt)=>F.registerMLConstant(W,Q,ue,Ce,je,r.Eb,nt),r.webnnRegisterGraphInput=F.registerGraphInput.bind(F),r.webnnIsGraphInput=F.isGraphInput.bind(F),r.webnnCreateTemporaryTensor=F.createTemporaryTensor.bind(F),r.webnnIsInt64Supported=F.isInt64Supported.bind(F)}};let g=()=>{let y=($,F,W)=>(...Q)=>{let ue=Hn,Ce=F?.();Q=$(...Q);let je=F?.();return Ce!==je&&($=je,W(Ce),F=W=null),Hn!=ue?new Promise((nt,pt)=>{nr={resolve:nt,reject:pt}}):Q};(()=>{for(let $ of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])r[$]=y(r[$],()=>r[$],F=>r[$]=F)})(),p!==void 0&&(r._OrtRun=p(r._OrtRun),r._OrtRunWithBinding=p(r._OrtRunWithBinding)),g=void 0};r.asyncInit=()=>{g?.()};var h,m,x=Object.assign({},r),_=(y,$)=>{throw $},b="";(s||l)&&(l?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),Rb&&(b=Rb),b=b.startsWith("blob:")?"":b.slice(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(m=y=>{var $=new XMLHttpRequest;return $.open("GET",y,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),h=async y=>{if(be(y))return new Promise((F,W)=>{var Q=new XMLHttpRequest;Q.open("GET",y,!0),Q.responseType="arraybuffer",Q.onload=()=>{Q.status==200||Q.status==0&&Q.response?F(Q.response):W(Q.status)},Q.onerror=W,Q.send(null)});var $=await fetch(y,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw Error($.status+" : "+$.url)});var I=console.log.bind(console),T=console.error.bind(console),S=I,D=T;Object.assign(r,x),x=null;var E,C,P,w,R,U,N,ie,ee,q,oe,ae,X,se=r.wasmBinary,le=!1,be=y=>y.startsWith("file://");function Ee(){return E.buffer!=w.buffer&&Oe(),w}function Y(){return E.buffer!=w.buffer&&Oe(),R}function te(){return E.buffer!=w.buffer&&Oe(),U}function J(){return E.buffer!=w.buffer&&Oe(),N}function H(){return E.buffer!=w.buffer&&Oe(),ie}function _e(){return E.buffer!=w.buffer&&Oe(),ee}function Te(){return E.buffer!=w.buffer&&Oe(),q}function Re(){return E.buffer!=w.buffer&&Oe(),X}if(u){let y=function($){try{var F=$.data,W=F.Bb;if(W==="load"){let Q=[];self.onmessage=ue=>Q.push(ue),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let ue of Q)y(ue);self.onmessage=y};for(let ue of F.Rb)r[ue]&&!r[ue].proxy||(r[ue]=(...Ce)=>{postMessage({Bb:"callHandler",Qb:ue,args:Ce})},ue=="print"&&(S=r[ue]),ue=="printErr"&&(D=r[ue]));E=F.kc,Oe(),We(F.lc)}else if(W==="run"){En(F.Ab),Li(F.Ab,0,0,1,0,0),Ct(),Pe(F.Ab),at||(uo(),at=!0);try{tr(F.fc,F.Hb)}catch(Q){if(Q!="unwind")throw Q}}else F.target!=="setimmediate"&&(W==="checkMailbox"?at&&ke():W&&(D(`worker: received unknown command ${W}`),D(F)))}catch(Q){throw zi(),Q}};var We,at=!1;D=function(...$){$=$.join(" "),console.error($)},self.alert=function(...$){postMessage({Bb:"alert",text:$.join(" "),ic:ts()})},self.onunhandledrejection=$=>{throw $.reason||$},self.onmessage=y}function Oe(){var y=E.buffer;r.HEAP8=w=new Int8Array(y),r.HEAP16=U=new Int16Array(y),r.HEAPU8=R=new Uint8Array(y),r.HEAPU16=N=new Uint16Array(y),r.HEAP32=ie=new Int32Array(y),r.HEAPU32=ee=new Uint32Array(y),r.HEAPF32=q=new Float32Array(y),r.HEAPF64=X=new Float64Array(y),r.HEAP64=oe=new BigInt64Array(y),r.HEAPU64=ae=new BigUint64Array(y)}function ge(){u?startWorker(r):rn.Ca()}u||(E=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),Oe());var re,$e=0,Ge=null;function qe(){if(--$e==0&&Ge){var y=Ge;Ge=null,y()}}function it(y){throw D(y="Aborted("+y+")"),le=!0,y=new WebAssembly.RuntimeError(y+". Build with -sASSERTIONS for more info."),n(y),y}function Ve(){return{a:{L:Ne,Aa:_t,b:Kn,$:mr,A:Qi,pa:Xa,X:vi,Z:B,qa:xe,na:pe,ga:we,ma:Se,J:Xe,Y:ht,V:Lt,oa:Qt,W:jt,va:yn,E:wa,Q:Cr,O:ao,D:yi,u:Aa,r:Wr,P:ga,z:_o,R:Qe,ja:G,T:lt,aa:Kt,M:Ht,F:Xt,ia:Pe,sa:zt,t:or,Ba:ta,w:ri,o:Ya,l:Xn,c:Ma,n:Ua,j:pl,v:Ko,p:Ss,f:Cs,s:io,m:Kl,e:Ps,k:yo,i:ks,g:Hl,d:Ho,da:bo,ea:fl,fa:Ea,ba:xo,ca:Yi,N:Ds,xa:ml,ua:ql,h:Is,C:wo,G:hl,ta:Xo,x:Xl,ra:Cc,U:Yo,q:$s,y:Zi,K:Pc,S:Zo,za:Ql,ya:Ri,ka:Ci,la:Ls,_:He,B:To,I:Eo,ha:kc,H:lo,a:E,wa:wt}}}var Be={829644:(y,$,F,W,Q)=>{if(r===void 0||!r.Eb)return 1;if((y=wr(Number(y>>>0))).startsWith("./")&&(y=y.substring(2)),!(y=r.Eb.get(y)))return 2;if($=Number($>>>0),F=Number(F>>>0),W=Number(W>>>0),$+F>y.byteLength)return 3;try{let ue=y.subarray($,$+F);switch(Q){case 0:Y().set(ue,W>>>0);break;case 1:r.mc?r.mc(W,ue):r.bc(W,ue);break;default:return 4}return 0}catch{return 4}},830468:(y,$,F)=>{r.Ob(y,Y().subarray($>>>0,$+F>>>0))},830532:()=>r.nc(),830574:y=>{r.Nb(y)},830611:()=>{r.Vb()},830642:()=>{r.Wb()},830671:()=>{r.$b()},830696:y=>r.Ub(y),830729:y=>r.Yb(y),830761:(y,$,F)=>{r.Kb(Number(y),Number($),Number(F),!0)},830824:(y,$,F)=>{r.Kb(Number(y),Number($),Number(F))},830881:()=>typeof wasmOffsetConverter<"u",830938:y=>{r.jb("Abs",y,void 0)},830989:y=>{r.jb("Neg",y,void 0)},831040:y=>{r.jb("Floor",y,void 0)},831093:y=>{r.jb("Ceil",y,void 0)},831145:y=>{r.jb("Reciprocal",y,void 0)},831203:y=>{r.jb("Sqrt",y,void 0)},831255:y=>{r.jb("Exp",y,void 0)},831306:y=>{r.jb("Erf",y,void 0)},831357:y=>{r.jb("Sigmoid",y,void 0)},831412:(y,$,F)=>{r.jb("HardSigmoid",y,{alpha:$,beta:F})},831491:y=>{r.jb("Log",y,void 0)},831542:y=>{r.jb("Sin",y,void 0)},831593:y=>{r.jb("Cos",y,void 0)},831644:y=>{r.jb("Tan",y,void 0)},831695:y=>{r.jb("Asin",y,void 0)},831747:y=>{r.jb("Acos",y,void 0)},831799:y=>{r.jb("Atan",y,void 0)},831851:y=>{r.jb("Sinh",y,void 0)},831903:y=>{r.jb("Cosh",y,void 0)},831955:y=>{r.jb("Asinh",y,void 0)},832008:y=>{r.jb("Acosh",y,void 0)},832061:y=>{r.jb("Atanh",y,void 0)},832114:y=>{r.jb("Tanh",y,void 0)},832166:y=>{r.jb("Not",y,void 0)},832217:(y,$,F)=>{r.jb("Clip",y,{min:$,max:F})},832286:y=>{r.jb("Clip",y,void 0)},832338:(y,$)=>{r.jb("Elu",y,{alpha:$})},832396:y=>{r.jb("Gelu",y,void 0)},832448:y=>{r.jb("Relu",y,void 0)},832500:(y,$)=>{r.jb("LeakyRelu",y,{alpha:$})},832564:(y,$)=>{r.jb("ThresholdedRelu",y,{alpha:$})},832634:(y,$)=>{r.jb("Cast",y,{to:$})},832692:y=>{r.jb("Add",y,void 0)},832743:y=>{r.jb("Sub",y,void 0)},832794:y=>{r.jb("Mul",y,void 0)},832845:y=>{r.jb("Div",y,void 0)},832896:y=>{r.jb("Pow",y,void 0)},832947:y=>{r.jb("Equal",y,void 0)},833e3:y=>{r.jb("Greater",y,void 0)},833055:y=>{r.jb("GreaterOrEqual",y,void 0)},833117:y=>{r.jb("Less",y,void 0)},833169:y=>{r.jb("LessOrEqual",y,void 0)},833228:(y,$,F,W,Q)=>{r.jb("ReduceMean",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},833403:(y,$,F,W,Q)=>{r.jb("ReduceMax",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},833577:(y,$,F,W,Q)=>{r.jb("ReduceMin",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},833751:(y,$,F,W,Q)=>{r.jb("ReduceProd",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},833926:(y,$,F,W,Q)=>{r.jb("ReduceSum",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834100:(y,$,F,W,Q)=>{r.jb("ReduceL1",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834273:(y,$,F,W,Q)=>{r.jb("ReduceL2",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834446:(y,$,F,W,Q)=>{r.jb("ReduceLogSum",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834623:(y,$,F,W,Q)=>{r.jb("ReduceSumSquare",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834803:(y,$,F,W,Q)=>{r.jb("ReduceLogSumExp",y,{keepDims:!!$,noopWithEmptyAxes:!!F,axes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},834983:y=>{r.jb("Where",y,void 0)},835036:(y,$,F)=>{r.jb("Transpose",y,{perm:$?Array.from(H().subarray(Number($)>>>0,Number(F)>>>0)):[]})},835160:(y,$,F,W)=>{r.jb("DepthToSpace",y,{blocksize:$,mode:wr(F),format:W?"NHWC":"NCHW"})},835293:(y,$,F,W)=>{r.jb("DepthToSpace",y,{blocksize:$,mode:wr(F),format:W?"NHWC":"NCHW"})},835426:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et,Yt)=>{r.jb("ConvTranspose",y,{format:nt?"NHWC":"NCHW",autoPad:$,dilations:[F],group:W,kernelShape:[Q],pads:[ue,Ce],strides:[je],wIsConst:()=>!!Ee()[pt>>>0],outputPadding:gt?Array.from(H().subarray(Number(gt)>>>0,Number($t)>>>0)):[],outputShape:Ot?Array.from(H().subarray(Number(Ot)>>>0,Number(Et)>>>0)):[],activation:wr(Yt)})},835859:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("ConvTranspose",y,{format:je?"NHWC":"NCHW",autoPad:$,dilations:Array.from(H().subarray(Number(F)>>>0,2+(Number(F)>>>0)>>>0)),group:W,kernelShape:Array.from(H().subarray(Number(Q)>>>0,2+(Number(Q)>>>0)>>>0)),pads:Array.from(H().subarray(Number(ue)>>>0,4+(Number(ue)>>>0)>>>0)),strides:Array.from(H().subarray(Number(Ce)>>>0,2+(Number(Ce)>>>0)>>>0)),wIsConst:()=>!!Ee()[nt>>>0],outputPadding:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],outputShape:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[],activation:wr(Et)})},836520:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et,Yt)=>{r.jb("ConvTranspose",y,{format:nt?"NHWC":"NCHW",autoPad:$,dilations:[F],group:W,kernelShape:[Q],pads:[ue,Ce],strides:[je],wIsConst:()=>!!Ee()[pt>>>0],outputPadding:gt?Array.from(H().subarray(Number(gt)>>>0,Number($t)>>>0)):[],outputShape:Ot?Array.from(H().subarray(Number(Ot)>>>0,Number(Et)>>>0)):[],activation:wr(Yt)})},836953:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("ConvTranspose",y,{format:je?"NHWC":"NCHW",autoPad:$,dilations:Array.from(H().subarray(Number(F)>>>0,2+(Number(F)>>>0)>>>0)),group:W,kernelShape:Array.from(H().subarray(Number(Q)>>>0,2+(Number(Q)>>>0)>>>0)),pads:Array.from(H().subarray(Number(ue)>>>0,4+(Number(ue)>>>0)>>>0)),strides:Array.from(H().subarray(Number(Ce)>>>0,2+(Number(Ce)>>>0)>>>0)),wIsConst:()=>!!Ee()[nt>>>0],outputPadding:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],outputShape:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[],activation:wr(Et)})},837614:(y,$)=>{r.jb("GlobalAveragePool",y,{format:$?"NHWC":"NCHW"})},837705:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("AveragePool",y,{format:Et?"NHWC":"NCHW",auto_pad:$,ceil_mode:F,count_include_pad:W,storage_order:Q,dilations:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[],kernel_shape:je?Array.from(H().subarray(Number(je)>>>0,Number(nt)>>>0)):[],pads:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],strides:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[]})},838184:(y,$)=>{r.jb("GlobalAveragePool",y,{format:$?"NHWC":"NCHW"})},838275:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("AveragePool",y,{format:Et?"NHWC":"NCHW",auto_pad:$,ceil_mode:F,count_include_pad:W,storage_order:Q,dilations:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[],kernel_shape:je?Array.from(H().subarray(Number(je)>>>0,Number(nt)>>>0)):[],pads:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],strides:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[]})},838754:(y,$)=>{r.jb("GlobalMaxPool",y,{format:$?"NHWC":"NCHW"})},838841:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("MaxPool",y,{format:Et?"NHWC":"NCHW",auto_pad:$,ceil_mode:F,count_include_pad:W,storage_order:Q,dilations:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[],kernel_shape:je?Array.from(H().subarray(Number(je)>>>0,Number(nt)>>>0)):[],pads:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],strides:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[]})},839316:(y,$)=>{r.jb("GlobalMaxPool",y,{format:$?"NHWC":"NCHW"})},839403:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et)=>{r.jb("MaxPool",y,{format:Et?"NHWC":"NCHW",auto_pad:$,ceil_mode:F,count_include_pad:W,storage_order:Q,dilations:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[],kernel_shape:je?Array.from(H().subarray(Number(je)>>>0,Number(nt)>>>0)):[],pads:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],strides:$t?Array.from(H().subarray(Number($t)>>>0,Number(Ot)>>>0)):[]})},839878:(y,$,F,W,Q)=>{r.jb("Gemm",y,{alpha:$,beta:F,transA:W,transB:Q})},839982:y=>{r.jb("MatMul",y,void 0)},840036:(y,$,F,W)=>{r.jb("ArgMax",y,{keepDims:!!$,selectLastIndex:!!F,axis:W})},840144:(y,$,F,W)=>{r.jb("ArgMin",y,{keepDims:!!$,selectLastIndex:!!F,axis:W})},840252:(y,$)=>{r.jb("Softmax",y,{axis:$})},840315:(y,$)=>{r.jb("Concat",y,{axis:$})},840375:(y,$,F,W,Q)=>{r.jb("Split",y,{axis:$,numOutputs:F,splitSizes:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},840531:y=>{r.jb("Expand",y,void 0)},840585:(y,$)=>{r.jb("Gather",y,{axis:Number($)})},840656:(y,$)=>{r.jb("GatherElements",y,{axis:Number($)})},840735:(y,$)=>{r.jb("GatherND",y,{batch_dims:Number($)})},840814:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt)=>{r.jb("Resize",y,{antialias:$,axes:F?Array.from(H().subarray(Number(F)>>>0,Number(W)>>>0)):[],coordinateTransformMode:wr(Q),cubicCoeffA:ue,excludeOutside:Ce,extrapolationValue:je,keepAspectRatioPolicy:wr(nt),mode:wr(pt),nearestMode:wr(gt)})},841176:(y,$,F,W,Q,ue,Ce)=>{r.jb("Slice",y,{starts:$?Array.from(H().subarray(Number($)>>>0,Number(F)>>>0)):[],ends:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[],axes:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[]})},841440:y=>{r.jb("Tile",y,void 0)},841492:(y,$,F)=>{r.jb("InstanceNormalization",y,{epsilon:$,format:F?"NHWC":"NCHW"})},841606:(y,$,F)=>{r.jb("InstanceNormalization",y,{epsilon:$,format:F?"NHWC":"NCHW"})},841720:y=>{r.jb("Range",y,void 0)},841773:(y,$)=>{r.jb("Einsum",y,{equation:wr($)})},841854:(y,$,F,W,Q)=>{r.jb("Pad",y,{mode:$,value:F,pads:W?Array.from(H().subarray(Number(W)>>>0,Number(Q)>>>0)):[]})},841997:(y,$,F,W,Q,ue)=>{r.jb("BatchNormalization",y,{epsilon:$,momentum:F,spatial:!!Q,trainingMode:!!W,format:ue?"NHWC":"NCHW"})},842166:(y,$,F,W,Q,ue)=>{r.jb("BatchNormalization",y,{epsilon:$,momentum:F,spatial:!!Q,trainingMode:!!W,format:ue?"NHWC":"NCHW"})},842335:(y,$,F)=>{r.jb("CumSum",y,{exclusive:Number($),reverse:Number(F)})},842432:(y,$,F)=>{r.jb("DequantizeLinear",y,{axis:$,blockSize:F})},842522:(y,$,F,W,Q)=>{r.jb("GridSample",y,{align_corners:$,mode:wr(F),padding_mode:wr(W),format:Q?"NHWC":"NCHW"})},842692:(y,$,F,W,Q)=>{r.jb("GridSample",y,{align_corners:$,mode:wr(F),padding_mode:wr(W),format:Q?"NHWC":"NCHW"})},842862:(y,$)=>{r.jb("ScatterND",y,{reduction:wr($)})},842947:(y,$,F,W,Q,ue,Ce,je,nt)=>{r.jb("Attention",y,{numHeads:$,isUnidirectional:F,maskFilterValue:W,scale:Q,doRotary:ue,qkvHiddenSizes:Ce?Array.from(H().subarray(Number(je)>>>0,Number(je)+Ce>>>0)):[],pastPresentShareBuffer:!!nt})},843219:y=>{r.jb("BiasAdd",y,void 0)},843274:y=>{r.jb("BiasSplitGelu",y,void 0)},843335:y=>{r.jb("FastGelu",y,void 0)},843391:(y,$,F,W,Q,ue,Ce,je,nt,pt,gt,$t,Ot,Et,Yt,kn)=>{r.jb("Conv",y,{format:$t?"NHWC":"NCHW",auto_pad:$,dilations:F?Array.from(H().subarray(Number(F)>>>0,Number(W)>>>0)):[],group:Q,kernel_shape:ue?Array.from(H().subarray(Number(ue)>>>0,Number(Ce)>>>0)):[],pads:je?Array.from(H().subarray(Number(je)>>>0,Number(nt)>>>0)):[],strides:pt?Array.from(H().subarray(Number(pt)>>>0,Number(gt)>>>0)):[],w_is_const:()=>!!Ee()[Number(Ot)>>>0],activation:wr(Et),activation_params:Yt?Array.from(Te().subarray(Number(Yt)>>>0,Number(kn)>>>0)):[]})},843975:y=>{r.jb("Gelu",y,void 0)},844027:(y,$,F,W,Q,ue,Ce,je,nt)=>{r.jb("GroupQueryAttention",y,{numHeads:$,kvNumHeads:F,scale:W,softcap:Q,doRotary:ue,rotaryInterleaved:Ce,smoothSoftmax:je,localWindowSize:nt})},844244:(y,$,F,W)=>{r.jb("LayerNormalization",y,{axis:$,epsilon:F,simplified:!!W})},844355:(y,$,F,W)=>{r.jb("LayerNormalization",y,{axis:$,epsilon:F,simplified:!!W})},844466:(y,$,F,W,Q,ue)=>{r.jb("MatMulNBits",y,{k:$,n:F,accuracyLevel:W,bits:Q,blockSize:ue})},844593:(y,$,F,W,Q,ue)=>{r.jb("MultiHeadAttention",y,{numHeads:$,isUnidirectional:F,maskFilterValue:W,scale:Q,doRotary:ue})},844752:(y,$)=>{r.jb("QuickGelu",y,{alpha:$})},844816:(y,$,F,W,Q)=>{r.jb("RotaryEmbedding",y,{interleaved:!!$,numHeads:F,rotaryEmbeddingDim:W,scale:Q})},844955:(y,$,F)=>{r.jb("SkipLayerNormalization",y,{epsilon:$,simplified:!!F})},845057:(y,$,F)=>{r.jb("SkipLayerNormalization",y,{epsilon:$,simplified:!!F})},845159:(y,$,F,W)=>{r.jb("GatherBlockQuantized",y,{gatherAxis:$,quantizeAxis:F,blockSize:W})},845280:y=>{r.Zb(y)},845314:(y,$)=>r.ac(Number(y),Number($),r.Fb.dc,r.Fb.errors)};function _t(y,$,F){return ni(async()=>{await r.Xb(Number(y),Number($),Number(F))})}function Ne(){return typeof wasmOffsetConverter<"u"}class Ye{name="ExitStatus";constructor($){this.message=`Program terminated with exit(${$})`,this.status=$}}var kt=y=>{y.terminate(),y.onmessage=()=>{}},mt=[],Tt=y=>{Bt.length==0&&(hn(),rt(Bt[0]));var $=Bt.pop();if(!$)return 6;qt.push($),At[y.Ab]=$,$.Ab=y.Ab;var F={Bb:"run",fc:y.ec,Hb:y.Hb,Ab:y.Ab};return $.postMessage(F,y.Mb),0},Ke=0,dt=(y,$,...F)=>{for(var W=2*F.length,Q=Me(),ue=ve(8*W),Ce=ue>>>3,je=0;je<F.length;je++){var nt=F[je];typeof nt=="bigint"?(oe[Ce+2*je]=1n,oe[Ce+2*je+1]=nt):(oe[Ce+2*je]=0n,Re()[Ce+2*je+1>>>0]=nt)}return y=Va(y,0,W,ue,$),ce(Q),y};function wt(y){if(u)return dt(0,1,y);if(P=y,!(0<Ke)){for(var $ of qt)kt($);for($ of Bt)kt($);Bt=[],qt=[],At={},le=!0}_(0,new Ye(y))}function st(y){if(u)return dt(1,0,y);He(y)}var He=y=>{if(P=y,u)throw st(y),"unwind";wt(y)},Bt=[],qt=[],xn=[],At={},nn=y=>{var $=y.Ab;delete At[$],Bt.push(y),qt.splice(qt.indexOf(y),1),y.Ab=0,v($)};function Ct(){xn.forEach(y=>y())}var rt=y=>new Promise($=>{y.onmessage=Q=>{var ue=(Q=Q.data).Bb;if(Q.Gb&&Q.Gb!=ts()){var Ce=At[Q.Gb];Ce?Ce.postMessage(Q,Q.Mb):D(`Internal error! Worker sent a message "${ue}" to target pthread ${Q.Gb}, but that thread no longer exists!`)}else ue==="checkMailbox"?ke():ue==="spawnThread"?Tt(Q):ue==="cleanupThread"?nn(At[Q.hc]):ue==="loaded"?(y.loaded=!0,$(y)):ue==="alert"?alert(`Thread ${Q.ic}: ${Q.text}`):Q.target==="setimmediate"?y.postMessage(Q):ue==="callHandler"?r[Q.Qb](...Q.args):ue&&D(`worker sent an unknown command ${ue}`)},y.onerror=Q=>{throw D(`worker sent an error! ${Q.filename}:${Q.lineno}: ${Q.message}`),Q};var F,W=[];for(F of[])r.propertyIsEnumerable(F)&&W.push(F);y.postMessage({Bb:"load",Rb:W,kc:E,lc:C})});function hn(){var y=new Worker((()=>{let $=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new $("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Bt.push(y)}var En=y=>{Oe();var $=_e()[y+52>>>2>>>0];y=_e()[y+56>>>2>>>0],Z($,$-y),ce($)},tr=(y,$)=>{Ke=0,y=Le(y,$),0<Ke?P=y:O(y)};class Rt{constructor($){this.Ib=$-24}}function Kn(y,$,F){var W=new Rt(y>>>=0);throw $>>>=0,F>>>=0,_e()[W.Ib+16>>>2>>>0]=0,_e()[W.Ib+4>>>2>>>0]=$,_e()[W.Ib+8>>>2>>>0]=F,y}function xr(y,$,F,W){return u?dt(2,1,y,$,F,W):mr(y,$,F,W)}function mr(y,$,F,W){if(y>>>=0,F>>>=0,W>>>=0,d===void 0)return 6;var Q=[];return u&&Q.length===0?xr(y,$>>>=0,F,W):(y={ec:F,Ab:y,Hb:W,Mb:Q},u?(y.Bb="spawnThread",postMessage(y,Q),0):Tt(y))}var qa=typeof TextDecoder<"u"?new TextDecoder:void 0,on=(y,$=0,F=NaN)=>{var W=($>>>=0)+F;for(F=$;y[F]&&!(F>=W);)++F;if(16<F-$&&y.buffer&&qa)return qa.decode(y.buffer instanceof ArrayBuffer?y.subarray($,F):y.slice($,F));for(W="";$<F;){var Q=y[$++];if(128&Q){var ue=63&y[$++];if((224&Q)==192)W+=String.fromCharCode((31&Q)<<6|ue);else{var Ce=63&y[$++];65536>(Q=(240&Q)==224?(15&Q)<<12|ue<<6|Ce:(7&Q)<<18|ue<<12|Ce<<6|63&y[$++])?W+=String.fromCharCode(Q):(Q-=65536,W+=String.fromCharCode(55296|Q>>10,56320|1023&Q))}}else W+=String.fromCharCode(Q)}return W},wr=(y,$)=>(y>>>=0)?on(Y(),y,$):"";function Qi(y,$,F){return u?dt(3,1,y,$,F):0}function Xa(y,$){if(u)return dt(4,1,y,$)}var sa=y=>{for(var $=0,F=0;F<y.length;++F){var W=y.charCodeAt(F);127>=W?$++:2047>=W?$+=2:55296<=W&&57343>=W?($+=4,++F):$+=3}return $},wn=(y,$,F)=>{var W=Y();if($>>>=0,0<F){var Q=$;F=$+F-1;for(var ue=0;ue<y.length;++ue){var Ce=y.charCodeAt(ue);if(55296<=Ce&&57343>=Ce&&(Ce=65536+((1023&Ce)<<10)|1023&y.charCodeAt(++ue)),127>=Ce){if($>=F)break;W[$++>>>0]=Ce}else{if(2047>=Ce){if($+1>=F)break;W[$++>>>0]=192|Ce>>6}else{if(65535>=Ce){if($+2>=F)break;W[$++>>>0]=224|Ce>>12}else{if($+3>=F)break;W[$++>>>0]=240|Ce>>18,W[$++>>>0]=128|Ce>>12&63}W[$++>>>0]=128|Ce>>6&63}W[$++>>>0]=128|63&Ce}}W[$>>>0]=0,y=$-Q}else y=0;return y};function vi(y,$){if(u)return dt(5,1,y,$)}function B(y,$,F){if(u)return dt(6,1,y,$,F)}function xe(y,$,F){return u?dt(7,1,y,$,F):0}function pe(y,$){if(u)return dt(8,1,y,$)}function we(y,$,F){if(u)return dt(9,1,y,$,F)}function Se(y,$,F,W){if(u)return dt(10,1,y,$,F,W)}function Xe(y,$,F,W){if(u)return dt(11,1,y,$,F,W)}function ht(y,$,F,W){if(u)return dt(12,1,y,$,F,W)}function Lt(y){if(u)return dt(13,1,y)}function Qt(y,$){if(u)return dt(14,1,y,$)}function jt(y,$,F){if(u)return dt(15,1,y,$,F)}var gn,Gt,yn=()=>it(""),Fn=y=>{for(var $="";Y()[y>>>0];)$+=gn[Y()[y++>>>0]];return $},pr={},Vr={};function fr(y,$,F={}){return(function(W,Q,ue={}){var Ce=Q.name;if(!W)throw new Gt(`type "${Ce}" must have a positive integer typeid pointer`);if(Vr.hasOwnProperty(W)){if(ue.Sb)return;throw new Gt(`Cannot register type '${Ce}' twice`)}Vr[W]=Q,pr.hasOwnProperty(W)&&(Q=pr[W],delete pr[W],Q.forEach(je=>je()))})(y,$,F)}var In=(y,$,F)=>{switch($){case 1:return F?W=>Ee()[W>>>0]:W=>Y()[W>>>0];case 2:return F?W=>te()[W>>>1>>>0]:W=>J()[W>>>1>>>0];case 4:return F?W=>H()[W>>>2>>>0]:W=>_e()[W>>>2>>>0];case 8:return F?W=>oe[W>>>3]:W=>ae[W>>>3];default:throw new TypeError(`invalid integer width (${$}): ${y}`)}};function wa(y,$,F){F>>>=0,fr(y>>>=0,{name:$=Fn($>>>0),fromWireType:W=>W,toWireType:function(W,Q){if(typeof Q!="bigint"&&typeof Q!="number")throw Q=Q===null?"null":(W=typeof Q)=="object"||W==="array"||W==="function"?Q.toString():""+Q,new TypeError(`Cannot convert "${Q}" to ${this.name}`);return typeof Q=="number"&&(Q=BigInt(Q)),Q},Cb:hr,readValueFromPointer:In($,F,$.indexOf("u")==-1),Db:null})}var hr=8;function Cr(y,$,F,W){fr(y>>>=0,{name:$=Fn($>>>0),fromWireType:function(Q){return!!Q},toWireType:function(Q,ue){return ue?F:W},Cb:hr,readValueFromPointer:function(Q){return this.fromWireType(Y()[Q>>>0])},Db:null})}var la=[],ha=[];function Ma(y){9<(y>>>=0)&&--ha[y+1]==0&&(ha[y]=void 0,la.push(y))}var Pr=y=>{if(!y)throw new Gt("Cannot use deleted val. handle = "+y);return ha[y]},gr=y=>{switch(y){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let $=la.pop()||ha.length;return ha[$]=y,ha[$+1]=1,$}};function Ja(y){return this.fromWireType(_e()[y>>>2>>>0])}var ei={name:"emscripten::val",fromWireType:y=>{var $=Pr(y);return Ma(y),$},toWireType:(y,$)=>gr($),Cb:hr,readValueFromPointer:Ja,Db:null};function ao(y){return fr(y>>>0,ei)}var An=(y,$)=>{switch($){case 4:return function(F){return this.fromWireType(Te()[F>>>2>>>0])};case 8:return function(F){return this.fromWireType(Re()[F>>>3>>>0])};default:throw new TypeError(`invalid float width (${$}): ${y}`)}};function yi(y,$,F){F>>>=0,fr(y>>>=0,{name:$=Fn($>>>0),fromWireType:W=>W,toWireType:(W,Q)=>Q,Cb:hr,readValueFromPointer:An($,F),Db:null})}function Aa(y,$,F,W,Q){if(y>>>=0,F>>>=0,$=Fn($>>>0),Q===-1&&(Q=4294967295),Q=je=>je,W===0){var ue=32-8*F;Q=je=>je<<ue>>>ue}var Ce=$.includes("unsigned")?function(je,nt){return nt>>>0}:function(je,nt){return nt};fr(y,{name:$,fromWireType:Q,toWireType:Ce,Cb:hr,readValueFromPointer:In($,F,W!==0),Db:null})}function Wr(y,$,F){function W(ue){var Ce=_e()[ue>>>2>>>0];return ue=_e()[ue+4>>>2>>>0],new Q(Ee().buffer,ue,Ce)}var Q=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][$];fr(y>>>=0,{name:F=Fn(F>>>0),fromWireType:W,Cb:hr,readValueFromPointer:W},{Sb:!0})}function ga(y,$){fr(y>>>=0,{name:$=Fn($>>>0),fromWireType:function(F){for(var W,Q=_e()[F>>>2>>>0],ue=F+4,Ce=ue,je=0;je<=Q;++je){var nt=ue+je;je!=Q&&Y()[nt>>>0]!=0||(Ce=wr(Ce,nt-Ce),W===void 0?W=Ce:(W+="\0",W+=Ce),Ce=nt+1)}return Oa(F),W},toWireType:function(F,W){W instanceof ArrayBuffer&&(W=new Uint8Array(W));var Q=typeof W=="string";if(!(Q||W instanceof Uint8Array||W instanceof Uint8ClampedArray||W instanceof Int8Array))throw new Gt("Cannot pass non-string to std::string");var ue=Q?sa(W):W.length,Ce=So(4+ue+1),je=Ce+4;if(_e()[Ce>>>2>>>0]=ue,Q)wn(W,je,ue+1);else if(Q)for(Q=0;Q<ue;++Q){var nt=W.charCodeAt(Q);if(255<nt)throw Oa(Ce),new Gt("String has UTF-16 code units that do not fit in 8 bits");Y()[je+Q>>>0]=nt}else for(Q=0;Q<ue;++Q)Y()[je+Q>>>0]=W[Q];return F!==null&&F.push(Oa,Ce),Ce},Cb:hr,readValueFromPointer:Ja,Db(F){Oa(F)}})}var Dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ft=(y,$)=>{for(var F=y>>1,W=F+$/2;!(F>=W)&&J()[F>>>0];)++F;if(32<(F<<=1)-y&&Dt)return Dt.decode(Y().slice(y,F));for(F="",W=0;!(W>=$/2);++W){var Q=te()[y+2*W>>>1>>>0];if(Q==0)break;F+=String.fromCharCode(Q)}return F},Jt=(y,$,F)=>{if(F??=2147483647,2>F)return 0;var W=$;F=(F-=2)<2*y.length?F/2:y.length;for(var Q=0;Q<F;++Q){var ue=y.charCodeAt(Q);te()[$>>>1>>>0]=ue,$+=2}return te()[$>>>1>>>0]=0,$-W},fn=y=>2*y.length,Ei=(y,$)=>{for(var F=0,W="";!(F>=$/4);){var Q=H()[y+4*F>>>2>>>0];if(Q==0)break;++F,65536<=Q?(Q-=65536,W+=String.fromCharCode(55296|Q>>10,56320|1023&Q)):W+=String.fromCharCode(Q)}return W},Qr=(y,$,F)=>{if($>>>=0,F??=2147483647,4>F)return 0;var W=$;F=W+F-4;for(var Q=0;Q<y.length;++Q){var ue=y.charCodeAt(Q);if(55296<=ue&&57343>=ue&&(ue=65536+((1023&ue)<<10)|1023&y.charCodeAt(++Q)),H()[$>>>2>>>0]=ue,($+=4)+4>F)break}return H()[$>>>2>>>0]=0,$-W},ti=y=>{for(var $=0,F=0;F<y.length;++F){var W=y.charCodeAt(F);55296<=W&&57343>=W&&++F,$+=4}return $};function _o(y,$,F){if(y>>>=0,$>>>=0,F=Fn(F>>>=0),$===2)var W=Ft,Q=Jt,ue=fn,Ce=je=>J()[je>>>1>>>0];else $===4&&(W=Ei,Q=Qr,ue=ti,Ce=je=>_e()[je>>>2>>>0]);fr(y,{name:F,fromWireType:je=>{for(var nt,pt=_e()[je>>>2>>>0],gt=je+4,$t=0;$t<=pt;++$t){var Ot=je+4+$t*$;$t!=pt&&Ce(Ot)!=0||(gt=W(gt,Ot-gt),nt===void 0?nt=gt:(nt+="\0",nt+=gt),gt=Ot+$)}return Oa(je),nt},toWireType:(je,nt)=>{if(typeof nt!="string")throw new Gt(`Cannot pass non-string to C++ string type ${F}`);var pt=ue(nt),gt=So(4+pt+$);return _e()[gt>>>2>>>0]=pt/$,Q(nt,gt+4,pt+$),je!==null&&je.push(Oa,gt),gt},Cb:hr,readValueFromPointer:Ja,Db(je){Oa(je)}})}function Qe(y,$){fr(y>>>=0,{Tb:!0,name:$=Fn($>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function G(y){Li(y>>>0,!l,1,!s,131072,!1),Ct()}var ye=y=>{if(!le)try{if(y(),!(0<Ke))try{u?O(P):He(P)}catch($){$ instanceof Ye||$=="unwind"||_(0,$)}}catch($){$ instanceof Ye||$=="unwind"||_(0,$)}};function Pe(y){y>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(H(),y>>>2,y).value.then(ke),y+=128,Atomics.store(H(),y>>>2,1))}var ke=()=>{var y=ts();y&&(Pe(y),ye(V))};function lt(y,$){(y>>>=0)==$>>>0?setTimeout(ke):u?postMessage({Gb:y,Bb:"checkMailbox"}):(y=At[y])&&y.postMessage({Bb:"checkMailbox"})}var ot=[];function Kt(y,$,F,W,Q){for($>>>=0,W/=2,ot.length=W,F=Q>>>0>>>3,Q=0;Q<W;Q++)ot[Q]=oe[F+2*Q]?oe[F+2*Q+1]:Re()[F+2*Q+1>>>0];return($?Be[$]:co[y])(...ot)}var Ht=()=>{Ke=0};function Xt(y){y>>>=0,u?postMessage({Bb:"cleanupThread",hc:y}):nn(At[y])}function zt(y){}var bn=(y,$)=>{var F=Vr[y];if(F===void 0)throw y=_l(y),F=Fn(y),Oa(y),new Gt(`${$} has unknown type ${F}`);return F},mn=(y,$,F)=>{var W=[];return y=y.toWireType(W,F),W.length&&(_e()[$>>>2>>>0]=gr(W)),y};function or(y,$,F){return $>>>=0,F>>>=0,y=Pr(y>>>0),$=bn($,"emval::as"),mn($,F,y)}function ta(y,$){return $>>>=0,y=Pr(y>>>0),($=bn($,"emval::as")).toWireType(null,y)}var lr=y=>{try{y()}catch($){it($)}},On=0,Hn=null,Ta=0,Qa=[],Gr={},Kr={},kr=0,nr=null,Ar=[];function ni(y){return(function($){if(!le){if(On===0){var F=!1,W=!1;$((Q=0)=>{if(!le&&(Ta=Q,F=!0,W)){On=2,lr(()=>Ie(Hn)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),Q=!1;try{var ue=(function(){var nt=H()[Hn+8>>>2>>>0];return nt=rn[Kr[nt]],--Ke,nt()})()}catch(nt){ue=nt,Q=!0}var Ce=!1;if(!Hn){var je=nr;je&&(nr=null,(Q?je.reject:je.resolve)(ue),Ce=!0)}if(Q&&!Ce)throw ue}}),W=!0,F||(On=1,Hn=(function(){var Q=So(65548),ue=Q+12;_e()[Q>>>2>>>0]=ue,_e()[Q+4>>>2>>>0]=ue+65536,ue=Qa[0];var Ce=Gr[ue];return Ce===void 0&&(Ce=kr++,Gr[ue]=Ce,Kr[Ce]=ue),ue=Ce,H()[Q+8>>>2>>>0]=ue,Q})(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),lr(()=>Ze(Hn)))}else On===2?(On=0,lr(Fe),Oa(Hn),Hn=null,Ar.forEach(ye)):it(`invalid state: ${On}`);return Ta}})($=>{y().then($)})}function ri(y){return y>>>=0,ni(async()=>{var $=await Pr(y);return gr($)})}var Hr=[];function Ya(y,$,F,W){return F>>>=0,W>>>=0,(y=Hr[y>>>0])(null,$=Pr($>>>0),F,W)}var Yr={},Lr=y=>{var $=Yr[y];return $===void 0?Fn(y):$};function Xn(y,$,F,W,Q){return F>>>=0,W>>>=0,Q>>>=0,(y=Hr[y>>>0])($=Pr($>>>0),$[F=Lr(F)],W,Q)}var _r=()=>typeof globalThis=="object"?globalThis:Function("return this")();function Ua(y){return(y>>>=0)==0?gr(_r()):(y=Lr(y),gr(_r()[y]))}var ci=y=>{var $=Hr.length;return Hr.push(y),$},Si=(y,$)=>{for(var F=Array(y),W=0;W<y;++W)F[W]=bn(_e()[$+4*W>>>2>>>0],"parameter "+W);return F},vo=(y,$)=>Object.defineProperty($,"name",{value:y});function pl(y,$,F){var W=($=Si(y,$>>>0)).shift();y--;var Q=`return function (obj, func, destructorsRef, args) {
`,ue=0,Ce=[];F===0&&Ce.push("obj");for(var je=["retType"],nt=[W],pt=0;pt<y;++pt)Ce.push("arg"+pt),je.push("argType"+pt),nt.push($[pt]),Q+=`  var arg${pt} = argType${pt}.readValueFromPointer(args${ue?"+"+ue:""});
`,ue+=$[pt].Cb;return Q+=`  var rv = ${F===1?"new func":"func.call"}(${Ce.join(", ")});
`,W.Tb||(je.push("emval_returnValue"),nt.push(mn),Q+=`  return emval_returnValue(retType, destructorsRef, rv);
`),je.push(Q+`};
`),y=(function(gt){var $t=Function;if(!($t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof $t} which is not a function`);var Ot=vo($t.name||"unknownFunctionName",function(){});return Ot.prototype=$t.prototype,Ot=new Ot,(gt=$t.apply(Ot,gt))instanceof Object?gt:Ot})(je)(...nt),F=`methodCaller<(${$.map(gt=>gt.name).join(", ")}) => ${W.name}>`,ci(vo(F,y))}function Ko(y){return y=Lr(y>>>0),gr(r[y])}function Ss(y,$){return $>>>=0,y=Pr(y>>>0),$=Pr($),gr(y[$])}function Cs(y){9<(y>>>=0)&&(ha[y+1]+=1)}function io(){return gr([])}function Kl(y){y=Pr(y>>>0);for(var $=Array(y.length),F=0;F<y.length;F++)$[F]=y[F];return gr($)}function Ps(y){return gr(Lr(y>>>0))}function yo(){return gr({})}function ks(y){for(var $=Pr(y>>>=0);$.length;){var F=$.pop();$.pop()(F)}Ma(y)}function Hl(y,$,F){$>>>=0,F>>>=0,y=Pr(y>>>0),$=Pr($),F=Pr(F),y[$]=F}function Ho(y,$){return $>>>=0,y=(y=bn(y>>>0,"_emval_take_value")).readValueFromPointer($),gr(y)}function bo(y,$){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y),$>>>=0,y=new Date(1e3*y),H()[$>>>2>>>0]=y.getUTCSeconds(),H()[$+4>>>2>>>0]=y.getUTCMinutes(),H()[$+8>>>2>>>0]=y.getUTCHours(),H()[$+12>>>2>>>0]=y.getUTCDate(),H()[$+16>>>2>>>0]=y.getUTCMonth(),H()[$+20>>>2>>>0]=y.getUTCFullYear()-1900,H()[$+24>>>2>>>0]=y.getUTCDay(),y=(y.getTime()-Date.UTC(y.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,H()[$+28>>>2>>>0]=y}var As=y=>y%4==0&&(y%100!=0||y%400==0),qo=[0,31,60,91,121,152,182,213,244,274,305,335],Os=[0,31,59,90,120,151,181,212,243,273,304,334];function fl(y,$){y=-9007199254740992>y||9007199254740992<y?NaN:Number(y),$>>>=0,y=new Date(1e3*y),H()[$>>>2>>>0]=y.getSeconds(),H()[$+4>>>2>>>0]=y.getMinutes(),H()[$+8>>>2>>>0]=y.getHours(),H()[$+12>>>2>>>0]=y.getDate(),H()[$+16>>>2>>>0]=y.getMonth(),H()[$+20>>>2>>>0]=y.getFullYear()-1900,H()[$+24>>>2>>>0]=y.getDay();var F=(As(y.getFullYear())?qo:Os)[y.getMonth()]+y.getDate()-1|0;H()[$+28>>>2>>>0]=F,H()[$+36>>>2>>>0]=-60*y.getTimezoneOffset(),F=new Date(y.getFullYear(),6,1).getTimezoneOffset();var W=new Date(y.getFullYear(),0,1).getTimezoneOffset();y=0|(F!=W&&y.getTimezoneOffset()==Math.min(W,F)),H()[$+32>>>2>>>0]=y}function Ea(y){y>>>=0;var $=new Date(H()[y+20>>>2>>>0]+1900,H()[y+16>>>2>>>0],H()[y+12>>>2>>>0],H()[y+8>>>2>>>0],H()[y+4>>>2>>>0],H()[y>>>2>>>0],0),F=H()[y+32>>>2>>>0],W=$.getTimezoneOffset(),Q=new Date($.getFullYear(),6,1).getTimezoneOffset(),ue=new Date($.getFullYear(),0,1).getTimezoneOffset(),Ce=Math.min(ue,Q);return 0>F?H()[y+32>>>2>>>0]=+(Q!=ue&&Ce==W):0<F!=(Ce==W)&&(Q=Math.max(ue,Q),$.setTime($.getTime()+6e4*((0<F?Ce:Q)-W))),H()[y+24>>>2>>>0]=$.getDay(),F=(As($.getFullYear())?qo:Os)[$.getMonth()]+$.getDate()-1|0,H()[y+28>>>2>>>0]=F,H()[y>>>2>>>0]=$.getSeconds(),H()[y+4>>>2>>>0]=$.getMinutes(),H()[y+8>>>2>>>0]=$.getHours(),H()[y+12>>>2>>>0]=$.getDate(),H()[y+16>>>2>>>0]=$.getMonth(),H()[y+20>>>2>>>0]=$.getYear(),y=$.getTime(),BigInt(isNaN(y)?-1:y/1e3)}function xo(y,$,F,W,Q,ue,Ce){return u?dt(16,1,y,$,F,W,Q,ue,Ce):-52}function Yi(y,$,F,W,Q,ue){if(u)return dt(17,1,y,$,F,W,Q,ue)}var oo={},$s=()=>performance.timeOrigin+performance.now();function Ds(y,$){if(u)return dt(18,1,y,$);if(oo[y]&&(clearTimeout(oo[y].id),delete oo[y]),!$)return 0;var F=setTimeout(()=>{delete oo[y],ye(()=>j(y,performance.timeOrigin+performance.now()))},$);return oo[y]={id:F,qc:$},0}function ml(y,$,F,W){y>>>=0,$>>>=0,F>>>=0,W>>>=0;var Q=new Date().getFullYear(),ue=new Date(Q,0,1).getTimezoneOffset();Q=new Date(Q,6,1).getTimezoneOffset();var Ce=Math.max(ue,Q);_e()[y>>>2>>>0]=60*Ce,H()[$>>>2>>>0]=+(ue!=Q),y=($=je=>{var nt=Math.abs(je);return`UTC${0<=je?"-":"+"}${String(Math.floor(nt/60)).padStart(2,"0")}${String(nt%60).padStart(2,"0")}`})(ue),$=$(Q),Q<ue?(wn(y,F,17),wn($,W,17)):(wn(y,W,17),wn($,F,17))}var Xo=()=>Date.now();function ql(y,$,F){return 0<=y&&3>=y?(y===0?y=Date.now():y=performance.timeOrigin+performance.now(),oe[F>>>0>>>3]=BigInt(Math.round(1e6*y)),0):28}var Ii=[],Qo=(y,$)=>{Ii.length=0;for(var F;F=Y()[y++>>>0];){var W=F!=105;$+=(W&=F!=112)&&$%8?4:0,Ii.push(F==112?_e()[$>>>2>>>0]:F==106?oe[$>>>3]:F==105?H()[$>>>2>>>0]:Re()[$>>>3>>>0]),$+=W?8:4}return Ii};function Is(y,$,F){return y>>>=0,$=Qo($>>>0,F>>>0),Be[y](...$)}function wo(y,$,F){return y>>>=0,$=Qo($>>>0,F>>>0),Be[y](...$)}var hl=()=>{};function Xl(y,$){return D(wr(y>>>0,$>>>0))}var Cc=()=>{throw Ke+=1,"unwind"};function Yo(){return 4294901760}var Zi=()=>navigator.hardwareConcurrency;function Pc(){return it("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function Zo(y){y>>>=0;var $=Y().length;if(y<=$||4294901760<y)return!1;for(var F=1;4>=F;F*=2){var W=$*(1+.2/F);W=Math.min(W,y+100663296);e:{W=(Math.min(4294901760,65536*Math.ceil(Math.max(y,W)/65536))-E.buffer.byteLength+65535)/65536|0;try{E.grow(W),Oe();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1}var so=()=>(it("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Mo={},Jo=y=>{y.forEach($=>{so()})};function Ql(){var y=Error().stack.toString().split(`
`);return y[0]=="Error"&&y.shift(),Jo(y),Mo.Lb=so(),Mo.cc=y,Mo.Lb}function Ri(y,$,F){if(y>>>=0,$>>>=0,Mo.Lb==y)var W=Mo.cc;else(W=Error().stack.toString().split(`
`))[0]=="Error"&&W.shift(),Jo(W);for(var Q=3;W[Q]&&so()!=y;)++Q;for(y=0;y<F&&W[y+Q];++y)H()[$+4*y>>>2>>>0]=so();return y}var es,gl={},Rs=()=>{if(!es){var y,$={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(y in gl)gl[y]===void 0?delete $[y]:$[y]=gl[y];var F=[];for(y in $)F.push(`${y}=${$[y]}`);es=F}return es};function Ci(y,$){if(u)return dt(19,1,y,$);y>>>=0,$>>>=0;var F=0;return Rs().forEach((W,Q)=>{var ue=$+F;for(Q=_e()[y+4*Q>>>2>>>0]=ue,ue=0;ue<W.length;++ue)Ee()[Q++>>>0]=W.charCodeAt(ue);Ee()[Q>>>0]=0,F+=W.length+1}),0}function Ls(y,$){if(u)return dt(20,1,y,$);y>>>=0,$>>>=0;var F=Rs();_e()[y>>>2>>>0]=F.length;var W=0;return F.forEach(Q=>W+=Q.length+1),_e()[$>>>2>>>0]=W,0}function To(y){return u?dt(21,1,y):52}function Eo(y,$,F,W){return u?dt(22,1,y,$,F,W):52}function kc(y,$,F,W){return u?dt(23,1,y,$,F,W):70}var zs=[null,[],[]];function lo(y,$,F,W){if(u)return dt(24,1,y,$,F,W);$>>>=0,F>>>=0,W>>>=0;for(var Q=0,ue=0;ue<F;ue++){var Ce=_e()[$>>>2>>>0],je=_e()[$+4>>>2>>>0];$+=8;for(var nt=0;nt<je;nt++){var pt=Y()[Ce+nt>>>0],gt=zs[y];pt===0||pt===10?((y===1?S:D)(on(gt)),gt.length=0):gt.push(pt)}Q+=je}return _e()[W>>>2>>>0]=Q,0}u||(function(){for(var y=r.numThreads-1;y--;)hn();mt.unshift(()=>{$e++,(function($){u?$():Promise.all(Bt.map(rt)).then($)})(()=>qe())})})();for(var bi=Array(256),Mr=0;256>Mr;++Mr)bi[Mr]=String.fromCharCode(Mr);gn=bi,Gt=r.BindingError=class extends Error{constructor(y){super(y),this.name="BindingError"}},r.InternalError=class extends Error{constructor(y){super(y),this.name="InternalError"}},ha.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>ha.length/2-5-la.length;var rn,co=[wt,st,xr,Qi,Xa,vi,B,xe,pe,we,Se,Xe,ht,Lt,Qt,jt,xo,Yi,Ds,Ci,Ls,To,Eo,kc,lo];(async function(){function y(W,Q){return rn=W.exports,rn=(function(){var ue=rn,Ce={};for(let[je,nt]of Object.entries(ue))Ce[je]=typeof nt=="function"?(...pt)=>{Qa.push(je);try{return nt(...pt)}finally{le||(Qa.pop(),Hn&&On===1&&Qa.length===0&&(On=0,Ke+=1,lr(ze),typeof Fibers<"u"&&Fibers.rc()))}}:nt;return Ce})(),rn=(function(){var ue=rn,Ce=nt=>pt=>nt(pt)>>>0,je=nt=>()=>nt()>>>0;return(ue=Object.assign({},ue)).Da=Ce(ue.Da),ue.fb=je(ue.fb),ue.hb=Ce(ue.hb),ue.tb=Ce(ue.tb),ue.ub=je(ue.ub),ue.__cxa_get_exception_ptr=Ce(ue.__cxa_get_exception_ptr),ue})(),xn.push(rn.ib),C=Q,qe(),rn}$e++;var $=Ve();if(r.instantiateWasm)return new Promise(W=>{r.instantiateWasm($,(Q,ue)=>{y(Q,ue),W(Q.exports)})});if(u)return new Promise(W=>{We=Q=>{var ue=new WebAssembly.Instance(Q,Ve());W(y(ue,Q))}});re??=r.locateFile?r.locateFile?r.locateFile("ort-wasm-simd-threaded.jsep.wasm",b):b+"ort-wasm-simd-threaded.jsep.wasm":new URL("/marksix-lucky-scan/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href;try{var F=await(async function(W){var Q=re;if(!se&&typeof WebAssembly.instantiateStreaming=="function"&&!be(Q))try{var ue=fetch(Q,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ue,W)}catch(Ce){D(`wasm streaming compile failed: ${Ce}`),D("falling back to ArrayBuffer instantiation")}return(async function(Ce,je){try{var nt=await(async function(pt){if(!se)try{var gt=await h(pt);return new Uint8Array(gt)}catch{}if(pt==re&&se)pt=new Uint8Array(se);else{if(!m)throw"both async and sync fetching of the wasm failed";pt=m(pt)}return pt})(Ce);return await WebAssembly.instantiate(nt,je)}catch(pt){D(`failed to asynchronously prepare wasm: ${pt}`),it(pt)}})(Q,W)})($);return y(F.instance,F.module)}catch(W){return n(W),Promise.reject(W)}})();var _l=y=>(_l=rn.Da)(y),uo=()=>(uo=rn.Ea)();r._OrtInit=(y,$)=>(r._OrtInit=rn.Fa)(y,$),r._OrtGetLastError=(y,$)=>(r._OrtGetLastError=rn.Ga)(y,$),r._OrtCreateSessionOptions=(y,$,F,W,Q,ue,Ce,je,nt,pt)=>(r._OrtCreateSessionOptions=rn.Ha)(y,$,F,W,Q,ue,Ce,je,nt,pt),r._OrtAppendExecutionProvider=(y,$,F,W,Q)=>(r._OrtAppendExecutionProvider=rn.Ia)(y,$,F,W,Q),r._OrtAddFreeDimensionOverride=(y,$,F)=>(r._OrtAddFreeDimensionOverride=rn.Ja)(y,$,F),r._OrtAddSessionConfigEntry=(y,$,F)=>(r._OrtAddSessionConfigEntry=rn.Ka)(y,$,F),r._OrtReleaseSessionOptions=y=>(r._OrtReleaseSessionOptions=rn.La)(y),r._OrtCreateSession=(y,$,F)=>(r._OrtCreateSession=rn.Ma)(y,$,F),r._OrtReleaseSession=y=>(r._OrtReleaseSession=rn.Na)(y),r._OrtGetInputOutputCount=(y,$,F)=>(r._OrtGetInputOutputCount=rn.Oa)(y,$,F),r._OrtGetInputOutputMetadata=(y,$,F,W)=>(r._OrtGetInputOutputMetadata=rn.Pa)(y,$,F,W),r._OrtFree=y=>(r._OrtFree=rn.Qa)(y),r._OrtCreateTensor=(y,$,F,W,Q,ue)=>(r._OrtCreateTensor=rn.Ra)(y,$,F,W,Q,ue),r._OrtGetTensorData=(y,$,F,W,Q)=>(r._OrtGetTensorData=rn.Sa)(y,$,F,W,Q),r._OrtReleaseTensor=y=>(r._OrtReleaseTensor=rn.Ta)(y),r._OrtCreateRunOptions=(y,$,F,W)=>(r._OrtCreateRunOptions=rn.Ua)(y,$,F,W),r._OrtAddRunConfigEntry=(y,$,F)=>(r._OrtAddRunConfigEntry=rn.Va)(y,$,F),r._OrtReleaseRunOptions=y=>(r._OrtReleaseRunOptions=rn.Wa)(y),r._OrtCreateBinding=y=>(r._OrtCreateBinding=rn.Xa)(y),r._OrtBindInput=(y,$,F)=>(r._OrtBindInput=rn.Ya)(y,$,F),r._OrtBindOutput=(y,$,F,W)=>(r._OrtBindOutput=rn.Za)(y,$,F,W),r._OrtClearBoundOutputs=y=>(r._OrtClearBoundOutputs=rn._a)(y),r._OrtReleaseBinding=y=>(r._OrtReleaseBinding=rn.$a)(y),r._OrtRunWithBinding=(y,$,F,W,Q)=>(r._OrtRunWithBinding=rn.ab)(y,$,F,W,Q),r._OrtRun=(y,$,F,W,Q,ue,Ce,je)=>(r._OrtRun=rn.bb)(y,$,F,W,Q,ue,Ce,je),r._OrtEndProfiling=y=>(r._OrtEndProfiling=rn.cb)(y),r._JsepOutput=(y,$,F)=>(r._JsepOutput=rn.db)(y,$,F),r._JsepGetNodeName=y=>(r._JsepGetNodeName=rn.eb)(y);var ts=()=>(ts=rn.fb)(),Oa=r._free=y=>(Oa=r._free=rn.gb)(y),So=r._malloc=y=>(So=r._malloc=rn.hb)(y),Li=(y,$,F,W,Q,ue)=>(Li=rn.kb)(y,$,F,W,Q,ue),zi=()=>(zi=rn.lb)(),Va=(y,$,F,W,Q)=>(Va=rn.mb)(y,$,F,W,Q),v=y=>(v=rn.nb)(y),O=y=>(O=rn.ob)(y),j=(y,$)=>(j=rn.pb)(y,$),V=()=>(V=rn.qb)(),Z=(y,$)=>(Z=rn.rb)(y,$),ce=y=>(ce=rn.sb)(y),ve=y=>(ve=rn.tb)(y),Me=()=>(Me=rn.ub)(),Le=r.dynCall_ii=(y,$)=>(Le=r.dynCall_ii=rn.vb)(y,$),Ze=y=>(Ze=rn.wb)(y),ze=()=>(ze=rn.xb)(),Ie=y=>(Ie=rn.yb)(y),Fe=()=>(Fe=rn.zb)();return r.stackSave=()=>Me(),r.stackRestore=y=>ce(y),r.stackAlloc=y=>ve(y),r.setValue=function(y,$,F="i8"){switch(F.endsWith("*")&&(F="*"),F){case"i1":case"i8":Ee()[y>>>0]=$;break;case"i16":te()[y>>>1>>>0]=$;break;case"i32":H()[y>>>2>>>0]=$;break;case"i64":oe[y>>>3]=BigInt($);break;case"float":Te()[y>>>2>>>0]=$;break;case"double":Re()[y>>>3>>>0]=$;break;case"*":_e()[y>>>2>>>0]=$;break;default:it(`invalid type for setValue: ${F}`)}},r.getValue=function(y,$="i8"){switch($.endsWith("*")&&($="*"),$){case"i1":case"i8":return Ee()[y>>>0];case"i16":return te()[y>>>1>>>0];case"i32":return H()[y>>>2>>>0];case"i64":return oe[y>>>3];case"float":return Te()[y>>>2>>>0];case"double":return Re()[y>>>3>>>0];case"*":return _e()[y>>>2>>>0];default:it(`invalid type for getValue: ${$}`)}},r.UTF8ToString=wr,r.stringToUTF8=wn,r.lengthBytesUTF8=sa,(function y(){if(0<$e)Ge=y;else if(u)t(r),ge();else{for(;0<mt.length;)mt.shift()(r);0<$e?Ge=y:(r.calledRun=!0,le||(ge(),t(r)))}})(),r.PTR_SIZE=4,o}),hk=Lb,MT=globalThis.self?.name?.startsWith("em-pthread"),MT&&Lb()}),zb,nx,TT,Bo,gk,Y_,ET,ST,Fb,CT,jb,_k,Bb,vk,Jx=Ut(()=>{Zx(),zb=typeof location>"u"?void 0:location.origin,nx=import.meta.url>"file:"&&import.meta.url<"file;",TT=()=>{{if(nx){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,zb).href}return import.meta.url}},Bo=TT(),gk=()=>{if(Bo&&!Bo.startsWith("blob:"))return Bo.substring(0,Bo.lastIndexOf("/")+1)},Y_=(e,t)=>{try{let n=t??Bo;return(n?new URL(e,n):new URL(e)).origin===zb}catch{return!1}},ET=(e,t)=>{let n=t??Bo;try{return(n?new URL(e,n):new URL(e)).href}catch{return}},ST=(e,t)=>`${t??"./"}${e}`,Fb=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},CT=async e=>(await import(e)).default,jb=(sV(),Ug(pk)).default,_k=async()=>{if(!Bo)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(Y_(Bo))return[void 0,jb()];let e=await Fb(Bo);return[e,jb(e)]},Bb=(lV(),Ug(mk)).default,vk=async(e,t,n)=>{if(!e&&!t&&Bb&&Bo&&Y_(Bo))return[void 0,Bb];{let r="ort-wasm-simd-threaded.jsep.mjs",o=e??ET(r,t),s=n&&o&&!Y_(o,t),l=s?await Fb(o):o??ST(r,t);return[s?l:void 0,await CT(l)]}}}),Nb,Z_,ug,Ub,PT,kT,AT,ew,oa,Id=Ut(()=>{Jx(),Z_=!1,ug=!1,Ub=!1,PT=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},kT=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},AT=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},ew=async e=>{if(Z_)return Promise.resolve();if(ug)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ub)throw new Error("previous call to 'initializeWebAssembly()' failed.");ug=!0;let t=e.initTimeout,n=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!AT())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!kT())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let r=PT();n>1&&!r&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+n+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=n=1);let o=e.wasmPaths,s=typeof o=="string"?o:void 0,l=o?.mjs,u=l?.href??l,d=o?.wasm,p=d?.href??d,g=e.wasmBinary,[h,m]=await vk(u,s,n>1),x=!1,_=[];if(t>0&&_.push(new Promise(b=>{setTimeout(()=>{x=!0,b()},t)})),_.push(new Promise((b,I)=>{let T={numThreads:n};if(g)T.wasmBinary=g;else if(p||s)T.locateFile=S=>p??s+S;else if(u&&u.indexOf("blob:")!==0)T.locateFile=S=>new URL(S,u).href;else if(h){let S=gk();S&&(T.locateFile=D=>S+D)}m(T).then(S=>{ug=!1,Z_=!0,Nb=S,b(),h&&URL.revokeObjectURL(h)},S=>{ug=!1,Ub=!0,I(S)})})),await Promise.race(_),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},oa=()=>{if(Z_&&Nb)return Nb;throw new Error("WebAssembly is not initialized yet.")}}),rl,Fv,Nr,tw=Ut(()=>{Id(),rl=(e,t)=>{let n=oa(),r=n.lengthBytesUTF8(e)+1,o=n._malloc(r);return n.stringToUTF8(e,o,r),t.push(o),o},Fv=(e,t,n,r)=>{if(typeof e=="object"&&e!==null){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach(([o,s])=>{let l=t?t+o:o;if(typeof s=="object")Fv(s,l+".",n,r);else if(typeof s=="string"||typeof s=="number")r(l,s.toString());else if(typeof s=="boolean")r(l,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},Nr=e=>{let t=oa(),n=t.stackSave();try{let r=t.PTR_SIZE,o=t.stackAlloc(2*r);t._OrtGetLastError(o,o+r);let s=Number(t.getValue(o,r===4?"i32":"i64")),l=t.getValue(o+r,"*"),u=l?t.UTF8ToString(l):"";throw new Error(`${e} ERROR_CODE: ${s}, ERROR_MESSAGE: ${u}`)}finally{t.stackRestore(n)}}}),yk,cV=Ut(()=>{Id(),tw(),yk=e=>{let t=oa(),n=0,r=[],o=e||{};try{if(e?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(o.terminate=!1);let s=0;return e?.tag!==void 0&&(s=rl(e.tag,r)),n=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,s),n===0&&Nr("Can't create run options."),e?.extra!==void 0&&Fv(e.extra,"",new WeakSet,(l,u)=>{let d=rl(l,r),p=rl(u,r);t._OrtAddRunConfigEntry(n,d,p)!==0&&Nr(`Can't set a run config entry: ${l} - ${u}.`)}),[n,r]}catch(s){throw n!==0&&t._OrtReleaseRunOptions(n),r.forEach(l=>t._free(l)),s}}}),OT,$T,DT,dg,IT,bk,uV=Ut(()=>{Id(),tw(),OT=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},$T=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},DT=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(e.enableMemPattern=!1)},dg=(e,t,n,r)=>{let o=rl(t,r),s=rl(n,r);oa()._OrtAddSessionConfigEntry(e,o,s)!==0&&Nr(`Can't set a session config entry: ${t} - ${n}.`)},IT=async(e,t,n)=>{for(let r of t){let o=typeof r=="string"?r:r.name,s=[];switch(o){case"webnn":if(o="WEBNN",typeof r!="string"){let g=r?.deviceType;g&&dg(e,"deviceType",g,n)}break;case"webgpu":if(o="JS",typeof r!="string"){let g=r;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${g.preferredLayout}`);dg(e,"preferredLayout",g.preferredLayout,n)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let l=rl(o,n),u=s.length,d=0,p=0;if(u>0){d=oa()._malloc(u*oa().PTR_SIZE),n.push(d),p=oa()._malloc(u*oa().PTR_SIZE),n.push(p);for(let g=0;g<u;g++)oa().setValue(d+g*oa().PTR_SIZE,s[g][0],"*"),oa().setValue(p+g*oa().PTR_SIZE,s[g][1],"*")}await oa()._OrtAppendExecutionProvider(e,l,d,p,u)!==0&&Nr(`Can't append execution provider: ${o}.`)}},bk=async e=>{let t=oa(),n=0,r=[],o=e||{};DT(o);try{let s=OT(o.graphOptimizationLevel??"all"),l=$T(o.executionMode??"sequential"),u=typeof o.logId=="string"?rl(o.logId,r):0,d=o.logSeverityLevel??2;if(!Number.isInteger(d)||d<0||d>4)throw new Error(`log serverity level is not valid: ${d}`);let p=o.logVerbosityLevel??0;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log verbosity level is not valid: ${p}`);let g=typeof o.optimizedModelFilePath=="string"?rl(o.optimizedModelFilePath,r):0;if(n=t._OrtCreateSessionOptions(s,!!o.enableCpuMemArena,!!o.enableMemPattern,l,!!o.enableProfiling,0,u,d,p,g),n===0&&Nr("Can't create session options."),o.executionProviders&&await IT(n,o.executionProviders,r),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);dg(n,"enableGraphCapture",o.enableGraphCapture.toString(),r)}if(o.freeDimensionOverrides)for(let[h,m]of Object.entries(o.freeDimensionOverrides)){if(typeof h!="string")throw new Error(`free dimension override name must be a string: ${h}`);if(typeof m!="number"||!Number.isInteger(m)||m<0)throw new Error(`free dimension override value must be a non-negative integer: ${m}`);let x=rl(h,r);t._OrtAddFreeDimensionOverride(n,x,m)!==0&&Nr(`Can't set a free dimension override: ${h} - ${m}.`)}return o.extra!==void 0&&Fv(o.extra,"",new WeakSet,(h,m)=>{dg(n,h,m,r)}),[n,r]}catch(s){throw n!==0&&t._OrtReleaseSessionOptions(n)!==0&&Nr("Can't release session options."),r.forEach(l=>t._free(l)),s}}}),mf,Mc,xd,nw,jv,rw,aw,rx,Pn=Ut(()=>{mf=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},Mc=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},xd=(e,t)=>{let n=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],r=typeof t=="number"?t:t.reduce((o,s)=>o*s,1);return n>0?Math.ceil(r*n):void 0},nw=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},jv=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},rw=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",aw=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",rx=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),iw,xk=Ut(()=>{Zx(),iw=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let n=t.headers.get("Content-Length"),r=n?parseInt(n,10):0;if(r<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let o=t.body.getReader(),s;try{s=new ArrayBuffer(r)}catch(u){if(u instanceof RangeError){let d=Math.ceil(r/65536);s=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw u}let l=0;for(;;){let{done:u,value:d}=await o.read();if(u)break;let p=d.byteLength;new Uint8Array(s,l,p).set(d),l+=p}return new Uint8Array(s,0,r)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),RT,LT,zT,FT,ow,jT,ur,Sc=Ut(()=>{Pn(),RT=["V","I","W","E","F"],LT=(e,t)=>{console.log(`[${RT[e]},${new Date().toISOString()}]${t}`)},ow=(e,t)=>{zT=e,FT=t},jT=(e,t)=>{let n=jv(e),r=jv(zT);n>=r&&LT(n,typeof t=="function"?t():t)},ur=(...e)=>{FT&&jT(...e)}}),BT,Sf,vt,Bv,wk,Mk,Tk,Nn=Ut(()=>{BT=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Sf=class{static calcShape(e,t,n=!1){let r=e.length,o=t.length;if(r===0)return t;if(o===0)return e;let s=Math.max(e.length,t.length),l=new Array(s);if(n){if(r<2||o<2)return;let u=BT.calcMatMulShape([e[r-2],e[r-1]],[t[o-2],t[o-1]]);if(u===void 0)return;[l[s-2],l[s-1]]=u}for(let u=n?3:1;u<=s;u++){let d=r-u<0?1:e[r-u],p=o-u<0?1:t[o-u];if(d!==p&&d>1&&p>1)return;let g=Math.max(d,p);if(d&&p)l[s-u]=Math.max(d,p);else{if(g>1)return;l[s-u]=0}}return l}static isValidBroadcast(e,t){let n=e.length,r=t.length;if(n>r)return!1;for(let o=1;o<=n;o++)if(e[n-o]!==1&&e[n-o]!==t[r-o])return!1;return!0}},vt=class bv{static size(t){return bv.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,n=4){let r=t.length;if(r===0)return[];let o=new Array(r),s=r-1;for(;s>=0;){if(t[s]%n===0){o[s]=t[s]/n;break}if(n%t[s]!==0)throw new Error("cannot convert shape");o[s]=1,n/=t[s],s--}for(s--;s>=0;s--)o[s]=t[s];return o}static sizeFromDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return bv.getSizeFromDimensionRange(t,n,t.length)}static sizeToDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${t.length} dimensions.`);return bv.getSizeFromDimensionRange(t,0,n)}static getSizeFromDimensionRange(t,n,r){let o=1;for(let s=n;s<r;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");o*=Number(t[s])}return o}static computeStrides(t){let n=t.length;if(n===0)return[];if(n===1)return[1];let r=new Array(n);r[n-1]=1,r[n-2]=t[n-1];for(let o=n-3;o>=0;--o)r[o]=r[o+1]*t[o+1];return r}static normalizeAxis(t,n){if(t<-n&&t>=n)throw new Error("unsupported axis for this operation.");return t<0?t+n:t}static normalizeAxes(t,n){return t.map(r=>this.normalizeAxis(r,n??t.length))}static sortBasedOnPerm(t,n){return n?n.map(r=>t[r]):t.slice().reverse()}static padShape(t,n){let r=t.length;return t.map((o,s)=>o+n[s]+n[s+r])}static areEqual(t,n){return t.length!==n.length?!1:t.every((r,o)=>r===n[o])}},Bv=class wg{static adjustPoolAttributes(t,n,r,o,s,l){if(!t&&r.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let u=0;u<n.length-2;u++)u>=r.length?r.push(n[u+2]):r[u]=n[u+2];for(let u=0;u<r.length;u++)if(u<o.length){if(o[u]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let u=0;u<r.length;u++)if(u<s.length){if(s[u]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let u=0;u<r.length*2;u++)if(u<l.length){if(l[u]<0)throw new Error("pad should be greater than or equal to 1")}else l.push(0);for(let u=0;u<r.length;u++){if(r[u]<=0)throw new Error("kernel shapes need to be greater than 0");if(l[u]>=r[u]||l[u+r.length]>=r[u])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,n,r,o,s,l,u){if(u){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let d=0;d<t.length-2;d++)wg.adjustPadAndReturnShape(t[d+(l?1:2)],n[d],r[d],o[d],s,d,d+t.length-2,u)}}static computePoolOutputShape(t,n,r,o,s,l,u){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let d=[n[0],n[1]];return wg.computeShapeHelper(t,n,d,r,o,s,l,u),d}static computeConvOutputShape(t,n,r,o,s,l,u){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let d=[t[0],n[0]];return wg.computeShapeHelper(!1,t,d,r,o,s,l,u),d}static computeShapeHelper(t,n,r,o,s,l,u,d){if(t)for(let p=0;p<n.length-2;p++)r.push(1);else for(let p=0;p<n.length-2;p++)r.push(wg.adjustPadAndReturnShape(n[p+2],o[p],s[p],l[p],u,p,p+n.length-2,d))}static adjustPadAndReturnShape(t,n,r,o,s,l,u,d){let p=r*(o-1)+1;if(d&&d!=="NOTSET")switch(d){case"VALID":return s[l]=0,s[u]=0,Math.floor((t-p)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(r!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let g=((t+n-1)/n-1)*n+o-t;return s[l]=Math.floor(d==="SAME_LOWER"?(g+1)/2:g/2),s[u]=g-s[l],Math.floor((t+g-o)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[l]+s[u]-p)/n+1)}},wk=class{static getShapeOfGemmResult(e,t,n,r,o){if(e.length!==2||n.length!==2)throw new Error("shape need to be of size 2");let s,l,u;t?(s=e[1],l=e[0]):(s=e[0],l=e[1]);let d=-1;if(r?(u=n[0],d=1):(u=n[1],d=0),n[d]!==l)throw new Error("dimension mismatch");if(s<=0||u<=0||l<=0)throw new Error("invalid shape specified");if(o&&!Sf.isValidBroadcast(o,[s,u]))throw new Error("gemm: invalid bias shape for broadcast");return[s,u,l]}},Mk=-34028234663852886e22,Tk=34028234663852886e22}),sw,Ek=Ut(()=>{Pn(),sw=(e,t)=>new(nw(t))(e)}),ax,Vb,NT,Wb,UT,Gb,Kb,Hb,VT,Sk,dV=Ut(()=>{Sc(),ax=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let n=e.byteLength/8,r=new BigInt64Array(e.buffer,e.byteOffset,n),o=new Int32Array(n);for(let s=0;s<n;s++){let l=r[s];if(l>2147483647n||l<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${s}: ${l}`);o[s]=Number(l)}return t?new Uint8Array(o.buffer):o},Vb=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let n=e.byteLength/4,r=new Int32Array(e.buffer,e.byteOffset,n),o=BigInt64Array.from(r,BigInt);return t?new Uint8Array(o.buffer):o},NT=1,Wb=()=>NT++,UT=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),Gb=(e,t)=>{let n=UT.get(e);if(!n)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((r,o)=>r*o)*n/8):0},Kb=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:n,tensor:r,dataType:o,shape:s,shouldConvertInt64toInt32:l=!1}=e;this.sessionId=t,this.mlContext=n,this.mlTensor=r,this.dataType=o,this.tensorShape=s,this.shouldConvertInt64toInt32=l}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return Gb(this.dataType,this.tensorShape)}destroy(){ur("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let n=await this.mlContext.readTensor(this.mlTensor),r=Vb(new Uint8Array(n));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(r);return}else return r.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,n){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===n.length&&this.tensorShape.every((r,o)=>r===n[o])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},Hb=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,n,r){let o=t,s=this.tensorManager.getMLContext(e),l=o==="int64"&&!s.opSupportLimits().input.dataTypes.includes("int64");if(l&&(o="int32",ur("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(s,o,n))return this.wrapper.tensor;if(r){if(this.wrapper.byteLength!==Gb(o,n))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let u=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,o,n,u,!0,!0,l),r&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=ax(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else ur("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){if(this.activeUpload){let t=this.wrapper?.isInt64ToInt32Converted?Vb(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(t):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(t);return}else return t.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32,e):this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32)}},VT=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=Wb();return this.tensorTrackersById.set(e,new Hb(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,n,r,o){ur("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${n}, shape: ${r}, copyOld: ${o}}`);let s=this.tensorTrackersById.get(t);if(!s)throw new Error("Tensor not found.");return s.ensureTensor(e,n,r,o)}upload(e,t){let n=this.tensorTrackersById.get(e);if(!n)throw new Error("Tensor not found.");n.upload(t)}async download(e,t){ur("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t?.byteLength}}`);let n=this.tensorTrackersById.get(e);if(!n)throw new Error("Tensor not found.");return n.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,n,r){let o=this.getMLContext(e),s=Wb(),l=new Kb({sessionId:e,context:o,tensor:t,dataType:n,shape:r});return this.tensorTrackersById.set(s,new Hb(this,l)),this.externalTensors.add(l),s}async getCachedTensor(e,t,n,r,o,s,l=!1){let u=this.getMLContext(e);for(let[p,g]of this.freeTensors.entries())if(g.canReuseTensor(u,t,n)){ur("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${n}}`);let h=this.freeTensors.splice(p,1)[0];return h.sessionId=e,h}ur("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${n}}`);let d=await u.createTensor({dataType:t,shape:n,dimensions:n,usage:r,writable:o,readable:s});return new Kb({sessionId:e,context:u,tensor:d,dataType:t,shape:n,shouldConvertInt64toInt32:l})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},Sk=(...e)=>new VT(...e)}),J_,WT,Ck,pV=Ut(()=>{Pn(),Id(),Ek(),dV(),Sc(),J_=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),WT=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every((o,s)=>o===r[s]&&e[o]===t[o])},Ck=class{constructor(e){this.tensorManager=Sk(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,ow(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){ur("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){ur("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let n of t)ur("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${n}}`),this.tensorManager.releaseTensorId(n);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let n=this.mlContextCache.findIndex(r=>r.gpuDevice===e);if(n!==-1)return this.mlContextCache[n].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:r}),r}}else if(e===void 0){let n=this.mlContextCache.findIndex(r=>r.options===void 0&&r.gpuDevice===void 0);if(n!==-1)return this.mlContextCache[n].mlContext;{let r=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:r}),r}}let t=this.mlContextCache.findIndex(n=>WT(n.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:n}),n}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let n=this.sessionIdsByMLContext.get(t);n||(n=new Set,this.sessionIdsByMLContext.set(t,n)),n.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let n=this.sessionIdsByMLContext.get(t);if(n.delete(e),n.size===0){this.sessionIdsByMLContext.delete(t);let r=this.mlContextCache.findIndex(o=>o.mlContext===t);r!==-1&&this.mlContextCache.splice(r,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){ur("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,n,r,o){let s=J_.get(n);if(!s)throw new Error(`Unsupported ONNX data type: ${n}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,s,r,o)}async createTemporaryTensor(e,t,n){ur("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${n}}`);let r=J_.get(t);if(!r)throw new Error(`Unsupported ONNX data type: ${t}`);let o=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,o,r,n,!1);let s=this.temporarySessionTensorIds.get(e);return s?s.push(o):this.temporarySessionTensorIds.set(e,[o]),o}uploadTensor(e,t){if(!oa().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");ur("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let n=await this.tensorManager.download(e);return sw(n,t)}}registerMLTensor(e,t,n,r){let o=J_.get(n);if(!o)throw new Error(`Unsupported ONNX data type: ${n}`);let s=this.tensorManager.registerTensor(e,t,o,r);return ur("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${o}, dimensions: ${r}} -> {tensorId: ${s}}`),s}registerMLConstant(e,t,n,r,o,s,l=!1){if(!s)throw new Error("External mounted files are not available.");let u=e;e.startsWith("./")&&(u=e.substring(2));let d=s.get(u);if(!d)throw new Error(`File with name ${u} not found in preloaded files.`);if(t+n>d.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let p=d.slice(t,t+n).buffer,g;switch(o.dataType){case"float32":g=new Float32Array(p);break;case"float16":g=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(p):new Uint16Array(p);break;case"int32":g=new Int32Array(p);break;case"uint32":g=new Uint32Array(p);break;case"int64":l?(g=ax(new Uint8Array(p),!1),o.dataType="int32"):g=new BigInt64Array(p);break;case"uint64":g=new BigUint64Array(p);break;case"int8":g=new Int8Array(p);break;case"int4":case"uint4":case"uint8":g=new Uint8Array(p);break;default:throw new Error(`Unsupported data type: ${o.dataType} in creating WebNN Constant from external data.`)}return ur("verbose",()=>`[WebNN] registerMLConstant {dataType: ${o.dataType}, shape: ${o.shape}}} ${l?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),r.constant(o,g)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let n=this.sessionGraphInputs.get(e);return n?n.includes(t):!1}isInt64Supported(e){return!!this.mlContextBySessionId.get(e)?.opSupportLimits().input.dataTypes.includes("int64")}flush(){}}}),lw=Ut(()=>{}),qb,ev,tv,GT,KT,Xb,ix,HT,Pk,fV=Ut(()=>{Sc(),lw(),qb=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ev=[],tv=e=>Math.ceil(Number(e)/16)*16,GT=e=>{for(let t=0;t<ev.length;t++){let n=ev[t];if(e<=n)return n}return Math.ceil(e/16)*16},KT=1,Xb=()=>KT++,ix=async(e,t,n,r)=>{let o=tv(n),s=e.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let l=e.getCommandEncoder();e.endComputePass(),l.copyBufferToBuffer(t,0,s,0,o),e.flush(),await s.mapAsync(GPUMapMode.READ);let u=s.getMappedRange();if(r){let d=r();return d.set(new Uint8Array(u,0,n)),d}else return new Uint8Array(u.slice(0,n))}finally{s.destroy()}},HT=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of qb)ev.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let n=t.buffer,r=t.byteOffset,o=t.byteLength,s=tv(o),l=this.storageCache.get(e);if(!l)throw new Error("gpu data for uploading does not exist");if(Number(l.originalSize)!==o)throw new Error(`inconsistent data size. gpu data size=${l.originalSize}, data size=${o}`);let u=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),d=u.getMappedRange();new Uint8Array(d).set(new Uint8Array(n,r,o)),u.unmap();let p=this.backend.device.createCommandEncoder();p.copyBufferToBuffer(u,0,l.gpuData.buffer,0,s),this.backend.device.queue.submit([p.finish()]),u.destroy(),ur("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let n=this.storageCache.get(e);if(!n)throw new Error("source gpu data for memcpy does not exist");let r=this.storageCache.get(t);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");let o=tv(n.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,o)}registerExternalBuffer(e,t,n){let r;if(n){if(r=n[0],e===n[1])return ur("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${r}, buffer is the same, skip.`),r;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else r=Xb();return this.storageCache.set(r,{gpuData:{id:r,type:0,buffer:e},originalSize:t}),ur("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${r}, registered.`),r}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),ur("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let n=GT(e),r,o=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(o||s){let u=(o?this.freeBuffers:this.freeUniformBuffers).get(n);u?u.length>0?r=u.pop():r=this.backend.device.createBuffer({size:n,usage:t}):r=this.backend.device.createBuffer({size:n,usage:t})}else r=this.backend.device.createBuffer({size:n,usage:t});let l={id:Xb(),type:0,buffer:r};return this.storageCache.set(l.id,{gpuData:l,originalSize:Number(e)}),ur("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${l.id}`),l}get(e){return this.storageCache.get(e)?.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,n=this.storageCache.get(t);if(!n){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return ur("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${n.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(n.gpuData.buffer),n.originalSize}async download(e,t){let n=this.storageCache.get(Number(e));if(!n)throw new Error("data does not exist");await ix(this.backend,n.gpuData.buffer,n.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=qb.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let n=this.freeBuffers.get(e.size)||[];t===void 0||n.length>=t?e.destroy():n.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let n=this.freeUniformBuffers.get(e.size)||[];t===void 0||n.length>=t?e.destroy():n.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(n=>{n.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(ur("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(n=>{n.gpuData.buffer.destroy()}),this.storageCache=new Map)}},Pk=(...e)=>new HT(...e)}),qT,Sr,Na=Ut(()=>{qT=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Sr=e=>new qT(e)}),Cf,nv,_i,qi,pn,ka,ox,gf,yu,ln,pg,xt,an,kk,cw,XT,Ak,Un=Ut(()=>{Pn(),Nn(),Cf=64,nv=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},_i=(e,t=1)=>{let n=nv(e,t);return typeof n=="string"?n:n[0]},qi=(e,t=1)=>{let n=nv(e,t);return typeof n=="string"?n:n[1]},pn=(...e)=>{let t=[];return e.forEach(n=>{n.length!==0&&t.push({type:12,data:n},{type:12,data:vt.computeStrides(n)})}),t},ka=e=>e%4===0?4:e%2===0?2:1,ox=(e="f32",t,n="0")=>!t||t===1?`${e}(${n})`:`vec${t}<${e}>(${n})`,gf=(e,t,n)=>e==="f32"?n:t===1?`f32(${n})`:`vec${t}<f32>(${n})`,yu=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,ln=(e,t,n,r)=>e.startsWith("uniforms.")&&n>4?typeof t=="string"?r==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:r==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:n>1?`${e}[${t}]`:e,pg=(e,t,n,r,o)=>{let s=typeof n=="number",l=s?n:n.length,u=[...new Array(l).keys()],d=l<2?"u32":l<=4?`vec${l}<u32>`:`array<u32, ${l}>`,p=nv(t,o),g=typeof p=="string"?p:p[1],h=typeof p=="string"?p:p[0],m={indices:d,value:g,storage:h,tensor:t},x=Y=>typeof Y=="string"?Y:`${Y}u`,_={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},b=s?"uniforms.":"",I=`${b}${e}_shape`,T=`${b}${e}_strides`,S="";for(let Y=0;Y<l-1;Y++)S+=`
    let dim${Y} = current / ${ln(T,Y,l)};
    let rest${Y} = current % ${ln(T,Y,l)};
    indices[${Y}] = dim${Y};
    current = rest${Y};
    `;S+=`indices[${l-1}] = current;`;let D=l<2?"":`
  fn o2i_${e}(offset: u32) -> ${m.indices} {
    var indices: ${m.indices};
    var current = offset;
    ${S}
    return indices;
  }`,E=Y=>(_.offsetToIndices=!0,l<2?Y:`o2i_${e}(${Y})`),C=[];if(l>=2)for(let Y=l-1;Y>=0;Y--)C.push(`${ln(T,Y,l)} * (indices[${Y}])`);let P=l<2?"":`
  fn i2o_${e}(indices: ${m.indices}) -> u32 {
    return ${C.join("+")};
  }`,w=Y=>(_.indicesToOffset=!0,l<2?Y:`i2o_${e}(${Y})`),R=(...Y)=>l===0?"0u":`${m.indices}(${Y.map(x).join(",")})`,U=(Y,te)=>l<2?`${Y}`:`${ln(Y,te,l)}`,N=(Y,te,J)=>l<2?`${Y}=${J};`:`${ln(Y,te,l)}=${J};`,ie={},ee=(Y,te)=>{_.broadcastedIndicesToOffset=!0;let J=`${te.name}broadcastedIndicesTo${e}Offset`;if(J in ie)return`${J}(${Y})`;let H=[];for(let _e=l-1;_e>=0;_e--){let Te=te.indicesGet("outputIndices",_e+te.rank-l);H.push(`${U(T,_e)} * (${Te} % ${U(I,_e)})`)}return ie[J]=`fn ${J}(outputIndices: ${te.type.indices}) -> u32 {
             return ${H.length>0?H.join("+"):"0u"};
           }`,`${J}(${Y})`},q=(Y,te)=>(()=>{if(m.storage===m.value)return`${e}[${Y}]=${te};`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`${e}[${Y}]=vec2<u32>(u32(${te}), select(0u, 0xFFFFFFFFu, ${te} < 0));`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`${e}[${Y}]=vec2<u32>(u32(${te}), 0u);`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`${e}[${Y}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${te}));`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),oe=Y=>(()=>{if(m.storage===m.value)return`${e}[${Y}]`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`i32(${e}[${Y}].x)`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`u32(${e}[${Y}].x)`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${Y}] & 0xFFu), bool(${e}[${Y}] & 0xFF00u), bool(${e}[${Y}] & 0xFF0000u), bool(${e}[${Y}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),ae=l<2?"":`
  fn get_${e}ByIndices(indices: ${m.indices}) -> ${g} {
    return ${oe(`i2o_${e}(indices)`)};
  }`,X=l<2?"":(()=>{let Y=u.map(J=>`d${J}: u32`).join(", "),te=u.map(J=>`d${J}`).join(", ");return`
  fn get_${e}(${Y}) -> ${g} {
    return get_${e}ByIndices(${R(te)});
  }`})(),se=(...Y)=>{if(Y.length!==l)throw new Error(`indices length must be ${l}`);let te=Y.map(x).join(",");return l===0?oe("0u"):l===1?oe(te[0]):(_.get=!0,_.getByIndices=!0,_.indicesToOffset=!0,`get_${e}(${te})`)},le=Y=>l<2?oe(Y):(_.getByIndices=!0,_.indicesToOffset=!0,`get_${e}ByIndices(${Y})`),be=l<2?"":`
  fn set_${e}ByIndices(indices: ${m.indices}, value: ${g}) {
    ${q(`i2o_${e}(indices)`,"value")}
  }`,Ee=l<2?"":(()=>{let Y=u.map(J=>`d${J}: u32`).join(", "),te=u.map(J=>`d${J}`).join(", ");return`
  fn set_${e}(${Y}, value: ${g}) {
    set_${e}ByIndices(${R(te)}, value);
  }`})();return{impl:()=>{let Y=[],te=!1;return _.offsetToIndices&&(Y.push(D),te=!0),_.indicesToOffset&&(Y.push(P),te=!0),_.broadcastedIndicesToOffset&&(Object.values(ie).forEach(J=>Y.push(J)),te=!0),_.set&&(Y.push(Ee),te=!0),_.setByIndices&&(Y.push(be),te=!0),_.get&&(Y.push(X),te=!0),_.getByIndices&&(Y.push(ae),te=!0),!s&&te&&Y.unshift(`const ${I} = ${m.indices}(${n.join(",")});`,`const ${T} = ${m.indices}(${vt.computeStrides(n).join(",")});`),Y.join(`
`)},type:m,offsetToIndices:E,indicesToOffset:w,broadcastedIndicesToOffset:ee,indices:R,indicesGet:U,indicesSet:N,set:(...Y)=>{if(Y.length!==l+1)throw new Error(`indices length must be ${l}`);let te=Y[l];if(typeof te!="string")throw new Error("value must be string");let J=Y.slice(0,l).map(x).join(",");return l===0?q("0u",te):l===1?q(J[0],te):(_.set=!0,_.setByIndices=!0,_.indicesToOffset=!0,`set_${e}(${J}, ${te})`)},setByOffset:q,setByIndices:(Y,te)=>l<2?q(Y,te):(_.setByIndices=!0,_.indicesToOffset=!0,`set_${e}ByIndices(${Y}, ${te});`),get:se,getByOffset:oe,getByIndices:le,usage:r,name:e,strides:T,shape:I,rank:l}},xt=(e,t,n,r=1)=>pg(e,t,n,"input",r),an=(e,t,n,r=1)=>pg(e,t,n,"output",r),kk=(e,t,n)=>pg(e,t,n,"atomicOutput",1),cw=(e,t,n,r=1)=>pg(e,t,n,"internal",r),XT=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=Cf){let t=typeof e=="number"?e:e[0],n=typeof e=="number"?1:e[1],r=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||n>this.limits.maxComputeWorkgroupSizeY||r>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${n}, ${r}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*n*r>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${n}, ${r}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let o=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=o?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,l=o?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*n*r}u + local_idx;`;return`@compute @workgroup_size(${t}, ${n}, ${r})
  fn main(${s}) {
    ${l}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let n=e.usage==="input"?"read":"read_write",r=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${n}> ${e.name}: array<${r}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,n=1){return this.uniforms.push({name:e,type:t,length:n}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:n,length:r}of this.uniforms)if(r&&r>4)n==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${n}>, ${Math.ceil(r/8)}>`):e.push(`${t}:array<vec4<${n}>, ${Math.ceil(r/4)}>`);else{let o=r==null||r===1?n:`vec${r}<${n}>`;e.push(`${t}:${o}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},Ak=(e,t)=>new XT(e,t)}),QT,Qb,YT,ZT,JT,eE,Go,Ok,$k,xu=Ut(()=>{Pn(),Nn(),Na(),Un(),QT=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},Qb=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),YT=(e,t)=>vt.sortBasedOnPerm(e,Qb(e.length,t)),ZT=(e,t,n,r)=>{let o=`fn perm(i: ${r.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`;for(let s=0;s<t;++s)o+=`a[${e[s]}]=i[${s}];`;return o+="return a;}"},JT=(e,t)=>{let n=[],r=[];for(let o=0;o<e.length;++o)e[o]!==1&&n.push(e[o]),e[t[o]]!==1&&r.push(t[o]);return{newShape:n,newPerm:r}},eE=(e,t)=>{let n=0;for(let r=0;r<e.length;++r)if(t[e[r]]!==1){if(e[r]<n)return!1;n=e[r]}return!0},Go=(e,t)=>{let n=e.dataType,r=e.dims.length,o=Qb(r,t),s=YT(e.dims,o),l=e.dims,u=s,d=r<2||eE(o,e.dims),p;if(d)return p=_=>{let b=xt("input",n,l,4),I=an("output",n,u,4);return`
  ${_.registerUniform("output_size","u32").declareVariables(b,I)}
  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let _=vt.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(_/64/4)},programUniforms:[{type:12,data:Math.ceil(_/4)}]}},getShaderSource:p};let{newShape:g,newPerm:h}=JT(e.dims,o),m=vt.areEqual(h,[2,3,1]),x=vt.areEqual(h,[3,1,2]);if(g.length===2||m||x){l=m?[g[0],g[1]*g[2]]:x?[g[0]*g[1],g[2]]:g,u=[l[1],l[0]];let _=16;return p=b=>{let I=xt("a",n,l.length),T=an("output",n,u.length);return`
  ${b.registerUniform("output_size","u32").declareVariables(I,T)}
  var<workgroup> tile : array<array<${T.type.value}, ${_+1}>, ${_}>;
  ${b.mainStart([_,_,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${_} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${_}u + local_id.x;
    let input_row = workgroup_id_x * ${_}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${I.getByIndices(`${I.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${_}u + local_id.x;
    let output_row = workgroup_id_y * ${_}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${T.setByIndices(`${T.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let b=vt.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(u[1]/_),y:Math.ceil(u[0]/_)},programUniforms:[{type:12,data:b},...pn(l,u)]}},getShaderSource:p}}return p=_=>{let b=xt("a",n,l.length),I=an("output",n,u.length);return`
  ${_.registerUniform("output_size","u32").declareVariables(b,I)}

  ${ZT(o,r,b,I)}

  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${I.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${I.setByOffset("global_idx",b.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let _=vt.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:[{type:12,data:_},...pn(l,u)]}},getShaderSource:p}},Ok=(e,t)=>{QT(e.inputs,t.perm),e.compute(Go(e.inputs[0],t.perm))},$k=e=>Sr({perm:e.perm})}),tE,nE,rE,aE,iE,oE,sE,lE,cE,uE,Ys,Dk,Ik,Rk,Lk,zk,Fk,jk,Bk,Nk,Uk,mV=Ut(()=>{Pn(),Nn(),Un(),uw(),xu(),tE={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},nE={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},rE={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},aE={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},iE=(e,t)=>{let n=[];for(let r=t-e;r<t;++r)n.push(r);return n},oE=(e,t)=>{let n=[],r=e.length;for(let s=0;s<r;s++)t.indexOf(s)===-1&&n.push(e[s]);let o=t.map(s=>e[s]);return[n,o]},sE=(e,t)=>{let n=e.length+t.length,r=[],o=0;for(let s=0;s<n;s++)t.indexOf(s)===-1?r.push(e[o++]):r.push(1);return r},lE=(e,t)=>{for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0},cE=(e,t)=>{let n=[];if(!lE(e,t)){for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);e.forEach(r=>n.push(r))}return n},uE=(e,t,n,r,o,s,l)=>{let u=n[0].dims,d=vt.size(s),p=vt.size(l),g=xt("_A",n[0].dataType,u),h=an("output",o,s),m=64;d===1&&(m=256);let x=`
          var<workgroup> aBestValues : array<f32, ${m}>;
       `,_=b=>`
        ${b.registerUniform("reduceSize","u32").declareVariables(g,h)}
        ${x}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${b.mainStart(m)}

          let outputIndex = global_idx / ${m};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${rE[r]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${m}) {
           let candidate = f32(${g.getByOffset("offset + k")});
           bestValue = ${tE[r]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${m}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${nE[r]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${h.setByOffset("outputIndex",`${r==="mean"?`${h.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${h.type.storage}(${aE[r]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${m}`,inputDependencies:["type"]},getShaderSource:_,getRunData:()=>({outputs:[{dims:s,dataType:o}],dispatchGroup:{x:d},programUniforms:[{type:12,data:p}]})}},Ys=(e,t,n,r)=>{let o=e.inputs.length===1?n:sx(e.inputs,n),s=o.axes;s.length===0&&!o.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((x,_)=>_));let l=vt.normalizeAxes(s,e.inputs[0].dims.length),u=l,d=e.inputs[0],p=cE(u,e.inputs[0].dims.length);p.length>0&&(d=e.compute(Go(e.inputs[0],p),{inputs:[0],outputs:[-1]})[0],u=iE(u.length,d.dims.length));let[g,h]=oE(d.dims,u),m=g;o.keepDims&&(m=sE(g,l)),e.compute(uE(t,o.cacheKey,[d],r,e.inputs[0].dataType,m,h),{inputs:[d]})},Dk=(e,t)=>{Ys(e,"ReduceMeanShared",t,"mean")},Ik=(e,t)=>{Ys(e,"ReduceL1Shared",t,"l1")},Rk=(e,t)=>{Ys(e,"ReduceL2Shared",t,"l2")},Lk=(e,t)=>{Ys(e,"ReduceLogSumExpShared",t,"logSumExp")},zk=(e,t)=>{Ys(e,"ReduceMaxShared",t,"max")},Fk=(e,t)=>{Ys(e,"ReduceMinShared",t,"min")},jk=(e,t)=>{Ys(e,"ReduceProdShared",t,"prod")},Bk=(e,t)=>{Ys(e,"ReduceSumShared",t,"sum")},Nk=(e,t)=>{Ys(e,"ReduceSumSquareShared",t,"sumSquare")},Uk=(e,t)=>{Ys(e,"ReduceLogSumShared",t,"logSum")}}),Zs,dE,Nv,sx,Js,pE,fE,mE,hE,gE,_E,vE,yE,bE,xE,el,Vk,Wk,Gk,Kk,Hk,qk,Xk,Qk,Yk,Zk,uw=Ut(()=>{Pn(),Nn(),Na(),Un(),mV(),Zs=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},dE=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Nv=(e,t,n,r,o,s,l=!1,u=!1)=>{let d=[],p=n[0].dims,g=p.length,h=vt.normalizeAxes(o,g),m=!u&&h.length===0;p.forEach((b,I)=>{m||h.indexOf(I)>=0?l&&d.push(1):d.push(b)});let x=d.length,_=vt.size(d);return{name:e,shaderCache:t,getShaderSource:b=>{let I=[],T=xt("_A",n[0].dataType,g),S=an("output",s,x),D=r(T,S,h),E=D[2];for(let C=0,P=0;C<g;C++)m||h.indexOf(C)>=0?(l&&P++,E=`for(var j${C}: u32 = 0; j${C} < ${p[C]}; j${C}++) {
                  ${D[2].includes("last_index")?`let last_index = j${C};`:""}
                  ${T.indicesSet("input_indices",C,`j${C}`)}
                  ${E}
                }`):(I.push(`${T.indicesSet("input_indices",C,S.indicesGet("output_indices",P))};`),P++);return`

        ${b.registerUniform("output_size","u32").declareVariables(T,S)}

        ${b.mainStart()}
          ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${T.type.indices};
          let output_indices = ${S.offsetToIndices("global_idx")};

          ${I.join(`
`)}
          ${D[0]}       // init ops for reduce max/min
          ${D[1]}
          ${E}
          ${D[3]}
          ${D.length===4?S.setByOffset("global_idx","value"):D.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:d,dataType:s}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:[{type:12,data:_},...pn(p,d)]})}},sx=(e,t)=>{let n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(r=>n.push(Number(r))),Sr({axes:n,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Js=(e,t,n,r)=>{let o=e.inputs,s=o.length===1?n:sx(o,n);e.compute(Nv(t,{hint:s.cacheKey,inputDependencies:["rank"]},[o[0]],s.noopWithEmptyAxes&&s.axes.length===0?dE:r,s.axes,o[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},pE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceLogSum",t,(n,r)=>[`var value = ${r.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,"value = log(value);"])},fE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceL1",t,(n,r)=>[`var value = ${r.type.storage}(0);`,"",`value += abs(${n.getByIndices("input_indices")});`,""])},mE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceL2",t,(n,r)=>[`var t = ${r.type.value}(0); var value = ${r.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},hE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceLogSumExp",t,(n,r)=>[`var value = ${r.type.storage}(0);`,"",`value += exp(${n.getByIndices("input_indices")});`,"value = log(value);"])},gE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceMax",t,(n,r,o)=>{let s=[];for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&s.push(n.indicesSet("input_indices",l,0));return[`${s.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = max(value, ${n.getByIndices("input_indices")});`,""]})},_E=(e,t)=>{Zs(e.inputs),Js(e,"ReduceMean",t,(n,r,o)=>{let s=1;for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&(s*=e.inputs[0].dims[l]);return["var sum = f32(0);","",`sum += f32(${n.getByIndices("input_indices")});`,`let value = ${r.type.value}(sum / ${s});`]})},vE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceMin",t,(n,r,o)=>{let s=[];for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&s.push(`input_indices[${l}] = 0;`);return[`${s.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = min(value, ${n.getByIndices("input_indices")});`,""]})},yE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceProd",t,(n,r)=>[`var value = ${r.type.storage}(1);`,"",`value *= ${n.getByIndices("input_indices")};`,""])},bE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceSum",t,(n,r)=>[`var value = ${r.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,""])},xE=(e,t)=>{Zs(e.inputs),Js(e,"ReduceSumSquare",t,(n,r)=>[`var t = ${r.type.value}(0); var value = ${r.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += t * t;`,""])},el=(e,t,n)=>{if(t.length===0)return n;let r=1,o=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?r*=e[s]:o*=e[s];return o<32&&r>1024},Vk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?_E(e,t):Dk(e,t)},Wk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?fE(e,t):Ik(e,t)},Gk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?mE(e,t):Rk(e,t)},Kk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?hE(e,t):Lk(e,t)},Hk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?gE(e,t):zk(e,t)},qk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?vE(e,t):Fk(e,t)},Xk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?yE(e,t):jk(e,t)},Qk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?bE(e,t):Bk(e,t)},Yk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?xE(e,t):Nk(e,t)},Zk=(e,t)=>{el(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?pE(e,t):Uk(e,t)}}),Yb,Jk,eA,lx,hV=Ut(()=>{Pn(),Na(),uw(),Yb=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},Jk=(e,t)=>{Yb(e.inputs);let n=(r,o,s)=>{let l=[];for(let u=0;u<r.rank;u++)(s.indexOf(u)>=0||s.length===0)&&l.push(`input_indices[${u}] = 0;`);return[`${l.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${r.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${r.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};e.compute(Nv("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],n,[t.axis],7,t.keepDims),{inputs:[0]})},eA=(e,t)=>{Yb(e.inputs);let n=(r,o,s)=>{let l=[];for(let u=0;u<r.rank;u++)(s.indexOf(u)>=0||s.length===0)&&l.push(`input_indices[${u}] = 0;`);return[`${l.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${r.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${r.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};e.compute(Nv("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],n,[t.axis],7,t.keepDims),{inputs:[0]})},lx=e=>Sr(e)}),wE,rv,ME,TE,EE,Wg,SE,tA,dw=Ut(()=>{Pn(),Nn(),lw(),Un(),wE=(e,t)=>{let n=e[0],r=e[1],o=e[2],s=e[3],l=e[4],u=e[5];if(l&&u)throw new Error("Attention cannot have both past and attention_bias");if(n.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let d=n.dims[0],p=n.dims[1],g=n.dims[2];if(o.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(r.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(r.dims[0]!==g)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(o.dims[0]!==r.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let h=o.dims[0]/3,m=h,x=m;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let D of t.qkvHiddenSizes)if(D%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");h=t.qkvHiddenSizes[0],m=t.qkvHiddenSizes[1],x=t.qkvHiddenSizes[2]}let _=p;if(h!==m)throw new Error("qkv_hidden_sizes first element should be same as the second");if(o.dims[0]!==h+m+x)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let b=0;if(l){if(m!==x)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(l.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(l.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(l.dims[1]!==d)throw new Error('Input "past" second dimension must be batch_size');if(l.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(l.dims[4]!==m/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(b=l.dims[3])}let I=_+b,T=-1,S=0;if(s)throw new Error("Mask not supported");if(l)throw new Error("past is not supported");if(u){if(u.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(u.dims[0]!==d||u.dims[1]!==t.numHeads||u.dims[2]!==p||u.dims[3]!==I)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:d,sequenceLength:p,pastSequenceLength:b,kvSequenceLength:_,totalSequenceLength:I,maxSequenceLength:T,inputHiddenSize:g,hiddenSize:h,vHiddenSize:x,headSize:Math.floor(h/t.numHeads),vHeadSize:Math.floor(x/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:S,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},rv=(e,t,n)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e?.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${n?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,ME=(e,t,n,r,o,s,l,u)=>{let d=ka(l?1:s),p=64,g=s/d;g<p&&(p=32);let h=Math.ceil(s/d/p),m=[{type:12,data:t},{type:12,data:n},{type:12,data:r},{type:12,data:o},{type:12,data:g},{type:12,data:h}],x=_i(e.dataType,d),_=qi(1,d),b=["type"];l&&b.push("type"),u&&b.push("type");let I=T=>{let S=an("x",e.dataType,e.dims,d),D=[S],E=l?xt("seq_lens",l.dataType,l.dims):void 0;E&&D.push(E);let C=u?xt("total_sequence_length_input",u.dataType,u.dims):void 0;C&&D.push(C);let P=qi(e.dataType),w=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${p}>;
  var<workgroup> thread_sum: array<f32, ${p}>;
  ${T.registerUniforms(w).declareVariables(...D)}
  ${T.mainStart([p,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${rv(E,C,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${p}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${l?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${_}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${_}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(d){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${d}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${p}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${_}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${_}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(d){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${d}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${p}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${S.type.value}(${P}(1.0) / ${P}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${_}(x[offset + i]);
        x[offset + i] = ${S.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${l?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${S.type.value}(${P}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${p};${x};${d}`,inputDependencies:b},getShaderSource:I,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:o,z:t*n},programUniforms:m})}},TE=(e,t,n,r,o,s,l,u,d)=>{let p=l+s.kvSequenceLength,g=[s.batchSize,s.numHeads,s.sequenceLength,p],h=e>1&&r,m=s.kvNumHeads?s.kvNumHeads:s.numHeads,x=h?[s.batchSize,m,p,s.headSize]:void 0,_=s.nReps?s.nReps:1,b=s.scale===0?1/Math.sqrt(s.headSize):s.scale,I=ka(s.headSize),T=s.headSize/I,S=12,D={x:Math.ceil(p/S),y:Math.ceil(s.sequenceLength/S),z:s.batchSize*s.numHeads},E=[{type:12,data:s.sequenceLength},{type:12,data:T},{type:12,data:p},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:1,data:b},{type:12,data:l},{type:12,data:s.kvSequenceLength},{type:12,data:_}],C=h&&r&&vt.size(r.dims)>0,P=["type","type"];C&&P.push("type"),o&&P.push("type"),u&&P.push("type"),d&&P.push("type");let w=[{dims:g,dataType:t.dataType,gpuDataType:0}];h&&w.push({dims:x,dataType:t.dataType,gpuDataType:0});let R=U=>{let N=xt("q",t.dataType,t.dims,I),ie=xt("key",n.dataType,n.dims,I),ee=[N,ie];if(C){let be=xt("past_key",r.dataType,r.dims,I);ee.push(be)}o&&ee.push(xt("attention_bias",o.dataType,o.dims));let q=u?xt("seq_lens",u.dataType,u.dims):void 0;q&&ee.push(q);let oe=d?xt("total_sequence_length_input",d.dataType,d.dims):void 0;oe&&ee.push(oe);let ae=an("output",t.dataType,g),X=[ae];h&&X.push(an("present_key",t.dataType,x,I));let se=qi(1,I),le=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${S}u;

  var<workgroup> tileQ: array<${N.type.storage}, ${S*S}>;
  var<workgroup> tileK: array<${N.type.storage}, ${S*S}>;
  ${U.registerUniforms(le).declareVariables(...ee,...X)}
  ${U.mainStart([S,S,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${_===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${_===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${rv(q,oe,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${C&&h?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${h?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${se}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${C&&h?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${h?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${se}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(I){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${I}`)}})()};
        output[outputIdx] = ${ae.type.value} (sum * uniforms.alpha) + ${o?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${I};${o!==void 0};${r!==void 0};${e}`,inputDependencies:P},getRunData:()=>({outputs:w,dispatchGroup:D,programUniforms:E}),getShaderSource:R}},EE=(e,t,n,r,o,s,l=void 0,u=void 0)=>{let d=s+o.kvSequenceLength,p=o.nReps?o.nReps:1,g=o.vHiddenSize*p,h=e>1&&r,m=o.kvNumHeads?o.kvNumHeads:o.numHeads,x=h?[o.batchSize,m,d,o.headSize]:void 0,_=[o.batchSize,o.sequenceLength,g],b=12,I={x:Math.ceil(o.vHeadSize/b),y:Math.ceil(o.sequenceLength/b),z:o.batchSize*o.numHeads},T=[{type:12,data:o.sequenceLength},{type:12,data:d},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.headSize},{type:12,data:g},{type:12,data:s},{type:12,data:o.kvSequenceLength},{type:12,data:p}],S=h&&r&&vt.size(r.dims)>0,D=["type","type"];S&&D.push("type"),l&&D.push("type"),u&&D.push("type");let E=[{dims:_,dataType:t.dataType,gpuDataType:0}];h&&E.push({dims:x,dataType:t.dataType,gpuDataType:0});let C=P=>{let w=xt("probs",t.dataType,t.dims),R=xt("v",n.dataType,n.dims),U=[w,R];S&&U.push(xt("past_value",r.dataType,r.dims));let N=l?xt("seq_lens",l.dataType,l.dims):void 0;l&&U.push(N);let ie=u?xt("total_sequence_length_input",u.dataType,u.dims):void 0;u&&U.push(ie);let ee=[an("output",t.dataType,_)];h&&ee.push(an("present_value",t.dataType,x));let q=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${b}u;
  var<workgroup> tileQ: array<${w.type.value}, ${b*b}>;
  var<workgroup> tileV: array<${w.type.value}, ${b*b}>;
  ${P.registerUniforms(q).declareVariables(...U,...ee)}
  ${P.mainStart([b,b,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${p===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${p===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${rv(N,ie,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${S&&h?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${h?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${w.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${S&&h?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${h?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${r!==void 0};${e}`,inputDependencies:D},getRunData:()=>({outputs:E,dispatchGroup:I,programUniforms:T}),getShaderSource:C}},Wg=(e,t,n,r,o,s,l,u,d,p,g=void 0,h=void 0)=>{let m=Math.min(e.outputCount,1+(l?1:0)+(u?1:0)),x=m>1?p.pastSequenceLength:0,_=x+p.kvSequenceLength,b=d&&vt.size(d.dims)>0?d:void 0,I=[t,n];m>1&&l&&vt.size(l.dims)>0&&I.push(l),b&&I.push(b),g&&I.push(g),h&&I.push(h);let T=e.compute(TE(m,t,n,l,b,p,x,g,h),{inputs:I,outputs:m>1?[-1,1]:[-1]})[0];e.compute(ME(T,p.batchSize,p.numHeads,x,p.sequenceLength,_,g,h),{inputs:g&&h?[T,g,h]:[T],outputs:[]});let S=[T,r];m>1&&u&&vt.size(u.dims)>0&&S.push(u),g&&S.push(g),h&&S.push(h),e.compute(EE(m,T,r,u,p,x,g,h),{inputs:S,outputs:m>1?[0,2]:[0]})},SE=(e,t)=>{let n=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],r=t.sequenceLength,o=t.inputHiddenSize,s=t.headSize,l=12,u={x:Math.ceil(t.headSize/l),y:Math.ceil(t.sequenceLength/l),z:t.batchSize*t.numHeads},d=[e.inputs[0],e.inputs[1],e.inputs[2]],p=[{type:12,data:r},{type:12,data:o},{type:12,data:s},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],g=h=>{let m=an("output_q",d[0].dataType,n),x=an("output_k",d[0].dataType,n),_=an("output_v",d[0].dataType,n),b=xt("input",d[0].dataType,d[0].dims),I=xt("weight",d[1].dataType,d[1].dims),T=xt("bias",d[2].dataType,d[2].dims),S=b.type.storage,D=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${l}u;
  var<workgroup> tileInput: array<${S}, ${l*l}>;
  var<workgroup> tileWeightQ: array<${S}, ${l*l}>;
  var<workgroup> tileWeightK: array<${S}, ${l*l}>;
  var<workgroup> tileWeightV: array<${S}, ${l*l}>;
  ${h.registerUniforms(D).declareVariables(b,I,T,m,x,_)}
  ${h.mainStart([l,l,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${S}(0);
    var valueK = ${S}(0);
    var valueV = ${S}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:u,programUniforms:p}),getShaderSource:g},{inputs:d,outputs:[-1,-1,-1]})},tA=(e,t)=>{let n=wE(e.inputs,t),[r,o,s]=SE(e,n);return Wg(e,r,o,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],n)}}),CE,PE,kE,nA,gV=Ut(()=>{dl(),Pn(),Nn(),Na(),Un(),CE=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let n=(r,o,s)=>{let l=o.length;if(l!==r.length)throw new Error(`${s}: num dimensions != ${l}`);o.forEach((u,d)=>{if(u!==r[d])throw new Error(`${s}: dim[${d}] do not match`)})};if(e[0].dims.length>1){let r=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);n(e[1].dims,r,"Invalid input scale"),n(e[2].dims,r,"Invalid input B"),n(e[3].dims,r,"Invalid input mean"),n(e[4].dims,r,"Invalid input var")}else n(e[1].dims,[1],"Invalid input scale"),n(e[2].dims,[1],"Invalid input B"),n(e[3].dims,[1],"Invalid input mean"),n(e[4].dims,[1],"Invalid input var")},PE=(e,t)=>{let{epsilon:n,spatial:r,format:o}=t,s=e[0].dims,l=r?ka(s[s.length-1]):1,u=o==="NHWC"&&s.length>1?l:1,d=vt.size(s)/l,p=r,g=p?s.length:s,h=xt("x",e[0].dataType,e[0].dims,l),m=xt("scale",e[1].dataType,e[1].dims,u),x=xt("bias",e[2].dataType,e[2].dims,u),_=xt("inputMean",e[3].dataType,e[3].dims,u),b=xt("inputVar",e[4].dataType,e[4].dims,u),I=an("y",e[0].dataType,g,l),T=()=>{let D="";if(r)D=`let cOffset = ${s.length===1?"0u":o==="NHWC"?`outputIndices[${s.length-1}] / ${l}`:"outputIndices[1]"};`;else if(o==="NCHW")D=`
            ${I.indicesSet("outputIndices","0","0")}
            let cOffset = ${I.indicesToOffset("outputIndices")};`;else{D=`var cIndices = ${m.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let E=1;E<m.rank;E++)D+=`cIndices[${E}] = outputIndices[${E}];`;D+=`let cOffset = ${m.indicesToOffset("cIndices")};`}return D},S=D=>`
  const epsilon = ${n};
  ${D.registerUniform("outputSize","u32").declareVariables(h,m,x,_,b,I)}
  ${D.mainStart()}
  ${D.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${I.offsetToIndices(`global_idx * ${l}`)};
    ${T()}
    let scale = ${m.getByOffset("cOffset")};
    let bias = ${x.getByOffset("cOffset")};
    let inputMean = ${_.getByOffset("cOffset")};
    let inputVar = ${b.getByOffset("cOffset")};
    let x = ${h.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${I.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${r}_${l}`,inputDependencies:p?["rank","type","type","type","type"]:void 0},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:p?[{type:12,data:d},...pn(s)]:[{type:12,data:d}]})}},kE=e=>Sr(e),nA=(e,t)=>{let{inputs:n,outputCount:r}=e,o=kE({...t,outputCount:r});if(ma.webgpu.validateInputContent&&CE(n,o),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(PE(n,o))}}),AE,OE,rA,_V=Ut(()=>{Nn(),Un(),AE=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},OE=e=>{let t=e[0].dims,n=e[0].dims[2],r=vt.size(t)/4,o=e[0].dataType,s=xt("input",o,t,4),l=xt("bias",o,[n],4),u=xt("residual",o,t,4),d=an("output",o,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(r/64)}}),getShaderSource:p=>`
  const channels = ${n}u / 4;
  ${p.declareVariables(s,l,u,d)}

  ${p.mainStart()}
    ${p.guardAgainstOutOfBoundsWorkgroupSizes(r)}
    let value = ${s.getByOffset("global_idx")}
      + ${l.getByOffset("global_idx % channels")} + ${u.getByOffset("global_idx")};
    ${d.setByOffset("global_idx","value")}
  }`}},rA=e=>{AE(e.inputs),e.compute(OE(e.inputs))}}),$E,br,aA,iA,oA,sA,lA,cA,uA,dA,pA,DE,fA,mA,hA,gA,Mg,_A,xv,vA,yA,bA,xA,wA,MA,TA,EA,SA,CA,PA,kA,AA,OA,$A,DA,Zb,IA,cx,ux,RA,LA,zA,IE,RE,FA,pw=Ut(()=>{Pn(),Nn(),Na(),Un(),$E=(e,t,n,r,o,s,l)=>{let u=Math.ceil(t/4),d="";typeof o=="string"?d=`${o}(a)`:d=o("a");let p=xt("inputData",n,[u],4),g=an("outputData",r,[u],4),h=[{name:"vec_size",type:"u32"}];return l&&h.push(...l),`
      ${e.registerUniforms(h).declareVariables(p,g)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${p.getByOffset("global_idx")};
    ${g.setByOffset("global_idx",d)}
  }`},br=(e,t,n,r,o,s=e.dataType,l,u)=>{let d=[{type:12,data:Math.ceil(vt.size(e.dims)/4)}];return l&&d.push(...l),{name:t,shaderCache:{hint:o,inputDependencies:["type"]},getShaderSource:p=>$E(p,vt.size(e.dims),e.dataType,s,n,r,u),getRunData:p=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(vt.size(p[0].dims)/64/4)},programUniforms:d})}},aA=e=>{e.compute(br(e.inputs[0],"Abs","abs"))},iA=e=>{e.compute(br(e.inputs[0],"Acos","acos"))},oA=e=>{e.compute(br(e.inputs[0],"Acosh","acosh"))},sA=e=>{e.compute(br(e.inputs[0],"Asin","asin"))},lA=e=>{e.compute(br(e.inputs[0],"Asinh","asinh"))},cA=e=>{e.compute(br(e.inputs[0],"Atan","atan"))},uA=e=>{e.compute(br(e.inputs[0],"Atanh","atanh"))},dA=e=>Sr(e),pA=(e,t)=>{let n;switch(t.to){case 10:n="vec4<f16>";break;case 1:n="vec4<f32>";break;case 12:n="vec4<u32>";break;case 6:n="vec4<i32>";break;case 9:n="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(br(e.inputs[0],"Cast",n,void 0,t.cacheKey,t.to))},DE=e=>{let t,n,r=e.length>=2&&e[1].data!==0,o=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=r?e[1].getFloat32Array()[0]:-34028234663852886e22,n=o?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=r?e[1].getUint16Array()[0]:64511,n=o?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return Sr({min:t,max:n})},fA=(e,t)=>{let n=t||DE(e.inputs),r=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"Clip",o=>`clamp(${o}, vec4<${r}>(uniforms.min), vec4<${r}>(uniforms.max))`,void 0,n.cacheKey,void 0,[{type:e.inputs[0].dataType,data:n.min},{type:e.inputs[0].dataType,data:n.max}],[{name:"min",type:r},{name:"max",type:r}]),{inputs:[0]})},mA=e=>{e.compute(br(e.inputs[0],"Ceil","ceil"))},hA=e=>{e.compute(br(e.inputs[0],"Cos","cos"))},gA=e=>{e.compute(br(e.inputs[0],"Cosh","cosh"))},Mg=e=>Sr(e),_A=(e,t)=>{let n=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"Elu",r=>`elu_vf32(${r})`,`
  const elu_alpha_ = ${n}(${t.alpha});

  fn elu_f32(a: ${n}) -> ${n} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${n}>) -> vec4<${n}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},xv=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,vA=e=>{let t=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"Erf",n=>`erf_vf32(${n})`,xv(t)))},yA=e=>{e.compute(br(e.inputs[0],"Exp","exp"))},bA=e=>{e.compute(br(e.inputs[0],"Floor","floor"))},xA=e=>{let t=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"Gelu",n=>`0.5 * ${n} * (1.0 + erf_vf32(${n} * 0.7071067811865475))`,xv(t)))},wA=(e,t)=>{let n=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"LeakyRelu",r=>`select(leaky_relu_alpha_ * ${r}, ${r}, ${r} >= vec4<${n}>(0.0))`,`const leaky_relu_alpha_ = ${n}(${t.alpha});`,t.cacheKey))},MA=e=>{e.compute(br(e.inputs[0],"Not",t=>`!${t}`))},TA=e=>{e.compute(br(e.inputs[0],"Neg",t=>`-${t}`))},EA=e=>{e.compute(br(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},SA=e=>{let t=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"Relu",n=>`select(vec4<${t}>(0.0), ${n}, ${n} > vec4<${t}>(0.0))`))},CA=e=>{e.compute(br(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},PA=e=>Sr(e),kA=(e,t)=>{let n=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"HardSigmoid",r=>`max(vec4<${n}>(0.0), min(vec4<${n}>(1.0), ${t.alpha} * ${r} + vec4<${n}>(${t.beta})))`,void 0,t.cacheKey))},AA=e=>{e.compute(br(e.inputs[0],"Sin","sin"))},OA=e=>{e.compute(br(e.inputs[0],"Sinh","sinh"))},$A=e=>{e.compute(br(e.inputs[0],"Sqrt","sqrt"))},DA=e=>{e.compute(br(e.inputs[0],"Tan","tan"))},Zb=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,IA=e=>{e.compute(br(e.inputs[0],"Tanh",Zb))},cx=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${Zb("v")};
}
`,ux=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,RA=e=>{let t=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"FastGelu",ux,cx(t),void 0,e.inputs[0].dataType))},LA=(e,t)=>{let n=qi(e.inputs[0].dataType);return e.compute(br(e.inputs[0],"ThresholdedRelu",r=>`select(vec4<${n}>(0.0), ${r}, ${r} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${n}>(${t.alpha});`,t.cacheKey)),0},zA=e=>{e.compute(br(e.inputs[0],"Log","log"))},IE=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,RE=e=>`quick_gelu_impl(${e})`,FA=(e,t)=>{let n=qi(e.inputs[0].dataType);e.compute(br(e.inputs[0],"QuickGelu",RE,IE(n,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),LE,zE,jA,vV=Ut(()=>{Nn(),Un(),pw(),LE=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},zE=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let n=xt("input",e[0].dataType,e[0].dims,4),r=xt("bias",e[0].dataType,[e[0].dims[2]],4),o=an("output",e[0].dataType,t,4),s=vt.size(t)/4,l=_i(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:u=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${u.declareVariables(n,r,o)}

  ${xv(l)}

  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${o.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},jA=e=>{LE(e.inputs),e.compute(zE(e.inputs))}}),FE,jE,tl,BA,NA,UA,VA,WA,GA,KA,HA,qA,XA,yV=Ut(()=>{Pn(),Nn(),Un(),FE=(e,t,n,r,o,s,l,u,d,p,g,h)=>{let m,x;typeof u=="string"?m=x=(S,D)=>`${u}((${S}),(${D}))`:typeof u=="function"?m=x=u:(m=u.scalar,x=u.vector);let _=an("outputData",g,r.length,4),b=xt("aData",d,t.length,4),I=xt("bData",p,n.length,4),T;if(o)if(s){let S=vt.size(t)===1,D=vt.size(n)===1,E=t.length>0&&t[t.length-1]%4===0,C=n.length>0&&n[n.length-1]%4===0;S||D?T=_.setByOffset("global_idx",x(S?`${b.type.value}(${b.getByOffset("0")}.x)`:b.getByOffset("global_idx"),D?`${I.type.value}(${I.getByOffset("0")}.x)`:I.getByOffset("global_idx"))):T=`
            let outputIndices = ${_.offsetToIndices("global_idx * 4u")};
            let offsetA = ${b.broadcastedIndicesToOffset("outputIndices",_)};
            let offsetB = ${I.broadcastedIndicesToOffset("outputIndices",_)};
            ${_.setByOffset("global_idx",x(l||E?b.getByOffset("offsetA / 4u"):`${b.type.value}(${b.getByOffset("offsetA / 4u")}[offsetA % 4u])`,l||C?I.getByOffset("offsetB / 4u"):`${I.type.value}(${I.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else T=_.setByOffset("global_idx",x(b.getByOffset("global_idx"),I.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let S=(D,E,C="")=>{let P=`aData[indexA${E}][componentA${E}]`,w=`bData[indexB${E}][componentB${E}]`;return`
            let outputIndices${E} = ${_.offsetToIndices(`global_idx * 4u + ${E}u`)};
            let offsetA${E} = ${b.broadcastedIndicesToOffset(`outputIndices${E}`,_)};
            let offsetB${E} = ${I.broadcastedIndicesToOffset(`outputIndices${E}`,_)};
            let indexA${E} = offsetA${E} / 4u;
            let indexB${E} = offsetB${E} / 4u;
            let componentA${E} = offsetA${E} % 4u;
            let componentB${E} = offsetB${E} % 4u;
            ${D}[${E}] = ${C}(${m(P,w)});
          `};g===9?T=`
            var data = vec4<u32>(0);
            ${S("data",0,"u32")}
            ${S("data",1,"u32")}
            ${S("data",2,"u32")}
            ${S("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:T=`
            ${S("outputData[global_idx]",0)}
            ${S("outputData[global_idx]",1)}
            ${S("outputData[global_idx]",2)}
            ${S("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(b,I,_)}

        ${h??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${T}
      }`},jE=(e,t,n,r,o,s,l=n.dataType)=>{let u=n.dims.map(b=>Number(b)??1),d=r.dims.map(b=>Number(b)??1),p=!vt.areEqual(u,d),g=u,h=vt.size(u),m=!1,x=!1,_=[p];if(p){let b=Sf.calcShape(u,d,!1);if(!b)throw new Error("Can't perform binary op on the given tensors");g=b.slice(),h=vt.size(g);let I=vt.size(u)===1,T=vt.size(d)===1,S=u.length>0&&u[u.length-1]%4===0,D=d.length>0&&d[d.length-1]%4===0;_.push(I),_.push(T),_.push(S),_.push(D);let E=1;for(let C=1;C<g.length;C++){let P=u[u.length-C],w=d[d.length-C];if(P===w)E*=P;else break}E%4===0?(x=!0,m=!0):(I||T||S||D)&&(m=!0)}else m=!0;return _.push(m),{name:e,shaderCache:{hint:t+_.map(b=>b.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:b=>FE(b,u,d,g,m,p,x,o,n.dataType,r.dataType,l,s),getRunData:()=>({outputs:[{dims:g,dataType:l}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(vt.size(g)/4)},...pn(u,d,g)]})}},tl=(e,t,n,r,o,s)=>{e.compute(jE(t,o??"",e.inputs[0],e.inputs[1],n,r,s))},BA=e=>{tl(e,"Add",(t,n)=>`${t}+${n}`)},NA=e=>{tl(e,"Div",(t,n)=>`${t}/${n}`)},UA=e=>{tl(e,"Equal",{scalar:(t,n)=>`u32(${t}==${n})`,vector:(t,n)=>`vec4<u32>(${t}==${n})`},void 0,void 0,9)},VA=e=>{tl(e,"Mul",(t,n)=>`${t}*${n}`)},WA=e=>{let t=xt("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;tl(e,"Pow",{scalar:(n,r)=>`pow_custom(${n},${r})`,vector:(n,r)=>`pow_vector_custom(${n},${r})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},GA=e=>{tl(e,"Sub",(t,n)=>`${t}-${n}`)},KA=e=>{tl(e,"Greater",{scalar:(t,n)=>`u32(${t}>${n})`,vector:(t,n)=>`vec4<u32>(${t}>${n})`},void 0,void 0,9)},HA=e=>{tl(e,"Less",{scalar:(t,n)=>`u32(${t}<${n})`,vector:(t,n)=>`vec4<u32>(${t}<${n})`},void 0,void 0,9)},qA=e=>{tl(e,"GreaterOrEqual",{scalar:(t,n)=>`u32(${t}>=${n})`,vector:(t,n)=>`vec4<u32>(${t}>=${n})`},void 0,void 0,9)},XA=e=>{tl(e,"LessOrEqual",{scalar:(t,n)=>`u32(${t}<=${n})`,vector:(t,n)=>`vec4<u32>(${t}<=${n})`},void 0,void 0,9)}}),BE,NE,UE,VE,QA,YA,bV=Ut(()=>{Pn(),Nn(),Na(),Un(),BE=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let n=0,r=e[n],o=r.dataType,s=r.dims.length;e.forEach((l,u)=>{if(u!==n){if(l.dataType!==o)throw new Error("input tensors should be one type");if(l.dims.length!==s)throw new Error("input tensors should have the same shape");l.dims.forEach((d,p)=>{if(p!==t&&d!==r.dims[p])throw new Error("non concat dimensions must match")})}})},NE=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,UE=(e,t)=>{let n=e.length,r=[];for(let o=0;o<n;++o){let s=t.setByOffset("global_idx",e[o].getByIndices("indices"));n===1?r.push(s):o===0?r.push(`if (inputIndex == ${o}u) { ${s} }`):o===n-1?r.push(`else { ${s} }`):r.push(`else if (inputIndex == ${o}) { ${s} }`)}return r.join(`
`)},VE=(e,t,n,r)=>{let o=vt.size(n),s=new Array(e.length),l=new Array(e.length),u=0,d=[],p=[],g=[{type:12,data:o}];for(let b=0;b<e.length;++b)u+=e[b].dims[t],s[b]=u,p.push(e[b].dims.length),l[b]=xt(`input${b}`,r,p[b]),d.push("rank"),g.push({type:12,data:s[b]});for(let b=0;b<e.length;++b)g.push(...pn(e[b].dims));g.push(...pn(n));let h=an("output",r,n.length),m=h.indicesGet("indices",t),x=Array.from(Array(s.length).keys()).map(b=>`uniforms.sizeInConcatAxis${b}`).join(","),_=b=>`

  ${(()=>{b.registerUniform("outputSize","u32");for(let I=0;I<e.length;I++)b.registerUniform(`sizeInConcatAxis${I}`,"u32");return b.declareVariables(...l,h)})()}

  ${NE(s.length,x)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${h.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${m});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${x});
      ${m} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${UE(l,h)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:n,dataType:r}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:g}),getShaderSource:_}},QA=(e,t)=>{let n=e.inputs,r=n[0].dims,o=vt.normalizeAxis(t.axis,r.length);BE(n,o);let s=r.slice();s[o]=n.reduce((u,d)=>u+(d.dims.length>o?d.dims[o]:0),0);let l=n.filter(u=>vt.size(u.dims)>0);e.compute(VE(l,o,s,n[0].dataType),{inputs:l})},YA=e=>Sr({axis:e.axis})}),Pd,kd,Ad,fw,Rd=Ut(()=>{Pn(),Nn(),Pd=(e,t,n="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${n}(uniforms.clip_min)), ${t}(${n}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${n}(uniforms.alpha) * value + ${n}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${n}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},kd=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ad=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},fw=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[n,r]=e?.activation_params||[.2,.5];return{activation:t,alpha:n,beta:r}}else if(t==="Clip"){let[n,r]=e?.activation_params||[Mk,Tk];return{activation:t,clipMax:r,clipMin:n}}else if(t==="LeakyRelu"){let[n]=e?.activation_params||[.01];return{activation:t,alpha:n}}return{activation:t}}}),Ti,ZA,mw=Ut(()=>{Ti=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},ZA=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),JA,xV=Ut(()=>{JA=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),Og,hw,gw=Ut(()=>{Pn(),Nn(),Un(),Rd(),Og=(e,t,n,r,o)=>{let s=r-n;return`
      ${Array.from({length:n}).map((l,u)=>`
      if (${ln(t.shape,u,t.rank)} != 1) {
        ${t.indicesSet(e,u,ln(o,u+s,r))}
      } else {
        ${t.indicesSet(e,u,0)}
      }`).join("")}
`},hw=(e,t,n,r,o=!1,s)=>{let l=e[0].dims,u=e[1].dims,d=l[l.length-2],p=u[u.length-1],g=l[l.length-1],h=ka(p),m=ka(g),x=ka(d),_=vt.size(n)/h/x,b=e.length>2,I=r?r.slice(0,-2):n.slice(0,-2),T=[vt.size(I),d,p],S=[{type:12,data:_},{type:12,data:d},{type:12,data:p},{type:12,data:g}];kd(t,S),S.push(...pn(I,l,u)),b&&S.push(...pn(e[2].dims)),S.push(...pn(T));let D=E=>{let C=cw("batch_dims",e[0].dataType,I.length),P=xt("a",e[0].dataType,l.length,m),w=xt("b",e[1].dataType,u.length,h),R=an("output",e[0].dataType,T.length,h),U=_i(R.type.tensor),N=Pd(t,R.type.value,U),ie=[P,w],ee="";if(b){let ae=o?h:1;ie.push(xt("bias",e[2].dataType,e[2].dims.length,ae)),ee=`${o?`value += bias[col / ${ae}];`:`value += ${R.type.value}(bias[row + i]);`}`}let q=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ad(t,q);let oe=()=>{let ae=`var a_data: ${P.type.value};`;for(let X=0;X<m;X++)ae+=`
              let b_data${X} = b[(b_offset + (k + ${X}) * uniforms.N + col) / ${h}];`;for(let X=0;X<x;X++){ae+=`a_data = a[(a_offset + (row + ${X}) * uniforms.K + k) / ${m}];`;for(let se=0;se<m;se++)ae+=`
            values[${X}] = fma(${w.type.value}(a_data${m===1?"":`[${se}]`}), b_data${se}, values[${X}]);
`}return ae};return`
  ${E.registerUniforms(q).registerInternalVariables(C).declareVariables(...ie,R)}
  ${E.mainStart()}
    ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${h})) * ${h};
    var index1 = global_idx / (uniforms.N / ${h});
    let stride1 = uniforms.M / ${x};
    let row = (index1 % stride1) * ${x};
    let batch = index1 / stride1;

    ${n.length===2?"":`let batch_indices = ${C.offsetToIndices("batch")};`}

    var a_indices: ${P.type.indices};
    ${Og("a_indices",P,P.rank-2,C.rank,"batch_indices")}
    ${P.indicesSet("a_indices",P.rank-2,0)}
    ${P.indicesSet("a_indices",P.rank-1,0)}
    let a_offset = ${P.indicesToOffset("a_indices")};

    var b_indices: ${w.type.indices};
    ${Og("b_indices",w,w.rank-2,C.rank,"batch_indices")}
    ${w.indicesSet("b_indices",w.rank-2,0)}
    ${w.indicesSet("b_indices",w.rank-1,0)}
    let b_offset = ${w.indicesToOffset("b_indices")};
    var values: array<${R.type.value}, ${x}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${m}) {
      ${oe()}
    }
    for (var i = 0u; i < ${x}u; i++) {
      var value = values[i];
      ${ee}
      ${N}
      let cur_indices = ${R.type.indices}(batch, row + i, col);
      let offset = ${R.indicesToOffset("cur_indices")};
      ${R.setByOffset(`offset / ${h}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${h};${m};${x};${o}`,inputDependencies:b?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:s?s(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:S}),getShaderSource:D}}}),WE,GE,dx,Jb,KE,px,HE,Uv,_w=Ut(()=>{Pn(),Nn(),Un(),Rd(),gw(),mw(),WE=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,GE=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,dx=(e,t,n="f32",r,o=!1,s=32,l=!1,u=32)=>{let d=t[1]*e[1],p=t[0]*e[0],g=o?d:s,h=o?s:d,m=g/t[0],x=s/t[1];if(!((o&&m===4&&e[1]===4||!o&&(m===3||m===4))&&g%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${o} is true, innerElementSize ${m} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${m} must be 3 or 4.
  tileAWidth ${g} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${m}<${n}>, ${g/m}>, ${h}>;
var<workgroup> mm_Bsub: array<array<vec4<${n}>, ${p/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${m};
const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${l?"0":"i32(globalId.z)"};
  ${r?`let batchIndices = ${r.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${d};

  let num_tiles = ${l?`${Math.ceil(u/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${l?`i32(globalId.z) * ${u}`:"0"};

  var acc: array<vec4<${n}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${x};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${WE(o,r)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${x}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${r?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${m===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${GE(o,m)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Jb=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,KE=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",px=(e,t,n="f32",r,o=!1,s=32,l=!1,u=32,d=!1)=>{let p=e[1]*t[1],g=e[0]*t[0],h=o?p:s,m=o?s:p;if(!(m%t[1]===0&&h%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${m} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${h} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let x=m/t[1],_=h/t[0],b=s/t[1],I=d?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${p};
    let globalColStart = i32(workgroupId.x) * ${g};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${m}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${h}; inputCol = inputCol + ${t[0]}) {
          ${Jb(o,r)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${g}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${r?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${n}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${o?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${p};

let tileRowA = i32(localId.y) * ${x};
let tileColA = i32(localId.x) * ${_};
let tileRowB = i32(localId.y) * ${b};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${x}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${_}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Jb(o,r)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${b}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${r?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${n}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${KE(o)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${n}, ${h}>, ${m}>;
  var<workgroup> mm_Bsub : array<array<${n}, ${g}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${l?"0":"i32(globalId.z)"};
    ${r?`let batchIndices = ${r.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${l?`${Math.ceil(u/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${l?`i32(globalId.z) * ${u}`:"0"};

    var acc : array<array<${n}, colPerThread>, rowPerThread>;
    ${I}
  }
`},HE=(e,t,n,r,o=!1)=>{let[s,l,u,d]=r,p=_i(r[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Ti(e,p)} {
      var value = ${Ti(e,p)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${l.type.indices};
        ${Og("aIndices",l,l.rank-2,s.rank,"batchIndices")}
        ${l.indicesSet("aIndices",l.rank-2,"u32(row)")}
        ${l.indicesSet("aIndices",l.rank-1,"u32(colIn)")}
        value = ${l.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Ti(e,p)} {
      var value = ${Ti(e,p)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${u.type.indices};
        ${Og("bIndices",u,u.rank-2,s.rank,"batchIndices")}
        ${u.indicesSet("bIndices",u.rank-2,"u32(row)")}
        ${u.indicesSet("bIndices",u.rank-1,"u32(colIn)")}
        value = ${u.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${Ti(e,p)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${o?"bias[colIn]":`${Ti(e,p)}(bias[row])`};`:""}
        ${n}
        ${d.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},Uv=(e,t,n,r,o=!1,s)=>{let l=e[0].dims,u=e[1].dims,d=l.slice(0,-2),p=u.slice(0,-2),g=r?r.slice(0,-2):n.slice(0,-2),h=vt.size(g),m=l[l.length-2],x=l[l.length-1],_=u[u.length-1],b=x%4===0&&_%4===0,I=m<=8?[4,1,1]:[4,4,1],T=[8,8,1],S=[Math.ceil(_/T[0]/I[0]),Math.ceil(m/T[1]/I[1]),Math.ceil(h/T[2]/I[2])],D=b?4:1,E=[...d,m,x/D],C=E.length,P=[...p,x,_/D],w=P.length,R=[h,m,_/D],U=[{type:6,data:m},{type:6,data:_},{type:6,data:x}];kd(t,U),U.push(...pn(g,E,P));let N=["rank","rank"],ie=e.length>2;ie&&(U.push(...pn(e[2].dims)),N.push("rank")),U.push(...pn(R));let ee=q=>{let oe=g.length,ae=cw("batchDims",e[0].dataType,oe,1),X=_i(e[0].dataType),se=xt("a",e[0].dataType,C,D),le=xt("b",e[1].dataType,w,D),be=an("result",e[0].dataType,R.length,D),Ee=[se,le];if(ie){let _e=o?D:1;Ee.push(xt("bias",e[2].dataType,e[2].dims.length,_e))}let Y=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ad(t,Y);let te=_i(be.type.tensor),J=Pd(t,be.type.value,te),H=HE(D,ie,J,[ae,se,le,be],o);return`
  ${q.registerUniforms(Y).registerInternalVariables(ae).declareVariables(...Ee,be)}
  ${H}
  ${b?dx(I,T,X,ae):px(I,T,X,ae)}
                   `};return{name:"MatMul",shaderCache:{hint:`${I};${t.activation};${b};${o}`,inputDependencies:N},getRunData:()=>({outputs:[{dims:s?s(n):n,dataType:e[0].dataType}],dispatchGroup:{x:S[0],y:S[1],z:S[2]},programUniforms:U}),getShaderSource:ee}}}),qE,eO,wV=Ut(()=>{Pn(),Sc(),Un(),Rd(),mw(),xV(),_w(),qE=(e,t,n,r,o=!1,s,l=4,u=4,d=4,p="f32")=>{let g=U=>{switch(U){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${p}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${U} is not supported.`)}},h=U=>{switch(U){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${U} is not supported.`)}},m=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,x=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,_=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",b=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",I=e?"row":"col",T=e?"col":"row",S=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${I} / outWidth;
    let outCol = ${I} % outWidth;

    let WRow = ${T} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${T} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${T} % inChannels;
    var resData = ${Ti(l,p)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${_} && xCol >= 0 && xCol < ${b}) {
      ${m}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${g(l)}
    }
    return resData;`,D=e?t&&r?`
    let col = colIn * ${l};
    ${S}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${S}
    }
    return ${Ti(l,p)}(0.0);`:r&&n?`
    let col = colIn * ${l};
    ${S}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${S}
    }
    return ${Ti(l,p)}(0.0);`,E=e?r&&n?h(u):`
    let col = colIn * ${u};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${h(u)}
    }
    return ${Ti(u,p)}(0.0);`:`
    let col = colIn * ${u};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${h(u)}
    }
    return ${Ti(u,p)}(0.0);`,C=Ti(d,p),P=Ti(e?l:u,p),w=Ti(e?u:l,p),R=Pd(s,C,p);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${P} {
      ${e?D:E}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${w} {
      ${e?E:D}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${C}) {
      let col = colIn * ${d};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${x}
      ${ZA(o)}
      ${R}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},eO=(e,t,n,r,o,s,l,u,d)=>{let p=t.format==="NHWC",g=p?e[0].dims[3]:e[0].dims[1],h=n[0],m=p?n[2]:n[3],x=p?n[1]:n[2],_=p?n[3]:n[1],b=p&&(g%4===0||g%3===0)&&_%4===0,I=p?_:m*x,T=p?m*x:_,S=[8,8,1],D=r<=8?[4,1,1]:[4,4,1],E=[Math.ceil(I/S[0]/D[0]),Math.ceil(T/S[1]/D[1]),Math.ceil(h/S[2]/D[2])];ur("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let C=b?p&&g%4!==0?3:4:1,P=S[1]*D[1],w=S[0]*D[0],R=Math.max(S[0]*C,S[1]),U=r%P===0,N=o%w===0,ie=s%R===0,ee=b?[C,4,4]:[1,1,1],q=[{type:6,data:r},{type:6,data:o},{type:6,data:s},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];kd(t,q),q.push(...pn(e[0].dims,e[1].dims));let oe=["rank","rank"];l&&(q.push(...pn(e[2].dims)),oe.push("rank")),q.push(...pn(n));let ae=X=>{let se=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ad(t,se);let le=b?4:1,be=_i(e[0].dataType),Ee=`
      fn setOutputAtIndex(flatIndex : i32, value : ${b?`vec4<${be}>`:be}) {
        result[flatIndex] = ${b?`vec4<${be}>`:be}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${b?`vec4<${be}>`:be}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${b?"/ 4":""}, value);
      }`,Y=xt("x",e[0].dataType,e[0].dims.length,C===3?1:C),te=xt("w",e[1].dataType,e[1].dims.length,le),J=[Y,te],H=an("result",e[0].dataType,n.length,le);if(l){let _e=xt("bias",e[2].dataType,e[2].dims.length,le);J.push(_e),Ee+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${b?`vec4<${be}>`:be} {
          return bias[coords.${p?"w":"y"}${b?"/ 4":""}];
        }`}return`
        ${JA("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${X.registerUniforms(se).declareVariables(...J,H)}
        ${Ee}
        ${qE(p,U,N,ie,l,t,ee[0],ee[1],ee[2],be)}
        ${b?dx(D,S,be,void 0,!p,R):px(D,S,be,void 0,!p,R,!1,void 0,u)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${C};${b};${U};${N};${ie};${P};${w};${R}`,inputDependencies:oe},getRunData:()=>({outputs:[{dims:d?d(n):n,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:q}),getShaderSource:ae}}}),XE,e0,fg,QE,t0,YE,tO,nO,MV=Ut(()=>{Pn(),Sc(),Nn(),Un(),Rd(),mw(),XE=e=>{let t=1;for(let n=0;n<e.length;n++)t*=e[n];return t},e0=e=>typeof e=="number"?[e,e,e]:e,fg=(e,t)=>t<=1?e:e+(e-1)*(t-1),QE=(e,t,n,r=1)=>{let o=fg(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)},t0=(e,t,n,r,o)=>{o==null&&(o=QE(e,t[0],r[0]));let s=[0,0,0,n];for(let l=0;l<3;l++)e[l]+2*o>=t[l]&&(s[l]=Math.trunc((e[l]-t[l]+2*o)/r[l]+1));return s},YE=(e,t,n,r,o,s,l,u,d,p)=>{let g,h,m,x;if(e==="VALID"&&(e=0),typeof e=="number"){g={top:e,bottom:e,left:e,right:e,front:e,back:e};let _=t0([t,n,r,1],[u,d,p],1,[o,s,l],e);h=_[0],m=_[1],x=_[2]}else if(Array.isArray(e)){if(!e.every((b,I,T)=>b===T[0]))throw Error(`Unsupported padding parameter: ${e}`);g={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let _=t0([t,n,r,1],[u,d,p],1,[o,s,l],e[0]);h=_[0],m=_[1],x=_[2]}else if(e==="SAME_UPPER"){h=Math.ceil(t/o),m=Math.ceil(n/s),x=Math.ceil(r/l);let _=(h-1)*o+u-t,b=(m-1)*s+d-n,I=(x-1)*l+p-r,T=Math.floor(_/2),S=_-T,D=Math.floor(b/2),E=b-D,C=Math.floor(I/2),P=I-C;g={top:D,bottom:E,left:C,right:P,front:T,back:S}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:g,outDepth:h,outHeight:m,outWidth:x}},tO=(e,t,n,r,o,s=!1,l="channelsLast")=>{let u,d,p,g,h;if(l==="channelsLast")[u,d,p,g,h]=e;else if(l==="channelsFirst")[u,h,d,p,g]=e;else throw new Error(`Unknown dataFormat ${l}`);let[m,,x,_,b]=t,[I,T,S]=e0(n),[D,E,C]=e0(r),P=fg(x,D),w=fg(_,E),R=fg(b,C),{padInfo:U,outDepth:N,outHeight:ie,outWidth:ee}=YE(o,d,p,g,I,T,S,P,w,R),q=s?m*h:m,oe=[0,0,0,0,0];return l==="channelsFirst"?oe=[u,q,N,ie,ee]:l==="channelsLast"&&(oe=[u,N,ie,ee,q]),{batchSize:u,dataFormat:l,inDepth:d,inHeight:p,inWidth:g,inChannels:h,outDepth:N,outHeight:ie,outWidth:ee,outChannels:q,padInfo:U,strideDepth:I,strideHeight:T,strideWidth:S,filterDepth:x,filterHeight:_,filterWidth:b,effectiveFilterDepth:P,effectiveFilterHeight:w,effectiveFilterWidth:R,dilationDepth:D,dilationHeight:E,dilationWidth:C,inShape:e,outShape:oe,filterShape:t}},nO=(e,t,n,r,o,s)=>{let l=s==="channelsLast";l?e[0].dims[3]:e[0].dims[1];let u=[64,1,1],d={x:n.map((I,T)=>T)},p=[Math.ceil(XE(d.x.map(I=>n[I]))/u[0]),1,1];ur("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${p}`);let g=1,h=vt.size(n),m=[{type:12,data:h},{type:12,data:r},{type:12,data:o},{type:12,data:t.strides},{type:12,data:t.dilations}];kd(t,m),m.push(...pn(e[0].dims,e[1].dims));let x=["rank","rank"],_=e.length===3;_&&(m.push(...pn(e[2].dims)),x.push("rank")),m.push(...pn(n));let b=I=>{let T=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:r.length},{name:"pads",type:"u32",length:o.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];Ad(t,T);let S=1,D=_i(e[0].dataType),E=xt("x",e[0].dataType,e[0].dims.length,g),C=xt("W",e[1].dataType,e[1].dims.length,S),P=[E,C],w=an("result",e[0].dataType,n.length,S),R="";if(_){let ie=xt("bias",e[2].dataType,e[2].dims.length,S);P.push(ie),R+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${D} {
          return bias[${l?ln("coords",4,5):ln("coords",1,5)}];
        }`}let U=Ti(g,D),N=Pd(t,U,D);return`
            ${R}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${E.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${C.getByIndices("aIndices")};
            }
          ${I.registerUniforms(T).declareVariables(...P,w)}
          ${I.mainStart()}
          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${w.offsetToIndices("global_idx")};
              let batch = ${ln("coords",0,E.rank)};
              let d2 = ${l?ln("coords",E.rank-1,E.rank):ln("coords",1,E.rank)};
              let xFRCCorner = vec3<u32>(${l?ln("coords",1,E.rank):ln("coords",2,E.rank)},
              ${l?ln("coords",2,E.rank):ln("coords",3,E.rank)},
              ${l?ln("coords",3,E.rank):ln("coords",4,E.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${l?ln("uniforms.x_shape",1,E.rank):ln("uniforms.x_shape",2,E.rank)};
              let xShapeZ = ${l?ln("uniforms.x_shape",2,E.rank):ln("uniforms.x_shape",3,E.rank)};
              let xShapeW = ${l?ln("uniforms.x_shape",3,E.rank):ln("uniforms.x_shape",4,E.rank)};
              let xShapeU = ${l?ln("uniforms.x_shape",4,E.rank):ln("uniforms.x_shape",1,E.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${l?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${l?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${l?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${l?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${_?"value = value + getBiasByOutputCoords(coords)":""};
              ${N}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${l};${g};${_}`,inputDependencies:x},getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:p[0],y:p[1],z:p[2]},programUniforms:m}),getShaderSource:b}}}),rO,aO,TV=Ut(()=>{Pn(),Nn(),Un(),Rd(),rO=(e,t,n,r)=>{let o=e.length>2,s=o?"value += b[output_channel];":"",l=e[0].dims,u=e[1].dims,d=t.format==="NHWC",p=d?n[3]:n[1],g=p/t.group,h=d&&g>=4?ka(p):1,m=vt.size(n)/h,x=[{type:12,data:m},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:g}];kd(t,x),x.push(...pn(l,[u[0],u[1],u[2],u[3]/h]));let _=o?["rank","rank","rank"]:["rank","rank"];x.push(...pn([n[0],n[1],n[2],n[3]/h]));let b=I=>{let T=an("output",e[0].dataType,n.length,h),S=_i(T.type.tensor),D=Pd(t,T.type.value,S),E=xt("x",e[0].dataType,l.length),C=xt("w",e[1].dataType,u.length,h),P=[E,C];o&&P.push(xt("b",e[2].dataType,e[2].dims,h));let w=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];Ad(t,w);let R=d?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${E.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${C.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${E.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${C.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${I.registerUniforms(w).declareVariables(...P,T)}

  ${I.mainStart()}
    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${T.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${d?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${d?1:2}], outputIndices[${d?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${h} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${d?2:1}];

    var value: ${T.type.value} = ${T.type.value}(0);
    ${R}
    ${s}
    ${D}
    ${T.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${h}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:r?r(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:x}),getShaderSource:b}},aO=(e,t,n,r)=>{let o=e.length>2,s=ka(n[3]),l=ka(n[2]),u=vt.size(n)/s/l,d=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/s],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/s],g=[n[0],n[1],n[2],n[3]/s],h=[{type:12,data:u},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];kd(t,h),h.push(...pn(d,p,g));let m=(l-1)*t.strides[1]+p[1],x=_=>{let b=an("output",e[0].dataType,g.length,s),I=_i(b.type.tensor),T=Pd(t,b.type.value,I),S=xt("x",e[0].dataType,d.length,s),D=xt("w",e[1].dataType,p.length,s),E=[S,D];o&&E.push(xt("b",e[2].dataType,e[2].dims,s));let C=o?"value += b[output_channel];":"",P=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ad(t,P),`
  ${_.registerUniforms(P).declareVariables(...E,b)}
  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${l}u;
    let col = (index1 % width1) * ${l}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${S.type.value}, ${m}>;
    var values: array<${b.type.value}, ${l}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${m}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${S.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${S.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {
          let w_val = ${D.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${l}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${l}u; i++) {
      var value = values[i];
      ${C}
      ${T}
      ${b.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${s};${l};${m};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r?r(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:h}),getShaderSource:x}}}),ZE,av,JE,iv,fx,n0,eS,tS,mx,EV=Ut(()=>{Nn(),wV(),MV(),_w(),TV(),Rd(),gw(),xu(),ZE=(e,t,n,r,o,s)=>{let l=e[0],u=e.slice(s?1:2,s?3:4),d=u.length,p=t[0],g=t.slice(2).map((m,x)=>m+(m-1)*(n[x]-1)),h=u.map((m,x)=>m+r[x]+r[x+d]).map((m,x)=>Math.floor((m-g[x]+o[x])/o[x]));return h.splice(0,0,l),h.splice(s?3:1,0,p),h},av=[2,3,1,0],JE=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let n=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],r=e[1].dims[1]*t.group;if(n!==r)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let o=e[0].dims.length-2;if(t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},iv=(e,t)=>{let n=e.kernelShape.slice();n.length<t[1].dims.length-2&&n.push(...Array(t[1].dims.length-2-n.length).fill(0));for(let s=2;s<t[1].dims.length;++s)n[s-2]===0&&(n[s-2]=t[1].dims[s]);let r=e.pads.slice();Bv.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,r,e.format==="NHWC",e.autoPad);let o=Object.assign({},e);return Object.assign(o,{kernelShape:n,pads:r}),o},fx=e=>{let t=fw(e),n=e.format,r=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],o=e.dilations,s=e.group,l=e.kernel_shape,u=e.pads,d=e.strides,p=e.w_is_const();return{autoPad:r,format:n,dilations:o,group:s,kernelShape:l,pads:u,strides:d,wIsConst:p,...t,cacheKey:`${e.format};${t.activation};`}},n0=(e,t,n,r)=>{let o=n.format==="NHWC",s=ZE(t[0].dims,t[1].dims,n.dilations,n.pads,n.strides,o);if(n.group!==1){let P=[t[0]];if(o){let w=e.kernelCustomData.wT??e.compute(Go(t[1],av),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=w),P.push(w)}else P.push(t[1]);t.length===3&&P.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&o&&t[1].dims[0]===n.group&&t[1].dims[1]===1&&n.dilations[0]===1&&n.dilations[1]===1?e.compute(aO(P,n,s,r),{inputs:P}):e.compute(rO(P,n,s,r),{inputs:P});return}let l=t.length===3,u=t[0].dims[o?1:2],d=t[0].dims[o?2:3],p=t[0].dims[o?3:1],g=t[1].dims[2],h=t[1].dims[3],m=s[o?1:2],x=s[o?2:3],_=s[o?3:1],b=o&&g===u&&h===d&&n.pads[0]===0&&n.pads[1]===0;if(b||g===1&&h===1&&n.dilations[0]===1&&n.dilations[1]===1&&n.strides[0]===1&&n.strides[1]===1&&n.pads[0]===0&&n.pads[1]===0){let P=s[0],w,R,U,N=[];if(o){let q=e.kernelCustomData.wT??e.compute(Go(t[1],av),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];if(n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=q),b){let oe=u*d*p;w=t[0].reshape([1,P,oe]),R=q.reshape([1,oe,_]),U=[1,P,_]}else w=t[0].reshape([P,u*d,p]),R=q.reshape([1,p,_]),U=[P,m*x,_];N.push(w),N.push(R)}else w=t[0].reshape([P,p,u*d]),R=t[1].reshape([1,_,p]),U=[P,_,m*x],N.push(R),N.push(w);l&&N.push(t[2]);let ie=U[2],ee=N[0].dims[N[0].dims.length-1];ie<8&&ee<8?e.compute(hw(N,n,s,U,o,r),{inputs:N}):e.compute(Uv(N,n,s,U,o,r),{inputs:N});return}let I=!0,T=e.kernelCustomData.wT??e.compute(Go(t[1],av),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=T);let S=[t[0],T];l&&S.push(t[2]);let D=o?m*x:_,E=o?_:m*x,C=g*h*p;e.compute(eO(S,n,s,D,E,C,l,I,r),{inputs:S})},eS=(e,t)=>{let n=t.format==="NHWC",r=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&r.push(e.inputs[2]);let o=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),l=[1].concat(t.dilations),u=[1].concat(t.kernelShape),d=iv({...t,pads:o,strides:s,dilations:l,kernelShape:u},r);n0(e,r,d,p=>n?[p[0],p[2],p[3]]:[p[0],p[1],p[3]])},tS=(e,t,n)=>{let r=n.format==="NHWC"?"channelsLast":"channelsFirst",o=iv(n,t),s=n.autoPad==="NOTSET"?n.pads:n.autoPad,l=tO(t[0].dims,t[1].dims,n.strides,n.dilations,s,!1,r);e.compute(nO(t,o,l.outShape,[l.filterDepth,l.filterHeight,l.filterWidth],[l.padInfo.front,l.padInfo.top,l.padInfo.left],r))},mx=(e,t)=>{if(JE(e.inputs,t),e.inputs[0].dims.length===3)eS(e,t);else if(e.inputs[0].dims.length===5)tS(e,e.inputs,t);else{let n=iv(t,e.inputs);n0(e,e.inputs,n)}}}),iO,SV=Ut(()=>{Pn(),Sc(),Nn(),Un(),iO=(e,t,n)=>{let r=e.length>2,o=t.outputShape,s=t.format==="NHWC",l=t.group,u=e[1].dims,d=u[2]/l,p=u[3],g=s?ka(d):1,h=s&&p===1&&d>=4,m=h?Math.floor(d/4)*4:Math.floor(d/g)*g,x=d-m,_=s?ka(p):1,b=s?p===1?g:_:1,I=vt.size(o)/_,T=[Math.ceil(I/64),1,1];ur("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${T}`);let S=["rank","rank"],D=[t.strides[0],t.strides[1]],E=[t.kernelShape[s?1:2],t.kernelShape[s?2:3]],C=[t.dilations[0],t.dilations[1]],P=[E[0]+(t.dilations[0]<=1?0:(t.kernelShape[s?1:2]-1)*(t.dilations[0]-1)),E[1]+(t.dilations[1]<=1?0:(t.kernelShape[s?2:3]-1)*(t.dilations[1]-1))],w=[P[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),P[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],R=[{type:12,data:I},{type:12,data:D},{type:12,data:E},{type:12,data:C},{type:12,data:P},{type:6,data:w},{type:12,data:m},{type:12,data:d},{type:12,data:p},...pn(e[0].dims,e[1].dims)];r&&(R.push(...pn(e[2].dims)),S.push("rank")),R.push(...pn(o));let U=N=>{let ie=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:D.length},{name:"filter_dims",type:"u32",length:E.length},{name:"dilations",type:"u32",length:E.length},{name:"effective_filter_dims",type:"u32",length:P.length},{name:"pads",type:"i32",length:w.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],ee=_i(e[0].dataType),q=s?1:2,oe=s?2:3,ae=s?3:1,X=xt("W",e[1].dataType,e[1].dims.length,b),se=xt("Dy",e[0].dataType,e[0].dims.length,g),le=[se,X];r&&le.push(xt("bias",e[2].dataType,[o[ae]].length,_));let be=an("result",e[0].dataType,o.length,_),Ee=()=>{let J="";if(h)g===4?J+=`
        let xValue = ${se.getByOffset("x_offset")};
        let wValue = ${X.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:g===2?J+=`
          dotProd = dotProd + dot(vec4<${ee}>(${se.getByOffset("x_offset")}, ${se.getByOffset("x_offset + 1u")}), vec4<${ee}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:g===1&&(J+=`
          dotProd = dotProd + dot(vec4<${ee}>(${se.getByOffset("x_offset")}, ${se.getByOffset("x_offset + 1u")}, ${se.getByOffset("x_offset + 2u")}, ${se.getByOffset("x_offset + 3u")}), vec4<${ee}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}, ${X.getByOffset("w_offset + 2u")}, ${X.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(J+=`
                  let xValue = ${s?se.getByOffset(`${se.indicesToOffset(`${se.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${g}`):se.get("batch","inputChannel","idyR","idyC")};
        `,g===1)J+=`
          let w_offset = ${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${X.getByOffset(`w_offset / ${b}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let H=0;H<g;H++)J+=`
            let wValue${H} = ${X.getByOffset(`${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${H}, wOutChannel)`)} / ${b}`)};
            dotProd = dotProd + xValue[${H}] * wValue${H};`;return J},Y=()=>{if(x===0)return"";if(!h)throw new Error(`packInputAs4 ${h} is not true.`);let J="";if(g===1){J+="dotProd = dotProd";for(let H=0;H<x;H++)J+=`
            + ${se.getByOffset(`x_offset + ${H}`)} * ${X.getByOffset(`w_offset + ${H}`)}`;J+=";"}else if(g===2){if(x!==2)throw new Error(`Invalid inputChannelsRemainder ${x}.`);J+=`
          let xValue = ${se.getByOffset("x_offset")};
          let wValue = ${X.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return J},te=`
            let outputIndices = ${be.offsetToIndices(`global_idx * ${_}`)};
            let batch = ${be.indicesGet("outputIndices",0)};
            let d1 = ${be.indicesGet("outputIndices",ae)};
            let r = ${be.indicesGet("outputIndices",q)};
            let c = ${be.indicesGet("outputIndices",oe)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${be.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${ee}(dyRCorner) + ${ee}(wR)) / ${ee}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${ee}(uniforms.Dy_shape[${q}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${ee}(dyCCorner) + ${ee}(wC)) / ${ee}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${ee}(uniforms.Dy_shape[${oe}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${h?`
                var x_offset = ${se.indicesToOffset(`${se.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${g};
                var w_offset = ${X.indicesToOffset(`${X.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${b};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${h?4:g}) {
                  ${Ee()}
                  inputChannel = inputChannel + ${h?4:g};
                }
                ${Y()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${r?` + bias[d1 / ${_}]`:""};
            ${be.setByOffset("global_idx","value")};
          `;return`
    ${N.registerUniforms(ie).declareVariables(...le,be)}
      ${N.mainStart()}
      ${N.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${te}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${g}${b}${_}${h}${x}`,inputDependencies:S},getRunData:()=>({dispatchGroup:{x:T[0],y:T[1],z:T[2]},outputs:[{dims:n?n(o):o,dataType:e[0].dataType}],programUniforms:R}),getShaderSource:U}}}),nS,rS,aS,r0,oO,iS,a0,oS,sO,CV=Ut(()=>{SV(),Rd(),xu(),nS=(e,t,n,r,o,s)=>(e-1)*t+n+(r-1)*o+1-s,rS=(e,t,n,r,o)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(n[r]=s,n[o]=e-s):t==="SAME_LOWER"&&(n[r]=e-s,n[o]=s)},aS=(e,t,n,r,o,s,l,u,d,p)=>{let g=e.length-2,h=p.length===0;d.length<g&&d.push(...Array(g-d.length).fill(0));let m=e[0],x=t[u?3:1]*o;for(let _=0,b=e.length-g-(u?1:0);_<g;++_,++b){let I=e[b],T=h?I*l[_]:p[_],S=nS(I,l[_],s[_],t[b],n[_],T);rS(S,r,s,_,_+g),h&&p.push(l[_]*(I-1)+d[_]+(t[b]-1)*n[_]+1-s[_]-s[_+g])}p.splice(0,0,m),p.splice(u?3:1,0,x)},r0=(e,t)=>{let n=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((h,m)=>h*m,1)===0){n.length=0;for(let h=2;h<t[1].dims.length;++h)n.push(t[1].dims[h])}let r=e.format==="NHWC";n.splice(0,0,t[1].dims[0]),n.splice(r?3:1,0,t[1].dims[1]);let o=e.pads.slice(),s=e.outputShape.slice(),l=e.outputPadding.slice(),u=t[0].dims,d=e.dilations.slice();if(d.reduce((h,m)=>h+m,0)===0){let h=t[0].dims.length-2;d=new Array(h).fill(1)}let p=e.strides.slice();if(p.reduce((h,m)=>h+m,0)===0){let h=t[0].dims.length-2;p=new Array(h).fill(1)}aS(u,n,d,e.autoPad,e.group,o,p,r,l,s);let g=Object.assign({},e);return Object.assign(g,{kernelShape:n,pads:o,outputPadding:l,outputShape:s,dilations:d,strides:p}),g},oO=e=>{let t=fw(e),n=e.format,r=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],o=e.dilations,s=e.group,l=e.kernelShape,u=e.pads,d=e.strides,p=e.wIsConst(),g=e.outputPadding,h=e.outputShape;return{autoPad:r,format:n,dilations:o,group:s,kernelShape:l,outputPadding:g,outputShape:h,pads:u,strides:d,wIsConst:p,...t,cacheKey:`${e.format};${t.activation};`}},iS=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let n=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],r=e[1].dims[0];if(n!==r)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==o))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((l,u)=>l+u,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((l,u)=>l+u,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((l,u)=>l+u,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((l,u)=>l+u,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},a0=(e,t,n,r)=>{let o=e.kernelCustomData.wT??e.compute(Go(t[1],[2,3,0,1]),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=o);let s=[t[0],o];t.length===3&&s.push(t[2]),e.compute(iO(s,n,r),{inputs:s})},oS=(e,t)=>{let n=t.format==="NHWC",r=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&r.push(e.inputs[2]);let o=t.kernelShape;(o.length===0||o[0]===0)&&(o=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let l=t.strides;(l.length===0||l[0]===0)&&(l=[1]);let u=t.pads;u.length===0&&(u=[0,0]),u=[0,u[0],0,u[1]],l=[1].concat(l),s=[1].concat(s),o=[1].concat(o);let d=t.outputPadding;d=[0].concat(d);let p=r0({...t,pads:u,strides:l,dilations:s,kernelShape:o,outputPadding:d},r);a0(e,r,p,g=>n?[g[0],g[2],g[3]]:[g[0],g[1],g[3]])},sO=(e,t)=>{if(iS(e.inputs,t),e.inputs[0].dims.length===3)oS(e,t);else{let n=r0(t,e.inputs);a0(e,e.inputs,n)}}}),sS,lO,cO,PV=Ut(()=>{Pn(),Nn(),Na(),Un(),sS=(e,t,n,r)=>{let o=vt.size(t),s=t.length,l=xt("input",e,s),u=an("output",e,s),d=n.dataType===6?n.getInt32Array()[0]:Number(n.getBigInt64Array()[0]),p=vt.normalizeAxis(d,s),g=h=>{let m=` i32(${l.indicesGet("inputIndices","uniforms.axis")}) `,x=ln("uniforms.input_shape","uniforms.axis",s),_=r.reverse?m+(r.exclusive?" + 1":""):"0",b=r.reverse?x:m+(r.exclusive?"":" + 1");return`
                ${h.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(l,u)}
                ${h.mainStart()}
                  ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${u.offsetToIndices("global_idx")};
                  var sum = ${u.type.value}(0);
                  let first : i32 = ${_};
                  let last : i32 = ${b};
                  for (var i : i32 = first; i < last; i++) {
                    ${l.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${l.getByIndices("inputIndices")};
                  }
                  ${u.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:r.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},{type:12,data:p},...pn(t,t)]}),getShaderSource:g}},lO=(e,t)=>{let n=e.inputs[0].dims,r=e.inputs[0].dataType,o=e.inputs[1];e.compute(sS(r,n,o,t),{inputs:[0]})},cO=e=>{let t=e.exclusive===1,n=e.reverse===1;return Sr({exclusive:t,reverse:n})}}),lS,cS,uS,uO,dO,kV=Ut(()=>{Pn(),Nn(),Na(),Un(),lS=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},cS=(e,t,n,r)=>{let o=[];o.push(`fn perm(i: ${r.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`);for(let s=0;s<t;++s)o.push(n.indicesSet("a",e[s],`i[${s}]`));return o.push("return a;}"),o.join(`
`)},uS=(e,t)=>{let n,r,o,s,l,u,d=t.format==="NHWC",p=t.blocksize,g=t.mode==="DCR";d?([n,r,o,s]=e.dims,l=g?[n,r,o,p,p,s/p**2]:[n,r,o,s/p**2,p,p],u=g?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([n,r,o,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],l=g?[n,p,p,s/p**2,r,o]:[n,s/p**2,p,p,r,o],u=g?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let h=e.reshape(l),m=h.dims.length,x=e.dataType,_=xt("a",x,m),b=an("output",x,m),I=T=>`
  ${T.registerUniform("output_size","u32").declareVariables(_,b)}

  ${cS(u,m,_,b)}

  ${T.mainStart()}
    ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${b.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${b.setByOffset("global_idx",_.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:T=>{let S=d?[n,r*p,o*p,s/p**2]:[n,s/p**2,r*p,o*p],D=vt.size(S),E=h.dims,C=vt.sortBasedOnPerm(E,u);return{outputs:[{dims:S,dataType:T[0].dataType}],dispatchGroup:{x:Math.ceil(D/64)},programUniforms:[{type:12,data:D},...pn(E,C)]}},getShaderSource:I}},uO=(e,t)=>{lS(e.inputs),e.compute(uS(e.inputs[0],t))},dO=e=>Sr({blocksize:e.blocksize,mode:e.mode,format:e.format})}),ov,mg,i0,dS,pS,fS,mS,o0,hS,pO,fO,AV=Ut(()=>{Pn(),Nn(),Na(),Un(),ov="[a-zA-Z]|\\.\\.\\.",mg="("+ov+")+",i0="^"+mg+"$",dS="("+mg+",)*"+mg,pS="^"+dS+"$",fS=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let n=this.symbolToIndices.get(e);n===void 0?n=[t]:n.push(t),this.symbolToIndices.set(e,n)}},mS=class{constructor(e,t){this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[n,r]=t.includes("->")?t.split("->",2):[t,""];if(!n.match(RegExp(pS)))throw new Error("Invalid LHS term");if(n.split(",").forEach((o,s)=>{let l=e[s].dims.slice();if(!o.match(RegExp(i0)))throw new Error("Invalid LHS term");let u=this.processTerm(o,!0,l,s);this.lhs.push(u)}),r==="")r+=[...this.symbolToInfo.entries()].filter(([o,s])=>s.count===1||o==="...").map(([o])=>o).join("");else if(!r.match(RegExp(mg)))throw new Error("Invalid RHS");r.match(RegExp(ov,"g"))?.forEach(o=>{if(o==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let s=this.symbolToInfo.get(o);if(s===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(s.dimValue)}}),this.rhs=this.processTerm(r,!1,this.outputDims)}addSymbol(e,t,n){let r=this.symbolToInfo.get(e);if(r!==void 0){if(r.dimValue!==t&&r.count!==1)throw new Error("Dimension mismatch");r.count++,r.inputIndices.push(n)}else r={count:1,dimValue:t,inputIndices:[n]};this.symbolToInfo.set(e,r)}processTerm(e,t,n,r=-1){let o=n.length,s=!1,l=[],u=0;if(!e.match(RegExp(i0))&&!t&&e!=="")throw new Error("Invalid LHS term");let d=e.match(RegExp(ov,"g")),p=new fS(r);return d?.forEach((g,h)=>{if(g==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let m=o-d.length+1;if(m<0)throw new Error("Ellipsis out of bounds");if(l=n.slice(u,u+m),this.hasEllipsis){if(this.ellipsisDims.length!==l.length||this.ellipsisDims.toString()!==l.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=l;else throw new Error("Ellipsis must be specified in the LHS");for(let x=0;x<l.length;x++){let _=String.fromCharCode(48+x);p.addSymbol(_,h+x),this.addSymbol(_,n[u++],r)}}else p.addSymbol(g,h+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(g,n[u++],r)}),p}},o0=e=>e+"_max",hS=(e,t,n,r)=>{let o=e.map(p=>p.length).map((p,g)=>xt(`input${g}`,t,p)),s=vt.size(r),l=an("output",t,r.length),u=[...n.symbolToInfo.keys()].filter(p=>!n.rhs.symbolToIndices.has(p)),d=p=>{let g=[],h="var prod = 1.0;",m="var sum = 0.0;",x="sum += prod;",_=[],b=[],I=[],T=[],S=n.symbolToInfo.size===n.rhs.symbolToIndices.size;n.symbolToInfo.forEach((E,C)=>{if(n.rhs.symbolToIndices.has(C)){let P=n.rhs.symbolToIndices.get(C)?.[0];P!==void 0&&n.lhs.forEach((w,R)=>{if(E.inputIndices.includes(R)){let U=w.symbolToIndices.get(C);if(U===void 0)throw new Error("Invalid symbol error");U.forEach(N=>{g.push(`${o[R].indicesSet(`input${R}Indices`,N,l.indicesGet("outputIndices",P))}`)})}})}else n.lhs.forEach((P,w)=>{if(E.inputIndices.includes(w)){let R=P.symbolToIndices.get(C);if(R===void 0)throw new Error("Invalid symbol error");R.forEach(U=>{_.push(`${o[w].indicesSet(`input${w}Indices`,U,`${C}`)}`)}),T.push(`prod *= ${o[w].getByIndices(`input${w}Indices`)};`)}}),b.push(`for(var ${C}: u32 = 0; ${C} < uniforms.${o0(C)}; ${C}++) {`),I.push("}")});let D=S?[...g,`let sum = ${o.map((E,C)=>E.getByIndices(`input${C}Indices`)).join(" * ")};`]:[...g,m,...b,..._,h,...T,x,...I];return`
            ${p.registerUniforms(u.map(E=>({name:`${o0(E)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...o,l)}

            ${p.mainStart()}
            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${l.offsetToIndices("global_idx")};
            ${o.map((E,C)=>`var input${C}Indices: ${o[C].type.indices};`).join(`
`)}
            ${D.join(`
`)};
            ${l.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:n.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let p=u.filter(h=>n.symbolToInfo.has(h)).map(h=>({type:12,data:n.symbolToInfo.get(h)?.dimValue||0}));p.push({type:12,data:s});let g=e.map((h,m)=>[...pn(h)]).reduce((h,m)=>h.concat(m),p);return g.push(...pn(r)),{outputs:[{dims:r,dataType:t}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:g}},getShaderSource:d}},pO=(e,t)=>{let n=new mS(e.inputs,t.equation),r=n.outputDims,o=e.inputs.map((s,l)=>s.dims);e.compute(hS(o,e.inputs[0].dataType,n,r))},fO=e=>{let t=e.equation.replace(/\s+/g,"");return Sr({equation:t})}}),gS,s0,_S,vS,mO,OV=Ut(()=>{Pn(),Nn(),Un(),gS=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,n=Array.from(e[1].getBigInt64Array(),Number),r=n.length<t.length?0:n.length-t.length,o=t.length<n.length?0:t.length-n.length;for(;r<n.length&&o<t.length;++r,++o)if(n[r]!==t[o]&&n[r]!==1&&t[o]!==1)throw new Error("Expand requires shape to be broadcastable to input")},s0=(e,t)=>{let n=e.length-t.length,r=[];for(let o=0;o<n;++o)r.push(e[o]);for(let o=0;o<t.length;++o)r.push(t[o]===1?e[o+n]:t[o]);return r},_S=(e,t)=>e.length>t.length?s0(e,t):s0(t,e),vS=e=>{let t=e[0].dims,n=Array.from(e[1].getBigInt64Array(),Number),r=_S(t,n),o=e[0].dataType,s=o===9||vt.size(t)===1,l=o===9||t.length>0&&t[t.length-1]%4===0?4:1,u=s||r.length>0&&r[r.length-1]%4===0?4:1,d=Math.ceil(vt.size(r)/u),p=h=>{let m=xt("input",o,t.length,l),x=an("output",o,r.length,u),_;if(o===9){let b=(I,T,S="")=>`
          let outputIndices${T} = ${x.offsetToIndices(`outputOffset + ${T}u`)};
          let offset${T} = ${m.broadcastedIndicesToOffset(`outputIndices${T}`,x)};
          let index${T} = offset${T} / 4u;
          let component${T} = offset${T} % 4u;
          ${I}[${T}] = ${S}(${m.getByOffset(`index${T}`)}[component${T}]);
        `;_=`
        let outputOffset = global_idx * ${u};
        var data = vec4<u32>(0);
        ${b("data",0,"u32")}
        ${b("data",1,"u32")}
        ${b("data",2,"u32")}
        ${b("data",3,"u32")}
        ${x.setByOffset("global_idx","data")}
      }`}else _=`
        let outputIndices = ${x.offsetToIndices(`global_idx * ${u}`)};
        let inputOffset = ${m.broadcastedIndicesToOffset("outputIndices",x)};
        let data = ${x.type.value}(${m.getByOffset(`inputOffset / ${l}`)});
        ${x.setByOffset("global_idx","data")}
      }`;return`
    ${h.registerUniform("vec_size","u32").declareVariables(m,x)}
    ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${_}`},g=[{type:12,data:d},...pn(t,r)];return{name:"Expand",shaderCache:{hint:`${r.length};${l}${u}`,inputDependencies:["rank"]},getShaderSource:p,getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:g})}},mO=e=>{gS(e.inputs),e.compute(vS(e.inputs),{inputs:[0]})}}),yS,hO,$V=Ut(()=>{Pn(),Nn(),Un(),pw(),yS=e=>{let t=e[0].dataType,n=vt.size(e[0].dims),r=vt.size(e[1].dims),o=r%4===0,s=l=>{let u=xt("x",t,[1],4),d=xt("bias",t,[1],4),p=an("y",t,[1],4),g=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],h=x=>`
      let bias${x}_offset: u32 = (global_idx * 4 + ${x}) % uniforms.bias_size;
      let bias${x} = ${d.getByOffset(`bias${x}_offset / 4`)}[bias${x}_offset % 4];`,m=o?`
      let bias = ${d.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${h(0)}${h(1)}${h(2)}${h(3)}
      let bias = ${u.type.value}(bias0, bias1, bias2, bias3);`;return`${l.registerUniforms(g).declareVariables(u,d,p)}

    ${cx(qi(t))}

    ${l.mainStart(Cf)}
      ${l.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${u.getByOffset("global_idx")};
      ${m}
      let x_in = x + bias;
      ${p.setByOffset("global_idx",ux("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${o}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:l=>({outputs:[{dims:l[0].dims,dataType:l[0].dataType}],programUniforms:[{type:12,data:Math.ceil(n/4)},{type:12,data:r}],dispatchGroup:{x:Math.ceil(n/Cf/4)}})}},hO=e=>{e.inputs.length<2||vt.size(e.inputs[1].dims)===0?RA(e):e.compute(yS(e.inputs))}}),bS,xS,gO,_O,DV=Ut(()=>{Pn(),Nn(),Na(),Un(),bS=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},xS=(e,t)=>{let n=e[0].dims,r=e[1].dims,o=n.length,s=vt.normalizeAxis(t.axis,o),l=n.slice(0);l.splice(s,1,...r);let u=n[s],d=e[0].dataType===9?4:1,p=Math.ceil(vt.size(l)/d),g=[{type:12,data:p},{type:6,data:u},{type:12,data:s},...pn(e[0].dims,e[1].dims,l)],h=m=>{let x=xt("data",e[0].dataType,e[0].dims.length,d),_=xt("inputIndices",e[1].dataType,e[1].dims.length),b=an("output",e[0].dataType,l.length,d),I=S=>{let D=r.length,E=`var indicesIndices${S}  = ${_.type.indices}(0);`;for(let C=0;C<D;C++)E+=`${D>1?`indicesIndices${S}[${C}]`:`indicesIndices${S}`} = ${l.length>1?`outputIndices${S}[uniforms.axis + ${C}]`:`outputIndices${S}`};`;E+=`
          var idx${S} = ${_.getByIndices(`indicesIndices${S}`)};
          if (idx${S} < 0) {
            idx${S} = idx${S} + uniforms.axisDimLimit;
          }
          var dataIndices${S} : ${x.type.indices};
        `;for(let C=0,P=0;C<o;C++)C===s?(E+=`${o>1?`dataIndices${S}[${C}]`:`dataIndices${S}`} = u32(idx${S});`,P+=D):(E+=`${o>1?`dataIndices${S}[${C}]`:`dataIndices${S}`} = ${l.length>1?`outputIndices${S}[${P}]`:`outputIndices${S}`};`,P++);return E},T;if(e[0].dataType===9){let S=(D,E,C="")=>`
          let outputIndices${E} = ${b.offsetToIndices(`outputOffset + ${E}u`)};
          ${I(E)};
          let offset${E} = ${x.indicesToOffset(`dataIndices${E}`)};
          let index${E} = offset${E} / 4u;
          let component${E} = offset${E} % 4u;
          ${D}[${E}] = ${C}(${x.getByOffset(`index${E}`)}[component${E}]);
        `;T=`
        let outputOffset = global_idx * ${d};
        var value = vec4<u32>(0);
        ${S("value",0,"u32")}
        ${S("value",1,"u32")}
        ${S("value",2,"u32")}
        ${S("value",3,"u32")}
        ${b.setByOffset("global_idx","value")}
      `}else T=`
      let outputIndices = ${b.offsetToIndices("global_idx")};
      ${I("")};
      let value = ${x.getByIndices("dataIndices")};
      ${b.setByOffset("global_idx","value")};
      `;return`
      ${m.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(x,_,b)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${T}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:l,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:g}),getShaderSource:h}},gO=e=>Sr({axis:e.axis}),_O=(e,t)=>{let n=e.inputs;bS(n),e.compute(xS(e.inputs,t))}}),wS,vO,yO,IV=Ut(()=>{Pn(),Nn(),Un(),wS=(e,t,n,r,o,s,l,u,d)=>{let p=[{type:12,data:s},{type:12,data:r},{type:12,data:o},{type:12,data:n},{type:12,data:l},{type:12,data:u},{type:12,data:d}],g=[s];p.push(...pn(t.dims,g));let h=m=>{let x=xt("indices_data",t.dataType,t.dims.length),_=an("input_slice_offsets_data",12,1,1),b=[x,_],I=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:o.length},{name:"sizes_from_slice_dims_data",type:"u32",length:n.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${m.registerUniforms(I).declareVariables(...b)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${o.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${n.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${o.length}_${n.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:g,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:p}),getShaderSource:h},{inputs:[t],outputs:[-1]})[0]},vO=(e,t)=>{let n=e.inputs,r=n[0].dims,o=n[0].dataType,s=n[1].dims,l=s[s.length-1],u=vt.sizeToDimension(s,s.length-1),d=vt.sizeFromDimension(r,t.batchDims+l),p=vt.sizeToDimension(r,t.batchDims),g=vt.sizeFromDimension(r,t.batchDims),h=u/p,m=new Array(l),x=d;for(let E=0;E<l;++E)m[l-1-E]=x,x*=r[t.batchDims+l-1-E];let _=wS(e,n[1],m,t.batchDims,r,u,h,g,l),b=t.batchDims+l;if(b>r.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let I=s.slice(0,-1).concat(r.slice(b)),T=vt.size(I),S=[{type:12,data:T},{type:12,data:d},...pn(n[0].dims,_.dims,I)],D=E=>{let C=xt("data",n[0].dataType,n[0].dims.length),P=xt("slice_offsets",12,_.dims.length),w=an("output",n[0].dataType,I.length);return`
          ${E.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(C,P,w)}
            ${E.mainStart()}
            ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:I,dataType:o}],dispatchGroup:{x:Math.ceil(T/64)},programUniforms:S}),getShaderSource:D},{inputs:[n[0],_]})},yO=e=>({batchDims:e.batch_dims,cacheKey:""})}),MS,TS,bO,xO,RV=Ut(()=>{Pn(),Nn(),Na(),Un(),MS=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let n=vt.normalizeAxis(t.quantizeAxis,e[0].dims.length),r=t.blockSize,o=e[0],s=e[2],l=e.length===4?e[3]:void 0;if(s.dims.length!==o.dims.length||!o.dims.map((u,d)=>d===n?Math.ceil(u/r)===s.dims[d]:u===s.dims[d]).reduce((u,d)=>u&&d,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(l){if(l.dataType!==o.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(l.dims.length!==s.dims.length||!l.dims.map((u,d)=>u===s.dims[d]).reduce((u,d)=>u&&d,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},TS=(e,t)=>{let n=e[0].dims,r=e[1].dims,o=n.length,s=vt.normalizeAxis(t.gatherAxis,o),l=vt.normalizeAxis(t.quantizeAxis,o),u=n.slice(0);u.splice(s,1,...r);let d=vt.size(u),p=e[2].dataType,g=e[0].dataType===22,h=[{type:12,data:d},{type:12,data:l},{type:12,data:s},{type:12,data:t.blockSize},...pn(...e.map((x,_)=>x.dims),u)],m=x=>{let _=xt("data",e[0].dataType,e[0].dims.length),b=xt("inputIndices",e[1].dataType,e[1].dims.length),I=xt("scales",e[2].dataType,e[2].dims.length),T=e.length>3?xt("zeroPoint",e[3].dataType,e[3].dims.length):void 0,S=an("output",p,u.length),D=[_,b,I];T&&D.push(T);let E=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${x.registerUniforms(E).declareVariables(...D,S)}
        ${x.mainStart()}
        let output_indices = ${S.offsetToIndices("global_idx")};
        var indices_indices = ${b.type.indices}(0);
        ${r.length>1?`
          for (var i: u32 = 0; i < ${r.length}; i++) {
            let index = ${S.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${b.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${S.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${_.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${S.indicesGet("output_indices","i")};
          ${_.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${b.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${n[s]};
        }
        ${_.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${u.length}; i++) {
          let index = ${S.indicesGet("output_indices",`i + ${r.length} - 1`)};
          ${_.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${_.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${_.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${g?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${I.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${I.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${I.getByIndices("scale_indices")};
        ${T?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${T.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${T.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${g?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${qi(p)}(quantized_data - zero_point) * scale;
        ${S.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((x,_)=>_!==1).map(x=>x.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(x,_)=>"rank")},getRunData:()=>({outputs:[{dims:u,dataType:p}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:h}),getShaderSource:m}},bO=(e,t)=>{let n=e.inputs;MS(n,t),e.compute(TS(e.inputs,t))},xO=e=>Sr({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),ES,SS,wO,MO,LV=Ut(()=>{Pn(),Nn(),Na(),Un(),ES=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},SS=(e,t)=>{let n=e[0].dims,r=e[0].dataType,o=n.length,s=e[1].dims,l=e[1].dataType,u=vt.normalizeAxis(t.axis,o),d=n[u],p=s.slice(0),g=vt.size(p),h=xt("input",r,o),m=xt("indicesInput",l,s.length),x=an("output",r,p.length),_=[{type:12,data:g},{type:6,data:d},{type:12,data:u}];return _.push(...pn(n,s,p)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:p,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:_}),getShaderSource:b=>`
      ${b.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(h,m,x)}
      ${b.mainStart()}
      ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${x.offsetToIndices("global_idx")};

      var idx = ${m.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${h.type.indices}(outputIndices);
      ${h.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${h.getByIndices("inputIndices")};

      ${x.setByOffset("global_idx","value")};
  }`}},wO=e=>Sr({axis:e.axis}),MO=(e,t)=>{let n=e.inputs;ES(n),e.compute(SS(e.inputs,t))}}),CS,PS,TO,EO,zV=Ut(()=>{Pn(),Nn(),Un(),CS=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},PS=(e,t)=>{let n=e[0].dims.slice(),r=e[1].dims.slice(),[o,s,l]=wk.getShapeOfGemmResult(n,t.transA,r,t.transB,e.length===3?e[2].dims:void 0),u=[o,s];if(!u)throw new Error("Can't use gemm on the given tensors");let d=16,p=Math.ceil(s/d),g=Math.ceil(o/d),h=!0,m=vt.size(u),x=[{type:12,data:h?p:m},{type:12,data:o},{type:12,data:s},{type:12,data:l},{type:1,data:t.alpha},{type:1,data:t.beta}],_=["type","type"];e.length===3&&(x.push(...pn(e[2].dims)),_.push("rank")),x.push(...pn(u));let b=T=>{let S="";t.transA&&t.transB?S="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?S="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?S="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(S="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let D=t.alpha===1?"":"value *= uniforms.alpha;",E=xt("a",e[0].dataType,e[0].dims),C=xt("b",e[1].dataType,e[1].dims),P=E.type.value,w=null,R=[E,C];e.length===3&&(w=xt("c",e[2].dataType,e[2].dims.length),R.push(w));let U=an("output",e[0].dataType,u.length);R.push(U);let N=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${T.registerUniforms(N).declareVariables(...R)}

  ${T.mainStart()}
    ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${P}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${S}
    }

    ${D}
    ${w!=null?`let cOffset = ${w.broadcastedIndicesToOffset("vec2(m, n)",U)}; value += ${P}(uniforms.beta) * ${w.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},I=T=>{let S=xt("a",e[0].dataType,e[0].dims),D=xt("b",e[1].dataType,e[1].dims),E=null,C=[S,D];e.length===3&&(E=xt("c",e[2].dataType,e[2].dims.length),C.push(E));let P=an("output",e[0].dataType,u.length);C.push(P);let w=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],R="",U="";t.transA&&t.transB?(U=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${S.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${D.type.value}(0);
      }
      `,R="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(U=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${S.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${D.type.value}(0);
      }
      `,R="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(U=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${S.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${D.type.value}(0);
      }
      `,R="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(U=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${S.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${D.type.value}(0);
      }
      `,R="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let N=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${T.registerUniforms(w).declareVariables(...C)}
  var<workgroup> tile_a: array<array<${S.type.storage}, ${d}>, ${d}>;
  var<workgroup> tile_b: array<array<${D.type.storage}, ${d}>, ${d}>;
  ${T.mainStart([d,d,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${d};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${d};
    let num_tiles = (uniforms.K - 1) / ${d} + 1;
    var k_start = 0u;
    var value = ${P.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${U}
      k_start = k_start + ${d};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${d}; k++) {
        ${R}
      }
      workgroupBarrier();
    }

    ${N}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${E!=null?`let cOffset = ${E.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${P.type.value}(uniforms.beta) * ${E.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return h?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:u,dataType:e[0].dataType}],dispatchGroup:{x:p*g},programUniforms:x}),getShaderSource:I}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:u,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:x}),getShaderSource:b}},TO=e=>{let t=e.transA,n=e.transB,r=e.alpha,o=e.beta;return{transA:t,transB:n,alpha:r,beta:o,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},EO=(e,t)=>{CS(e.inputs),e.compute(PS(e.inputs,t))}}),Bl,xc,pd,fd,kS,AS,OS,$S,DS,IS,RS,LS,SO,CO,FV=Ut(()=>{Pn(),Nn(),Na(),Un(),[Bl,xc,pd,fd]=[0,1,2,3],kS=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},AS=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,OS=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,$S=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,DS=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,IS=(e,t,n)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Bl}] = batch;
     indices[${xc}] = channel;`+(()=>{switch(n.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${pd}] = u32(r);
            indices[${fd}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${pd}] = u32(clamp(r, 0, H - 1));
          indices[${fd}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${pd}] = gs_reflect(r, border[1], border[3]);
          indices[${fd}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${n.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,RS=(e,t,n)=>(()=>{switch(n.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Bl}], indices[${xc}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Bl}], indices[${xc}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Bl}], indices[${xc}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Bl}], indices[${xc}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Bl}], indices[${xc}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Bl}], indices[${xc}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${n.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,LS=(e,t)=>{let n=xt("x",e[0].dataType,e[0].dims.length),r=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],o=xt("grid",e[1].dataType,r.length,2),s=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(s=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Bl,xc,pd,fd]=[0,3,1,2]);let l=an("output",e[0].dataType,s.length),u=n.type.value,d=vt.size(s),p=[{type:12,data:d},...pn(e[0].dims,r,s)],g=h=>`
  ${h.registerUniform("output_size","u32").declareVariables(n,o,l)}
  ${AS}
  ${OS(u)}
  ${$S(t)}
  ${DS(t)}
  ${IS(n,u,t)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${pd}]);
      let W_in = i32(uniforms.x_shape[${fd}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${l.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Bl}], indices[${pd}], indices[${fd}]);
      let nxy = ${o.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${RS(l,u,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:h=>{let m=vt.size(s);return{outputs:[{dims:s,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:p}},getShaderSource:g}},SO=(e,t)=>{kS(e.inputs),e.compute(LS(e.inputs,t))},CO=e=>Sr({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),no,zS,PO,l0,FS,Tg,kO,AO=Ut(()=>{Pn(),Nn(),Na(),lw(),dw(),Un(),xu(),no=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,zS=(e,t)=>{let n=e[0],r=no(e,1),o=no(e,2),s=no(e,3),l=no(e,4),u=no(e,5),d=no(e,6),p=no(e,7);if(n.dims.length!==3&&n.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let g=n.dims[0],h=n.dims[1],m=n.dims.length===3?n.dims[2]:t.numHeads*n.dims[4],x=h,_=0,b=0,I=Math.floor(m/t.numHeads);if(d&&p&&vt.size(d.dims)&&vt.size(p.dims)){if(d.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(d.dims[0]!==g||d.dims[1]!==t.numHeads||d.dims[3]!==I)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(p.dims[0]!==g||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(d.dims[2]!==p.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(p.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');_=d.dims[2],b=d.dims[2]}else if(d&&vt.size(d.dims)||p&&vt.size(p.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let T;if(r&&vt.size(r.dims)>0){if(n.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(r.dims.length<3||r.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(n.dims[0]!==r.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(r.dims.length===3){if(r.dims[2]!==n.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');T=2,x=r.dims[1]}else if(r.dims.length===5){if(r.dims[2]!==t.numHeads||r.dims[3]!==2||r.dims[4]!==I)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(o)throw new Error('Expect "value" be none when "key" has packed kv format.');T=5,x=r.dims[1]}else{if(r.dims[1]!==t.numHeads||r.dims[3]!==I)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');T=0,x=r.dims[2]}}else{if(n.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(n.dims[2]!==t.numHeads||n.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');T=3}if(s&&vt.size(s.dims)>0){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(r&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let S=_+x,D=0;if(l&&vt.size(l.dims)>0){D=8;let w=l.dims;throw w.length===1?w[0]===g?D=1:w[0]===3*g+2&&(D=3):w.length===2&&w[0]===g&&w[1]===S&&(D=5),D===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let E=!1,C=m;if(o&&vt.size(o.dims)>0){if(o.dims.length!==3&&o.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(n.dims[0]!==o.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(o.dims.length===3){if(x!==o.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');C=o.dims[2]}else{if(x!==o.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');C=o.dims[1]*o.dims[3],E=!0}}let P=!1;if(l&&vt.size(l.dims)>0)throw new Error("Key padding mask is not supported");if(u&&vt.size(u.dims)>0){if(u.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(u.dims[0]!==g||u.dims[1]!==t.numHeads||u.dims[2]!==h||u.dims[3]!==S)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:g,sequenceLength:h,pastSequenceLength:_,kvSequenceLength:x,totalSequenceLength:S,maxSequenceLength:b,inputHiddenSize:0,hiddenSize:m,vHiddenSize:C,headSize:I,vHeadSize:Math.floor(C/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:D,scale:t.scale,broadcastResPosBias:P,passPastInKv:E,qkvFormat:T}},PO=e=>Sr({...e}),l0=Sr({perm:[0,2,1,3]}),FS=(e,t,n,r,o,s,l)=>{let u=[r,o,s],d=vt.size(u),p=[{type:12,data:d},{type:12,data:l},{type:12,data:s}],g=h=>{let m=an("qkv_with_bias",t.dataType,u),x=xt("qkv",t.dataType,u),_=xt("bias",n.dataType,u),b=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${h.registerUniforms(b).declareVariables(x,_,m)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:p}),getShaderSource:g},{inputs:[t,n],outputs:[-1]})[0]},Tg=(e,t,n,r,o,s,l,u)=>{let d=s;if(l&&vt.size(l.dims)>0){if(r===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return d=FS(e,s,l,t,r,n*o,u),d=d.reshape([t,r,n,o]),n===1||r===1?d:e.compute(Go(d,l0.perm),{inputs:[d],outputs:[-1]})[0]}else return s.dims.length===3&&(d=s.reshape([t,r,n,o])),n===1||r===1?d:e.compute(Go(d,l0.perm),{inputs:[d],outputs:[-1]})[0]},kO=(e,t)=>{let n=zS(e.inputs,t),r=e.inputs[0],o=no(e.inputs,1),s=no(e.inputs,2),l=no(e.inputs,3),u=no(e.inputs,4),d=no(e.inputs,5),p=no(e.inputs,6),g=no(e.inputs,7);if(r.dims.length===5)throw new Error("Packed QKV is not implemented");if(o?.dims.length===5)throw new Error("Packed KV is not implemented");let h=o&&s&&o.dims.length===4&&s.dims.length===4,m=Tg(e,n.batchSize,n.numHeads,n.sequenceLength,n.headSize,r,l,0);if(h)return Wg(e,m,o,s,u,void 0,p,g,d,n);if(!o||!s)throw new Error("key and value must be provided");let x=Tg(e,n.batchSize,n.numHeads,n.kvSequenceLength,n.headSize,o,l,n.hiddenSize),_=Tg(e,n.batchSize,n.numHeads,n.kvSequenceLength,n.vHeadSize,s,l,2*n.hiddenSize);Wg(e,m,x,_,u,void 0,p,g,d,n)}}),jS,BS,NS,US,hx,OO,$O,DO=Ut(()=>{Pn(),Nn(),Na(),Un(),jS=e=>{if(!e||e.length<1)throw new Error("too few inputs")},BS=(e,t)=>{let n=[],r=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(o=>n.push(Number(o))),r=n.length),Sr({numOutputs:r,axis:t.axis,splitSizes:n})},NS=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${ln("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,US=e=>{let t=e.length,n=[];for(let r=0;r<t;++r){let o=e[r].setByIndices("indices","input[global_idx]");t===1?n.push(o):r===0?n.push(`if (output_number == ${r}u) { ${o} }`):r===t-1?n.push(`else { ${o} }`):n.push(`else if (output_number == ${r}) { ${o} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${n.join(`
`)}
      }`},hx=(e,t)=>{let n=e[0].dims,r=vt.size(n),o=e[0].dataType,s=vt.normalizeAxis(t.axis,n.length),l=new Array(t.numOutputs),u=xt("input",o,n.length),d=new Array(t.numOutputs),p=[],g=[],h=0,m=[{type:12,data:r}];for(let _=0;_<t.numOutputs;_++){h+=t.splitSizes[_],d[_]=h;let b=n.slice();b[s]=t.splitSizes[_],g.push(b),l[_]=an(`output${_}`,o,b.length),p.push({dims:g[_],dataType:e[0].dataType})}m.push({type:12,data:d},...pn(n,...g));let x=_=>`
  ${_.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",d.length).declareVariables(u,...l)}
  ${NS(d.length)}
  ${US(l)}

  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${u.offsetToIndices("global_idx")};
    var index = ${u.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${ln("uniforms.size_in_split_axis","output_number - 1u",d.length)};
      ${u.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:x,getRunData:()=>({outputs:p,dispatchGroup:{x:Math.ceil(r/64)},programUniforms:m})}},OO=(e,t)=>{jS(e.inputs);let n=e.inputs.length===1?t:BS(e.inputs,t);e.compute(hx(e.inputs,n),{inputs:[0]})},$O=e=>{let t=e.axis,n=e.splitSizes,r=e.numOutputs<0?n.length:e.numOutputs;if(r!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return Sr({axis:t,numOutputs:r,splitSizes:n})}}),VS,Vv,IO,RO=Ut(()=>{Pn(),Nn(),Na(),Un(),VS=(e,t)=>{let[n,r,o,s]=e,{numHeads:l,rotaryEmbeddingDim:u}=t;if(n.dims.length!==3&&n.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${n.dims.length}`);if(!vt.areEqual(r.dims,[])&&!vt.areEqual(r.dims,[1])&&r.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${r.dims.length}`);if(o.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${o.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!vt.areEqual(o.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(u>0&&l===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let d=n.dims[0],p=n.dims[n.dims.length-2],g=o.dims[0],h=vt.sizeFromDimension(n.dims,1)/p,m=u===0?o.dims[1]*2:h/l;if(u>m)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(r.dims.length===2){if(d!==r.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${r.dims[0]}`);if(p!==r.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${r.dims[1]}`)}if(m/2!==o.dims[1]&&u/2!==o.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${o.dims[1]}`);if(p>g)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Vv=(e,t)=>{let{interleaved:n,numHeads:r,rotaryEmbeddingDim:o,scale:s}=t,l=e[0].dims[0],u=vt.sizeFromDimension(e[0].dims,1),d=e[0].dims[e[0].dims.length-2],p=u/d,g=e[2].dims[1],h=o===0?g*2:p/r,m=new Array(l,d,p/h,h-g),x=vt.computeStrides(m),_=[{type:1,data:s},{type:12,data:m},{type:12,data:x},...e[0].dims.length===3?new Array({type:12,data:[u,p,h,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[u,h,d*h,1]}):[],...pn(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],b=I=>{let T=xt("input",e[0].dataType,e[0].dims.length),S=xt("position_ids",e[1].dataType,e[1].dims.length),D=xt("cos_cache",e[2].dataType,e[2].dims.length),E=xt("sin_cache",e[3].dataType,e[3].dims.length),C=an("output",e[0].dataType,e[0].dims.length);return I.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:m.length},{name:"global_strides",type:"u32",length:x.length},{name:"input_output_strides",type:"u32",length:x.length}]),`
        ${I.declareVariables(T,S,D,E,C)}

        ${I.mainStart(Cf)}
          let half_rotary_emb_dim = uniforms.${D.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${I.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${S.broadcastedIndicesToOffset("bsnh.xy",an("",S.type.tensor,2))};
            let position_id =
                u32(${S.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${n});
            let j = i + select(half_rotary_emb_dim, 1, ${n});
            let re = ${T.getByOffset("i")} * ${D.get("position_id","bsnh[3]")} -
                ${T.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};
            ${C.setByOffset("i","re")}
            let im = ${T.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} +
                ${T.getByOffset("j")} * ${D.get("position_id","bsnh[3]")};
            ${C.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${C.setByOffset("k",T.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:Sr({interleaved:n}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:b,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(vt.size(m)/Cf)},programUniforms:_})}},IO=(e,t)=>{VS(e.inputs,t),e.compute(Vv(e.inputs,t))}}),WS,GS,c0,KS,LO,jV=Ut(()=>{Na(),Pn(),dw(),AO(),DO(),xu(),RO(),Un(),WS=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let n=e[0],r=e[1],o=e[2],s=e[3],l=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(n.dims.length!==3&&n.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let u=!1,d=n.dims[0],p=n.dims[1],g=n.dims.length===3?u?n.dims[2]/3:n.dims[2]:t.numHeads*n.dims[4],h=p,m=0,x=!r||r.dims.length===0,_=Math.floor(x?g/(t.numHeads+2*t.kvNumHeads):g/t.numHeads);x&&(g=_*t.numHeads);let b=s&&s.dims.length!==0,I=l&&l.dims.length!==0;if(b&&s.dims.length===4&&s.dims[0]===d&&s.dims[1]!==t.kvNumHeads&&s.dims[2]===t.kvNumHeads&&s.dims[3]===_)throw new Error("BSNH pastKey/pastValue is not supported");if(b&&I){if(s.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=s.dims[2]}else if(b||I)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let T=1;if(r&&r.dims.length>0){if(n.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(r.dims.length<3||r.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(n.dims[0]!==r.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(r.dims.length===3){if(n.dims[2]%r.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');h=r.dims[1]}else if(r.dims.length===5){if(r.dims[2]!==t.numHeads||r.dims[3]!==2||r.dims[4]!==_)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(o)throw new Error('Expect "value" be none when "key" has packed kv format.');h=r.dims[1]}else{if(r.dims[1]!==t.numHeads||r.dims[3]!==_)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');h=r.dims[2]}}else{if(n.dims.length!==3&&n.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(n.dims.length===5&&(n.dims[2]!==t.numHeads||n.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');T=3}let S=0,D=!1,E=t.kvNumHeads?_*t.kvNumHeads:g;if(o&&o.dims.length>0){if(o.dims.length!==3&&o.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(n.dims[0]!==o.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(o.dims.length===3){if(h!==o.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');E=o.dims[2]}else{if(h!==o.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');E=o.dims[1]*o.dims[3],D=!0}}let C=e.length>4?e[5]:void 0;if(C&&C.dims.length!==1&&C.dims[0]!==d)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:d,sequenceLength:p,pastSequenceLength:m,kvSequenceLength:h,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:g,vHiddenSize:E,headSize:_,vHeadSize:Math.floor(E/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:S,scale:t.scale,broadcastResPosBias:!1,passPastInKv:D,qkvFormat:T}},GS=Sr({perm:[0,2,1,3]}),c0=(e,t,n)=>{let r=t,o=n.kvNumHeads;return t.dims.length===3&&n.kvSequenceLength!==0&&(r=t.reshape([n.batchSize,n.kvSequenceLength,o,n.headSize]),r=e.compute(Go(r,GS.perm),{inputs:[r],outputs:[-1]})[0]),r},KS=(e,t,n,r)=>{let o=7,s=["type","type"],l=[e*t],u=e*t,d=[{type:12,data:u},{type:12,data:t},{type:12,data:e}],p=g=>{let h=xt("seq_lens",n.dataType,n.dims),m=xt("total_seq_lens",r.dataType,r.dims),x=an("pos_ids",o,l),_=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${g.registerUniforms(_).declareVariables(h,m,x)}
  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${m.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${h.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${x.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${x.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${x.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:l,dataType:o}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:d}),getShaderSource:p}},LO=(e,t)=>{let n=WS(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(e.inputs[1]?.dims.length===5)throw new Error("Packed KV is not implemented");let r=e.inputs[0],o=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,s=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,l=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,u=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,d=e.inputs.length>4?e.inputs[5]:void 0,p=e.inputs.length>5?e.inputs[6]:void 0,g=n.kvNumHeads?n.kvNumHeads:n.numHeads,h=Sr({axis:2,numOutputs:3,splitSizes:[n.numHeads*n.headSize,g*n.headSize,g*n.headSize]}),[m,x,_]=!o&&!s?e.compute(hx([r],h),{inputs:[r],outputs:[-1,-1,-1]}):[r,o,s],b,I;if(t.doRotary){let E=e.compute(KS(n.batchSize,n.sequenceLength,d,p),{inputs:[d,p],outputs:[-1]})[0],C=e.inputs[7],P=e.inputs[8],w=Sr({interleaved:t.rotaryInterleaved!==0,numHeads:n.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),R=[m,E,C,P],U=[-1];b=e.compute(Vv(R,w),{inputs:R,outputs:U})[0],R.splice(0,1,x);let N=Sr({interleaved:t.rotaryInterleaved!==0,numHeads:n.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});I=e.compute(Vv(R,N),{inputs:R,outputs:U})[0]}let T=Tg(e,n.batchSize,n.numHeads,n.sequenceLength,n.headSize,t.doRotary?b:m,void 0,0),S=c0(e,t.doRotary?I:x,n),D=c0(e,_,n);Wg(e,T,S,D,void 0,void 0,l,u,void 0,n,d,p)}}),u0,HS,qS,zO,BV=Ut(()=>{Pn(),Nn(),xu(),Un(),u0=(e,t,n,r,o,s,l,u)=>{let d=ka(s),p=d===1?"f32":`vec${d}f`,g=d===1?"vec2f":`mat2x${d}f`,h=o*l,m=64;h===1&&(m=256);let x=[o,l,s/d],_=[o,l,2],b=["rank","type","type"],I=[];I.push(...pn(x,_));let T=S=>{let D=xt("x",t.dataType,3,d),E=xt("scale",n.dataType,n.dims),C=xt("bias",r.dataType,r.dims),P=an("output",1,3,2),w=[D,E,C,P];return`
  var<workgroup> workgroup_shared : array<${g}, ${m}>;
  const workgroup_size = ${m}u;
  ${S.declareVariables(...w)}
  ${S.mainStart(m)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${p}(0);
    var squared_sum = ${p}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${p}(${D.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${g}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${yu("workgroup_shared[0][0]",d)} / f32(hight * ${d});
      let squared_sum_final = ${yu("workgroup_shared[0][1]",d)} / f32(hight * ${d});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${u}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${d};${u};${m}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:_,dataType:1}],dispatchGroup:{x:h},programUniforms:I}),getShaderSource:T},{inputs:[t,n,r],outputs:[-1]})[0]},HS=(e,t,n)=>{let r=t[0].dims,o=r,s=2,l=r[0],u=r[1],d=vt.sizeFromDimension(r,s),p=ka(d),g=vt.size(o)/p,h=u0(e,t[0],t[1],t[2],l,d,u,n.epsilon),m=[l,u,d/p],x=[l,u],_=["type","none"],b=I=>{let T=xt("x",t[0].dataType,m.length,p),S=xt("scale_shift",1,x.length,2),D=an("output",t[0].dataType,m.length,p),E=[T,S,D];return`
  ${I.registerUniform("output_size","u32").declareVariables(...E)}
  ${I.mainStart()}
  ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${D.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${S.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${T.getByOffset("global_idx")} * ${D.type.value}(scale_shift.x) + ${D.type.value}(scale_shift.y);
      ${D.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${p}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:o,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:[{type:12,data:g},...pn(m,x,m)]}),getShaderSource:b},{inputs:[t[0],h]})},qS=(e,t,n)=>{let r=t[0].dims,o=r,s=r[0],l=r[r.length-1],u=vt.sizeFromDimension(r,1)/l,d=ka(l),p=vt.size(o)/d,g=[{type:12,data:u},{type:12,data:Math.floor(l/d)}],h=["type","type"],m=!1,x=[0,r.length-1];for(let T=0;T<r.length-2;T++)m=m||r[T+1]!==1,x.push(T+1);m=m&&r[r.length-1]!==1;let _=m?e.compute(Go(e.inputs[0],x),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:r.length},(T,S)=>r[x[S]])),b=u0(e,_,t[1],t[2],s,u,l,n.epsilon),I=T=>{let S=_i(t[0].dataType),D=d===1?"vec2f":`mat${d}x2f`,E=w=>{let R=w===0?"x":"y",U=d===1?"f32":`vec${d}f`;switch(d){case 1:return`${S}(${U}(scale.${R}))`;case 2:return`vec2<${S}>(${U}(scale[0].${R}, scale[1].${R}))`;case 4:return`vec4<${S}>(${U}(scale[0].${R}, scale[1].${R}, scale[2].${R}, scale[3].${R}))`;default:throw new Error(`Not supported compoents ${d}`)}},C=xt("input",t[0].dataType,t[0].dims,d),P=an("output",t[0].dataType,o,d);return`
  @group(0) @binding(0) var<storage, read> input : array<${C.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${D}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${P.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${T.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${E(0)}, ${E(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${d}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:o,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:g}),getShaderSource:I},{inputs:[t[0],b]})},zO=(e,t)=>{t.format==="NHWC"?qS(e,e.inputs,t):HS(e,e.inputs,t)}}),XS,QS,FO,NV=Ut(()=>{Pn(),Nn(),Un(),XS=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},QS=(e,t,n)=>{let r=t.simplified,o=e[0].dims,s=e[1],l=!r&&e[2],u=o,d=vt.normalizeAxis(t.axis,o.length),p=vt.sizeToDimension(o,d),g=vt.sizeFromDimension(o,d),h=vt.size(s.dims),m=l?vt.size(l.dims):0;if(h!==g||l&&m!==g)throw new Error(`Size of X.shape()[axis:] == ${g}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${h} and bias size of ${m}`);let x=[];for(let C=0;C<o.length;++C)C<d?x.push(o[C]):x.push(1);let _=ka(g),b=["type","type"],I=[{type:12,data:p},{type:1,data:g},{type:12,data:Math.floor(g/_)},{type:1,data:t.epsilon}];l&&b.push("type");let T=n>1,S=n>2,D=C=>{let P=_i(e[0].dataType),w=[xt("x",e[0].dataType,e[0].dims,_),xt("scale",s.dataType,s.dims,_)];l&&w.push(xt("bias",l.dataType,l.dims,_)),w.push(an("output",e[0].dataType,u,_)),T&&w.push(an("mean_data_output",1,x)),S&&w.push(an("inv_std_output",1,x));let R=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${C.registerUniforms(R).declareVariables(...w)}
  ${C.mainStart()}
    ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${ox("f32",_)};
    var mean_square_vector = ${ox("f32",_)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${gf(P,_,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${yu("mean_vector",_)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${yu("mean_square_vector",_)} / uniforms.norm_size ${r?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${gf(P,_,"x[j + offset]")};
      let f32scale = ${gf(P,_,"scale[j]")};
      output[j + offset] = ${w[0].type.value}((f32input ${r?"":"- mean"}) * inv_std_dev * f32scale
        ${l?`+ ${gf(P,_,"bias[j]")}`:""}
      );
    }

    ${T?"mean_data_output[global_idx] = mean":""};
    ${S?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},E=[{dims:u,dataType:e[0].dataType}];return T&&E.push({dims:x,dataType:1}),S&&E.push({dims:x,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${_};${n};${r}`,inputDependencies:b},getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/64)},programUniforms:I}),getShaderSource:D}},FO=(e,t)=>{XS(e.inputs),e.compute(QS(e.inputs,t,e.outputCount))}}),YS,jO,UV=Ut(()=>{Nn(),gw(),_w(),YS=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},jO=e=>{YS(e.inputs);let t=Sf.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let n=t[t.length-1],r=e.inputs[0].dims[e.inputs[0].dims.length-1];if(n<8&&r<8)e.compute(hw(e.inputs,{activation:""},t));else{let o=t[t.length-2],s=vt.size(e.inputs[0].dims.slice(0,-2)),l=vt.size(e.inputs[1].dims.slice(0,-2));if(s!==1&&o===1&&l===1){let u=e.inputs[0].reshape([1,s,r]),d=e.inputs[1].reshape([1,r,n]),p=[1,s,n],g=[u,d];e.compute(Uv(g,{activation:""},t,p),{inputs:g})}else e.compute(Uv(e.inputs,{activation:""},t))}}}),ZS,JS,eC,BO,NO,VV=Ut(()=>{Pn(),Nn(),Na(),Un(),ZS=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let n=e[0],r=n.dims.length;if(n.dims[r-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let o=Math.floor((t.k+t.blockSize-1)/t.blockSize),s=t.blockSize/8*t.bits,l=e[1];if(!vt.areEqual(l.dims,[t.n,o,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let u=e[2].dims;if(vt.size(u)!==t.n*o)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,p=t.bits>4?t.n*o:t.n*Math.floor((o+1)/2);if(vt.size(d)!==p)throw new Error("zeroPoints input size error.")}},JS=(e,t)=>{let n=e[0].dims,r=n.length,o=n[r-2],s=t.k,l=t.n,u=n.slice(0,r-2),d=vt.size(u),p=e[1].dims[2]/4,g=e[0].dataType,h=ka(t.k),m=ka(p),x=ka(l),_=u.concat([o,l]),b=o>1&&l/x%2===0?2:1,I=vt.size(_)/x/b,T=64,S=[],D=[d,o,s/h],E=vt.convertShape(e[1].dims).slice();E.splice(-1,1,p/m),S.push(...pn(D)),S.push(...pn(E)),S.push(...pn(e[2].dims)),e.length===4&&S.push(...pn(vt.convertShape(e[3].dims)));let C=[d,o,l/x];S.push(...pn(C));let P=w=>{let R=D.length,U=xt("a",e[0].dataType,R,h),N=xt("b",12,E.length,m),ie=xt("scales",e[2].dataType,e[2].dims.length),ee=[U,N,ie],q=e.length===4?xt("zero_points",12,e[3].dims.length):void 0;q&&ee.push(q);let oe=C.length,ae=an("output",e[0].dataType,oe,x),X=_i(e[0].dataType),se=(()=>{switch(h){case 1:return`array<${X}, 8>`;case 2:return`mat4x2<${X}>`;case 4:return`mat2x4<${X}>`;default:throw new Error(`${h}-component is not supported.`)}})(),le=()=>{let Y=`
          // reuse a data
            var input_offset = ${U.indicesToOffset(`${U.type.indices}(batch, row, word_offset)`)};
            var a_data: ${se};
            for (var j: u32 = 0; j < ${8/h}; j++) {
              a_data[j] = ${U.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let te=0;te<x*b;te++)Y+=`
            b_value = ${m===1?`b${te}_data`:`b${te}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${se}(${Array.from({length:4},(J,H)=>`${X}(b_value_lower[${H}]), ${X}(b_value_upper[${H}])`).join(", ")});
            b_dequantized_values = ${h===1?`${se}(${Array.from({length:8},(J,H)=>`(b_quantized_values[${H}] - ${q?`zero_point${te}`:"zero_point"}) * scale${te}`).join(", ")});`:`(b_quantized_values - ${se}(${Array(8).fill(`${q?`zero_point${te}`:"zero_point"}`).join(",")})) * scale${te};`};
            workgroup_shared[local_id.x * ${b} + ${Math.floor(te/x)}]${x>1?`[${te%x}]`:""} += ${Array.from({length:8/h},(J,H)=>`${h===1?`a_data[${H}] * b_dequantized_values[${H}]`:`dot(a_data[${H}], b_dequantized_values[${H}])`}`).join(" + ")};
          `;return Y},be=()=>{let Y=`
            var col_index = col * ${x};
            ${q?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${X}(8);`}
            `;for(let te=0;te<x*b;te++)Y+=`
            let scale${te} = ${ie.getByOffset("col_index * nBlocksPerCol + block")};
            ${q?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${q.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${te} = ${X}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return Y},Ee=()=>{let Y=`col_index = col * ${x};`;for(let te=0;te<x*b;te++)Y+=`
            let b${te}_data = ${N.getByIndices(`${N.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return Y+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${se};
            var b_dequantized_values: ${se};`,Y};return`
        var<workgroup> workgroup_shared: array<${ae.type.value}, ${b*T}>;
        ${w.declareVariables(...ee,ae)}
        ${w.mainStart([T,1,1])}
          let output_indices = ${ae.offsetToIndices(`(global_idx / ${T}) * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${T}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/h};
            ${be()}
            for (var word: u32 = 0; word < ${p}; word += ${m}) {
              ${Ee()}
              for (var i: u32 = 0; i < ${m}; i++) {
                ${le()}
                word_offset += ${8/h};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${b}) {
            var output_value: ${ae.type.value} = ${ae.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${T}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${b};
            }
            ${ae.setByIndices(`${ae.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${h};${m};${x};${b};${T}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:_,dataType:g}],dispatchGroup:{x:I},programUniforms:S}),getShaderSource:P}},eC=(e,t)=>{let n=e[0].dims,r=n.length,o=n[r-2],s=t.k,l=t.n,u=n.slice(0,r-2),d=vt.size(u),p=e[1].dims[2]/4,g=e[0].dataType,h=ka(t.k),m=ka(p),x=u.concat([o,l]),_=128,b=l%8===0?8:l%4===0?4:1,I=_/b,T=I*m*8,S=T/h,D=T/t.blockSize,E=vt.size(x)/b,C=[],P=[d,o,s/h],w=vt.convertShape(e[1].dims).slice();w.splice(-1,1,p/m),C.push(...pn(P)),C.push(...pn(w)),C.push(...pn(e[2].dims)),e.length===4&&C.push(...pn(vt.convertShape(e[3].dims)));let R=[d,o,l];C.push(...pn(R));let U=N=>{let ie=P.length,ee=xt("a",e[0].dataType,ie,h),q=xt("b",12,w.length,m),oe=xt("scales",e[2].dataType,e[2].dims.length),ae=[ee,q,oe],X=e.length===4?xt("zero_points",12,e[3].dims.length):void 0;X&&ae.push(X);let se=R.length,le=an("output",e[0].dataType,se),be=_i(e[0].dataType),Ee=()=>{switch(h){case 1:return`
          let a_data0 = vec4<${be}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${be}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${be}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${be}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${h}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${ee.type.value}, ${S}>;
        var<workgroup> inter_results: array<array<${le.type.value}, ${I}>, ${b}>;
        ${N.declareVariables(...ae,le)}
        ${N.mainStart([I,b,1])}
          let output_indices = ${le.offsetToIndices(`workgroup_index * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${D} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${S};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${S}; a_offset += ${_})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${ee.getByIndices(`${ee.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${ee.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${D} + local_id.x;
            ${X?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${X.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${be}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${be}(8);`}
            let scale = ${oe.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${q.getByIndices(`${q.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/h};
            for (var i: u32 = 0; i < ${m}; i++) {
              ${Ee()}
              let b_value = ${m===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${be}>(${Array.from({length:4},(Y,te)=>`${be}(b_value_lower[${te}]), ${be}(b_value_upper[${te}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${be}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(Y,te)=>`${`dot(a_data${te}, b_dequantized_values[${te}])`}`).join(" + ")};
              word_offset += ${8/h};
            }
            workgroupBarrier();
          }

          if (local_idx < ${b}) {
            var output_value: ${le.type.value} = ${le.type.value}(0);
            for (var b = 0u; b < ${I}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${le.setByIndices(`${le.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${h};${m};${I};${b}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:x,dataType:g}],dispatchGroup:{x:E},programUniforms:C}),getShaderSource:U}},BO=(e,t)=>{ZS(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(eC(e.inputs,t)):e.compute(JS(e.inputs,t))},NO=e=>Sr(e)}),tC,nC,rC,aC,iC,oC,sC,lC,UO,WV=Ut(()=>{Pn(),Nn(),Un(),tC=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},nC=(e,t,n)=>{let r="";for(let o=t-1;o>=0;--o)r+=`
            k = i32(${e.indicesGet("indices",o)}) - ${ln("uniforms.pads",o,n)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${ln("uniforms.x_shape",o,t)})) {
              break;
            }
            offset += k * i32(${ln("uniforms.x_strides",o,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${r}
            value = x[offset];
          }
      `},rC=(e,t,n)=>{let r="";for(let o=t-1;o>=0;--o)r+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ln("uniforms.pads",o,n)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${ln("uniforms.x_shape",o,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${ln("uniforms.x_shape",o,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${ln("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r}
              value = x[offset];
          `},aC=(e,t,n)=>{let r="";for(let o=t-1;o>=0;--o)r+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ln("uniforms.pads",o,n)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${ln("uniforms.x_shape",o,t)})) {
                  k = i32(${ln("uniforms.x_shape",o,t)}) - 1;
                }
                offset += k * i32(${ln("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r}
              value = x[offset];
          `},iC=(e,t,n)=>{let r="";for(let o=t-1;o>=0;--o)r+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ln("uniforms.pads",o,n)};
                if (k < 0)  {
                  k += i32(${ln("uniforms.x_shape",o,t)}]);
                }
                if (k >= i32(${ln("uniforms.x_shape",o,t)})) {
                  k -= i32(${ln("uniforms.x_shape",o,t)});
                }
                offset += k * i32(${ln("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${r}
              value = x[offset];
          `},oC=(e,t,n)=>{switch(n.mode){case 0:return nC(e,t,n.pads.length);case 1:return rC(e,t,n.pads.length);case 2:return aC(e,t,n.pads.length);case 3:return iC(e,t,n.pads.length);default:throw new Error("Invalid mode")}},sC=(e,t)=>{let n=vt.padShape(e[0].dims.slice(),t.pads),r=e[0].dims,o=vt.size(n),s=[{type:12,data:o},{type:6,data:t.pads}],l=e.length>=3&&e[2].data;t.mode===0&&s.push({type:l?e[2].dataType:1,data:t.value}),s.push(...pn(e[0].dims,n));let u=["rank"],d=p=>{let g=an("output",e[0].dataType,n.length),h=xt("x",e[0].dataType,r.length),m=h.type.value,x=oC(g,r.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:l?m:"f32"}),`
            ${p.registerUniforms(_).declareVariables(h,g)}
            ${p.mainStart()}
            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${g.offsetToIndices("global_idx")};

            var value = ${m}(0);
            ${x}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${l}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(vt.size(n)/64)},programUniforms:s}),getShaderSource:d}},lC=(e,t)=>{if(e.length>1){let n=e[1].getBigInt64Array(),r=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,o=e[0].dims.length,s=new Int32Array(2*o).fill(0);if(e.length>=4){let u=e[3].getBigInt64Array();for(let d=0;d<u.length;d++)s[Number(u[d])]=Number(n[d]),s[Number(u[d])+o]=Number(n[d+u.length])}else n.forEach((u,d)=>s[Number(d)]=Number(u));let l=[];return s.forEach(u=>l.push(u)),{mode:t.mode,value:r,pads:l}}else return t},UO=(e,t)=>{tC(e.inputs);let n=lC(e.inputs,t);e.compute(sC(e.inputs,n),{inputs:[0]})}}),hg,d0,p0,f0,m0,cC,uC,h0,g0,VO,WO,_0,GO,KO,v0,HO,qO,XO,QO,GV=Ut(()=>{dl(),Pn(),Nn(),Un(),hg=e=>{if(ma.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},d0=(e,t,n)=>{let r=t.format==="NHWC",o=e.dims.slice();r&&o.splice(1,0,o.pop());let s=Object.hasOwnProperty.call(t,"dilations"),l=t.kernelShape.slice(),u=t.strides.slice(),d=s?t.dilations.slice():[],p=t.pads.slice();Bv.adjustPoolAttributes(n,o,l,u,d,p);let g=Bv.computePoolOutputShape(n,o,u,d,l,p,t.autoPad),h=Object.assign({},t);s?Object.assign(h,{kernelShape:l,strides:u,pads:p,dilations:d,cacheKey:t.cacheKey}):Object.assign(h,{kernelShape:l,strides:u,pads:p,cacheKey:t.cacheKey});let m=g.slice();return m.push(m.splice(1,1)[0]),[h,r?m:g]},p0=(e,t)=>{let n=t.format==="NHWC",r=vt.size(e),o=vt.size(t.kernelShape),s=[{type:12,data:r},{type:12,data:o}],l=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let u=t.kernelShape[t.kernelShape.length-1],d=t.strides[t.strides.length-1],p=t.pads[t.pads.length/2-1],g=t.pads[t.pads.length-1],h=!!(p+g);s.push({type:12,data:u},{type:12,data:d},{type:12,data:p},{type:12,data:g}),l.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let m=!1;if(t.kernelShape.length===2){let x=t.kernelShape[t.kernelShape.length-2],_=t.strides[t.strides.length-2],b=t.pads[t.pads.length/2-2],I=t.pads[t.pads.length-2];m=!!(b+I),s.push({type:12,data:x},{type:12,data:_},{type:12,data:b},{type:12,data:I}),l.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,l,!0,h,m]}else{if(n)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let u=vt.computeStrides(t.kernelShape);s.push({type:12,data:u},{type:12,data:t.pads},{type:12,data:t.strides}),l.push({name:"kernelStrides",type:"u32",length:u.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let d=t.pads.reduce((p,g)=>p+g);return[s,l,!!d,!1,!1]}},f0=(e,t,n,r,o,s,l,u,d,p,g,h)=>{let m=o.format==="NHWC",x=t.type.value,_=an("output",t.type.tensor,r);if(o.kernelShape.length<=2){let b="",I="",T="",S=n-(m?2:1);if(g?b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${S}] = indices[${S}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${S}] < 0 || xIndices[${S}]
                      >= uniforms.x_shape[${S}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`:b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${S}] = indices[${S}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`,o.kernelShape.length===2){let D=n-(m?3:2);h?I=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${D}] = indices[${D}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${D}] < 0 || xIndices[${D}] >= uniforms.x_shape[${D}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:I=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${D}] = indices[${D}] * uniforms.sh - uniforms.phStart + j;
                `,T=`
              }
            `}return`
            ${e.registerUniforms(d).declareVariables(t,_)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${_.offsetToIndices("global_idx")};
              var xIndices = ${_.offsetToIndices("global_idx")};

              var value = ${x}(${u});
              var pad = 0;
              ${I}
              ${b}
              ${T}
              ${l}

              output[global_idx] = value;
            }`}else{if(m)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let b=o.kernelShape.length,I=o.pads.length,T="";return p?T=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${s}
              }`:T=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms(d).declareVariables(t,_)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${_.offsetToIndices("global_idx")};
              var xIndices = ${_.offsetToIndices("global_idx")};

              var offsets: array<u32, ${b}>;

              var value = ${x}(${u});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${b-1}u; j++) {
                  offsets[j] = offset / ${ln("uniforms.kernelStrides","j",b)};
                  offset -= offsets[j] * ${ln("uniforms.kernelStrides","j",b)};
                }
                offsets[${b-1}] = offset;

                isPad = false;
                for (var j = ${n-b}u; j < ${n}u; j++) {
                  xIndices[j] = indices[j] * ${ln("uniforms.strides",`j - ${n-b}u`,b)}
                    + offsets[j - ${n-b}u] - ${ln("uniforms.pads","j - 2u",I)};
                  ${T}
              }
              ${l}

              output[global_idx] = value;
            }`}},m0=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,cC=e=>`${m0(e)};${e.countIncludePad}`,uC=e=>`${m0(e)};${e.storageOrder};${e.dilations}`,h0=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),g0=(e,t,n,r)=>{let[o,s]=d0(t,r,n),l=xt("x",t.dataType,t.dims.length),u=l.type.value,d="value += x_val;",p="";o.countIncludePad?p+=`value /= ${u}(uniforms.kernelSize);`:p+=`value /= ${u}(i32(uniforms.kernelSize) - pad);`;let[g,h,m,x,_]=p0(s,o);g.push(...pn(t.dims,s));let b=["rank"];return{name:e,shaderCache:{hint:`${r.cacheKey};${m};${x};${_}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(vt.size(s)/64)},programUniforms:g}),getShaderSource:I=>f0(I,l,t.dims.length,s.length,o,d,p,0,h,m,x,_)}},VO=e=>{let t=e.count_include_pad!==0,n=h0(e);if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let r={countIncludePad:t,...n,cacheKey:""};return{...r,cacheKey:cC(r)}},WO=(e,t)=>{hg(e.inputs),e.compute(g0("AveragePool",e.inputs[0],!1,t))},_0={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},GO=e=>{let t=e.format;return{format:t,..._0,cacheKey:t}},KO=(e,t)=>{hg(e.inputs),e.compute(g0("GlobalAveragePool",e.inputs[0],!0,t))},v0=(e,t,n,r)=>{let[o,s]=d0(t,r,n),l=`
      value = max(x_val, value);
    `,u="",d=xt("x",t.dataType,t.dims.length),p=["rank"],[g,h,m,x,_]=p0(s,o);return g.push(...pn(t.dims,s)),{name:e,shaderCache:{hint:`${r.cacheKey};${m};${x};${_}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(vt.size(s)/64)},programUniforms:g}),getShaderSource:b=>f0(b,d,t.dims.length,s.length,o,l,u,t.dataType===10?-65504:-1e5,h,m,x,_)}},HO=(e,t)=>{hg(e.inputs),e.compute(v0("MaxPool",e.inputs[0],!1,t))},qO=e=>{let t=e.storage_order,n=e.dilations,r=h0(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let o={storageOrder:t,dilations:n,...r,cacheKey:""};return{...o,cacheKey:uC(o)}},XO=e=>{let t=e.format;return{format:t,..._0,cacheKey:t}},QO=(e,t)=>{hg(e.inputs),e.compute(v0("GlobalMaxPool",e.inputs[0],!0,t))}}),dC,pC,YO,ZO,KV=Ut(()=>{Pn(),Nn(),Na(),Un(),dC=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((n,r)=>n===e[2].dims[r]).reduce((n,r)=>n&&r,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((o,s)=>s===t.axis||o===e[0].dims[s]).reduce((o,s)=>o&&s,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let n=e[0].dims[t.axis],r=e[1].dims[t.axis];if(t.blockSize<Math.ceil(n/r)||t.blockSize>Math.ceil(n/(r-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},pC=(e,t)=>{let n=vt.normalizeAxis(t.axis,e[0].dims.length),r=e[0].dataType,o=r===3,s=e[0].dims,l=e[1].dataType,u=vt.size(s),d=r===3||r===2,p=d?[Math.ceil(vt.size(e[0].dims)/4)]:e[0].dims,g=e[1].dims,h=e.length>2?e[2]:void 0,m=h?d?[Math.ceil(vt.size(h.dims)/4)]:h.dims:void 0,x=g.length===0||g.length===1&&g[0]===1,_=x===!1&&g.length===1,b=ka(u),I=x&&(!d||b===4),T=I?b:1,S=I&&!d?b:1,D=xt("input",d?12:r,p.length,S),E=xt("scale",l,g.length),C=h?xt("zero_point",d?12:r,m.length):void 0,P=an("output",l,s.length,T),w=[D,E];C&&w.push(C);let R=[p,g];h&&R.push(m);let U=[{type:12,data:u/T},{type:12,data:n},{type:12,data:t.blockSize},...pn(...R,s)],N=ie=>{let ee=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${ie.registerUniforms(ee).declareVariables(...w,P)}
      ${ie.mainStart()}
          ${ie.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${P.offsetToIndices("global_idx")};

          // Set input x
          ${d?`
            let input = ${D.getByOffset("global_idx / 4")};
            let x_vec = ${o?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${T===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${D.getByOffset("global_idx")};`};

          // Set scale input
          ${x?`let scale_value= ${E.getByOffset("0")}`:_?`
            let scale_index = ${P.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${E.getByOffset("scale_index")};`:`
            var scale_indices: ${E.type.indices} = output_indices;
            let index = ${E.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${E.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${E.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${C?x?d?`
                let zero_point_input = ${C.getByOffset("0")};
                let zero_point_vec =  ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${C.getByOffset("0")}`:_?d?`
                let zero_point_index = ${P.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${C.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${P.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${C.getByOffset("zero_point_index")};`:d?`
                let zero_point_offset = ${E.indicesToOffset("scale_indices")};
                let zero_point_input = ${C.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${C.getByIndices("scale_indices")};`:`let zero_point_value = ${d?o?"i32":"u32":D.type.value}(0);`};
      // Compute and write output
      ${P.setByOffset("global_idx",`${P.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:C?["rank","rank","rank"]:["rank","rank"]},getShaderSource:N,getRunData:()=>({outputs:[{dims:s,dataType:l}],dispatchGroup:{x:Math.ceil(u/T/64),y:1,z:1},programUniforms:U})}},YO=(e,t)=>{dC(e.inputs,t),e.compute(pC(e.inputs,t))},ZO=e=>Sr({axis:e.axis,blockSize:e.blockSize})}),fC,mC,JO,HV=Ut(()=>{dl(),Pn(),Un(),fC=(e,t,n)=>{let r=e===t,o=e<t&&n<0,s=e>t&&n>0;if(r||o||s)throw new Error("Range these inputs' contents are invalid.")},mC=(e,t,n,r)=>{let o=Math.abs(Math.ceil((t-e)/n)),s=[o],l=o,u=[{type:12,data:l},{type:r,data:e},{type:r,data:n},...pn(s)],d=p=>{let g=an("output",r,s.length),h=g.type.value,m=[{name:"outputSize",type:"u32"},{name:"start",type:h},{name:"delta",type:h}];return`
        ${p.registerUniforms(m).declareVariables(g)}
        ${p.mainStart()}
        ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${h}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${r}`},getShaderSource:d,getRunData:()=>({outputs:[{dims:s,dataType:r}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u})}},JO=e=>{let t=0,n=0,r=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],n=e.inputs[1].getInt32Array()[0],r=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],n=e.inputs[1].getFloat32Array()[0],r=e.inputs[2].getFloat32Array()[0]),ma.webgpu.validateInputContent&&fC(t,n,r),e.compute(mC(t,n,r,e.inputs[0].dataType),{inputs:[]})}}),hC,y0,b0,gC,e$,t$,qV=Ut(()=>{Pn(),Nn(),Na(),Un(),hC=(e,t,n,r)=>{if(e!=="none"&&r!=="i32"&&r!=="u32"&&r!=="f32")throw new Error(`Input ${r} is not supported with reduction ${e}.`);let o=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,s=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${n};`;case"add":return r==="i32"||r==="u32"?`atomicAdd(&${t}, bitcast<${r}>(${n}));`:`
              ${o}bitcast<${r}>(oldValue) + (${n})${s}`;case"max":return r==="i32"||r==="u32"?`atomicMax(&${t}, bitcast<${r}>(${n}));`:`
                ${o}max(bitcast<f32>(oldValue), (${n}))${s}`;case"min":return r==="i32"||r==="u32"?`atomicMin(&${t}, bitcast<${r}>(${n}));`:`${o}min(bitcast<${r}>(oldValue), (${n}))${s}`;case"mul":return`${o}(bitcast<${r}>(oldValue) * (${n}))${s}`;default:throw new Error(`Reduction ${e} is not supported.`)}},y0=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,b0=(e,t,n)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${n?"global_idx":"idx"} + i];
        ${hC(e.reduction,"output[data_offset + i]","value",t)}
      }`,gC=(e,t)=>{let n=e[0].dims,r=e[1].dims,o=n,s=1,l=Math.ceil(vt.size(r)/s),u=r[r.length-1],d=vt.sizeFromDimension(n,u),p=vt.sizeFromDimension(r,0)/u,g=[{type:12,data:l},{type:12,data:u},{type:12,data:d},...pn(e[1].dims,e[2].dims,o)],h=m=>{let x=xt("indices",e[1].dataType,e[1].dims.length),_=xt("updates",e[2].dataType,e[2].dims.length,s),b=t.reduction!=="none"&&t.reduction!==""?kk("output",e[0].dataType,o.length):an("output",e[0].dataType,o.length,s);return`
      ${m.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(x,_,b)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${p}; i = i + 1) {
      for (var j = i + 1; j < ${p}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${p}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${y0(n.length,!1)}
      }
      ${b0(t,b.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${y0(n.length,!0)}
  }
  ${b0(t,b.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:g}),getShaderSource:h}},e$=e=>Sr({reduction:e.reduction}),t$=(e,t)=>{e.compute(gC(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),_C,vC,yC,x0,bC,xC,wC,MC,TC,EC,SC,CC,w0,PC,kC,AC,OC,$C,n$,r$,XV=Ut(()=>{Pn(),Nn(),Na(),Un(),_C=(e,t)=>{if(e.every(n=>n>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},vC=(e,t,n)=>{t.every(o=>o>=0&&o<n||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let r=new Array(n).fill(1);return t.forEach((o,s)=>r[o]=e[s]),r},yC=(e,t,n,r,o,s)=>{let[l,u,d]=n>10?[1,2,3]:[-1,e.length>1?1:-1,-1],p=e[0].dims.length;if(l>0&&e.length>l&&e[l].dims.length>0)e[l].getFloat32Array().forEach(g=>s.push(g));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(u>0&&e.length>u&&e[u].dims.length===1&&e[u].dims[0]>0){if(e[u].getFloat32Array().forEach(g=>r.push(g)),r.length!==0&&r.length!==p&&n>=18&&r.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_C(r,t),t.axes.length>0&&vC(r,t.axes,p).forEach((g,h)=>r[h]=g)}if(d>0&&e.length>d&&e[d].dims.length===1&&e[d].dims[0]>0&&(e[d].getBigInt64Array().forEach(g=>o.push(Number(g))),o.length!==0&&o.length!==p&&n>=18&&o.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(r.length!==0&&r.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(o.length!==0&&o.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof r<"u"&&typeof o<"u"&&r.length>0&&o.length>p)throw new Error("Resize requires only of scales or sizes to be specified")},x0=(e,t,n,r)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${r}(big / (${n}));
  let fract = ${r}(big % (${n})) / ${r}(${n});
  return whole + fract;
`,bC=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${x0("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${x0("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xC=(e,t,n)=>`fn getNearestPixelFromOriginal(xOriginal: ${n}, isDownSample: bool) -> ${n} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",wC=(e,t,n)=>{let r=new Array(n).fill(0).concat(new Array(n).fill(1)),o=e.length===0?r:e.slice();return t.length>0?(t.forEach((s,l)=>{r[s]=o[l],r[l+n]=o[t.length+l]}),r):o},MC=(e,t,n,r)=>{let o=[];if(n.length>0)if(r.length>0){if(e.forEach(s=>o.push(s)),Math.max(...r)>e.length)throw new Error("axes is out of bound");r.forEach((s,l)=>o[s]=n[l])}else n.forEach(s=>o.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");o=e.map((s,l)=>Math.round(s*t[l]))}return o},TC=(e,t,n)=>{let r=(()=>{switch(n.keepAspectRatioPolicy){case"not_larger":return n.axes.length>0?Math.min(...n.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return n.axes.length>0?Math.max(...n.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${n.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let o=e.slice();return n.axes.length>0?(n.axes.forEach(s=>t[s]=r),n.axes.forEach(s=>o[s]=Math.round(e[s]*t[s]))):(t.fill(r,0,t.length),o.forEach((s,l)=>o[l]=Math.round(s*t[l]))),o},EC=(e,t,n,r,o)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${n.length}> {
      var original_indices: array<${e.type.value}, ${n.length}>;
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${ln("uniforms.scales","i",r)};
        var roi_low = ${ln("uniforms.roi","i",o)};
        var roi_hi = ${ln("uniforms.roi",`i + ${t.length}`,o)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${ln("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${ln("uniforms.output_shape","i",n.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,SC=(e,t,n,r,o,s,l)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${ln("uniforms.scales","i",o)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${ln("uniforms.roi","i",s)};
          var roi_hi = ${ln("uniforms.roi",`i + ${n.length}`,s)};
          var input_shape_i = ${ln("uniforms.input_shape","i",n.length)};
          var output_shape_i = ${ln("uniforms.output_shape","i",r.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${l} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,CC=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${ln("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,w0=(e,t,n,r)=>e.rank>r?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",n,"batch")};
`:"",PC=(e,t,n,r,o)=>{let[s,l,u,d]=n.length===2?[-1,0,1,-1]:[0,2,3,1],p=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${p} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",l,`max(0, min(row, ${n[l]} - 1))`)};
      ${e.indicesSet("input_indices",u,`max(0, min(col, ${n[u]} - 1))`)};
      ${w0(e,d,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${p} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${p} = originalIndices[${l}];
      var col:${p} = originalIndices[${u}];
      ${r?`if (row < 0 || row > (${n[l]} - 1) || col < 0 || col > (${n[u]} - 1)) {
        return ${o};
      }`:""};
      row = max(0, min(row, ${n[l]} - 1));
      col = max(0, min(col, ${n[u]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${n.length>2?`u32(originalIndices[${d}])`:"0"};
      var batch: u32 =  ${n.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${p} = getInputValue(batch, channel, row1, col1);
      var x12: ${p} = getInputValue(batch, channel, row1, col2);
      var x21: ${p} = getInputValue(batch, channel, row2, col1);
      var x22: ${p} = getInputValue(batch, channel, row2, col2);
      var dx1: ${p} = abs(row - ${p}(row1));
      var dx2: ${p} = abs(${p}(row2) - row);
      var dy1: ${p} = abs(col - ${p}(col1));
      var dy2: ${p} = abs(${p}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},kC=(e,t,n,r,o,s,l,u,d,p)=>{let g=n.length===2,[h,m]=g?[0,1]:[2,3],x=e.type.value,_=b=>{let I=b===h?"row":"col";return`
      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${x} {
        var output_index = ${t.indicesGet("output_indices",b)};
        var originalIdx: ${x} = getOriginalCoordinateFromResizedCoordinate(output_index, ${o[b]},
        ${r[b]}, ${n[b]}, ${s[b]}, ${s[b]} + ${n.length});
        var fractOriginalIdx: ${x} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${u} && (originalIdx < 0 || originalIdx > (${n[b]} - 1))) {
          return ${d};
        }
        var data: array<${x}, 4> = array<${x}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${I}: ${x} = originalIdx + ${x}(i);
          if (${I} < 0 || ${I} >= ${n[b]}) {
            ${p?`coefs[i + 1] = 0.0;
                        continue;`:u?`return ${d};`:`${I} = max(0, min(${I}, ${n[b]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",b,`u32(${I})`)};
          data[i + 1] = ${b===h?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${_(h)};
    ${_(m)};
  fn getCubicInterpolationCoefs(s: ${x}) -> array<${x}, 4> {
    var absS = abs(s);
    var coeffs: array<${x}, 4> = array<${x}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${x} = 1.0 - absS;
    var twoMinusAbsS: ${x} = 2.0 - absS;
    var onePlusAbsS: ${x} = 1.0 + absS;
    coeffs[0] = ((${l} * onePlusAbsS - 5 * ${l}) * onePlusAbsS + 8 * ${l}) * onePlusAbsS - 4 * ${l};
    coeffs[1] = ((${l} + 2) * absS - (${l} + 3)) * absS * absS + 1;
    coeffs[2] = ((${l} + 2) * oneMinusAbsS - (${l} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${l} * twoMinusAbsS - 5 * ${l}) * twoMinusAbsS + 8 * ${l}) * twoMinusAbsS - 4 * ${l};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${x}, 4>, coefs: array<${x}, 4>) -> ${x} {
    var coefsSum: ${x} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${x} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},AC=(e,t,n,r,o)=>{let[s,l,u,d,p]=n.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],g=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${g} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",l,`max(0, min(depth, ${n[l]} - 1))`)};
      ${e.indicesSet("input_indices",u,`max(0, min(height, ${n[u]} - 1))`)};
      ${e.indicesSet("input_indices",d,`max(0, min(width, ${n[d]} - 1))`)};
      ${w0(e,p,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${g} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${g} = originalIndices[${l}];
      var height:${g} = originalIndices[${u}];
      var width:${g} = originalIndices[${d}];
      ${r?`if (depth < 0 || depth > (${n[l]} - 1) || height < 0 || height > (${n[u]} - 1) || width < 0 || (width > ${n[d]} - 1)) {
      return ${o};
        }`:""};

    depth = max(0, min(depth, ${n[l]} - 1));
      height = max(0, min(height, ${n[u]} - 1));
      width = max(0, min(width, ${n[d]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${n.length>3?`u32(originalIndices[${p}])`:"0"};
      var batch: u32 =  ${n.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${g} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${g} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${g} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${g} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${g} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${g} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${g} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${g} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${g} = abs(depth - ${g}(depth1));
      var dx2: ${g} = abs(${g}(depth2) - depth);
      var dy1: ${g} = abs(height - ${g}(height1));
      var dy2: ${g} = abs(${g}(height2) - height);
      var dz1: ${g} = abs(width - ${g}(width1));
      var dz2: ${g} = abs(${g}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},OC=(e,t,n,r,o,s)=>{let l=e.dims,u=wC(s,t.axes,l.length),d=MC(l,r,o,t.axes),p=r.slice();r.length===0&&(p=l.map((S,D)=>S===0?1:d[D]/S),t.keepAspectRatioPolicy!=="stretch"&&(d=TC(l,p,t)));let g=an("output",e.dataType,d.length),h=xt("input",e.dataType,l.length),m=vt.size(d),x=l.length===d.length&&l.every((S,D)=>S===d[D]),_=t.coordinateTransformMode==="tf_crop_and_resize",b=t.extrapolationValue,I=h.type.value,T=S=>`
      ${x?"":`
      ${bC(t.coordinateTransformMode,I)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${CC(h,l)};
              ${xC(t.nearestMode,n,I)};
              ${SC(h,g,l,d,p.length,u.length,_)};
              `;case"linear":return`
              ${EC(g,l,d,p.length,u.length)};
              ${(()=>{if(l.length===2||l.length===4)return`${PC(h,g,l,_,b)}`;if(l.length===3||l.length===5)return`${AC(h,g,l,_,b)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(l.length===2||l.length===4)return`${kC(h,g,l,d,p,u,t.cubicCoeffA,_,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${S.registerUniform("output_size","u32").registerUniform("scales","f32",p.length).registerUniform("roi","f32",u.length).declareVariables(h,g)}
      ${S.mainStart()}
        ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${x?"output[global_idx] = input[global_idx];":`
        let output_indices = ${g.offsetToIndices("global_idx")};
        var input_indices: ${h.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${h.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${l.length===2||l.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${n}|${p.length>0?t.mode==="cubic"?p:p.length:""}|${o.length>0?o:""}|${u.length>0?u:""}|${x}|${t.mode==="nearest"?l.length:l}`,inputDependencies:["rank"]},getShaderSource:T,getRunData:()=>({outputs:[{dims:d,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},{type:1,data:p},{type:1,data:u},...pn(l,d)]})}},$C=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},n$=(e,t)=>{let n=[],r=[],o=[],s=$C(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");yC(e.inputs,t,s,n,r,o),e.compute(OC(e.inputs[0],t,s,n,r,o),{inputs:[0]})},r$=e=>{let t=e.antialias,n=e.axes,r=e.coordinateTransformMode,o=e.cubicCoeffA,s=e.excludeOutside!==0,l=e.extrapolationValue,u=e.keepAspectRatioPolicy,d=e.mode,p=e.nearestMode===""?"simple":e.nearestMode;return Sr({antialias:t,axes:n,coordinateTransformMode:r,cubicCoeffA:o,excludeOutside:s,extrapolationValue:l,keepAspectRatioPolicy:u,mode:d,nearestMode:p})}}),DC,IC,a$,QV=Ut(()=>{Pn(),Nn(),Un(),DC=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],n=e[1],r=e[2];if(t.dataType!==n.dataType||t.dataType!==r.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(n.dims.length!==3&&n.dims.length!==2)throw new Error("Skip must be 2D or 3D");let o=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(n.dims[n.dims.length-1]!==o)throw new Error("Skip must have the same hidden size as input");if(n.dims[n.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(r.dims.length!==1)throw new Error("Gamma must be 1D");if(r.dims[r.dims.length-1]!==o)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let l=e[3];if(l.dims.length!==1)throw new Error("Beta must be 1D");if(l.dims[l.dims.length-1]!==o)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let l=e[4];if(l.dims.length!==1)throw new Error("Bias must be 1D");if(l.dims[l.dims.length-1]!==o)throw new Error("Bias must have the same hidden size as input")}},IC=(e,t,n,r)=>{let o=t.simplified,s=e[0].dims,l=vt.size(s),u=s,d=l,p=s.slice(-1)[0],g=r?s.slice(0,-1).concat(1):[],h=!o&&e.length>3,m=e.length>4,x=r&&n>1,_=r&&n>2,b=n>3,I=64,T=ka(p),S=[{type:12,data:d},{type:12,data:T},{type:12,data:p},{type:1,data:t.epsilon}],D=C=>{let P=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],w=[xt("x",e[0].dataType,e[0].dims,T),xt("skip",e[1].dataType,e[1].dims,T),xt("gamma",e[2].dataType,e[2].dims,T)];h&&w.push(xt("beta",e[3].dataType,e[3].dims,T)),m&&w.push(xt("bias",e[4].dataType,e[4].dims,T)),w.push(an("output",e[0].dataType,u,T)),x&&w.push(an("mean_output",1,g)),_&&w.push(an("inv_std_output",1,g)),b&&w.push(an("input_skip_bias_sum",e[0].dataType,u,T));let R=_i(e[0].dataType),U=_i(1,T);return`

      ${C.registerUniforms(P).declareVariables(...w)}
      var<workgroup> sum_shared : array<${U}, ${I}>;
      var<workgroup> sum_squared_shared : array<${U}, ${I}>;

      ${C.mainStart([I,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${I};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${I};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${I-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${m?"bias[offset1d + i]":R+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${b?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${gf(R,T,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${I};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${yu("sum",T)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${yu("square_sum",T)} / f32(uniforms.hidden_size) ${o?"":"- mean * mean"} + uniforms.epsilon);
        ${x?"mean_output[global_idx] = mean;":""}
        ${_?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${o?"":`- ${R}(mean)`}) *
            ${R}(inv_std_dev) * gamma[offset1d + i]
            ${h?"+ beta[offset1d + i]":""};
        }
      }`},E=[{dims:u,dataType:e[0].dataType}];return n>1&&E.push({dims:g,dataType:1}),n>2&&E.push({dims:g,dataType:1}),n>3&&E.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${T};${x};${_};${b}`,inputDependencies:e.map((C,P)=>"type")},getShaderSource:D,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(d/p)},programUniforms:S})}},a$=(e,t)=>{DC(e.inputs);let n=[0];e.outputCount>1&&n.push(-3),e.outputCount>2&&n.push(-3),e.outputCount>3&&n.push(3),e.compute(IC(e.inputs,t,e.outputCount,!1),{outputs:n})}}),RC,gg,LC,M0,zC,FC,i$,o$,YV=Ut(()=>{Pn(),Nn(),Na(),Un(),RC=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((n,r)=>{if(e[r+1].dataType!==6&&e[r+1].dataType!==7)throw new Error(`Input ${r} must be an array of int32 or int64`)})},gg=(e,t)=>{let n=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(r=>n.push(Number(r)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(r=>n.push(Number(r)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return n},LC=(e,t)=>{if(e.length>1){let n=gg(e,1),r=gg(e,2),o=gg(e,3);return o.length===0&&(o=[...Array(e[0].dims.length).keys()]),Sr({starts:n,ends:r,axes:o})}else return t},M0=(e,t,n,r,o)=>{let s=e;return e<0&&(s+=n[r[t]]),o[t]<0?Math.max(0,Math.min(s,n[r[t]]-1)):Math.max(0,Math.min(s,n[r[t]]))},zC=(e,t,n)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${n.length}; i >= 0; i--) {
            let input_shape_i = ${ln("uniforms.input_shape","i",n.length)};
            let steps_i = ${ln("uniforms.steps","i",n.length)};
            let signs_i = ${ln("uniforms.signs","i",n.length)};
            let starts_i = ${ln("uniforms.starts","i",n.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,FC=(e,t)=>{let n=e[0].dims,r=vt.size(n),o=t.axes.length>0?vt.normalizeAxes(t.axes,n.length):[...Array(n.length).keys()],s=gg(e,4);s.forEach(T=>T!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(o.length).fill(1));let l=t.starts.map((T,S)=>M0(T,S,n,o,s)),u=t.ends.map((T,S)=>M0(T,S,n,o,s));if(o.length!==l.length||o.length!==u.length)throw new Error("start, ends and axes should have the same number of elements");if(o.length!==n.length)for(let T=0;T<n.length;++T)o.includes(T)||(l.splice(T,0,0),u.splice(T,0,n[T]),s.splice(T,0,1));let d=s.map(T=>Math.sign(T));s.forEach((T,S,D)=>{if(T<0){let E=(u[S]-l[S])/T,C=l[S],P=C+E*s[S];l[S]=P,u[S]=C,D[S]=-T}});let p=n.slice(0);o.forEach((T,S)=>{p[T]=Math.ceil((u[T]-l[T])/s[T])});let g={dims:p,dataType:e[0].dataType},h=an("output",e[0].dataType,p.length),m=xt("input",e[0].dataType,e[0].dims.length),x=vt.size(p),_=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:l.length},{name:"signs",type:"i32",length:d.length},{name:"steps",type:"u32",length:s.length}],b=[{type:12,data:x},{type:12,data:l},{type:6,data:d},{type:12,data:s},...pn(e[0].dims,p)],I=T=>`
      ${T.registerUniforms(_).declareVariables(m,h)}
        ${zC(m,h,n)}
        ${T.mainStart()}
          ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${h.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${h.setByOffset("global_idx",m.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${d.length}_${l.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[g],dispatchGroup:{x:Math.ceil(r/64)},programUniforms:b})}},i$=(e,t)=>{RC(e.inputs,t);let n=LC(e.inputs,t);e.compute(FC(e.inputs,n),{inputs:[0]})},o$=e=>{let t=e.starts,n=e.ends,r=e.axes;return Sr({starts:t,ends:n,axes:r})}}),jC,BC,s$,l$,ZV=Ut(()=>{Pn(),Nn(),Na(),xu(),Un(),jC=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},BC=(e,t)=>{let n=e.inputs[0],r=n.dims,o=vt.size(r),s=r.length,l=vt.normalizeAxis(t.axis,s),u=l<r.length-1,d,p=[];u?(p=Array.from({length:s},(w,R)=>R),p[l]=s-1,p[s-1]=l,d=e.compute(Go(n,p),{inputs:[n],outputs:[-1]})[0]):d=n;let g=d.dims,h=g[s-1],m=o/h,x=ka(h),_=h/x,b=64;m===1&&(b=256);let I=(w,R)=>R===4?`max(max(${w}.x, ${w}.y), max(${w}.z, ${w}.w))`:R===2?`max(${w}.x, ${w}.y)`:R===3?`max(max(${w}.x, ${w}.y), ${w}.z)`:w,T=xt("x",d.dataType,d.dims,x),S=an("result",d.dataType,d.dims,x),D=T.type.value,E=_i(d.dataType)==="f32"?`var threadMax = ${D}(-3.402823e+38f);`:`var threadMax = ${D}(-65504.0h);`,C=w=>`
      var<workgroup> rowMaxShared : ${D};
      var<workgroup> rowSumShared : ${D};
      var<workgroup> threadShared : array<${D}, ${b}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${D} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${D}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${w.registerUniform("packedCols","i32").declareVariables(T,S)}
      ${w.mainStart(b)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${b};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${E}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${D}(${I("threadShared[0]",x)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${D}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${D}(${yu("threadShared[0]",x)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,P=e.compute({name:"Softmax",shaderCache:{hint:`${x};${b}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:g,dataType:d.dataType}],dispatchGroup:{x:m},programUniforms:[{type:6,data:_}]}),getShaderSource:C},{inputs:[d],outputs:[u?-1:0]})[0];u&&e.compute(Go(P,p),{inputs:[P]})},s$=(e,t)=>{jC(e.inputs),BC(e,t)},l$=e=>Sr({axis:e.axis})}),T0,NC,UC,VC,c$,JV=Ut(()=>{Pn(),Nn(),Un(),T0=e=>Array.from(e.getBigInt64Array(),Number),NC=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(T0(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},UC=(e,t)=>{let n=[];for(let r=0;r<e.length;++r)n.push(e[r]*t[r]);return n},VC=(e,t)=>{let n=e[0].dims,r=t??T0(e[1]),o=UC(n,r),s=vt.size(o),l=e[0].dataType,u=xt("input",l,n.length),d=an("output",l,o.length),p=g=>`
      const inputShape = ${u.indices(...n)};
      ${g.registerUniform("output_size","u32").declareVariables(u,d)}
      ${g.mainStart()}
      ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${d.offsetToIndices("global_idx")};
      var input_indices: ${u.type.indices};
      for (var i = 0; i < ${n.length}; i++) {
        let input_dim_i = ${u.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${d.indicesGet("output_indices","i")}  % input_dim_i;

        ${u.indicesSet("input_indices","i","input_dim_value")}
      }
      ${d.setByOffset("global_idx",u.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},...pn(e[0].dims,o)]}),getShaderSource:p}},c$=e=>{NC(e.inputs),e.compute(VC(e.inputs),{inputs:[0]})}}),WC,GC,u$,e8=Ut(()=>{Pn(),Nn(),Un(),WC=(e,t,n,r,o)=>{let s=an("output_data",o,n.length,4),l=xt("a_data",t[1].dataType,t[1].dims.length,4),u=xt("b_data",t[2].dataType,t[2].dims.length,4),d=xt("c_data",t[0].dataType,t[0].dims.length,4),p,g=(h,m,x)=>`select(${m}, ${h}, ${x})`;if(!r)p=s.setByOffset("global_idx",g(l.getByOffset("global_idx"),u.getByOffset("global_idx"),d.getByOffset("global_idx")));else{let h=(m,x,_="")=>{let b=`a_data[index_a${x}][component_a${x}]`,I=`b_data[index_b${x}][component_b${x}]`,T=`bool(c_data[index_c${x}] & (0xffu << (component_c${x} * 8)))`;return`
            let output_indices${x} = ${s.offsetToIndices(`global_idx * 4u + ${x}u`)};
            let offset_a${x} = ${l.broadcastedIndicesToOffset(`output_indices${x}`,s)};
            let offset_b${x} = ${u.broadcastedIndicesToOffset(`output_indices${x}`,s)};
            let offset_c${x} = ${d.broadcastedIndicesToOffset(`output_indices${x}`,s)};
            let index_a${x} = offset_a${x} / 4u;
            let index_b${x} = offset_b${x} / 4u;
            let index_c${x} = offset_c${x} / 4u;
            let component_a${x} = offset_a${x} % 4u;
            let component_b${x} = offset_b${x} % 4u;
            let component_c${x} = offset_c${x} % 4u;
            ${m}[${x}] = ${_}(${g(b,I,T)});
          `};o===9?p=`
            var data = vec4<u32>(0);
            ${h("data",0,"u32")}
            ${h("data",1,"u32")}
            ${h("data",2,"u32")}
            ${h("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:p=`
            ${h("output_data[global_idx]",0)}
            ${h("output_data[global_idx]",1)}
            ${h("output_data[global_idx]",2)}
            ${h("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(d,l,u,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${p}
      }`},GC=e=>{let t=e[1].dims,n=e[2].dims,r=e[0].dims,o=e[1].dataType,s=!(vt.areEqual(t,n)&&vt.areEqual(n,r)),l=t,u=vt.size(t);if(s){let p=Sf.calcShape(Sf.calcShape(t,n,!1),r,!1);if(!p)throw new Error("Can't perform where op on the given tensors");l=p,u=vt.size(l)}let d=Math.ceil(u/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:p=>WC(p,e,l,s,o),getRunData:()=>({outputs:[{dims:l,dataType:o}],dispatchGroup:{x:Math.ceil(u/64/4)},programUniforms:[{type:12,data:d},...pn(r,t,n,l)]})}},u$=e=>{e.compute(GC(e.inputs))}}),d$,t8=Ut(()=>{hV(),dw(),gV(),_V(),vV(),yV(),bV(),EV(),CV(),PV(),kV(),AV(),OV(),$V(),DV(),IV(),RV(),LV(),zV(),FV(),jV(),BV(),NV(),UV(),VV(),AO(),WV(),GV(),KV(),HV(),qV(),uw(),XV(),RO(),QV(),YV(),ZV(),DO(),JV(),xu(),pw(),e8(),d$=new Map([["Abs",[aA]],["Acos",[iA]],["Acosh",[oA]],["Add",[BA]],["ArgMax",[eA,lx]],["ArgMin",[Jk,lx]],["Asin",[sA]],["Asinh",[lA]],["Atan",[cA]],["Atanh",[uA]],["Attention",[tA]],["AveragePool",[WO,VO]],["BatchNormalization",[nA]],["BiasAdd",[rA]],["BiasSplitGelu",[jA]],["Cast",[pA,dA]],["Ceil",[mA]],["Clip",[fA]],["Concat",[QA,YA]],["Conv",[mx,fx]],["ConvTranspose",[sO,oO]],["Cos",[hA]],["Cosh",[gA]],["CumSum",[lO,cO]],["DepthToSpace",[uO,dO]],["DequantizeLinear",[YO,ZO]],["Div",[NA]],["Einsum",[pO,fO]],["Elu",[_A,Mg]],["Equal",[UA]],["Erf",[vA]],["Exp",[yA]],["Expand",[mO]],["FastGelu",[hO]],["Floor",[bA]],["FusedConv",[mx,fx]],["Gather",[_O,gO]],["GatherElements",[MO,wO]],["GatherBlockQuantized",[bO,xO]],["GatherND",[vO,yO]],["Gelu",[xA]],["Gemm",[EO,TO]],["GlobalAveragePool",[KO,GO]],["GlobalMaxPool",[QO,XO]],["Greater",[KA]],["GreaterOrEqual",[qA]],["GridSample",[SO,CO]],["GroupQueryAttention",[LO]],["HardSigmoid",[kA,PA]],["InstanceNormalization",[zO]],["LayerNormalization",[FO]],["LeakyRelu",[wA,Mg]],["Less",[HA]],["LessOrEqual",[XA]],["Log",[zA]],["MatMul",[jO]],["MatMulNBits",[BO,NO]],["MaxPool",[HO,qO]],["Mul",[VA]],["MultiHeadAttention",[kO,PO]],["Neg",[TA]],["Not",[MA]],["Pad",[UO]],["Pow",[WA]],["QuickGelu",[FA,Mg]],["Range",[JO]],["Reciprocal",[EA]],["ReduceMin",[qk]],["ReduceMean",[Vk]],["ReduceMax",[Hk]],["ReduceSum",[Qk]],["ReduceProd",[Xk]],["ReduceL1",[Wk]],["ReduceL2",[Gk]],["ReduceLogSum",[Zk]],["ReduceLogSumExp",[Kk]],["ReduceSumSquare",[Yk]],["Relu",[SA]],["Resize",[n$,r$]],["RotaryEmbedding",[IO]],["ScatterND",[t$,e$]],["Sigmoid",[CA]],["Sin",[AA]],["Sinh",[OA]],["Slice",[i$,o$]],["SkipLayerNormalization",[a$]],["Split",[OO,$O]],["Sqrt",[$A]],["Softmax",[s$,l$]],["Sub",[GA]],["Tan",[DA]],["Tanh",[IA]],["ThresholdedRelu",[LA,Mg]],["Tile",[c$]],["Transpose",[Ok,$k]],["Where",[u$]]])}),p$,n8=Ut(()=>{dl(),Sc(),Un(),p$=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,n,r,o){cl(e.programInfo.name);let s=this.backend.device,l=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let u=[];for(let p of t)u.push({binding:u.length,resource:{buffer:p.buffer}});for(let p of n)u.push({binding:u.length,resource:{buffer:p.buffer}});o&&u.push({binding:u.length,resource:o});let d=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:u,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let p={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:d,dispatchGroup:r};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(p)}l.setPipeline(e.computePipeline),l.setBindGroup(0,d),l.dispatchWorkgroups(...r),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ws(e.programInfo.name)}dispose(){}build(e,t){cl(e.name);let n=this.backend.device,r=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(p=>{n.features.has(p.feature)&&r.push(`enable ${p.extension};`)});let o=Ak(t,this.backend.device.limits),s=e.getShaderSource(o),l=`${r.join(`
`)}
${o.additionalImplementations}
${s}`,u=n.createShaderModule({code:l,label:e.name});ur("verbose",()=>`[WebGPU] ${e.name} shader code: ${l}`);let d=n.createComputePipeline({compute:{module:u,entryPoint:"main"},layout:"auto",label:e.name});return ws(e.name),{programInfo:e,computePipeline:d,uniformVariablesInfo:o.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,n=typeof e=="number"?1:e.y||1,r=typeof e=="number"?1:e.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=o&&n<=o&&r<=o)return[t,n,r];let s=t*n*r,l=Math.ceil(Math.sqrt(s));if(l>o){if(l=Math.ceil(Math.cbrt(s)),l>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[l,l,l]}else return[l,l,1]}}}),f$={};jf(f$,{WebGpuBackend:()=>m$});var KC,HC,qC,m$,r8=Ut(()=>{dl(),Pn(),Sc(),Ek(),fV(),t8(),n8(),KC=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let n=[];for(let r=0;r<e.length;++r){let o=e[r].dataType;switch(t[r]){case"none":{n.push("");break}case"type":{n.push(`${o}`);break}case"rank":{let s=e[r].dims.length;n.push(`${o};${s}`);break}case"dims":{let s=e[r].dims.join(",");n.push(`${o};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[r]}`)}}return n.join("|")},HC=(e,t,n)=>{let r=e.name;return e.shaderCache?.hint&&(r+="["+e.shaderCache.hint+"]"),r+=":"+n+`:${KC(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,r},qC=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},m$=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let n=[],r={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:n},o=s=>t.features.has(s)&&n.push(s)&&!0;o("chromium-experimental-timestamp-query-inside-passes")||o("timestamp-query"),o("shader-f16"),o("subgroups"),this.device=await t.requestDevice(r),this.adapterInfo=new qC(t.info||await t.requestAdapterInfo()),this.gpuDataManager=Pk(this),this.programManager=new p$(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,ow(e.logLevel,!!e.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;cl(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{let t=new BigUint64Array(e.getMappedRange()),n=this.pendingQueries.get(e);for(let r=0;r<t.length/2;r++){let o=n[r],s=o.kernelId,l=this.kernels.get(s),u=l.kernelType,d=l.kernelName,p=o.programName,g=o.inputTensorViews,h=o.outputTensorViews,m=t[r*2],x=t[r*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=m);let _=Number(m-this.queryTimeBase),b=Number(x-this.queryTimeBase);if(!Number.isSafeInteger(_)||!Number.isSafeInteger(b))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:g.map(I=>({dims:I.dims,dataType:Mc(I.dataType)})),outputsMetadata:h.map(I=>({dims:I.dims,dataType:Mc(I.dataType)})),kernelId:s,kernelType:u,kernelName:d,programName:p,startTime:_,endTime:b});else{let I="";g.forEach((S,D)=>{I+=`input[${D}]: [${S.dims}] | ${Mc(S.dataType)}, `});let T="";h.forEach((S,D)=>{T+=`output[${D}]: [${S.dims}] | ${Mc(S.dataType)}, `}),console.log(`[profiling] kernel "${s}|${u}|${d}|${p}" ${I}${T}execution time: ${b-_} ns`)}Vg("GPU",`${p}::${m}::${x}`)}e.unmap(),this.pendingQueries.delete(e)}),ws()}run(e,t,n,r,o,s){cl(e.name);let l=[];for(let S=0;S<t.length;++S){let D=t[S].data;if(D===0)continue;let E=this.gpuDataManager.get(D);if(!E)throw new Error(`no GPU data for input: ${D}`);l.push(E)}let{outputs:u,dispatchGroup:d,programUniforms:p}=e.getRunData(t),g=n.length===0?u.map((S,D)=>D):n;if(g.length!==u.length)throw new Error(`Output size ${g.length} must be equal to ${u.length}.`);let h=[],m=[];for(let S=0;S<u.length;++S){if(!Number.isInteger(g[S])||g[S]<-3||g[S]>=s)throw new Error(`Invalid output index: ${g[S]}`);if(g[S]===-3)continue;let D=g[S]===-1,E=g[S]===-2,C=D||E?o(u[S].dataType,u[S].dims):r(g[S],u[S].dataType,u[S].dims);if(h.push(C),C.data===0)continue;let P=this.gpuDataManager.get(C.data);if(!P)throw new Error(`no GPU data for output: ${C.data}`);if(D&&this.temporaryData.push(P),E){let w=this.kernelPersistentData.get(this.currentKernelId);w||(w=[],this.kernelPersistentData.set(this.currentKernelId,w)),w.push(P)}m.push(P)}if(l.length!==t.length||m.length!==h.length){if(m.length===0)return ws(e.name),h;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let x;if(p){let S=0,D=[];p.forEach(w=>{let R=typeof w.data=="number"?[w.data]:w.data;if(R.length===0)return;let U=w.type===10?2:4,N,ie;w.type===10?(ie=R.length>4?16:R.length>2?8:R.length*U,N=R.length>4?16:U*R.length):(ie=R.length<=2?R.length*U:16,N=16),S=Math.ceil(S/ie)*ie,D.push(S);let ee=w.type===10?8:4;S+=R.length>4?Math.ceil(R.length/ee)*N:R.length*U});let E=16;S=Math.ceil(S/E)*E;let C=new ArrayBuffer(S);p.forEach((w,R)=>{let U=D[R],N=typeof w.data=="number"?[w.data]:w.data;if(w.type===6)new Int32Array(C,U,N.length).set(N);else if(w.type===12)new Uint32Array(C,U,N.length).set(N);else if(w.type===10)new Uint16Array(C,U,N.length).set(N);else if(w.type===1)new Float32Array(C,U,N.length).set(N);else throw new Error(`Unsupported uniform type: ${Mc(w.type)}`)});let P=this.gpuDataManager.create(S,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(P.buffer,0,C,0,S),this.gpuDataManager.release(P.id),x={offset:0,size:S,buffer:P.buffer}}let _=this.programManager.normalizeDispatchGroupSize(d),b=_[1]===1&&_[2]===1,I=HC(e,t,b),T=this.programManager.getArtifact(I);if(T||(T=this.programManager.build(e,_),this.programManager.setArtifact(I,T),ur("info",()=>`[artifact] key: ${I}, programName: ${e.name}`)),p&&T.uniformVariablesInfo){if(p.length!==T.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${T.uniformVariablesInfo.length}, got ${p.length} in program "${T.programInfo.name}".`);for(let S=0;S<p.length;S++){let D=p[S],E=D.type,C=typeof D.data=="number"?1:D.data.length,[P,w]=T.uniformVariablesInfo[S];if(E!==P||C!==w)throw new Error(`Uniform variable ${S} mismatch: expect type ${P} with size ${w}, got type ${E} with size ${C} in program "${T.programInfo.name}".`)}}if(ur("info",()=>`[ProgramManager] run "${e.name}" (key=${I}) with ${_[0]}x${_[1]}x${_[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let S={kernelId:this.currentKernelId,programName:T.programInfo.name,inputTensorViews:t,outputTensorViews:h};this.pendingKernels.push(S),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(S)}return this.programManager.run(T,l,m,_,x),ws(e.name),h}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,n,r){let o=d$.get(e);if(!o)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:r,kernelEntry:o[0],attributes:[o[1],n]};this.kernels.set(t,s)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let n of t)this.gpuDataManager.release(n.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,n){let r=this.kernels.get(e);if(!r)throw new Error(`kernel not created: ${e}`);let o=r.kernelType,s=r.kernelName,l=r.kernelEntry,u=r.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${o}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,u[0]&&(u[1]=u[0](u[1]),u[0]=void 0),ur("info",()=>`[WebGPU] Start to run kernel "[${o}] ${s}"...`);let d=this.env.debug;this.temporaryData=[];try{return d&&this.device.pushErrorScope("validation"),l(t,u[1]),0}catch(p){return n.push(Promise.resolve(`[WebGPU] Kernel "[${o}] ${s}" failed. ${p}`)),1}finally{d&&n.push(this.device.popErrorScope().then(p=>p?`GPU validation error for kernel "[${o}] ${s}": ${p.message}`:null));for(let p of this.temporaryData)this.gpuDataManager.release(p.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,n,r){let o=this.sessionExternalDataMapping.get(e);o||(o=new Map,this.sessionExternalDataMapping.set(e,o));let s=o.get(t),l=this.gpuDataManager.registerExternalBuffer(n,r,s);return o.set(t,[l,n]),l}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(n=>this.gpuDataManager.unregisterExternalBuffer(n[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,n){return async()=>{let r=await ix(this,e,t);return sw(r.buffer,n)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){ur("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){ur("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){ur("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),n=e.length;this.pendingKernels=[];for(let r=0;r<n;r++){let o=this.getComputePassEncoder(),s=e[r];this.writeTimestamp(this.pendingDispatchNumber*2),o.setPipeline(s.computePipeline),o.setBindGroup(0,s.bindGroup),o.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[r]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),h$={};jf(h$,{init:()=>g$});var sv,XC,g$,a8=Ut(()=>{Pn(),Sc(),Nn(),pV(),sv=class _${constructor(t,n,r,o){this.module=t,this.dataType=n,this.data=r,this.dims=o}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=vt.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=vt.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=vt.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=vt.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(vt.size(t)!==vt.size(this.dims))throw new Error("Invalid new shape");return new _$(this.module,this.dataType,this.data,t)}},XC=class{constructor(e,t,n){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let r=e.PTR_SIZE,o=n/e.PTR_SIZE,s=r===4?"i32":"i64";this.opKernelContext=Number(e.getValue(r*o++,s));let l=Number(e.getValue(r*o++,s));this.outputCount=Number(e.getValue(r*o++,s)),this.customDataOffset=Number(e.getValue(r*o++,"*")),this.customDataSize=Number(e.getValue(r*o++,s));let u=[];for(let d=0;d<l;d++){let p=Number(e.getValue(r*o++,s)),g=Number(e.getValue(r*o++,"*")),h=Number(e.getValue(r*o++,s)),m=[];for(let x=0;x<h;x++)m.push(Number(e.getValue(r*o++,s)));u.push(new sv(e,p,g,m))}this.inputs=u}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){let n=t?.inputs?.map(l=>typeof l=="number"?this.inputs[l]:l)??this.inputs,r=t?.outputs??[],o=(l,u,d)=>new sv(this.module,u,this.output(l,d),d),s=(l,u)=>{let d=xd(l,u);if(!d)throw new Error(`Unsupported data type: ${l}`);let p=d>0?this.backend.gpuDataManager.create(d).id:0;return new sv(this.module,l,p,u)};return this.backend.run(e,n,r,o,s,this.outputCount)}output(e,t){let n=this.module.stackSave();try{let r=this.module.PTR_SIZE,o=r===4?"i32":"i64",s=this.module.stackAlloc((1+t.length)*r);this.module.setValue(s,t.length,o);for(let l=0;l<t.length;l++)this.module.setValue(s+r*(l+1),t[l],o);return this.module._JsepOutput(this.opKernelContext,e,s)}catch(r){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${r}`)}finally{this.module.stackRestore(n)}}},g$=async(e,t,n,r)=>{let o=t.jsepInit;if(!o)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=(r8(),Ug(f$)).WebGpuBackend,l=new s;await l.initialize(n,r),o("webgpu",[l,u=>l.alloc(Number(u)),u=>l.free(u),(u,d,p,g=!1)=>{if(g)ur("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(u)}, dst=${Number(d)}, size=${Number(p)}`),l.memcpy(Number(u),Number(d));else{ur("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(u)}, gpuDataId=${Number(d)}, size=${Number(p)}`);let h=t.HEAPU8.subarray(Number(u>>>0),Number(u>>>0)+Number(p));l.upload(Number(d),h)}},async(u,d,p)=>{ur("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${u}, dataOffset=${d}, size=${p}`),await l.download(Number(u),()=>t.HEAPU8.subarray(Number(d)>>>0,Number(d+p)>>>0))},(u,d,p)=>l.createKernel(u,Number(d),p,t.UTF8ToString(t._JsepGetNodeName(Number(d)))),u=>l.releaseKernel(u),(u,d,p,g)=>{ur("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${u}, contextDataOffset=${d}`);let h=new XC(t,l,Number(d));return l.computeKernel(Number(u),h,g)},()=>l.captureBegin(),()=>l.captureEnd(),()=>l.replay()])}else{let s=new Ck(n);o("webnn",[s,()=>s.reserveTensorId(),l=>s.releaseTensorId(l),async(l,u,d,p,g)=>s.ensureTensor(l,u,d,p,g),(l,u)=>{s.uploadTensor(l,u)},async(l,u)=>s.downloadTensor(l,u)])}}}),QC,vw,yw,hu,YC,E0,Wv,bw,xw,S0,ww,Mw,Tw,v$=Ut(()=>{cV(),uV(),Pn(),Id(),tw(),xk(),QC=(e,t)=>{oa()._OrtInit(e,t)!==0&&Nr("Can't initialize onnxruntime.")},vw=async e=>{QC(e.wasm.numThreads,jv(e.logLevel))},yw=async(e,t)=>{oa().asyncInit?.();{let n=(a8(),Ug(h$)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let r=e.webgpu.adapter;if(r){if(typeof r.limits!="object"||typeof r.features!="object"||typeof r.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let o=e.webgpu.powerPreference;if(o!==void 0&&o!=="low-power"&&o!=="high-performance")throw new Error(`Invalid powerPreference setting: "${o}"`);let s=e.webgpu.forceFallbackAdapter;if(s!==void 0&&typeof s!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${s}"`);if(r=await navigator.gpu.requestAdapter({powerPreference:o,forceFallbackAdapter:s}),!r)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await n("webgpu",oa(),e,r)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await n("webnn",oa(),e)}}},hu=new Map,YC=e=>{let t=oa(),n=t.stackSave();try{let r=t.PTR_SIZE,o=t.stackAlloc(2*r);t._OrtGetInputOutputCount(e,o,o+r)!==0&&Nr("Can't get session input/output count.");let s=r===4?"i32":"i64";return[Number(t.getValue(o,s)),Number(t.getValue(o+r,s))]}finally{t.stackRestore(n)}},E0=(e,t)=>{let n=oa(),r=n.stackSave(),o=0;try{let s=n.PTR_SIZE,l=n.stackAlloc(2*s);n._OrtGetInputOutputMetadata(e,t,l,l+s)!==0&&Nr("Can't get session input/output metadata.");let u=Number(n.getValue(l,"*"));o=Number(n.getValue(l+s,"*"));let d=n.HEAP32[o/4];if(d===0)return[u,0];let p=n.HEAPU32[o/4+1],g=[];for(let h=0;h<p;h++){let m=Number(n.getValue(o+8+h*s,"*"));g.push(m!==0?n.UTF8ToString(m):Number(n.getValue(o+8+(h+p)*s,"*")))}return[u,d,g]}finally{n.stackRestore(r),o!==0&&n._OrtFree(o)}},Wv=e=>{let t=oa(),n=t._malloc(e.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,n),[n,e.byteLength]},bw=async(e,t)=>{let n,r,o=oa();Array.isArray(e)?[n,r]=e:e.buffer===o.HEAPU8.buffer?[n,r]=[e.byteOffset,e.byteLength]:[n,r]=Wv(e);let s=0,l=0,u=0,d=[],p=[],g=[];try{if([l,d]=await bk(t),t?.externalData&&o.mountExternalData){let E=[];for(let C of t.externalData){let P=typeof C=="string"?C:C.path;E.push(iw(typeof C=="string"?C:C.data).then(w=>{o.mountExternalData(P,w)}))}await Promise.all(E)}for(let E of t?.executionProviders??[])if((typeof E=="string"?E:E.name)==="webnn"){if(o.shouldTransferToMLTensor=!1,typeof E!="string"){let C=E,P=C?.context,w=C?.gpuDevice,R=C?.deviceType,U=C?.powerPreference;P?o.currentContext=P:w?o.currentContext=await o.webnnCreateMLContext(w):o.currentContext=await o.webnnCreateMLContext({deviceType:R,powerPreference:U})}else o.currentContext=await o.webnnCreateMLContext();break}s=await o._OrtCreateSession(n,r,l),o.webgpuOnCreateSession?.(s),s===0&&Nr("Can't create a session."),o.jsepOnCreateSession?.(),o.currentContext&&(o.webnnRegisterMLContext(s,o.currentContext),o.currentContext=void 0,o.shouldTransferToMLTensor=!0);let[h,m]=YC(s),x=!!t?.enableGraphCapture,_=[],b=[],I=[],T=[],S=[];for(let E=0;E<h;E++){let[C,P,w]=E0(s,E);C===0&&Nr("Can't get an input name."),p.push(C);let R=o.UTF8ToString(C);_.push(R),I.push(P===0?{name:R,isTensor:!1}:{name:R,isTensor:!0,type:Mc(P),shape:w})}for(let E=0;E<m;E++){let[C,P,w]=E0(s,E+h);C===0&&Nr("Can't get an output name."),g.push(C);let R=o.UTF8ToString(C);b.push(R),T.push(P===0?{name:R,isTensor:!1}:{name:R,isTensor:!0,type:Mc(P),shape:w});{if(x&&t?.preferredOutputLocation===void 0){S.push("gpu-buffer");continue}let U=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[R]??"cpu";if(U!=="cpu"&&U!=="cpu-pinned"&&U!=="gpu-buffer"&&U!=="ml-tensor")throw new Error(`Not supported preferred output location: ${U}.`);if(x&&U!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${U}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);S.push(U)}}let D=null;return S.some(E=>E==="gpu-buffer"||E==="ml-tensor")&&(u=o._OrtCreateBinding(s),u===0&&Nr("Can't create IO binding."),D={handle:u,outputPreferredLocations:S,outputPreferredLocationsEncoded:S.map(E=>rx(E))}),hu.set(s,[s,p,g,D,x,!1]),[s,_,b,I,T]}catch(h){throw p.forEach(m=>o._OrtFree(m)),g.forEach(m=>o._OrtFree(m)),u!==0&&o._OrtReleaseBinding(u)!==0&&Nr("Can't release IO binding."),s!==0&&o._OrtReleaseSession(s)!==0&&Nr("Can't release session."),h}finally{o._free(n),l!==0&&o._OrtReleaseSessionOptions(l)!==0&&Nr("Can't release session options."),d.forEach(h=>o._free(h)),o.unmountExternalData?.()}},xw=e=>{let t=oa(),n=hu.get(e);if(!n)throw new Error(`cannot release session. invalid session id: ${e}`);let[r,o,s,l,u]=n;l&&(u&&t._OrtClearBoundOutputs(l.handle)!==0&&Nr("Can't clear bound outputs."),t._OrtReleaseBinding(l.handle)!==0&&Nr("Can't release IO binding.")),t.jsepOnReleaseSession?.(e),t.webnnOnReleaseSession?.(e),t.webgpuOnReleaseSession?.(e),o.forEach(d=>t._OrtFree(d)),s.forEach(d=>t._OrtFree(d)),t._OrtReleaseSession(r)!==0&&Nr("Can't release session."),hu.delete(e)},S0=async(e,t,n,r,o,s,l=!1)=>{if(!e){t.push(0);return}let u=oa(),d=u.PTR_SIZE,p=e[0],g=e[1],h=e[3],m=h,x,_;if(p==="string"&&(h==="gpu-buffer"||h==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(l&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${s} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let T=e[2].gpuBuffer;_=xd(mf(p),g);{let S=u.jsepRegisterBuffer;if(!S)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');x=S(r,s,T,_)}}else if(h==="ml-tensor"){let T=e[2].mlTensor;_=xd(mf(p),g);let S=u.webnnRegisterMLTensor;if(!S)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');x=S(r,T,mf(p),g)}else{let T=e[2];if(Array.isArray(T)){_=d*T.length,x=u._malloc(_),n.push(x);for(let S=0;S<T.length;S++){if(typeof T[S]!="string")throw new TypeError(`tensor data at index ${S} is not a string`);u.setValue(x+S*d,rl(T[S],n),"*")}}else{let S=u.webnnIsGraphInput;if(p!=="string"&&S){let D=u.UTF8ToString(o);if(S(r,D)){let E=mf(p);_=xd(E,g),m="ml-tensor";let C=u.webnnCreateTemporaryTensor,P=u.webnnUploadTensor;if(!C||!P)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let w=await C(r,E,g);P(w,new Uint8Array(T.buffer,T.byteOffset,T.byteLength)),x=w}else _=T.byteLength,x=u._malloc(_),n.push(x),u.HEAPU8.set(new Uint8Array(T.buffer,T.byteOffset,_),x)}else _=T.byteLength,x=u._malloc(_),n.push(x),u.HEAPU8.set(new Uint8Array(T.buffer,T.byteOffset,_),x)}}let b=u.stackSave(),I=u.stackAlloc(4*g.length);try{g.forEach((S,D)=>u.setValue(I+D*d,S,d===4?"i32":"i64"));let T=u._OrtCreateTensor(mf(p),x,_,I,g.length,rx(m));T===0&&Nr(`Can't create tensor for input/output. session=${r}, index=${s}.`),t.push(T)}finally{u.stackRestore(b)}},ww=async(e,t,n,r,o,s)=>{let l=oa(),u=l.PTR_SIZE,d=hu.get(e);if(!d)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=d[0],g=d[1],h=d[2],m=d[3],x=d[4],_=d[5],b=t.length,I=r.length,T=0,S=[],D=[],E=[],C=[],P=l.stackSave(),w=l.stackAlloc(b*u),R=l.stackAlloc(b*u),U=l.stackAlloc(I*u),N=l.stackAlloc(I*u);try{[T,S]=yk(s);for(let q=0;q<b;q++)await S0(n[q],D,C,e,g[t[q]],t[q],x);for(let q=0;q<I;q++)await S0(o[q],E,C,e,h[r[q]],b+r[q],x);for(let q=0;q<b;q++)l.setValue(w+q*u,D[q],"*"),l.setValue(R+q*u,g[t[q]],"*");for(let q=0;q<I;q++)l.setValue(U+q*u,E[q],"*"),l.setValue(N+q*u,h[r[q]],"*");if(m&&!_){let{handle:q,outputPreferredLocations:oe,outputPreferredLocationsEncoded:ae}=m;if(g.length!==b)throw new Error(`input count from feeds (${b}) is expected to be always equal to model's input count (${g.length}).`);for(let X=0;X<b;X++){let se=t[X];await l._OrtBindInput(q,g[se],D[X])!==0&&Nr(`Can't bind input[${X}] for session=${e}.`)}for(let X=0;X<I;X++){let se=r[X];o[X]?.[3]?l._OrtBindOutput(q,h[se],E[X],0)!==0&&Nr(`Can't bind pre-allocated output[${X}] for session=${e}.`):l._OrtBindOutput(q,h[se],0,ae[se])!==0&&Nr(`Can't bind output[${X}] to ${oe[X]} for session=${e}.`)}hu.set(e,[p,g,h,m,x,!0])}l.jsepOnRunStart?.(p),l.webnnOnRunStart?.(p);let ie;m?ie=await l._OrtRunWithBinding(p,m.handle,I,U,T):ie=await l._OrtRun(p,R,w,b,N,I,U,T),ie!==0&&Nr("failed to call OrtRun().");let ee=[];for(let q=0;q<I;q++){let oe=Number(l.getValue(U+q*u,"*"));if(oe===E[q]){ee.push(o[q]);continue}let ae=l.stackSave(),X=l.stackAlloc(4*u),se=!1,le,be=0;try{l._OrtGetTensorData(oe,X,X+u,X+2*u,X+3*u)!==0&&Nr(`Can't access output tensor data on index ${q}.`);let Ee=u===4?"i32":"i64",Y=Number(l.getValue(X,Ee));be=l.getValue(X+u,"*");let te=l.getValue(X+u*2,"*"),J=Number(l.getValue(X+u*3,Ee)),H=[];for(let Re=0;Re<J;Re++)H.push(Number(l.getValue(te+Re*u,Ee)));l._OrtFree(te)!==0&&Nr("Can't free memory for tensor dims.");let _e=H.reduce((Re,We)=>Re*We,1);le=Mc(Y);let Te=m?.outputPreferredLocations[r[q]];if(le==="string"){if(Te==="gpu-buffer"||Te==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let Re=[];for(let We=0;We<_e;We++){let at=l.getValue(be+We*u,"*"),Oe=l.getValue(be+(We+1)*u,"*"),ge=We===_e-1?void 0:Oe-at;Re.push(l.UTF8ToString(at,ge))}ee.push([le,H,Re,"cpu"])}else if(Te==="gpu-buffer"&&_e>0){let Re=l.jsepGetBuffer;if(!Re)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let We=Re(be),at=xd(Y,_e);if(at===void 0||!rw(le))throw new Error(`Unsupported data type: ${le}`);se=!0,ee.push([le,H,{gpuBuffer:We,download:l.jsepCreateDownloader(We,at,le),dispose:()=>{l._OrtReleaseTensor(oe)!==0&&Nr("Can't release tensor.")}},"gpu-buffer"])}else if(Te==="ml-tensor"&&_e>0){let Re=l.webnnEnsureTensor,We=l.webnnIsInt64Supported;if(!Re||!We)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(xd(Y,_e)===void 0||!aw(le))throw new Error(`Unsupported data type: ${le}`);if(le==="int64"&&!We(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let at=await Re(e,be,Y,H,!1);se=!0,ee.push([le,H,{mlTensor:at,download:l.webnnCreateMLTensorDownloader(be,le),dispose:()=>{l.webnnReleaseTensorId(be),l._OrtReleaseTensor(oe)}},"ml-tensor"])}else{let Re=nw(le),We=new Re(_e);new Uint8Array(We.buffer,We.byteOffset,We.byteLength).set(l.HEAPU8.subarray(be,be+We.byteLength)),ee.push([le,H,We,"cpu"])}}finally{l.stackRestore(ae),le==="string"&&be&&l._free(be),se||l._OrtReleaseTensor(oe),l.webnnOnRunEnd?.(p)}}return m&&!x&&(l._OrtClearBoundOutputs(m.handle)!==0&&Nr("Can't clear bound outputs."),hu.set(e,[p,g,h,m,x,!1])),ee}finally{l.stackRestore(P),D.forEach(ie=>l._OrtReleaseTensor(ie)),E.forEach(ie=>l._OrtReleaseTensor(ie)),C.forEach(ie=>l._free(ie)),T!==0&&l._OrtReleaseRunOptions(T),S.forEach(ie=>l._free(ie))}},Mw=e=>{let t=oa(),n=hu.get(e);if(!n)throw new Error("invalid session id");let r=n[0],o=t._OrtEndProfiling(r);o===0&&Nr("Can't get an profile file name."),t._OrtFree(o)},Tw=e=>{let t=[];for(let n of e){let r=n[2];!Array.isArray(r)&&"buffer"in r&&t.push(r.buffer)}return t}}),gu,gs,uf,_g,vg,lv,C0,cv,md,hd,ZC,y$,b$,x$,w$,M$,T$,E$,S$=Ut(()=>{dl(),v$(),Id(),Jx(),gu=()=>!!ma.wasm.proxy&&typeof document<"u",uf=!1,_g=!1,vg=!1,cv=new Map,md=(e,t)=>{let n=cv.get(e);n?n.push(t):cv.set(e,[t])},hd=()=>{if(uf||!_g||vg||!gs)throw new Error("worker not ready")},ZC=e=>{switch(e.data.type){case"init-wasm":uf=!1,e.data.err?(vg=!0,C0[1](e.data.err)):(_g=!0,C0[0]()),lv&&(URL.revokeObjectURL(lv),lv=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=cv.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},y$=async()=>{if(!_g){if(uf)throw new Error("multiple calls to 'initWasm()' detected.");if(vg)throw new Error("previous call to 'initWasm()' failed.");if(uf=!0,gu())return new Promise((e,t)=>{gs?.terminate(),_k().then(([n,r])=>{try{gs=r,gs.onerror=s=>t(s),gs.onmessage=ZC,C0=[e,t];let o={type:"init-wasm",in:ma};!o.in.wasm.wasmPaths&&(n||nx)&&(o.in.wasm.wasmPaths={wasm:new URL("/marksix-lucky-scan/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),gs.postMessage(o),lv=n}catch(o){t(o)}},t)});try{await ew(ma.wasm),await vw(ma),_g=!0}catch(e){throw vg=!0,e}finally{uf=!1}}},b$=async e=>{if(gu())return hd(),new Promise((t,n)=>{md("init-ep",[t,n]);let r={type:"init-ep",in:{epName:e,env:ma}};gs.postMessage(r)});await yw(ma,e)},x$=async e=>gu()?(hd(),new Promise((t,n)=>{md("copy-from",[t,n]);let r={type:"copy-from",in:{buffer:e}};gs.postMessage(r,[e.buffer])})):Wv(e),w$=async(e,t)=>{if(gu()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return hd(),new Promise((n,r)=>{md("create",[n,r]);let o={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),gs.postMessage(o,s)})}else return bw(e,t)},M$=async e=>{if(gu())return hd(),new Promise((t,n)=>{md("release",[t,n]);let r={type:"release",in:e};gs.postMessage(r)});xw(e)},T$=async(e,t,n,r,o,s)=>{if(gu()){if(n.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return hd(),new Promise((l,u)=>{md("run",[l,u]);let d=n,p={type:"run",in:{sessionId:e,inputIndices:t,inputs:d,outputIndices:r,options:s}};gs.postMessage(p,Tw(d))})}else return ww(e,t,n,r,o,s)},E$=async e=>{if(gu())return hd(),new Promise((t,n)=>{md("end-profiling",[t,n]);let r={type:"end-profiling",in:e};gs.postMessage(r)});Mw(e)}}),P0,JC,C$,i8=Ut(()=>{dl(),S$(),Pn(),Zx(),xk(),P0=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},JC=e=>{switch(e[3]){case"cpu":return new al(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!rw(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:n,download:r,dispose:o}=e[2];return al.fromGpuBuffer(n,{dataType:t,dims:e[1],download:r,dispose:o})}case"ml-tensor":{let t=e[0];if(!aw(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:n,download:r,dispose:o}=e[2];return al.fromMLTensor(n,{dataType:t,dims:e[1],download:r,dispose:o})}default:throw new Error(`invalid data location: ${e[3]}`)}},C$=class{async fetchModelAndCopyToWasmMemory(e){return x$(await iw(e))}async loadModel(e,t){cl();let n;typeof e=="string"?n=await this.fetchModelAndCopyToWasmMemory(e):n=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await w$(n,t),ws()}async dispose(){return M$(this.sessionId)}async run(e,t,n){cl();let r=[],o=[];Object.entries(e).forEach(h=>{let m=h[0],x=h[1],_=this.inputNames.indexOf(m);if(_===-1)throw new Error(`invalid input '${m}'`);r.push(x),o.push(_)});let s=[],l=[];Object.entries(t).forEach(h=>{let m=h[0],x=h[1],_=this.outputNames.indexOf(m);if(_===-1)throw new Error(`invalid output '${m}'`);s.push(x),l.push(_)});let u=r.map((h,m)=>P0(h,()=>`input "${this.inputNames[o[m]]}"`)),d=s.map((h,m)=>h?P0(h,()=>`output "${this.outputNames[l[m]]}"`):null),p=await T$(this.sessionId,o,u,l,d,n),g={};for(let h=0;h<p.length;h++)g[this.outputNames[l[h]]]=s[h]??JC(p[h]);return ws(),g}startProfiling(){}endProfiling(){E$(this.sessionId)}}}),P$={};jf(P$,{OnnxruntimeWebAssemblyBackend:()=>_x,initializeFlags:()=>gx,wasmBackend:()=>k$});var gx,_x,k$,o8=Ut(()=>{dl(),S$(),i8(),gx=()=>{(typeof ma.wasm.initTimeout!="number"||ma.wasm.initTimeout<0)&&(ma.wasm.initTimeout=0);let e=ma.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),ma.wasm.simd=!1),typeof ma.wasm.proxy!="boolean"&&(ma.wasm.proxy=!1),typeof ma.wasm.trace!="boolean"&&(ma.wasm.trace=!1),typeof ma.wasm.numThreads!="number"||!Number.isInteger(ma.wasm.numThreads)||ma.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)ma.wasm.numThreads=1;else{let t=typeof navigator>"u"?K6("node:os").cpus().length:navigator.hardwareConcurrency;ma.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},_x=class{async init(e){gx(),await y$(),await b$(e)}async createInferenceSessionHandler(e,t){let n=new C$;return await n.loadModel(e,t),n}},k$=new _x});dl();dl();dl();var s8="1.22.0-dev.20250409-89f8206ba4",l8=dk;{let e=(o8(),Ug(P$)).wasmBackend;Md("webgpu",e,5),Md("webnn",e,5),Md("cpu",e,10),Md("wasm",e,10)}Object.defineProperty(ma.versions,"web",{value:s8,enumerable:!0});const c8=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Yx},get TRACE(){return Vg},get TRACE_FUNC_BEGIN(){return cl},get TRACE_FUNC_END(){return ws},get Tensor(){return al},default:l8,get env(){return ma},get registerBackend(){return Md}},Symbol.toStringTag,{value:"Module"}));var k0={},u8={"onnxruntime-common":(e=>{e.exports=U6}),"onnxruntime-web":(e=>{e.exports=c8}),"?2ce3":(()=>{}),"?7992":(()=>{}),"?5af5":(()=>{}),"?2b25":(()=>{}),"?db59":(()=>{}),"?383f":(()=>{}),"?fa4b":(()=>{}),"./node_modules/@huggingface/jinja/dist/index.js":((e,t,n)=>{n.r(t),n.d(t,{Environment:()=>Bt,Interpreter:()=>nn,Template:()=>vi,parse:()=>Re,tokenize:()=>h});var r=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),o=class{constructor(B,xe){this.value=B,this.type=xe}};function s(B){return/\w/.test(B)}function l(B){return/[0-9]/.test(B)}function u(B){return/\s/.test(B)}var d=[["{%",r.OpenStatement],["%}",r.CloseStatement],["{{",r.OpenExpression],["}}",r.CloseExpression],["(",r.OpenParen],[")",r.CloseParen],["{",r.OpenCurlyBracket],["}",r.CloseCurlyBracket],["[",r.OpenSquareBracket],["]",r.CloseSquareBracket],[",",r.Comma],[".",r.Dot],[":",r.Colon],["|",r.Pipe],["<=",r.ComparisonBinaryOperator],[">=",r.ComparisonBinaryOperator],["==",r.ComparisonBinaryOperator],["!=",r.ComparisonBinaryOperator],["<",r.ComparisonBinaryOperator],[">",r.ComparisonBinaryOperator],["+",r.AdditiveBinaryOperator],["-",r.AdditiveBinaryOperator],["~",r.AdditiveBinaryOperator],["*",r.MultiplicativeBinaryOperator],["/",r.MultiplicativeBinaryOperator],["%",r.MultiplicativeBinaryOperator],["=",r.Equals]],p=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function g(B,xe={}){return B.endsWith(`
`)&&(B=B.slice(0,-1)),xe.lstrip_blocks&&(B=B.replace(/^[ \t]*({[#%-])/gm,"$1")),xe.trim_blocks&&(B=B.replace(/([#%-]})\n/g,"$1")),B.replace(/{%\s*(end)?generation\s*%}/gs,"")}function h(B,xe={}){const pe=[],we=g(B,xe);let Se=0,Xe=0;const ht=jt=>{let gn="";for(;jt(we[Se]);){if(we[Se]==="\\"){if(++Se,Se>=we.length)throw new SyntaxError("Unexpected end of input");const Gt=we[Se++],yn=p.get(Gt);if(yn===void 0)throw new SyntaxError(`Unexpected escaped character: ${Gt}`);gn+=yn;continue}if(gn+=we[Se++],Se>=we.length)throw new SyntaxError("Unexpected end of input")}return gn},Lt=()=>{const jt=pe.at(-1);jt&&jt.type===r.Text&&(jt.value=jt.value.trimEnd(),jt.value===""&&pe.pop())},Qt=()=>{for(;Se<we.length&&u(we[Se]);)++Se};e:for(;Se<we.length;){const jt=pe.at(-1)?.type;if(jt===void 0||jt===r.CloseStatement||jt===r.CloseExpression||jt===r.Comment){let Gt="";for(;Se<we.length&&!(we[Se]==="{"&&(we[Se+1]==="%"||we[Se+1]==="{"||we[Se+1]==="#"));)Gt+=we[Se++];if(Gt.length>0){pe.push(new o(Gt,r.Text));continue}}if(we[Se]==="{"&&we[Se+1]==="#"){Se+=2;const Gt=we[Se]==="-";Gt&&++Se;let yn="";for(;we[Se]!=="#"||we[Se+1]!=="}";){if(Se+2>=we.length)throw new SyntaxError("Missing end of comment tag");yn+=we[Se++]}const Fn=yn.endsWith("-");Fn&&(yn=yn.slice(0,-1)),Gt&&Lt(),pe.push(new o(yn,r.Comment)),Se+=2,Fn&&Qt();continue}if(we.slice(Se,Se+3)==="{%-"){Lt(),pe.push(new o("{%",r.OpenStatement)),Se+=3;continue}if(we.slice(Se,Se+3)==="{{-"){Lt(),pe.push(new o("{{",r.OpenExpression)),Xe=0,Se+=3;continue}if(ht(u),we.slice(Se,Se+3)==="-%}"){pe.push(new o("%}",r.CloseStatement)),Se+=3,Qt();continue}if(we.slice(Se,Se+3)==="-}}"){pe.push(new o("}}",r.CloseExpression)),Se+=3,Qt();continue}const gn=we[Se];if(gn==="-"||gn==="+"){const Gt=pe.at(-1)?.type;if(Gt===r.Text||Gt===void 0)throw new SyntaxError(`Unexpected character: ${gn}`);switch(Gt){case r.Identifier:case r.NumericLiteral:case r.StringLiteral:case r.CloseParen:case r.CloseSquareBracket:break;default:{++Se;const yn=ht(l);pe.push(new o(`${gn}${yn}`,yn.length>0?r.NumericLiteral:r.UnaryOperator));continue}}}for(const[Gt,yn]of d){if(Gt==="}}"&&Xe>0)continue;if(we.slice(Se,Se+Gt.length)===Gt){pe.push(new o(Gt,yn)),yn===r.OpenExpression?Xe=0:yn===r.OpenCurlyBracket?++Xe:yn===r.CloseCurlyBracket&&--Xe,Se+=Gt.length;continue e}}if(gn==="'"||gn==='"'){++Se;const Gt=ht(yn=>yn!==gn);pe.push(new o(Gt,r.StringLiteral)),++Se;continue}if(l(gn)){let Gt=ht(l);if(we[Se]==="."&&l(we[Se+1])){++Se;const yn=ht(l);Gt=`${Gt}.${yn}`}pe.push(new o(Gt,r.NumericLiteral));continue}if(s(gn)){const Gt=ht(s);pe.push(new o(Gt,r.Identifier));continue}throw new SyntaxError(`Unexpected character: ${gn}`)}return pe}var m=class{type="Statement"},x=class extends m{constructor(B){super(),this.body=B}type="Program"},_=class extends m{constructor(B,xe,pe){super(),this.test=B,this.body=xe,this.alternate=pe}type="If"},b=class extends m{constructor(B,xe,pe,we){super(),this.loopvar=B,this.iterable=xe,this.body=pe,this.defaultBlock=we}type="For"},I=class extends m{type="Break"},T=class extends m{type="Continue"},S=class extends m{constructor(B,xe,pe){super(),this.assignee=B,this.value=xe,this.body=pe}type="Set"},D=class extends m{constructor(B,xe,pe){super(),this.name=B,this.args=xe,this.body=pe}type="Macro"},E=class extends m{constructor(B){super(),this.value=B}type="Comment"},C=class extends m{type="Expression"},P=class extends C{constructor(B,xe,pe){super(),this.object=B,this.property=xe,this.computed=pe}type="MemberExpression"},w=class extends C{constructor(B,xe){super(),this.callee=B,this.args=xe}type="CallExpression"},R=class extends C{constructor(B){super(),this.value=B}type="Identifier"},U=class extends C{constructor(B){super(),this.value=B}type="Literal"},N=class extends U{type="IntegerLiteral"},ie=class extends U{type="FloatLiteral"},ee=class extends U{type="StringLiteral"},q=class extends U{type="ArrayLiteral"},oe=class extends U{type="TupleLiteral"},ae=class extends U{type="ObjectLiteral"},X=class extends C{constructor(B,xe,pe){super(),this.operator=B,this.left=xe,this.right=pe}type="BinaryExpression"},se=class extends C{constructor(B,xe){super(),this.operand=B,this.filter=xe}type="FilterExpression"},le=class extends m{constructor(B,xe){super(),this.filter=B,this.body=xe}type="FilterStatement"},be=class extends C{constructor(B,xe){super(),this.lhs=B,this.test=xe}type="SelectExpression"},Ee=class extends C{constructor(B,xe,pe){super(),this.operand=B,this.negate=xe,this.test=pe}type="TestExpression"},Y=class extends C{constructor(B,xe){super(),this.operator=B,this.argument=xe}type="UnaryExpression"},te=class extends C{constructor(B=void 0,xe=void 0,pe=void 0){super(),this.start=B,this.stop=xe,this.step=pe}type="SliceExpression"},J=class extends C{constructor(B,xe){super(),this.key=B,this.value=xe}type="KeywordArgumentExpression"},H=class extends C{constructor(B){super(),this.argument=B}type="SpreadExpression"},_e=class extends m{constructor(B,xe,pe){super(),this.call=B,this.callerArgs=xe,this.body=pe}type="CallStatement"},Te=class extends C{constructor(B,xe,pe){super(),this.condition=B,this.trueExpr=xe,this.falseExpr=pe}type="Ternary"};function Re(B){const xe=new x([]);let pe=0;function we(Dt,Ft){const Jt=B[pe++];if(!Jt||Jt.type!==Dt)throw new Error(`Parser Error: ${Ft}. ${Jt.type} !== ${Dt}.`);return Jt}function Se(Dt){if(!Qt(Dt))throw new SyntaxError(`Expected ${Dt}`);++pe}function Xe(){switch(B[pe].type){case r.Comment:return new E(B[pe++].value);case r.Text:return jt();case r.OpenStatement:return gn();case r.OpenExpression:return Gt();default:throw new SyntaxError(`Unexpected token type: ${B[pe].type}`)}}function ht(...Dt){return pe+Dt.length<=B.length&&Dt.every((Ft,Jt)=>Ft===B[pe+Jt].type)}function Lt(...Dt){return B[pe]?.type===r.OpenStatement&&B[pe+1]?.type===r.Identifier&&Dt.includes(B[pe+1]?.value)}function Qt(...Dt){return pe+Dt.length<=B.length&&Dt.every((Ft,Jt)=>B[pe+Jt].type==="Identifier"&&Ft===B[pe+Jt].value)}function jt(){return new ee(we(r.Text,"Expected text token").value)}function gn(){if(we(r.OpenStatement,"Expected opening statement token"),B[pe].type!==r.Identifier)throw new SyntaxError(`Unknown statement, got ${B[pe].type}`);const Dt=B[pe].value;let Ft;switch(Dt){case"set":++pe,Ft=yn();break;case"if":++pe,Ft=Fn(),we(r.OpenStatement,"Expected {% token"),Se("endif"),we(r.CloseStatement,"Expected %} token");break;case"macro":++pe,Ft=pr(),we(r.OpenStatement,"Expected {% token"),Se("endmacro"),we(r.CloseStatement,"Expected %} token");break;case"for":++pe,Ft=fr(),we(r.OpenStatement,"Expected {% token"),Se("endfor"),we(r.CloseStatement,"Expected %} token");break;case"call":{++pe;let Jt=null;ht(r.OpenParen)&&(Jt=Ja());const fn=ga();if(fn.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const Ei=Ja();we(r.CloseStatement,"Expected closing statement token");const Qr=[];for(;!Lt("endcall");)Qr.push(Xe());we(r.OpenStatement,"Expected '{%'"),Se("endcall"),we(r.CloseStatement,"Expected closing statement token");const ti=new w(fn,Ei);Ft=new _e(ti,Jt,Qr);break}case"break":++pe,we(r.CloseStatement,"Expected closing statement token"),Ft=new I;break;case"continue":++pe,we(r.CloseStatement,"Expected closing statement token"),Ft=new T;break;case"filter":{++pe;let Jt=ga();Jt instanceof R&&ht(r.OpenParen)&&(Jt=gr(Jt)),we(r.CloseStatement,"Expected closing statement token");const fn=[];for(;!Lt("endfilter");)fn.push(Xe());we(r.OpenStatement,"Expected '{%'"),Se("endfilter"),we(r.CloseStatement,"Expected '%}'"),Ft=new le(Jt,fn);break}default:throw new SyntaxError(`Unknown statement type: ${Dt}`)}return Ft}function Gt(){we(r.OpenExpression,"Expected opening expression token");const Dt=In();return we(r.CloseExpression,"Expected closing expression token"),Dt}function yn(){const Dt=Vr();let Ft=null;const Jt=[];if(ht(r.Equals))++pe,Ft=Vr();else{for(we(r.CloseStatement,"Expected %} token");!Lt("endset");)Jt.push(Xe());we(r.OpenStatement,"Expected {% token"),Se("endset")}return we(r.CloseStatement,"Expected closing statement token"),new S(Dt,Ft,Jt)}function Fn(){const Dt=In();we(r.CloseStatement,"Expected closing statement token");const Ft=[],Jt=[];for(;!Lt("elif","else","endif");)Ft.push(Xe());if(Lt("elif")){++pe,++pe;const fn=Fn();Jt.push(fn)}else if(Lt("else"))for(++pe,++pe,we(r.CloseStatement,"Expected closing statement token");!Lt("endif");)Jt.push(Xe());return new _(Dt,Ft,Jt)}function pr(){const Dt=ga();if(Dt.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Ft=Ja();we(r.CloseStatement,"Expected closing statement token");const Jt=[];for(;!Lt("endmacro");)Jt.push(Xe());return new D(Dt,Ft,Jt)}function Vr(Dt=!1){const Ft=Dt?ga:In,Jt=[Ft()],fn=ht(r.Comma);for(;fn&&(++pe,Jt.push(Ft()),!!ht(r.Comma)););return fn?new oe(Jt):Jt[0]}function fr(){const Dt=Vr(!0);if(!(Dt instanceof R||Dt instanceof oe))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Dt.type} instead`);if(!Qt("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++pe;const Ft=In();we(r.CloseStatement,"Expected closing statement token");const Jt=[];for(;!Lt("endfor","else");)Jt.push(Xe());const fn=[];if(Lt("else"))for(++pe,++pe,we(r.CloseStatement,"Expected closing statement token");!Lt("endfor");)fn.push(Xe());return new b(Dt,Ft,Jt,fn)}function In(){return wa()}function wa(){const Dt=hr();if(Qt("if")){++pe;const Ft=hr();if(Qt("else")){++pe;const Jt=wa();return new Te(Ft,Dt,Jt)}else return new be(Dt,Ft)}return Dt}function hr(){let Dt=Cr();for(;Qt("or");){const Ft=B[pe];++pe;const Jt=Cr();Dt=new X(Ft,Dt,Jt)}return Dt}function Cr(){let Dt=la();for(;Qt("and");){const Ft=B[pe];++pe;const Jt=la();Dt=new X(Ft,Dt,Jt)}return Dt}function la(){let Dt;for(;Qt("not");){const Ft=B[pe];++pe;const Jt=la();Dt=new Y(Ft,Jt)}return Dt??ha()}function ha(){let Dt=Ma();for(;;){let Ft;if(Qt("not","in"))Ft=new o("not in",r.Identifier),pe+=2;else if(Qt("in"))Ft=B[pe++];else if(ht(r.ComparisonBinaryOperator))Ft=B[pe++];else break;const Jt=Ma();Dt=new X(Ft,Dt,Jt)}return Dt}function Ma(){let Dt=yi();for(;ht(r.AdditiveBinaryOperator);){const Ft=B[pe];++pe;const Jt=yi();Dt=new X(Ft,Dt,Jt)}return Dt}function Pr(){const Dt=An(ga());return ht(r.OpenParen)?gr(Dt):Dt}function gr(Dt){let Ft=new w(Dt,Ja());return Ft=An(Ft),ht(r.OpenParen)&&(Ft=gr(Ft)),Ft}function Ja(){we(r.OpenParen,"Expected opening parenthesis for arguments list");const Dt=ei();return we(r.CloseParen,"Expected closing parenthesis for arguments list"),Dt}function ei(){const Dt=[];for(;!ht(r.CloseParen);){let Ft;if(B[pe].type===r.MultiplicativeBinaryOperator&&B[pe].value==="*"){++pe;const Jt=In();Ft=new H(Jt)}else if(Ft=In(),ht(r.Equals)){if(++pe,!(Ft instanceof R))throw new SyntaxError("Expected identifier for keyword argument");const Jt=In();Ft=new J(Ft,Jt)}Dt.push(Ft),ht(r.Comma)&&++pe}return Dt}function ao(){const Dt=[];let Ft=!1;for(;!ht(r.CloseSquareBracket);)ht(r.Colon)?(Dt.push(void 0),++pe,Ft=!0):(Dt.push(In()),ht(r.Colon)&&(++pe,Ft=!0));if(Dt.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ft){if(Dt.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new te(...Dt)}return Dt[0]}function An(Dt){for(;ht(r.Dot)||ht(r.OpenSquareBracket);){const Ft=B[pe];++pe;let Jt;const fn=Ft.type===r.OpenSquareBracket;if(fn)Jt=ao(),we(r.CloseSquareBracket,"Expected closing square bracket");else if(Jt=ga(),Jt.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Dt=new P(Dt,Jt,fn)}return Dt}function yi(){let Dt=Aa();for(;ht(r.MultiplicativeBinaryOperator);){const Ft=B[pe++],Jt=Aa();Dt=new X(Ft,Dt,Jt)}return Dt}function Aa(){let Dt=Wr();for(;Qt("is");){++pe;const Ft=Qt("not");Ft&&++pe;const Jt=ga();if(!(Jt instanceof R))throw new SyntaxError("Expected identifier for the test");Dt=new Ee(Dt,Ft,Jt)}return Dt}function Wr(){let Dt=Pr();for(;ht(r.Pipe);){++pe;let Ft=ga();if(!(Ft instanceof R))throw new SyntaxError("Expected identifier for the filter");ht(r.OpenParen)&&(Ft=gr(Ft)),Dt=new se(Dt,Ft)}return Dt}function ga(){const Dt=B[pe++];switch(Dt.type){case r.NumericLiteral:{const Ft=Dt.value;return Ft.includes(".")?new ie(Number(Ft)):new N(Number(Ft))}case r.StringLiteral:{let Ft=Dt.value;for(;ht(r.StringLiteral);)Ft+=B[pe++].value;return new ee(Ft)}case r.Identifier:return new R(Dt.value);case r.OpenParen:{const Ft=Vr();return we(r.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Ft}case r.OpenSquareBracket:{const Ft=[];for(;!ht(r.CloseSquareBracket);)Ft.push(In()),ht(r.Comma)&&++pe;return++pe,new q(Ft)}case r.OpenCurlyBracket:{const Ft=new Map;for(;!ht(r.CloseCurlyBracket);){const Jt=In();we(r.Colon,"Expected colon between key and value in object literal");const fn=In();Ft.set(Jt,fn),ht(r.Comma)&&++pe}return++pe,new ae(Ft)}default:throw new SyntaxError(`Unexpected token: ${Dt.type}`)}}for(;pe<B.length;)xe.body.push(Xe());return xe}function We(B,xe,pe=1){xe===void 0&&(xe=B,B=0);const we=[];for(let Se=B;Se<xe;Se+=pe)we.push(Se);return we}function at(B,xe,pe,we=1){const Se=Math.sign(we);Se>=0?(xe=(xe??=0)<0?Math.max(B.length+xe,0):Math.min(xe,B.length),pe=(pe??=B.length)<0?Math.max(B.length+pe,0):Math.min(pe,B.length)):(xe=(xe??=B.length-1)<0?Math.max(B.length+xe,-1):Math.min(xe,B.length-1),pe=(pe??=-1)<-1?Math.max(B.length+pe,-1):Math.min(pe,B.length-1));const Xe=[];for(let ht=xe;Se*ht<Se*pe;ht+=we)Xe.push(B[ht]);return Xe}function Oe(B){return B.replace(/\b\w/g,xe=>xe.toUpperCase())}function ge(B){return re(new Date,B)}function re(B,xe){const pe=new Intl.DateTimeFormat(void 0,{month:"long"}),we=new Intl.DateTimeFormat(void 0,{month:"short"}),Se=Xe=>Xe<10?"0"+Xe:Xe.toString();return xe.replace(/%[YmdbBHM%]/g,Xe=>{switch(Xe){case"%Y":return B.getFullYear().toString();case"%m":return Se(B.getMonth()+1);case"%d":return Se(B.getDate());case"%b":return we.format(B);case"%B":return pe.format(B);case"%H":return Se(B.getHours());case"%M":return Se(B.getMinutes());case"%%":return"%";default:return Xe}})}function $e(B){return B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ge(B,xe,pe,we){if(we===0)return B;let Se=we==null||we<0?1/0:we;const Xe=xe.length===0?new RegExp("(?=)","gu"):new RegExp($e(xe),"gu");return B.replaceAll(Xe,ht=>Se>0?(--Se,pe):ht)}var qe=class extends Error{},it=class extends Error{},Ve=class{type="RuntimeValue";value;builtins=new Map;constructor(B=void 0){this.value=B}__bool__(){return new Ye(!!this.value)}toString(){return String(this.value)}},Be=class extends Ve{type="IntegerValue"},_t=class extends Ve{type="FloatValue";toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},Ne=class extends Ve{type="StringValue";builtins=new Map([["upper",new wt(()=>new Ne(this.value.toUpperCase()))],["lower",new wt(()=>new Ne(this.value.toLowerCase()))],["strip",new wt(()=>new Ne(this.value.trim()))],["title",new wt(()=>new Ne(Oe(this.value)))],["capitalize",new wt(()=>new Ne(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new Be(this.value.length)],["rstrip",new wt(()=>new Ne(this.value.trimEnd()))],["lstrip",new wt(()=>new Ne(this.value.trimStart()))],["startswith",new wt(B=>{if(B.length===0)throw new Error("startswith() requires at least one argument");const xe=B[0];if(xe instanceof Ne)return new Ye(this.value.startsWith(xe.value));if(xe instanceof Ke){for(const pe of xe.value){if(!(pe instanceof Ne))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(pe.value))return new Ye(!0)}return new Ye(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new wt(B=>{if(B.length===0)throw new Error("endswith() requires at least one argument");const xe=B[0];if(xe instanceof Ne)return new Ye(this.value.endsWith(xe.value));if(xe instanceof Ke){for(const pe of xe.value){if(!(pe instanceof Ne))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(pe.value))return new Ye(!0)}return new Ye(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new wt(B=>{const xe=B[0]??new st;if(!(xe instanceof Ne||xe instanceof st))throw new Error("sep argument must be a string or null");const pe=B[1]??new Be(-1);if(!(pe instanceof Be))throw new Error("maxsplit argument must be a number");let we=[];if(xe instanceof st){const Se=this.value.trimStart();for(const{0:Xe,index:ht}of Se.matchAll(/\S+/g)){if(pe.value!==-1&&we.length>=pe.value&&ht!==void 0){we.push(Xe+Se.slice(ht+Xe.length));break}we.push(Xe)}}else{if(xe.value==="")throw new Error("empty separator");we=this.value.split(xe.value),pe.value!==-1&&we.length>pe.value&&we.push(we.splice(pe.value).join(xe.value))}return new Ke(we.map(Se=>new Ne(Se)))})],["replace",new wt(B=>{if(B.length<2)throw new Error("replace() requires at least two arguments");const xe=B[0],pe=B[1];if(!(xe instanceof Ne&&pe instanceof Ne))throw new Error("replace() arguments must be strings");let we;if(B.length>2?B[2].type==="KeywordArgumentsValue"?we=B[2].value.get("count")??new st:we=B[2]:we=new st,!(we instanceof Be||we instanceof st))throw new Error("replace() count argument must be a number or null");return new Ne(Ge(this.value,xe.value,pe.value,we.value))})]])},Ye=class extends Ve{type="BooleanValue"};function kt(B,xe,pe,we=!0){const Se=pe??0;switch(B.type){case"NullValue":return"null";case"UndefinedValue":return we?"null":"undefined";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(B.value);case"ArrayValue":case"ObjectValue":{const Xe=xe?" ".repeat(xe):"",ht=`
`+Xe.repeat(Se),Lt=ht+Xe;if(B.type==="ArrayValue"){const Qt=B.value.map(jt=>kt(jt,xe,Se+1,we));return xe?`[${Lt}${Qt.join(`,${Lt}`)}${ht}]`:`[${Qt.join(", ")}]`}else{const Qt=Array.from(B.value.entries()).map(([jt,gn])=>{const Gt=`"${jt}": ${kt(gn,xe,Se+1,we)}`;return xe?`${Lt}${Gt}`:Gt});return xe?`{${Qt.join(",")}${ht}}`:`{${Qt.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${B.type}`)}}var mt=class extends Ve{type="ObjectValue";__bool__(){return new Ye(this.value.size>0)}builtins=new Map([["get",new wt(([B,xe])=>{if(!(B instanceof Ne))throw new Error(`Object key must be a string: got ${B.type}`);return this.value.get(B.value)??xe??new st})],["items",new wt(()=>this.items())],["keys",new wt(()=>this.keys())],["values",new wt(()=>this.values())],["dictsort",new wt(B=>{let xe=new Map;const pe=B.filter(Lt=>Lt instanceof Tt?(xe=Lt.value,!1):!0),we=pe.at(0)??xe.get("case_sensitive")??new Ye(!1);if(!(we instanceof Ye))throw new Error("case_sensitive must be a boolean");const Se=pe.at(1)??xe.get("by")??new Ne("key");if(!(Se instanceof Ne))throw new Error("by must be a string");if(!["key","value"].includes(Se.value))throw new Error("by must be either 'key' or 'value'");const Xe=pe.at(2)??xe.get("reverse")??new Ye(!1);if(!(Xe instanceof Ye))throw new Error("reverse must be a boolean");const ht=Array.from(this.value.entries()).map(([Lt,Qt])=>new Ke([new Ne(Lt),Qt])).sort((Lt,Qt)=>{const jt=Se.value==="key"?0:1,gn=Lt.value[jt],Gt=Qt.value[jt],yn=At(gn,Gt,we.value);return Xe.value?-yn:yn});return new Ke(ht)})]]);items(){return new Ke(Array.from(this.value.entries()).map(([B,xe])=>new Ke([new Ne(B),xe])))}keys(){return new Ke(Array.from(this.value.keys()).map(B=>new Ne(B)))}values(){return new Ke(Array.from(this.value.values()))}toString(){return kt(this,null,0,!1)}},Tt=class extends mt{type="KeywordArgumentsValue"},Ke=class extends Ve{type="ArrayValue";builtins=new Map([["length",new Be(this.value.length)]]);__bool__(){return new Ye(this.value.length>0)}toString(){return kt(this,null,0,!1)}},dt=class extends Ke{type="TupleValue"},wt=class extends Ve{type="FunctionValue"},st=class extends Ve{type="NullValue"},He=class extends Ve{type="UndefinedValue"},Bt=class{constructor(B){this.parent=B}variables=new Map([["namespace",new wt(B=>{if(B.length===0)return new mt(new Map);if(B.length!==1||!(B[0]instanceof mt))throw new Error("`namespace` expects either zero arguments or a single object argument");return B[0]})]]);tests=new Map([["boolean",B=>B.type==="BooleanValue"],["callable",B=>B instanceof wt],["odd",B=>{if(!(B instanceof Be))throw new Error(`cannot odd on ${B.type}`);return B.value%2!==0}],["even",B=>{if(!(B instanceof Be))throw new Error(`cannot even on ${B.type}`);return B.value%2===0}],["false",B=>B.type==="BooleanValue"&&!B.value],["true",B=>B.type==="BooleanValue"&&B.value],["none",B=>B.type==="NullValue"],["string",B=>B.type==="StringValue"],["number",B=>B instanceof Be||B instanceof _t],["integer",B=>B instanceof Be],["iterable",B=>B.type==="ArrayValue"||B.type==="StringValue"],["mapping",B=>B.type==="ObjectValue"],["lower",B=>{const xe=B.value;return B.type==="StringValue"&&xe===xe.toLowerCase()}],["upper",B=>{const xe=B.value;return B.type==="StringValue"&&xe===xe.toUpperCase()}],["none",B=>B.type==="NullValue"],["defined",B=>B.type!=="UndefinedValue"],["undefined",B=>B.type==="UndefinedValue"],["equalto",(B,xe)=>B.value===xe.value],["eq",(B,xe)=>B.value===xe.value]]);set(B,xe){return this.declareVariable(B,Ct(xe))}declareVariable(B,xe){if(this.variables.has(B))throw new SyntaxError(`Variable already declared: ${B}`);return this.variables.set(B,xe),xe}setVariable(B,xe){return this.variables.set(B,xe),xe}resolve(B){if(this.variables.has(B))return this;if(this.parent)return this.parent.resolve(B);throw new Error(`Unknown variable: ${B}`)}lookupVariable(B){try{return this.resolve(B).variables.get(B)??new He}catch{return new He}}};function qt(B){B.set("false",!1),B.set("true",!0),B.set("none",null),B.set("raise_exception",xe=>{throw new Error(xe)}),B.set("range",We),B.set("strftime_now",ge),B.set("True",!0),B.set("False",!1),B.set("None",null)}function xn(B,xe){const pe=xe.split(".");let we=B;for(const Se of pe)if(we instanceof mt)we=we.value.get(Se)??new He;else if(we instanceof Ke){const Xe=parseInt(Se,10);if(!isNaN(Xe)&&Xe>=0&&Xe<we.value.length)we=we.value[Xe];else return new He}else return new He;return we}function At(B,xe,pe=!1){if(B instanceof st&&xe instanceof st)return 0;if(B instanceof st||xe instanceof st)throw new Error(`Cannot compare ${B.type} with ${xe.type}`);if(B instanceof He&&xe instanceof He)return 0;if(B instanceof He||xe instanceof He)throw new Error(`Cannot compare ${B.type} with ${xe.type}`);const we=Xe=>Xe instanceof Be||Xe instanceof _t||Xe instanceof Ye,Se=Xe=>Xe instanceof Ye?Xe.value?1:0:Xe.value;if(we(B)&&we(xe)){const Xe=Se(B),ht=Se(xe);return Xe<ht?-1:Xe>ht?1:0}if(B.type!==xe.type)throw new Error(`Cannot compare different types: ${B.type} and ${xe.type}`);if(B.type==="StringValue"){let Xe=B.value,ht=xe.value;return pe||(Xe=Xe.toLowerCase(),ht=ht.toLowerCase()),Xe<ht?-1:Xe>ht?1:0}else throw new Error(`Cannot compare type: ${B.type}`)}var nn=class{global;constructor(B){this.global=B??new Bt}run(B){return this.evaluate(B,this.global)}evaluateBinaryExpression(B,xe){const pe=this.evaluate(B.left,xe);switch(B.operator.value){case"and":return pe.__bool__().value?this.evaluate(B.right,xe):pe;case"or":return pe.__bool__().value?pe:this.evaluate(B.right,xe)}const we=this.evaluate(B.right,xe);switch(B.operator.value){case"==":return new Ye(pe.value==we.value);case"!=":return new Ye(pe.value!=we.value)}if(pe instanceof He||we instanceof He){if(we instanceof He&&["in","not in"].includes(B.operator.value))return new Ye(B.operator.value==="not in");throw new Error(`Cannot perform operation ${B.operator.value} on undefined values`)}else{if(pe instanceof st||we instanceof st)throw new Error("Cannot perform operation on null values");if(B.operator.value==="~")return new Ne(pe.value.toString()+we.value.toString());if((pe instanceof Be||pe instanceof _t)&&(we instanceof Be||we instanceof _t)){const Se=pe.value,Xe=we.value;switch(B.operator.value){case"+":case"-":case"*":{const ht=B.operator.value==="+"?Se+Xe:B.operator.value==="-"?Se-Xe:Se*Xe;return pe instanceof _t||we instanceof _t?new _t(ht):new Be(ht)}case"/":return new _t(Se/Xe);case"%":{const ht=Se%Xe;return pe instanceof _t||we instanceof _t?new _t(ht):new Be(ht)}case"<":return new Ye(Se<Xe);case">":return new Ye(Se>Xe);case">=":return new Ye(Se>=Xe);case"<=":return new Ye(Se<=Xe)}}else if(pe instanceof Ke&&we instanceof Ke){if(B.operator.value==="+")return new Ke(pe.value.concat(we.value))}else if(we instanceof Ke){const Se=we.value.find(Xe=>Xe.value===pe.value)!==void 0;switch(B.operator.value){case"in":return new Ye(Se);case"not in":return new Ye(!Se)}}}if((pe instanceof Ne||we instanceof Ne)&&B.operator.value==="+")return new Ne(pe.value.toString()+we.value.toString());if(pe instanceof Ne&&we instanceof Ne)switch(B.operator.value){case"in":return new Ye(we.value.includes(pe.value));case"not in":return new Ye(!we.value.includes(pe.value))}if(pe instanceof Ne&&we instanceof mt)switch(B.operator.value){case"in":return new Ye(we.value.has(pe.value));case"not in":return new Ye(!we.value.has(pe.value))}throw new SyntaxError(`Unknown operator "${B.operator.value}" between ${pe.type} and ${we.type}`)}evaluateArguments(B,xe){const pe=[],we=new Map;for(const Se of B)if(Se.type==="SpreadExpression"){const Xe=Se,ht=this.evaluate(Xe.argument,xe);if(!(ht instanceof Ke))throw new Error(`Cannot unpack non-iterable type: ${ht.type}`);for(const Lt of ht.value)pe.push(Lt)}else if(Se.type==="KeywordArgumentExpression"){const Xe=Se;we.set(Xe.key.value,this.evaluate(Xe.value,xe))}else{if(we.size>0)throw new Error("Positional arguments must come before keyword arguments");pe.push(this.evaluate(Se,xe))}return[pe,we]}applyFilter(B,xe,pe){if(xe.type==="Identifier"){const we=xe;if(we.value==="tojson")return new Ne(kt(B));if(B instanceof Ke)switch(we.value){case"list":return B;case"first":return B.value[0];case"last":return B.value[B.value.length-1];case"length":return new Be(B.value.length);case"reverse":return new Ke(B.value.slice().reverse());case"sort":return new Ke(B.value.slice().sort((Se,Xe)=>At(Se,Xe,!1)));case"join":return new Ne(B.value.map(Se=>Se.value).join(""));case"string":return new Ne(kt(B,null,0,!1));case"unique":{const Se=new Set,Xe=[];for(const ht of B.value)Se.has(ht.value)||(Se.add(ht.value),Xe.push(ht));return new Ke(Xe)}default:throw new Error(`Unknown ArrayValue filter: ${we.value}`)}else if(B instanceof Ne)switch(we.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const Se=B.builtins.get(we.value);if(Se instanceof wt)return Se.value([],pe);if(Se instanceof Be)return Se;throw new Error(`Unknown StringValue filter: ${we.value}`)}case"trim":return new Ne(B.value.trim());case"indent":return new Ne(B.value.split(`
`).map((Se,Xe)=>Xe===0||Se.length===0?Se:"    "+Se).join(`
`));case"join":case"string":return B;case"int":{const Se=parseInt(B.value,10);return new Be(isNaN(Se)?0:Se)}case"float":{const Se=parseFloat(B.value);return new _t(isNaN(Se)?0:Se)}default:throw new Error(`Unknown StringValue filter: ${we.value}`)}else if(B instanceof Be||B instanceof _t)switch(we.value){case"abs":return B instanceof Be?new Be(Math.abs(B.value)):new _t(Math.abs(B.value));case"int":return new Be(Math.floor(B.value));case"float":return new _t(B.value);default:throw new Error(`Unknown NumericValue filter: ${we.value}`)}else if(B instanceof mt)switch(we.value){case"items":return new Ke(Array.from(B.value.entries()).map(([Se,Xe])=>new Ke([new Ne(Se),Xe])));case"length":return new Be(B.value.size);default:{const Se=B.builtins.get(we.value);if(Se)return Se instanceof wt?Se.value([],pe):Se;throw new Error(`Unknown ObjectValue filter: ${we.value}`)}}else if(B instanceof Ye)switch(we.value){case"bool":return new Ye(B.value);case"int":return new Be(B.value?1:0);case"float":return new _t(B.value?1:0);case"string":return new Ne(B.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${we.value}`)}throw new Error(`Cannot apply filter "${we.value}" to type: ${B.type}`)}else if(xe.type==="CallExpression"){const we=xe;if(we.callee.type!=="Identifier")throw new Error(`Unknown filter: ${we.callee.type}`);const Se=we.callee.value;if(Se==="tojson"){const[,Xe]=this.evaluateArguments(we.args,pe),ht=Xe.get("indent")??new st;if(!(ht instanceof Be||ht instanceof st))throw new Error("If set, indent must be a number");return new Ne(kt(B,ht.value))}else if(Se==="join"){let Xe;if(B instanceof Ne)Xe=Array.from(B.value);else if(B instanceof Ke)Xe=B.value.map(jt=>jt.value);else throw new Error(`Cannot apply filter "${Se}" to type: ${B.type}`);const[ht,Lt]=this.evaluateArguments(we.args,pe),Qt=ht.at(0)??Lt.get("separator")??new Ne("");if(!(Qt instanceof Ne))throw new Error("separator must be a string");return new Ne(Xe.join(Qt.value))}else if(Se==="int"||Se==="float"){const[Xe,ht]=this.evaluateArguments(we.args,pe),Lt=Xe.at(0)??ht.get("default")??(Se==="int"?new Be(0):new _t(0));if(B instanceof Ne){const Qt=Se==="int"?parseInt(B.value,10):parseFloat(B.value);return isNaN(Qt)?Lt:Se==="int"?new Be(Qt):new _t(Qt)}else{if(B instanceof Be||B instanceof _t)return B;if(B instanceof Ye)return Se==="int"?new Be(B.value?1:0):new _t(B.value?1:0);throw new Error(`Cannot apply filter "${Se}" to type: ${B.type}`)}}else if(Se==="default"){const[Xe,ht]=this.evaluateArguments(we.args,pe),Lt=Xe[0]??new Ne(""),Qt=Xe[1]??ht.get("boolean")??new Ye(!1);if(!(Qt instanceof Ye))throw new Error("`default` filter flag must be a boolean");return B instanceof He||Qt.value&&!B.__bool__().value?Lt:B}if(B instanceof Ke){switch(Se){case"sort":{const[Xe,ht]=this.evaluateArguments(we.args,pe),Lt=Xe.at(0)??ht.get("reverse")??new Ye(!1);if(!(Lt instanceof Ye))throw new Error("reverse must be a boolean");const Qt=Xe.at(1)??ht.get("case_sensitive")??new Ye(!1);if(!(Qt instanceof Ye))throw new Error("case_sensitive must be a boolean");const jt=Xe.at(2)??ht.get("attribute")??new st;if(!(jt instanceof Ne||jt instanceof Be||jt instanceof st))throw new Error("attribute must be a string, integer, or null");const gn=Gt=>{if(jt instanceof st)return Gt;const yn=jt instanceof Be?String(jt.value):jt.value;return xn(Gt,yn)};return new Ke(B.value.slice().sort((Gt,yn)=>{const Fn=gn(Gt),pr=gn(yn),Vr=At(Fn,pr,Qt.value);return Lt.value?-Vr:Vr}))}case"selectattr":case"rejectattr":{const Xe=Se==="selectattr";if(B.value.some(Gt=>!(Gt instanceof mt)))throw new Error(`\`${Se}\` can only be applied to array of objects`);if(we.args.some(Gt=>Gt.type!=="StringLiteral"))throw new Error(`arguments of \`${Se}\` must be strings`);const[ht,Lt,Qt]=we.args.map(Gt=>this.evaluate(Gt,pe));let jt;if(Lt){const Gt=pe.tests.get(Lt.value);if(!Gt)throw new Error(`Unknown test: ${Lt.value}`);jt=Gt}else jt=(...Gt)=>Gt[0].__bool__().value;const gn=B.value.filter(Gt=>{const yn=Gt.value.get(ht.value),Fn=yn?jt(yn,Qt):!1;return Xe?Fn:!Fn});return new Ke(gn)}case"map":{const[,Xe]=this.evaluateArguments(we.args,pe);if(Xe.has("attribute")){const ht=Xe.get("attribute");if(!(ht instanceof Ne))throw new Error("attribute must be a string");const Lt=Xe.get("default"),Qt=B.value.map(jt=>{if(!(jt instanceof mt))throw new Error("items in map must be an object");const gn=xn(jt,ht.value);return gn instanceof He?Lt??new He:gn});return new Ke(Qt)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${Se}`)}else if(B instanceof Ne){switch(Se){case"indent":{const[Xe,ht]=this.evaluateArguments(we.args,pe),Lt=Xe.at(0)??ht.get("width")??new Be(4);if(!(Lt instanceof Be))throw new Error("width must be a number");const Qt=Xe.at(1)??ht.get("first")??new Ye(!1),jt=Xe.at(2)??ht.get("blank")??new Ye(!1),gn=B.value.split(`
`),Gt=" ".repeat(Lt.value),yn=gn.map((Fn,pr)=>!Qt.value&&pr===0||!jt.value&&Fn.length===0?Fn:Gt+Fn);return new Ne(yn.join(`
`))}case"replace":{const Xe=B.builtins.get("replace");if(!(Xe instanceof wt))throw new Error("replace filter not available");const[ht,Lt]=this.evaluateArguments(we.args,pe);return Xe.value([...ht,new Tt(Lt)],pe)}}throw new Error(`Unknown StringValue filter: ${Se}`)}else if(B instanceof mt){const Xe=B.builtins.get(Se);if(Xe&&Xe instanceof wt){const[ht,Lt]=this.evaluateArguments(we.args,pe);return Lt.size>0&&ht.push(new Tt(Lt)),Xe.value(ht,pe)}throw new Error(`Unknown ObjectValue filter: ${Se}`)}else throw new Error(`Cannot apply filter "${Se}" to type: ${B.type}`)}throw new Error(`Unknown filter: ${xe.type}`)}evaluateFilterExpression(B,xe){const pe=this.evaluate(B.operand,xe);return this.applyFilter(pe,B.filter,xe)}evaluateTestExpression(B,xe){const pe=this.evaluate(B.operand,xe),we=xe.tests.get(B.test.value);if(!we)throw new Error(`Unknown test: ${B.test.value}`);const Se=we(pe);return new Ye(B.negate?!Se:Se)}evaluateSelectExpression(B,xe){return this.evaluate(B.test,xe).__bool__().value?this.evaluate(B.lhs,xe):new He}evaluateUnaryExpression(B,xe){const pe=this.evaluate(B.argument,xe);if(B.operator.value==="not")return new Ye(!pe.value);throw new SyntaxError(`Unknown operator: ${B.operator.value}`)}evaluateTernaryExpression(B,xe){return this.evaluate(B.condition,xe).__bool__().value?this.evaluate(B.trueExpr,xe):this.evaluate(B.falseExpr,xe)}evalProgram(B,xe){return this.evaluateBlock(B.body,xe)}evaluateBlock(B,xe){let pe="";for(const we of B){const Se=this.evaluate(we,xe);Se.type!=="NullValue"&&Se.type!=="UndefinedValue"&&(pe+=Se.toString())}return new Ne(pe)}evaluateIdentifier(B,xe){return xe.lookupVariable(B.value)}evaluateCallExpression(B,xe){const[pe,we]=this.evaluateArguments(B.args,xe);we.size>0&&pe.push(new Tt(we));const Se=this.evaluate(B.callee,xe);if(Se.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Se.type}`);return Se.value(pe,xe)}evaluateSliceExpression(B,xe,pe){if(!(B instanceof Ke||B instanceof Ne))throw new Error("Slice object must be an array or string");const we=this.evaluate(xe.start,pe),Se=this.evaluate(xe.stop,pe),Xe=this.evaluate(xe.step,pe);if(!(we instanceof Be||we instanceof He))throw new Error("Slice start must be numeric or undefined");if(!(Se instanceof Be||Se instanceof He))throw new Error("Slice stop must be numeric or undefined");if(!(Xe instanceof Be||Xe instanceof He))throw new Error("Slice step must be numeric or undefined");return B instanceof Ke?new Ke(at(B.value,we.value,Se.value,Xe.value)):new Ne(at(Array.from(B.value),we.value,Se.value,Xe.value).join(""))}evaluateMemberExpression(B,xe){const pe=this.evaluate(B.object,xe);let we;if(B.computed){if(B.property.type==="SliceExpression")return this.evaluateSliceExpression(pe,B.property,xe);we=this.evaluate(B.property,xe)}else we=new Ne(B.property.value);let Se;if(pe instanceof mt){if(!(we instanceof Ne))throw new Error(`Cannot access property with non-string: got ${we.type}`);Se=pe.value.get(we.value)??pe.builtins.get(we.value)}else if(pe instanceof Ke||pe instanceof Ne)if(we instanceof Be)Se=pe.value.at(we.value),pe instanceof Ne&&(Se=new Ne(pe.value.at(we.value)));else if(we instanceof Ne)Se=pe.builtins.get(we.value);else throw new Error(`Cannot access property with non-string/non-number: got ${we.type}`);else{if(!(we instanceof Ne))throw new Error(`Cannot access property with non-string: got ${we.type}`);Se=pe.builtins.get(we.value)}return Se instanceof Ve?Se:new He}evaluateSet(B,xe){const pe=B.value?this.evaluate(B.value,xe):this.evaluateBlock(B.body,xe);if(B.assignee.type==="Identifier"){const we=B.assignee.value;xe.setVariable(we,pe)}else if(B.assignee.type==="TupleLiteral"){const we=B.assignee;if(!(pe instanceof Ke))throw new Error(`Cannot unpack non-iterable type in set: ${pe.type}`);const Se=pe.value;if(Se.length!==we.value.length)throw new Error(`Too ${we.value.length>Se.length?"few":"many"} items to unpack in set`);for(let Xe=0;Xe<we.value.length;++Xe){const ht=we.value[Xe];if(ht.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${ht.type}`);xe.setVariable(ht.value,Se[Xe])}}else if(B.assignee.type==="MemberExpression"){const we=B.assignee,Se=this.evaluate(we.object,xe);if(!(Se instanceof mt))throw new Error("Cannot assign to member of non-object");if(we.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");Se.value.set(we.property.value,pe)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(B.assignee)}`);return new st}evaluateIf(B,xe){const pe=this.evaluate(B.test,xe);return this.evaluateBlock(pe.__bool__().value?B.body:B.alternate,xe)}evaluateFor(B,xe){const pe=new Bt(xe);let we,Se;if(B.iterable.type==="SelectExpression"){const jt=B.iterable;Se=this.evaluate(jt.lhs,pe),we=jt.test}else Se=this.evaluate(B.iterable,pe);if(!(Se instanceof Ke||Se instanceof mt))throw new Error(`Expected iterable or object type in for loop: got ${Se.type}`);Se instanceof mt&&(Se=Se.keys());const Xe=[],ht=[];for(let jt=0;jt<Se.value.length;++jt){const gn=new Bt(pe),Gt=Se.value[jt];let yn;if(B.loopvar.type==="Identifier")yn=Fn=>Fn.setVariable(B.loopvar.value,Gt);else if(B.loopvar.type==="TupleLiteral"){const Fn=B.loopvar;if(Gt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${Gt.type}`);const pr=Gt;if(Fn.value.length!==pr.value.length)throw new Error(`Too ${Fn.value.length>pr.value.length?"few":"many"} items to unpack`);yn=Vr=>{for(let fr=0;fr<Fn.value.length;++fr){if(Fn.value[fr].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${Fn.value[fr].type}`);Vr.setVariable(Fn.value[fr].value,pr.value[fr])}}}else throw new Error(`Invalid loop variable(s): ${B.loopvar.type}`);we&&(yn(gn),!this.evaluate(we,gn).__bool__().value)||(Xe.push(Gt),ht.push(yn))}let Lt="",Qt=!0;for(let jt=0;jt<Xe.length;++jt){const gn=new Map([["index",new Be(jt+1)],["index0",new Be(jt)],["revindex",new Be(Xe.length-jt)],["revindex0",new Be(Xe.length-jt-1)],["first",new Ye(jt===0)],["last",new Ye(jt===Xe.length-1)],["length",new Be(Xe.length)],["previtem",jt>0?Xe[jt-1]:new He],["nextitem",jt<Xe.length-1?Xe[jt+1]:new He]]);pe.setVariable("loop",new mt(gn)),ht[jt](pe);try{const Gt=this.evaluateBlock(B.body,pe);Lt+=Gt.value}catch(Gt){if(Gt instanceof it)continue;if(Gt instanceof qe)break;throw Gt}Qt=!1}if(Qt){const jt=this.evaluateBlock(B.defaultBlock,pe);Lt+=jt.value}return new Ne(Lt)}evaluateMacro(B,xe){return xe.setVariable(B.name.value,new wt((pe,we)=>{const Se=new Bt(we);pe=pe.slice();let Xe;pe.at(-1)?.type==="KeywordArgumentsValue"&&(Xe=pe.pop());for(let ht=0;ht<B.args.length;++ht){const Lt=B.args[ht],Qt=pe[ht];if(Lt.type==="Identifier"){const jt=Lt;if(!Qt)throw new Error(`Missing positional argument: ${jt.value}`);Se.setVariable(jt.value,Qt)}else if(Lt.type==="KeywordArgumentExpression"){const jt=Lt,gn=Qt??Xe?.value.get(jt.key.value)??this.evaluate(jt.value,Se);Se.setVariable(jt.key.value,gn)}else throw new Error(`Unknown argument type: ${Lt.type}`)}return this.evaluateBlock(B.body,Se)})),new st}evaluateCallStatement(B,xe){const pe=new wt((Lt,Qt)=>{const jt=new Bt(Qt);if(B.callerArgs)for(let gn=0;gn<B.callerArgs.length;++gn){const Gt=B.callerArgs[gn];if(Gt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${Gt.type}`);jt.setVariable(Gt.value,Lt[gn]??new He)}return this.evaluateBlock(B.body,jt)}),[we,Se]=this.evaluateArguments(B.call.args,xe);we.push(new Tt(Se));const Xe=this.evaluate(B.call.callee,xe);if(Xe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Xe.type}`);const ht=new Bt(xe);return ht.setVariable("caller",pe),Xe.value(we,ht)}evaluateFilterStatement(B,xe){const pe=this.evaluateBlock(B.body,xe);return this.applyFilter(pe,B.filter,xe)}evaluate(B,xe){if(!B)return new He;switch(B.type){case"Program":return this.evalProgram(B,xe);case"Set":return this.evaluateSet(B,xe);case"If":return this.evaluateIf(B,xe);case"For":return this.evaluateFor(B,xe);case"Macro":return this.evaluateMacro(B,xe);case"CallStatement":return this.evaluateCallStatement(B,xe);case"Break":throw new qe;case"Continue":throw new it;case"IntegerLiteral":return new Be(B.value);case"FloatLiteral":return new _t(B.value);case"StringLiteral":return new Ne(B.value);case"ArrayLiteral":return new Ke(B.value.map(pe=>this.evaluate(pe,xe)));case"TupleLiteral":return new dt(B.value.map(pe=>this.evaluate(pe,xe)));case"ObjectLiteral":{const pe=new Map;for(const[we,Se]of B.value){const Xe=this.evaluate(we,xe);if(!(Xe instanceof Ne))throw new Error(`Object keys must be strings: got ${Xe.type}`);pe.set(Xe.value,this.evaluate(Se,xe))}return new mt(pe)}case"Identifier":return this.evaluateIdentifier(B,xe);case"CallExpression":return this.evaluateCallExpression(B,xe);case"MemberExpression":return this.evaluateMemberExpression(B,xe);case"UnaryExpression":return this.evaluateUnaryExpression(B,xe);case"BinaryExpression":return this.evaluateBinaryExpression(B,xe);case"FilterExpression":return this.evaluateFilterExpression(B,xe);case"FilterStatement":return this.evaluateFilterStatement(B,xe);case"TestExpression":return this.evaluateTestExpression(B,xe);case"SelectExpression":return this.evaluateSelectExpression(B,xe);case"Ternary":return this.evaluateTernaryExpression(B,xe);case"Comment":return new st;default:throw new SyntaxError(`Unknown node type: ${B.type}`)}}};function Ct(B){switch(typeof B){case"number":return Number.isInteger(B)?new Be(B):new _t(B);case"string":return new Ne(B);case"boolean":return new Ye(B);case"undefined":return new He;case"object":return B===null?new st:Array.isArray(B)?new Ke(B.map(Ct)):new mt(new Map(Object.entries(B).map(([xe,pe])=>[xe,Ct(pe)])));case"function":return new wt((xe,pe)=>{const we=B(...xe.map(Se=>Se.value))??null;return Ct(we)});default:throw new Error(`Cannot convert to runtime value: ${B}`)}}var rt=`
`,hn="{%- ",En=" -%}";function tr(B){switch(B.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return B.operator.value==="and"?1:B.operator.value==="in"||B.operator.value==="not in"?2:0}return 0}function Rt(B,xe="	"){const pe=typeof xe=="number"?" ".repeat(xe):xe;return xr(B.body,0,pe).replace(/\n$/,"")}function Kn(...B){return hn+B.join(" ")+En}function xr(B,xe,pe){return B.map(we=>mr(we,xe,pe)).join(rt)}function mr(B,xe,pe){const we=pe.repeat(xe);switch(B.type){case"Program":return xr(B.body,xe,pe);case"If":return qa(B,xe,pe);case"For":return on(B,xe,pe);case"Set":return wr(B,xe,pe);case"Macro":return Qi(B,xe,pe);case"Break":return we+Kn("break");case"Continue":return we+Kn("continue");case"CallStatement":return Xa(B,xe,pe);case"FilterStatement":return sa(B,xe,pe);case"Comment":return we+"{# "+B.value+" #}";default:return we+"{{- "+wn(B)+" -}}"}}function qa(B,xe,pe){const we=pe.repeat(xe),Se=[];let Xe=B;for(;Xe&&(Se.push({test:Xe.test,body:Xe.body}),Xe.alternate.length===1&&Xe.alternate[0].type==="If");)Xe=Xe.alternate[0];let ht=we+Kn("if",wn(Se[0].test))+rt+xr(Se[0].body,xe+1,pe);for(let Lt=1;Lt<Se.length;++Lt)ht+=rt+we+Kn("elif",wn(Se[Lt].test))+rt+xr(Se[Lt].body,xe+1,pe);return Xe&&Xe.alternate.length>0&&(ht+=rt+we+Kn("else")+rt+xr(Xe.alternate,xe+1,pe)),ht+=rt+we+Kn("endif"),ht}function on(B,xe,pe){const we=pe.repeat(xe);let Se="";if(B.iterable.type==="SelectExpression"){const ht=B.iterable;Se=`${wn(ht.lhs)} if ${wn(ht.test)}`}else Se=wn(B.iterable);let Xe=we+Kn("for",wn(B.loopvar),"in",Se)+rt+xr(B.body,xe+1,pe);return B.defaultBlock.length>0&&(Xe+=rt+we+Kn("else")+rt+xr(B.defaultBlock,xe+1,pe)),Xe+=rt+we+Kn("endfor"),Xe}function wr(B,xe,pe){const we=pe.repeat(xe),Se=wn(B.assignee),Xe=B.value?wn(B.value):"",ht=we+Kn("set",`${Se}${B.value?" = "+Xe:""}`);return B.body.length===0?ht:ht+rt+xr(B.body,xe+1,pe)+rt+we+Kn("endset")}function Qi(B,xe,pe){const we=pe.repeat(xe),Se=B.args.map(wn).join(", ");return we+Kn("macro",`${B.name.value}(${Se})`)+rt+xr(B.body,xe+1,pe)+rt+we+Kn("endmacro")}function Xa(B,xe,pe){const we=pe.repeat(xe),Se=B.callerArgs&&B.callerArgs.length>0?`(${B.callerArgs.map(wn).join(", ")})`:"",Xe=wn(B.call);let ht=we+Kn(`call${Se}`,Xe)+rt;return ht+=xr(B.body,xe+1,pe)+rt,ht+=we+Kn("endcall"),ht}function sa(B,xe,pe){const we=pe.repeat(xe),Se=B.filter.type==="Identifier"?B.filter.value:wn(B.filter);let Xe=we+Kn("filter",Se)+rt;return Xe+=xr(B.body,xe+1,pe)+rt,Xe+=we+Kn("endfilter"),Xe}function wn(B,xe=-1){switch(B.type){case"SpreadExpression":return`*${wn(B.argument)}`;case"Identifier":return B.value;case"IntegerLiteral":return`${B.value}`;case"FloatLiteral":return`${B.value}`;case"StringLiteral":return JSON.stringify(B.value);case"BinaryExpression":{const pe=B,we=tr(pe),Se=wn(pe.left,we),Xe=wn(pe.right,we+1),ht=`${Se} ${pe.operator.value} ${Xe}`;return we<xe?`(${ht})`:ht}case"UnaryExpression":{const pe=B;return pe.operator.value+(pe.operator.value==="not"?" ":"")+wn(pe.argument,1/0)}case"CallExpression":{const pe=B,we=pe.args.map(wn).join(", ");return`${wn(pe.callee)}(${we})`}case"MemberExpression":{const pe=B;let we=wn(pe.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(pe.object.type)||(we=`(${we})`);let Se=wn(pe.property);return!pe.computed&&pe.property.type!=="Identifier"&&(Se=`(${Se})`),pe.computed?`${we}[${Se}]`:`${we}.${Se}`}case"FilterExpression":{const pe=B,we=wn(pe.operand,1/0);return pe.filter.type==="CallExpression"?`${we} | ${wn(pe.filter)}`:`${we} | ${pe.filter.value}`}case"SelectExpression":{const pe=B;return`${wn(pe.lhs)} if ${wn(pe.test)}`}case"TestExpression":{const pe=B;return`${wn(pe.operand)} is${pe.negate?" not":""} ${pe.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const pe=B.value.map(wn),we=B.type==="ArrayLiteral"?"[]":"()";return`${we[0]}${pe.join(", ")}${we[1]}`}case"ObjectLiteral":return`{${Array.from(B.value.entries()).map(([we,Se])=>`${wn(we)}: ${wn(Se)}`).join(", ")}}`;case"SliceExpression":{const pe=B,we=pe.start?wn(pe.start):"",Se=pe.stop?wn(pe.stop):"",Xe=pe.step?`:${wn(pe.step)}`:"";return`${we}:${Se}${Xe}`}case"KeywordArgumentExpression":{const pe=B;return`${pe.key.value}=${wn(pe.value)}`}case"Ternary":{const pe=B,we=`${wn(pe.trueExpr)} if ${wn(pe.condition,0)} else ${wn(pe.falseExpr)}`;return xe>-1?`(${we})`:we}default:throw new Error(`Unknown expression type: ${B.type}`)}}var vi=class{parsed;constructor(B){const xe=h(B,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=Re(xe)}render(B){const xe=new Bt;if(qt(xe),B)for(const[Se,Xe]of Object.entries(B))xe.set(Se,Xe);return new nn(xe).run(this.parsed).value}format(B){return Rt(this.parsed,B?.indent||"	")}}}),"./src/backends/onnx.js":((e,t,n)=>{var r;n.r(t),n.d(t,{Tensor:()=>u.Tensor,createInferenceSession:()=>I,deviceToExecutionProviders:()=>_,isONNXProxy:()=>P,isONNXTensor:()=>E,runInferenceSession:()=>D});var o=n("./src/env.js"),s=n("?2ce3"),l=n("onnxruntime-web"),u=n("onnxruntime-common");const d=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),p=[];let g,h;const m=Symbol.for("onnxruntime");if(m in globalThis)h=globalThis[m];else if(o.apis.IS_NODE_ENV){switch(h=s??(r||(r=n.t(s,2))),process.platform){case"win32":p.push("dml");break;case"linux":process.arch==="x64"&&p.push("cuda");break}p.push("cpu"),g=["cpu"]}else h=l,o.apis.IS_WEBNN_AVAILABLE&&p.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),o.apis.IS_WEBGPU_AVAILABLE&&p.push("webgpu"),p.push("wasm"),g=["wasm"];const x=h.InferenceSession;function _(w=null){if(!w)return g;switch(w){case"auto":return p;case"gpu":return p.filter(R=>["webgpu","cuda","dml","webnn-gpu"].includes(R))}if(p.includes(w))return[d[w]??w];throw new Error(`Unsupported device: "${w}". Should be one of: ${p.join(", ")}.`)}let b=null;async function I(w,R,U){b&&await b;const N=x.create(w,R);b??=N;const ie=await N;return ie.config=U,ie}let T=Promise.resolve();const S=o.apis.IS_BROWSER_ENV||o.apis.IS_WEBWORKER_ENV;async function D(w,R){const U=()=>w.run(R);return await(S?T=T.then(U):U())}function E(w){return w instanceof h.Tensor}const C=h?.env;C?.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!C.wasm.wasmPaths&&(C.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${o.env.version}/dist/`),C.wasm.proxy=!1),C?.webgpu&&(C.webgpu.powerPreference="high-performance");function P(){return C?.wasm?.proxy}o.env.backends.onnx=C}),"./src/base/feature_extraction_utils.js":((e,t,n)=>{n.r(t),n.d(t,{FeatureExtractor:()=>l,validate_audio_inputs:()=>u});var r=n("./src/utils/constants.js"),o=n("./src/utils/generic.js"),s=n("./src/utils/hub.js");class l extends o.Callable{constructor(p){super(),this.config=p}static async from_pretrained(p,g={}){const h=await(0,s.getModelJSON)(p,r.FEATURE_EXTRACTOR_NAME,!0,g);return new this(h)}}function u(d,p){if(!(d instanceof Float32Array||d instanceof Float64Array))throw new Error(`${p} expects input to be a Float32Array or a Float64Array, but got ${d?.constructor?.name??typeof d} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}}),"./src/base/image_processors_utils.js":((e,t,n)=>{n.r(t),n.d(t,{ImageProcessor:()=>E,center_to_corners_format:()=>h,post_process_instance_segmentation:()=>D,post_process_object_detection:()=>m,post_process_panoptic_segmentation:()=>S,post_process_semantic_segmentation:()=>x});var r=n("./src/utils/generic.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/maths.js");n("./src/utils/image.js");var l=n("./src/utils/core.js"),u=n("./src/utils/hub.js"),d=n("./src/utils/constants.js");function p(C,P,w=0,R=null){const U=C/P;let N=(0,s.bankers_round)(U)*P;return R!==null&&N>R&&(N=Math.floor(U)*P),N<w&&(N=Math.ceil(U)*P),N}function g([C,P],w){return[Math.max(Math.floor(C/w),1)*w,Math.max(Math.floor(P/w),1)*w]}function h([C,P,w,R]){return[C-w/2,P-R/2,C+w/2,P+R/2]}function m(C,P=.5,w=null,R=!1){const U=C.logits,N=C.pred_boxes,[ie,ee,q]=U.dims;if(w!==null&&w.length!==ie)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let oe=[];for(let ae=0;ae<ie;++ae){let X=w!==null?w[ae]:null,se={boxes:[],classes:[],scores:[]},le=U[ae],be=N[ae];for(let Ee=0;Ee<ee;++Ee){let Y=le[Ee],te=[],J;if(R){J=Y.sigmoid().data;for(let H=0;H<J.length;++H)J[H]>P&&te.push(H)}else{let H=(0,s.max)(Y.data)[1];if(H===q-1||(J=(0,s.softmax)(Y.data),J[H]<P))continue;te.push(H)}for(const H of te){let _e=be[Ee].data;_e=h(_e),X!==null&&(_e=_e.map((Te,Re)=>Te*X[(Re+1)%2])),se.boxes.push(_e),se.classes.push(H),se.scores.push(J[H])}}oe.push(se)}return oe}function x(C,P=null){const w=C.logits,R=w.dims[0];if(P!==null&&P.length!==R)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const U=[];for(let N=0;N<R;++N){const ie=P!==null?P[N]:null;let ee=w[N];ie!==null&&(ee=(0,o.interpolate)(ee,ie,"bilinear",!1));const[q,oe]=ie??ee.dims.slice(-2),ae=new o.Tensor("int32",new Int32Array(q*oe),[q,oe]),X=ee[0].data,se=ae.data;for(let Ee=1;Ee<ee.dims[0];++Ee){const Y=ee[Ee].data;for(let te=0;te<Y.length;++te)Y[te]>X[te]&&(X[te]=Y[te],se[te]=Ee)}const le=new Array(ee.dims[0]);for(let Ee=0;Ee<se.length;++Ee){const Y=se[Ee];le[Y]=Y}const be=le.filter(Ee=>Ee!==void 0);U.push({segmentation:ae,labels:be})}return U}function _(C,P,w,R){const U=[],N=[],ie=[];for(let ee=0;ee<C.dims[0];++ee){const q=C[ee],oe=P[ee],ae=(0,s.max)(q.data)[1];if(ae===R)continue;const se=(0,s.softmax)(q.data)[ae];se>w&&(U.push(oe),N.push(se),ie.push(ae))}return[U,N,ie]}function b(C,P,w,R=.5,U=.8){const N=[];let ie=0,ee=0;const q=P[w].data;for(let ae=0;ae<C.length;++ae)C[ae]===w&&(N.push(ae),++ie),q[ae]>=R&&++ee;let oe=ie>0&&ee>0;return oe&&(oe=ie/ee>U),[oe,N]}function I(C,P,w,R,U,N=null,ie=null){const[ee,q]=ie??C[0].dims,oe=new o.Tensor("int32",new Int32Array(ee*q),[ee,q]),ae=[];if(ie!==null)for(let Ee=0;Ee<C.length;++Ee)C[Ee]=(0,o.interpolate)(C[Ee],ie,"bilinear",!1);const X=new Int32Array(C[0].data.length),se=new Float32Array(C[0].data.length);for(let Ee=0;Ee<C.length;++Ee){let Y=P[Ee];const te=C[Ee].data;for(let J=0;J<te.length;++J)te[J]*=Y,te[J]>se[J]&&(X[J]=Ee,se[J]=te[J])}let le=0;const be=oe.data;for(let Ee=0;Ee<w.length;++Ee){const Y=w[Ee],[te,J]=b(X,C,Ee,R,U);if(te){++le;for(const H of J)be[H]=le;ae.push({id:le,label_id:Y,score:P[Ee]})}}return[oe,ae]}function T(C,P,w=28,R=3136,U=784*1280){if(C<w||P<w)throw new Error(`height:${C} or width:${P} must be larger than factor:${w}`);if(Math.max(C,P)/Math.min(C,P)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(C,P)/Math.min(C,P)}`);let N=Math.round(C/w)*w,ie=Math.round(P/w)*w;if(N*ie>U){const ee=Math.sqrt(C*P/U);N=Math.floor(C/ee/w)*w,ie=Math.floor(P/ee/w)*w}else if(N*ie<R){const ee=Math.sqrt(R/(C*P));N=Math.ceil(C*ee/w)*w,ie=Math.ceil(P*ee/w)*w}return[N,ie]}function S(C,P=.5,w=.5,R=.8,U=null,N=null){U===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),U=new Set);const ie=C.class_queries_logits??C.logits,q=(C.masks_queries_logits??C.pred_masks).sigmoid();let[oe,ae,X]=ie.dims;if(X-=1,N!==null&&N.length!==oe)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let se=[];for(let le=0;le<oe;++le){let be=N!==null?N[le]:null,Ee=ie[le],Y=q[le],[te,J,H]=_(Ee,Y,P,X);if(H.length===0){let[Re,We]=be??Y.dims.slice(-2),at=new o.Tensor("int32",new Int32Array(Re*We).fill(-1),[Re,We]);se.push({segmentation:at,segments_info:[]});continue}let[_e,Te]=I(te,J,H,w,R,U,be);se.push({segmentation:_e,segments_info:Te})}return se}function D(C,P=.5,w=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class E extends r.Callable{constructor(P){super(),this.image_mean=P.image_mean??P.mean,this.image_std=P.image_std??P.std,this.resample=P.resample??2,this.do_rescale=P.do_rescale??!0,this.rescale_factor=P.rescale_factor??1/255,this.do_normalize=P.do_normalize,this.do_thumbnail=P.do_thumbnail,this.size=P.size??P.image_size,this.do_resize=P.do_resize??this.size!==void 0,this.size_divisibility=P.size_divisibility??P.size_divisor,this.do_center_crop=P.do_center_crop,this.crop_size=P.crop_size,this.do_convert_rgb=P.do_convert_rgb??!0,this.do_crop_margin=P.do_crop_margin,this.pad_size=P.pad_size,this.do_pad=P.do_pad,this.min_pixels=P.min_pixels,this.max_pixels=P.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=P.do_flip_channel_order??!1,this.config=P}async thumbnail(P,w,R=2){const U=P.height,N=P.width,ie=w.height,ee=w.width;let q=Math.min(U,ie),oe=Math.min(N,ee);return q===U&&oe===N?P:(U>N?oe=Math.floor(N*q/U):N>U&&(q=Math.floor(U*oe/N)),await P.resize(oe,q,{resample:R}))}async crop_margin(P,w=200){const R=P.clone().grayscale(),U=(0,s.min)(R.data)[0],ie=(0,s.max)(R.data)[0]-U;if(ie===0)return P;const ee=w/255;let q=R.width,oe=R.height,ae=0,X=0;const se=R.data;for(let le=0;le<R.height;++le){const be=le*R.width;for(let Ee=0;Ee<R.width;++Ee)(se[be+Ee]-U)/ie<ee&&(q=Math.min(q,Ee),oe=Math.min(oe,le),ae=Math.max(ae,Ee),X=Math.max(X,le))}return P=await P.crop([q,oe,ae,X]),P}pad_image(P,w,R,{mode:U="constant",center:N=!1,constant_values:ie=0}={}){const[ee,q,oe]=w;let ae,X;if(typeof R=="number"?(ae=R,X=R):R==="square"?ae=X=Math.max(ee,q):(ae=R.width,X=R.height),ae!==q||X!==ee){const se=new Float32Array(ae*X*oe);if(Array.isArray(ie))for(let Ee=0;Ee<se.length;++Ee)se[Ee]=ie[Ee%oe];else ie!==0&&se.fill(ie);const[le,be]=N?[Math.floor((ae-q)/2),Math.floor((X-ee)/2)]:[0,0];for(let Ee=0;Ee<ee;++Ee){const Y=(Ee+be)*ae,te=Ee*q;for(let J=0;J<q;++J){const H=(Y+J+le)*oe,_e=(te+J)*oe;for(let Te=0;Te<oe;++Te)se[H+Te]=P[_e+Te]}}if(U==="symmetric"){if(N)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const Ee=ee-1,Y=q-1;for(let te=0;te<X;++te){const J=te*ae,H=(0,l.calculateReflectOffset)(te,Ee)*q;for(let _e=0;_e<ae;++_e){if(te<ee&&_e<q)continue;const Te=(J+_e)*oe,Re=(H+(0,l.calculateReflectOffset)(_e,Y))*oe;for(let We=0;We<oe;++We)se[Te+We]=P[Re+We]}}}P=se,w=[X,ae,oe]}return[P,w]}rescale(P){for(let w=0;w<P.length;++w)P[w]=this.rescale_factor*P[w]}get_resize_output_image_size(P,w){const[R,U]=P.size;let N,ie;if(this.do_thumbnail){const{height:ee,width:q}=w;N=Math.min(ee,q)}else Number.isInteger(w)?(N=w,ie=this.config.max_size??N):w!==void 0&&(N=w.shortest_edge,ie=w.longest_edge);if(N!==void 0||ie!==void 0){const ee=N===void 0?1:Math.max(N/R,N/U),q=R*ee,oe=U*ee,ae=ie===void 0?1:Math.min(ie/q,ie/oe);let X=Math.floor(Number((q*ae).toFixed(2))),se=Math.floor(Number((oe*ae).toFixed(2)));return this.size_divisibility!==void 0&&([X,se]=g([X,se],this.size_divisibility)),[X,se]}else if(w!==void 0&&w.width!==void 0&&w.height!==void 0){let ee=w.width,q=w.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let oe=q/U,ae=ee/R;Math.abs(1-ae)<Math.abs(1-oe)?oe=ae:ae=oe,q=p(oe*U,this.config.ensure_multiple_of),ee=p(ae*R,this.config.ensure_multiple_of)}return[ee,q]}else{if(this.size_divisibility!==void 0)return g([R,U],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const ee=this.config.patch_size*this.config.merge_size;return T(U,R,ee,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(w)}`)}}async resize(P){const[w,R]=this.get_resize_output_image_size(P,this.size);return await P.resize(w,R,{resample:this.resample})}async preprocess(P,{do_normalize:w=null,do_pad:R=null,do_convert_rgb:U=null,do_convert_grayscale:N=null,do_flip_channel_order:ie=null}={}){this.do_crop_margin&&(P=await this.crop_margin(P));const[ee,q]=P.size;if(U??this.do_convert_rgb?P=P.rgb():N&&(P=P.grayscale()),this.do_resize&&(P=await this.resize(P)),this.do_thumbnail&&(P=await this.thumbnail(P,this.size,this.resample)),this.do_center_crop){let le,be;Number.isInteger(this.crop_size)?(le=this.crop_size,be=this.crop_size):(le=this.crop_size.width,be=this.crop_size.height),P=await P.center_crop(le,be)}const oe=[P.height,P.width];let ae=Float32Array.from(P.data),X=[P.height,P.width,P.channels];if(this.do_rescale&&this.rescale(ae),w??this.do_normalize){let le=this.image_mean;Array.isArray(this.image_mean)||(le=new Array(P.channels).fill(le));let be=this.image_std;if(Array.isArray(this.image_std)||(be=new Array(P.channels).fill(be)),le.length!==P.channels||be.length!==P.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${le.length}) and \`image_std\` (${be.length}) must match the number of channels in the image (${P.channels}).`);for(let Ee=0;Ee<ae.length;Ee+=P.channels)for(let Y=0;Y<P.channels;++Y)ae[Ee+Y]=(ae[Ee+Y]-le[Y])/be[Y]}if(R??this.do_pad){if(this.pad_size)[ae,X]=this.pad_image(ae,[P.height,P.width,P.channels],this.pad_size);else if(this.size_divisibility){const[le,be]=g([X[1],X[0]],this.size_divisibility);[ae,X]=this.pad_image(ae,X,{width:le,height:be})}}if(ie??this.do_flip_channel_order){if(X[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let le=0;le<ae.length;le+=3){const be=ae[le];ae[le]=ae[le+2],ae[le+2]=be}}const se=new o.Tensor("float32",ae,X).permute(2,0,1);return{original_size:[q,ee],reshaped_input_size:oe,pixel_values:se}}async _call(P,...w){Array.isArray(P)||(P=[P]);const R=await Promise.all(P.map(N=>this.preprocess(N)));return{pixel_values:(0,o.stack)(R.map(N=>N.pixel_values),0),original_sizes:R.map(N=>N.original_size),reshaped_input_sizes:R.map(N=>N.reshaped_input_size)}}static async from_pretrained(P,w={}){const R=await(0,u.getModelJSON)(P,d.IMAGE_PROCESSOR_NAME,!0,w);return new this(R)}}}),"./src/base/processing_utils.js":((e,t,n)=>{n.r(t),n.d(t,{Processor:()=>l});var r=n("./src/utils/constants.js"),o=n("./src/utils/generic.js"),s=n("./src/utils/hub.js");class l extends o.Callable{static classes=["image_processor_class","tokenizer_class","feature_extractor_class"];static uses_processor_config=!1;static uses_chat_template_file=!1;constructor(d,p,g){super(),this.config=d,this.components=p,this.chat_template=g}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(d,p={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(d,{tokenize:!1,chat_template:this.chat_template??void 0,...p})}batch_decode(...d){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...d)}decode(...d){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...d)}async _call(d,...p){for(const g of[this.image_processor,this.feature_extractor,this.tokenizer])if(g)return g(d,...p);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(d,p={}){const[g,h,m]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(d,r.PROCESSOR_NAME,!0,p):{},Promise.all(this.classes.filter(x=>x in this).map(async x=>{const _=await this[x].from_pretrained(d,p);return[x.replace(/_class$/,""),_]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(d,r.CHAT_TEMPLATE_NAME,!0,p):null]);return new this(g,h,m)}}}),"./src/configs.js":((e,t,n)=>{n.r(t),n.d(t,{AutoConfig:()=>g,PretrainedConfig:()=>p,getCacheShapes:()=>u});var r=n("./src/utils/core.js"),o=n("./src/utils/hub.js");async function s(h,m){return await(0,o.getModelJSON)(h,"config.json",!0,m)}function l(h){const m={};let x={};switch(h.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":case"mistral3":x=l(h.text_config);break;case"moondream1":x=l(h.phi_config);break;case"musicgen":x=l(h.decoder);break;case"multi_modality":x=l(h.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":m.num_heads="num_attention_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size";break;case"llama":case"llama4_text":case"nanochat":case"arcee":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"granitemoehybrid":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size",m.num_attention_heads="num_attention_heads",m.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"vaultgemma":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":case"ministral":case"ministral3":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.dim_kv="head_dim";break;case"openelm":m.num_heads="num_kv_heads",m.num_layers="num_transformer_layers",m.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":m.num_heads="num_heads",m.num_layers="num_layers",m.hidden_size="hidden_size";break;case"bloom":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="hidden_size";break;case"mpt":m.num_heads="n_heads",m.num_layers="n_layers",m.hidden_size="d_model";break;case"exaone":m.num_heads="num_key_value_heads",m.num_layers="num_layers",m.dim_kv="head_dim",m.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":m.num_decoder_layers="num_decoder_layers",m.num_decoder_heads="num_heads",m.decoder_dim_kv="d_kv",m.num_encoder_layers="num_layers",m.num_encoder_heads="num_heads",m.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="d_model",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="d_model";break;case"speecht5":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="hidden_size",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="hidden_size";break;case"trocr":m.num_encoder_layers=m.num_decoder_layers="decoder_layers",m.num_encoder_heads=m.num_decoder_heads="decoder_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="d_model";break;case"musicgen_decoder":m.num_encoder_layers=m.num_decoder_layers="num_hidden_layers",m.num_encoder_heads=m.num_decoder_heads="num_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"moonshine":m.num_decoder_layers="decoder_num_hidden_layers",m.num_decoder_heads="decoder_num_key_value_heads",m.num_encoder_layers="encoder_num_hidden_layers",m.num_encoder_heads="encoder_num_key_value_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const b=l(h.decoder),I="num_decoder_layers"in b,T=(0,r.pick)(h,["model_type","is_encoder_decoder"]);return I?(T.num_decoder_layers=b.num_decoder_layers,T.num_decoder_heads=b.num_decoder_heads,T.decoder_hidden_size=b.decoder_hidden_size,T.num_encoder_layers=b.num_encoder_layers,T.num_encoder_heads=b.num_encoder_heads,T.encoder_hidden_size=b.encoder_hidden_size):(T.num_layers=b.num_layers,T.num_heads=b.num_heads,T.hidden_size=b.hidden_size),T}const _={...x,...(0,r.pick)(h,["model_type","multi_query","is_encoder_decoder"])};for(const b in m)_[b]=h[m[b]];return _}function u(h,m){if(h.model_type==="lfm2"){const x=m?.prefix??"past_key_values",_=x==="present"?"present":"past",b={},{layer_types:I,num_attention_heads:T,num_key_value_heads:S,hidden_size:D,conv_L_cache:E}=h,C=D/T,P=m?.batch_size??1;for(let w=0;w<I.length;++w)if(I[w]==="full_attention")for(const R of["key","value"])b[`${x}.${w}.${R}`]=[P,S,0,C];else if(I[w]==="conv")b[`${_}_conv.${w}`]=[P,D,E];else throw new Error(`Unsupported layer type: ${I[w]}`);return b}return d(h,m)}function d(h,{prefix:m="past_key_values",batch_size:x=1}={}){const _={},b=h.normalized_config;if(b.is_encoder_decoder&&"num_encoder_heads"in b&&"num_decoder_heads"in b){const I=b.encoder_dim_kv??b.encoder_hidden_size/b.num_encoder_heads,T=b.decoder_dim_kv??b.decoder_hidden_size/b.num_decoder_heads,S=[x,b.num_encoder_heads,0,I],D=[x,b.num_decoder_heads,0,T];for(let E=0;E<b.num_decoder_layers;++E)_[`${m}.${E}.encoder.key`]=S,_[`${m}.${E}.encoder.value`]=S,_[`${m}.${E}.decoder.key`]=D,_[`${m}.${E}.decoder.value`]=D}else{const I=b.num_heads,T=b.num_layers,S=b.dim_kv??b.hidden_size/(b.num_attention_heads??I);if(b.model_type==="falcon"){const D=[x*I,0,S];for(let E=0;E<T;++E)_[`${m}.${E}.key`]=D,_[`${m}.${E}.value`]=D}else if(b.multi_query){const D=[x*I,0,2*S];for(let E=0;E<T;++E)_[`${m}.${E}.key_value`]=D}else if(b.model_type==="bloom"){const D=[x*I,S,0],E=[x*I,0,S];for(let C=0;C<T;++C)_[`${m}.${C}.key`]=D,_[`${m}.${C}.value`]=E}else if(b.model_type==="openelm")for(let D=0;D<T;++D){const E=[x,I[D],0,S];_[`${m}.${D}.key`]=E,_[`${m}.${D}.value`]=E}else{const D=[x,I,0,S];for(let E=0;E<T;++E)_[`${m}.${E}.key`]=D,_[`${m}.${E}.value`]=D}}return _}class p{model_type=null;is_encoder_decoder=!1;max_position_embeddings;"transformers.js_config";constructor(m){Object.assign(this,m),this.normalized_config=l(this)}static async from_pretrained(m,{progress_callback:x=null,config:_=null,cache_dir:b=null,local_files_only:I=!1,revision:T="main"}={}){_&&!(_ instanceof p)&&(_=new p(_));const S=_??await s(m,{progress_callback:x,config:_,cache_dir:b,local_files_only:I,revision:T});return new this(S)}}class g{static async from_pretrained(...m){return p.from_pretrained(...m)}}}),"./src/env.js":((e,t,n)=>{n.r(t),n.d(t,{apis:()=>T,env:()=>w});var r=n("?db59"),o=n("?383f"),s=n("?fa4b");const l="3.8.1",u=typeof window<"u"&&typeof window.document<"u",d=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes(self.constructor?.name),p=typeof self<"u"&&"caches"in self,g=typeof navigator<"u"&&"gpu"in navigator,h=typeof navigator<"u"&&"ml"in navigator,m=typeof process<"u",x=m&&process?.release?.name==="node",_=!R(r),b=!R(o),I=typeof globalThis.Deno<"u",T=Object.freeze({IS_BROWSER_ENV:u,IS_WEBWORKER_ENV:d,IS_WEB_CACHE_AVAILABLE:p,IS_WEBGPU_AVAILABLE:g,IS_WEBNN_AVAILABLE:h,IS_PROCESS_AVAILABLE:m,IS_NODE_ENV:x,IS_FS_AVAILABLE:_,IS_PATH_AVAILABLE:b}),S=_&&b;let D="./";if(S){const U=Object(import.meta).url;U?D=o.dirname(o.dirname(s.fileURLToPath(U))):typeof __dirname<"u"&&(D=o.dirname(__dirname))}const E=S?o.join(D,"/.cache/"):null,C="/models/",P=S?o.join(D,C):C,w={version:l,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(u||d),localModelPath:P,useFS:_,useBrowserCache:p&&!I,useFSCache:_,cacheDir:E,useCustomCache:!1,customCache:null};function R(U){return Object.keys(U).length===0}}),"./src/generation/configuration_utils.js":((e,t,n)=>{n.r(t),n.d(t,{GenerationConfig:()=>o});var r=n("./src/utils/core.js");class o{max_length=20;max_new_tokens=null;min_length=0;min_new_tokens=null;early_stopping=!1;max_time=null;do_sample=!1;num_beams=1;num_beam_groups=1;penalty_alpha=null;use_cache=!0;temperature=1;top_k=50;top_p=1;typical_p=1;epsilon_cutoff=0;eta_cutoff=0;diversity_penalty=0;repetition_penalty=1;encoder_repetition_penalty=1;length_penalty=1;no_repeat_ngram_size=0;bad_words_ids=null;force_words_ids=null;renormalize_logits=!1;constraints=null;forced_bos_token_id=null;forced_eos_token_id=null;remove_invalid_values=!1;exponential_decay_length_penalty=null;suppress_tokens=null;streamer=null;begin_suppress_tokens=null;forced_decoder_ids=null;guidance_scale=null;num_return_sequences=1;output_attentions=!1;output_hidden_states=!1;output_scores=!1;return_dict_in_generate=!1;pad_token_id=null;bos_token_id=null;eos_token_id=null;encoder_no_repeat_ngram_size=0;decoder_start_token_id=null;generation_kwargs={};constructor(l){Object.assign(this,(0,r.pick)(l,Object.getOwnPropertyNames(this)))}}}),"./src/generation/logits_process.js":((e,t,n)=>{n.r(t),n.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>T,ForcedBOSTokenLogitsProcessor:()=>d,ForcedEOSTokenLogitsProcessor:()=>p,LogitsProcessor:()=>s,LogitsProcessorList:()=>u,LogitsWarper:()=>l,MinLengthLogitsProcessor:()=>_,MinNewTokensLengthLogitsProcessor:()=>b,NoBadWordsLogitsProcessor:()=>I,NoRepeatNGramLogitsProcessor:()=>m,RepetitionPenaltyLogitsProcessor:()=>x,SuppressTokensAtBeginLogitsProcessor:()=>g,TemperatureLogitsWarper:()=>S,TopKLogitsWarper:()=>E,TopPLogitsWarper:()=>D,WhisperTimeStampLogitsProcessor:()=>h});var r=n("./src/utils/generic.js");n("./src/utils/tensor.js");var o=n("./src/utils/maths.js");class s extends r.Callable{_call(P,w){throw Error("`_call` should be implemented in a subclass")}}class l extends r.Callable{_call(P,w){throw Error("`_call` should be implemented in a subclass")}}class u extends r.Callable{constructor(){super(),this.processors=[]}push(P){this.processors.push(P)}extend(P){this.processors.push(...P)}_call(P,w){let R=w;for(const U of this.processors)R=U(P,R);return R}[Symbol.iterator](){return this.processors.values()}}class d extends s{constructor(P){super(),this.bos_token_id=P}_call(P,w){for(let R=0;R<P.length;++R)if(P[R].length===1){const U=w[R].data;U.fill(-1/0),U[this.bos_token_id]=0}return w}}class p extends s{constructor(P,w){super(),this.max_length=P,this.eos_token_id=Array.isArray(w)?w:[w]}_call(P,w){for(let R=0;R<P.length;++R)if(P[R].length===this.max_length-1){const U=w[R].data;U.fill(-1/0);for(const N of this.eos_token_id)U[N]=0}return w}}class g extends s{constructor(P,w){super(),this.begin_suppress_tokens=P,this.begin_index=w}_call(P,w){for(let R=0;R<P.length;++R)if(P[R].length===this.begin_index){const U=w[R].data;for(const N of this.begin_suppress_tokens)U[N]=-1/0}return w}}class h extends s{constructor(P,w){super(),this.eos_token_id=Array.isArray(P.eos_token_id)?P.eos_token_id[0]:P.eos_token_id,this.no_timestamps_token_id=P.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=w.length,w.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=P.max_initial_timestamp_index}_call(P,w){for(let R=0;R<P.length;++R){const U=w[R].data;if(U[this.no_timestamps_token_id]=-1/0,P[R].length===this.begin_index-1){U.fill(-1/0),U[this.timestamp_begin]=0;continue}const N=P[R].slice(this.begin_index),ie=N.length>=1&&N[N.length-1]>=this.timestamp_begin,ee=N.length<2||N[N.length-2]>=this.timestamp_begin;if(ie&&(ee?U.subarray(this.timestamp_begin).fill(-1/0):U.subarray(0,this.eos_token_id).fill(-1/0)),P[R].length===this.begin_index&&this.max_initial_timestamp_index!==null){const X=this.timestamp_begin+this.max_initial_timestamp_index;U.subarray(X+1).fill(-1/0)}const q=(0,o.log_softmax)(U),oe=Math.log(q.subarray(this.timestamp_begin).map(Math.exp).reduce((X,se)=>X+se)),ae=(0,o.max)(q.subarray(0,this.timestamp_begin))[0];oe>ae&&U.subarray(0,this.timestamp_begin).fill(-1/0)}return w}}class m extends s{constructor(P){super(),this.no_repeat_ngram_size=P}getNgrams(P){const w=P.length,R=[];for(let N=0;N<w+1-this.no_repeat_ngram_size;++N){const ie=[];for(let ee=0;ee<this.no_repeat_ngram_size;++ee)ie.push(P[N+ee]);R.push(ie.map(Number))}const U=new Map;for(const N of R){const ie=N.slice(0,N.length-1),ee=JSON.stringify(ie),q=U.get(ee)??[];q.push(N[N.length-1]),U.set(ee,q)}return U}getGeneratedNgrams(P,w){const R=w.slice(w.length+1-this.no_repeat_ngram_size,w.length);return P.get(JSON.stringify(R.map(Number)))??[]}calcBannedNgramTokens(P){const w=[];if(P.length+1<this.no_repeat_ngram_size)return w;{const R=this.getNgrams(P);return this.getGeneratedNgrams(R,P)}}_call(P,w){for(let R=0;R<P.length;++R){const U=w[R].data,N=this.calcBannedNgramTokens(P[R]);for(const ie of N)U[ie]=-1/0}return w}}class x extends s{constructor(P){super(),this.penalty=P}_call(P,w){for(let R=0;R<P.length;++R){const U=w[R].data;for(const N of new Set(P[R])){const ie=Number(N);U[ie]<0?U[ie]*=this.penalty:U[ie]/=this.penalty}}return w}}class _ extends s{constructor(P,w){super(),this.min_length=P,this.eos_token_id=Array.isArray(w)?w:[w]}_call(P,w){for(let R=0;R<P.length;++R)if(P[R].length<this.min_length){const U=w[R].data;for(const N of this.eos_token_id)U[N]=-1/0}return w}}class b extends s{constructor(P,w,R){super(),this.prompt_length_to_skip=P,this.min_new_tokens=w,this.eos_token_id=Array.isArray(R)?R:[R]}_call(P,w){for(let R=0;R<P.length;++R)if(P[R].length-this.prompt_length_to_skip<this.min_new_tokens){const N=w[R].data;for(const ie of this.eos_token_id)N[ie]=-1/0}return w}}class I extends s{constructor(P,w){super(),this.bad_words_ids=P,this.eos_token_id=Array.isArray(w)?w:[w]}_call(P,w){for(let R=0;R<P.length;++R){const U=w[R].data,N=P[R];for(const ie of this.bad_words_ids){if(N.length<ie.length-1)continue;let ee=!0;for(let q=1;q<=ie.length-1;++q)if(ie.at(-q-1)!=N.at(-q)){ee=!1;break}ee&&(U[ie.at(-1)]=-1/0)}}return w}}class T extends s{constructor(P){if(super(),P<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${P}.`);this.guidance_scale=P}_call(P,w){if(w.dims[0]!==2*P.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${w.dims[0]} for the logits and ${P.length} for the input ids.`);const R=P.length,U=w.slice([0,R],null),N=w.slice([R,w.dims[0]],null);for(let ie=0;ie<N.data.length;++ie)N.data[ie]+=(U.data[ie]-N.data[ie])*this.guidance_scale;return N}}class S extends l{constructor(P){super(),this.temperature=P}_call(P,w){const R=w.data;for(let U=0;U<R.length;++U)R[U]/=this.temperature;return w}}class D extends l{constructor(P,{filter_value:w=-1/0,min_tokens_to_keep:R=1}={}){if(super(),P<0||P>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${P}`);if(!Number.isInteger(R)||R<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${R}`);this.top_p=P,this.filter_value=w,this.min_tokens_to_keep=R}}class E extends l{constructor(P,{filter_value:w=-1/0,min_tokens_to_keep:R=1}={}){if(super(),!Number.isInteger(P)||P<0)throw new Error(`\`top_k\` must be a positive integer, but is ${P}`);this.top_k=Math.max(P,R),this.filter_value=w}}}),"./src/generation/logits_sampler.js":((e,t,n)=>{n.r(t),n.d(t,{LogitsSampler:()=>l});var r=n("./src/utils/generic.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/maths.js");n("./src/generation/configuration_utils.js");class l extends r.Callable{constructor(h){super(),this.generation_config=h}async _call(h){return this.sample(h)}async sample(h){throw Error("sample should be implemented in subclasses.")}getLogits(h,m){let x=h.dims.at(-1),_=h.data;if(m===-1)_=_.slice(-x);else{let b=m*x;_=_.slice(b,b+x)}return _}randomSelect(h){let m=0;for(let _=0;_<h.length;++_)m+=h[_];let x=Math.random()*m;for(let _=0;_<h.length;++_)if(x-=h[_],x<=0)return _;return 0}static getSampler(h){if(h.do_sample)return new d(h);if(h.num_beams>1)return new p(h);if(h.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${h.num_return_sequences}.`);return new u(h)}}class u extends l{async sample(h){const m=(0,s.max)(h.data)[1];return[[BigInt(m),0]]}}class d extends l{async sample(h){let m=h.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[x,_]=await(0,o.topk)(h,m),b=(0,s.softmax)(x.data);return Array.from({length:this.generation_config.num_beams},()=>{const I=this.randomSelect(b);return[_.data[I],Math.log(b[I])]})}}class p extends l{async sample(h){let m=h.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[x,_]=await(0,o.topk)(h,m),b=(0,s.softmax)(x.data);return Array.from({length:this.generation_config.num_beams},(I,T)=>[_.data[T],Math.log(b[T])])}}}),"./src/generation/stopping_criteria.js":((e,t,n)=>{n.r(t),n.d(t,{EosTokenCriteria:()=>u,InterruptableStoppingCriteria:()=>d,MaxLengthCriteria:()=>l,StoppingCriteria:()=>o,StoppingCriteriaList:()=>s});var r=n("./src/utils/generic.js");class o extends r.Callable{_call(g,h){throw Error("StoppingCriteria needs to be subclassed")}}class s extends r.Callable{constructor(){super(),this.criteria=[]}push(g){this.criteria.push(g)}extend(g){g instanceof s?g=g.criteria:g instanceof o&&(g=[g]),this.criteria.push(...g)}_call(g,h){const m=new Array(g.length).fill(!1);for(const x of this.criteria){const _=x(g,h);for(let b=0;b<m.length;++b)m[b]||=_[b]}return m}[Symbol.iterator](){return this.criteria.values()}}class l extends o{constructor(g,h=null){super(),this.max_length=g,this.max_position_embeddings=h}_call(g){return g.map(h=>h.length>=this.max_length)}}class u extends o{constructor(g){super(),Array.isArray(g)||(g=[g]),this.eos_token_id=g}_call(g,h){return g.map(m=>{const x=m.at(-1);return this.eos_token_id.some(_=>x==_)})}}class d extends o{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(g,h){return new Array(g.length).fill(this.interrupted)}}}),"./src/generation/streamers.js":((e,t,n)=>{n.r(t),n.d(t,{BaseStreamer:()=>l,TextStreamer:()=>d,WhisperTextStreamer:()=>p});var r=n("./src/utils/core.js"),o=n("./src/tokenizers.js"),s=n("./src/env.js");class l{put(h){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const u=s.apis.IS_PROCESS_AVAILABLE?g=>process.stdout.write(g):g=>console.log(g);class d extends l{constructor(h,{skip_prompt:m=!1,callback_function:x=null,token_callback_function:_=null,skip_special_tokens:b=!0,decode_kwargs:I={},...T}={}){super(),this.tokenizer=h,this.skip_prompt=m,this.callback_function=x??u,this.token_callback_function=_,this.decode_kwargs={skip_special_tokens:b,...I,...T},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(h){if(h.length>1)throw Error("TextStreamer only supports batch size of 1");const m=this.next_tokens_are_prompt;if(m&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const x=h[0];this.token_callback_function?.(x),this.token_cache=(0,r.mergeArrays)(this.token_cache,x);const _=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let b;m||_.endsWith(`
`)?(b=_.slice(this.print_len),this.token_cache=[],this.print_len=0):_.length>0&&(0,o.is_chinese_char)(_.charCodeAt(_.length-1))?(b=_.slice(this.print_len),this.print_len+=b.length):(b=_.slice(this.print_len,_.lastIndexOf(" ")+1),this.print_len+=b.length),this.on_finalized_text(b,!1)}end(){let h;this.token_cache.length>0?(h=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):h="",this.next_tokens_are_prompt=!0,this.on_finalized_text(h,!0)}on_finalized_text(h,m){h.length>0&&this.callback_function?.(h),m&&this.callback_function===u&&s.apis.IS_PROCESS_AVAILABLE&&this.callback_function?.(`
`)}}class p extends d{constructor(h,{skip_prompt:m=!1,callback_function:x=null,token_callback_function:_=null,on_chunk_start:b=null,on_chunk_end:I=null,on_finalize:T=null,time_precision:S=.02,skip_special_tokens:D=!0,decode_kwargs:E={}}={}){super(h,{skip_prompt:m,skip_special_tokens:D,callback_function:x,token_callback_function:_,decode_kwargs:E}),this.timestamp_begin=h.timestamp_begin,this.on_chunk_start=b,this.on_chunk_end=I,this.on_finalize=T,this.time_precision=S,this.waiting_for_timestamp=!1}put(h){if(h.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const m=h[0];if(m.length===1){const x=Number(m[0])-this.timestamp_begin;if(x>=0){const _=x*this.time_precision;this.waiting_for_timestamp?this.on_chunk_end?.(_):this.on_chunk_start?.(_),this.waiting_for_timestamp=!this.waiting_for_timestamp,this.token_callback_function?.(m);return}}return super.put(h)}end(){super.end(),this.on_finalize?.()}}}),"./src/models.js":((e,t,n)=>{n.r(t),n.d(t,{ASTForAudioClassification:()=>Yi,ASTModel:()=>xo,ASTPreTrainedModel:()=>Ea,AlbertForMaskedLM:()=>zt,AlbertForQuestionAnswering:()=>Xt,AlbertForSequenceClassification:()=>Ht,AlbertModel:()=>Kt,AlbertPreTrainedModel:()=>ot,ArceeForCausalLM:()=>Bn,ArceeModel:()=>vn,ArceePreTrainedModel:()=>Qn,AutoModel:()=>xy,AutoModelForAudioClassification:()=>Fh,AutoModelForAudioFrameClassification:()=>E_,AutoModelForAudioTextToText:()=>ar,AutoModelForCTC:()=>Sy,AutoModelForCausalLM:()=>Lh,AutoModelForDepthEstimation:()=>Py,AutoModelForDocumentQuestionAnswering:()=>Cy,AutoModelForImageClassification:()=>hs,AutoModelForImageFeatureExtraction:()=>Ay,AutoModelForImageMatting:()=>jh,AutoModelForImageSegmentation:()=>od,AutoModelForImageTextToText:()=>S_,AutoModelForImageToImage:()=>Bh,AutoModelForMaskGeneration:()=>M_,AutoModelForMaskedLM:()=>qp,AutoModelForNormalEstimation:()=>ky,AutoModelForObjectDetection:()=>x_,AutoModelForPoseEstimation:()=>sd,AutoModelForQuestionAnswering:()=>zh,AutoModelForSemanticSegmentation:()=>Ey,AutoModelForSeq2SeqLM:()=>My,AutoModelForSequenceClassification:()=>y_,AutoModelForSpeechSeq2Seq:()=>Ty,AutoModelForTextToSpectrogram:()=>Hp,AutoModelForTextToWaveform:()=>iu,AutoModelForTokenClassification:()=>wy,AutoModelForUniversalSegmentation:()=>b_,AutoModelForVision2Seq:()=>Il,AutoModelForXVector:()=>T_,AutoModelForZeroShotObjectDetection:()=>w_,BartForConditionalGeneration:()=>kr,BartForSequenceClassification:()=>nr,BartModel:()=>Kr,BartPretrainedModel:()=>Gr,BaseModelOutput:()=>Ge,BeitForImageClassification:()=>im,BeitModel:()=>Ru,BeitPreTrainedModel:()=>El,BertForMaskedLM:()=>Ve,BertForQuestionAnswering:()=>Ne,BertForSequenceClassification:()=>Be,BertForTokenClassification:()=>_t,BertModel:()=>it,BertPreTrainedModel:()=>qe,BlenderbotForConditionalGeneration:()=>Xn,BlenderbotModel:()=>Lr,BlenderbotPreTrainedModel:()=>Yr,BlenderbotSmallForConditionalGeneration:()=>ci,BlenderbotSmallModel:()=>Ua,BlenderbotSmallPreTrainedModel:()=>_r,BloomForCausalLM:()=>Dc,BloomModel:()=>$c,BloomPreTrainedModel:()=>ku,CLIPModel:()=>Ls,CLIPPreTrainedModel:()=>Ci,CLIPSegForImageSegmentation:()=>Va,CLIPSegModel:()=>zi,CLIPSegPreTrainedModel:()=>Li,CLIPTextModel:()=>To,CLIPTextModelWithProjection:()=>Eo,CLIPVisionModel:()=>kc,CLIPVisionModelWithProjection:()=>zs,CamembertForMaskedLM:()=>Xe,CamembertForQuestionAnswering:()=>Qt,CamembertForSequenceClassification:()=>ht,CamembertForTokenClassification:()=>Lt,CamembertModel:()=>Se,CamembertPreTrainedModel:()=>we,CausalLMOutput:()=>zo,CausalLMOutputWithPast:()=>Oy,ChineseCLIPModel:()=>_l,ChineseCLIPPreTrainedModel:()=>co,ClapAudioModelWithProjection:()=>Ip,ClapModel:()=>ps,ClapPreTrainedModel:()=>qu,ClapTextModelWithProjection:()=>Ia,CodeGenForCausalLM:()=>je,CodeGenModel:()=>Ce,CodeGenPreTrainedModel:()=>ue,CohereForCausalLM:()=>ai,CohereModel:()=>Gf,CoherePreTrainedModel:()=>Eu,ConvBertForMaskedLM:()=>on,ConvBertForQuestionAnswering:()=>Xa,ConvBertForSequenceClassification:()=>wr,ConvBertForTokenClassification:()=>Qi,ConvBertModel:()=>qa,ConvBertPreTrainedModel:()=>mr,ConvNextForImageClassification:()=>dp,ConvNextModel:()=>Mm,ConvNextPreTrainedModel:()=>Wc,ConvNextV2ForImageClassification:()=>Sm,ConvNextV2Model:()=>Em,ConvNextV2PreTrainedModel:()=>Tm,DFineForObjectDetection:()=>cc,DFineModel:()=>Uc,DFinePreTrainedModel:()=>Nc,DINOv3ConvNextModel:()=>n_,DINOv3ConvNextPreTrainedModel:()=>$m,DINOv3ViTModel:()=>Om,DINOv3ViTPreTrainedModel:()=>fp,DPTForDepthEstimation:()=>cm,DPTModel:()=>lm,DPTPreTrainedModel:()=>sp,DacDecoderModel:()=>Ju,DacDecoderOutput:()=>Yu,DacEncoderModel:()=>Zu,DacEncoderOutput:()=>Up,DacModel:()=>vh,DacPreTrainedModel:()=>fi,DebertaForMaskedLM:()=>Gt,DebertaForQuestionAnswering:()=>pr,DebertaForSequenceClassification:()=>yn,DebertaForTokenClassification:()=>Fn,DebertaModel:()=>gn,DebertaPreTrainedModel:()=>jt,DebertaV2ForMaskedLM:()=>In,DebertaV2ForQuestionAnswering:()=>Cr,DebertaV2ForSequenceClassification:()=>wa,DebertaV2ForTokenClassification:()=>hr,DebertaV2Model:()=>fr,DebertaV2PreTrainedModel:()=>Vr,DecisionTransformerModel:()=>Qu,DecisionTransformerPreTrainedModel:()=>gh,DeiTForImageClassification:()=>e_,DeiTModel:()=>sm,DeiTPreTrainedModel:()=>tp,DepthAnythingForDepthEstimation:()=>dm,DepthAnythingPreTrainedModel:()=>um,DepthProForDepthEstimation:()=>mm,DepthProPreTrainedModel:()=>fm,DetrForObjectDetection:()=>Bi,DetrForSegmentation:()=>Ni,DetrModel:()=>Qd,DetrObjectDetectionOutput:()=>ls,DetrPreTrainedModel:()=>jc,DetrSegmentationOutput:()=>Yd,Dinov2ForImageClassification:()=>Pm,Dinov2Model:()=>Cm,Dinov2PreTrainedModel:()=>pp,Dinov2WithRegistersForImageClassification:()=>Am,Dinov2WithRegistersModel:()=>km,Dinov2WithRegistersPreTrainedModel:()=>Uu,DistilBertForMaskedLM:()=>Ja,DistilBertForQuestionAnswering:()=>gr,DistilBertForSequenceClassification:()=>Ma,DistilBertForTokenClassification:()=>Pr,DistilBertModel:()=>ha,DistilBertPreTrainedModel:()=>la,DonutSwinModel:()=>Nu,DonutSwinPreTrainedModel:()=>wm,EdgeTamModel:()=>zm,EfficientNetForImageClassification:()=>d_,EfficientNetModel:()=>ph,EfficientNetPreTrainedModel:()=>Lp,ElectraForMaskedLM:()=>vi,ElectraForQuestionAnswering:()=>pe,ElectraForSequenceClassification:()=>B,ElectraForTokenClassification:()=>xe,ElectraModel:()=>wn,ElectraPreTrainedModel:()=>sa,Ernie4_5ForCausalLM:()=>$o,Ernie4_5Model:()=>Zc,Ernie4_5PreTrainedModel:()=>Ap,EsmForMaskedLM:()=>An,EsmForSequenceClassification:()=>yi,EsmForTokenClassification:()=>Aa,EsmModel:()=>ao,EsmPreTrainedModel:()=>ei,ExaoneForCausalLM:()=>Uf,ExaoneModel:()=>zd,ExaonePreTrainedModel:()=>js,FalconForCausalLM:()=>Hu,FalconModel:()=>Dp,FalconPreTrainedModel:()=>Ku,FastViTForImageClassification:()=>tm,FastViTModel:()=>Du,FastViTPreTrainedModel:()=>oc,Florence2ForConditionalGeneration:()=>Yo,Florence2PreTrainedModel:()=>Cc,GLPNForDepthEstimation:()=>uc,GLPNModel:()=>xm,GLPNPreTrainedModel:()=>bm,GPT2LMHeadModel:()=>j,GPT2Model:()=>O,GPT2PreTrainedModel:()=>v,GPTBigCodeForCausalLM:()=>Q,GPTBigCodeModel:()=>W,GPTBigCodePreTrainedModel:()=>F,GPTJForCausalLM:()=>$,GPTJModel:()=>y,GPTJPreTrainedModel:()=>Fe,GPTNeoForCausalLM:()=>Le,GPTNeoModel:()=>Me,GPTNeoPreTrainedModel:()=>ve,GPTNeoXForCausalLM:()=>Ie,GPTNeoXModel:()=>ze,GPTNeoXPreTrainedModel:()=>Ze,Gemma2ForCausalLM:()=>Ns,Gemma2Model:()=>jd,Gemma2PreTrainedModel:()=>ji,Gemma3ForCausalLM:()=>Ac,Gemma3Model:()=>Nd,Gemma3PreTrainedModel:()=>Us,Gemma3nForConditionalGeneration:()=>Jo,Gemma3nPreTrainedModel:()=>Mo,GemmaForCausalLM:()=>Bs,GemmaModel:()=>sr,GemmaPreTrainedModel:()=>Zr,GlmForCausalLM:()=>wu,GlmModel:()=>Nf,GlmPreTrainedModel:()=>Co,GraniteForCausalLM:()=>ko,GraniteModel:()=>Po,GraniteMoeHybridForCausalLM:()=>Fd,GraniteMoeHybridModel:()=>Wf,GraniteMoeHybridPreTrainedModel:()=>Ao,GranitePreTrainedModel:()=>ns,GroundingDinoForObjectDetection:()=>Dm,GroundingDinoPreTrainedModel:()=>mp,GroupViTModel:()=>$u,GroupViTPreTrainedModel:()=>Lc,HeliumForCausalLM:()=>Ld,HeliumModel:()=>Fi,HeliumPreTrainedModel:()=>Bf,HieraForImageClassification:()=>rp,HieraModel:()=>np,HieraPreTrainedModel:()=>zu,HubertForCTC:()=>Jm,HubertForSequenceClassification:()=>eh,HubertModel:()=>Zm,HubertPreTrainedModel:()=>Ym,IJepaForImageClassification:()=>ac,IJepaModel:()=>Yf,IJepaPreTrainedModel:()=>Ic,Idefics3ForConditionalGeneration:()=>Ri,Idefics3PreTrainedModel:()=>Ql,ImageMattingOutput:()=>Uh,JAISLMHeadModel:()=>ce,JAISModel:()=>Z,JAISPreTrainedModel:()=>V,JinaCLIPModel:()=>ts,JinaCLIPPreTrainedModel:()=>uo,JinaCLIPTextModel:()=>Oa,JinaCLIPVisionModel:()=>So,Lfm2ForCausalLM:()=>Tr,Lfm2Model:()=>ui,Lfm2PreTrainedModel:()=>Or,LiteWhisperForConditionalGeneration:()=>ml,Llama4ForCausalLM:()=>Ot,Llama4PreTrainedModel:()=>$t,LlamaForCausalLM:()=>gt,LlamaModel:()=>pt,LlamaPreTrainedModel:()=>nt,LlavaForConditionalGeneration:()=>wo,LlavaOnevisionForConditionalGeneration:()=>hl,LlavaPreTrainedModel:()=>Is,LlavaQwen2ForCausalLM:()=>Zo,LongT5ForConditionalGeneration:()=>On,LongT5Model:()=>lr,LongT5PreTrainedModel:()=>ta,M2M100ForConditionalGeneration:()=>xp,M2M100Model:()=>bp,M2M100PreTrainedModel:()=>yp,MBartForCausalLM:()=>Ya,MBartForConditionalGeneration:()=>ri,MBartForSequenceClassification:()=>Hr,MBartModel:()=>ni,MBartPreTrainedModel:()=>Ar,MPNetForMaskedLM:()=>Qr,MPNetForQuestionAnswering:()=>Qe,MPNetForSequenceClassification:()=>ti,MPNetForTokenClassification:()=>_o,MPNetModel:()=>Ei,MPNetPreTrainedModel:()=>fn,MT5ForConditionalGeneration:()=>Qa,MT5Model:()=>Ta,MT5PreTrainedModel:()=>Hn,MarianMTModel:()=>vp,MarianModel:()=>jm,MarianPreTrainedModel:()=>pc,MaskFormerForInstanceSegmentation:()=>ym,MaskFormerModel:()=>vm,MaskFormerPreTrainedModel:()=>up,MaskedLMOutput:()=>La,Metric3DForDepthEstimation:()=>cp,Metric3DPreTrainedModel:()=>hm,Metric3Dv2ForDepthEstimation:()=>_m,Metric3Dv2PreTrainedModel:()=>gm,MgpstrForSceneTextRecognition:()=>qr,MgpstrModelOutput:()=>f_,MgpstrPreTrainedModel:()=>vr,MimiDecoderModel:()=>ru,MimiDecoderOutput:()=>Np,MimiEncoderModel:()=>_c,MimiEncoderOutput:()=>Ol,MimiModel:()=>Wi,MimiPreTrainedModel:()=>Ro,Ministral3ForCausalLM:()=>sh,Ministral3Model:()=>Ks,Ministral3PreTrainedModel:()=>mc,MinistralForCausalLM:()=>oh,MinistralModel:()=>c_,MinistralPreTrainedModel:()=>ih,Mistral3ForConditionalGeneration:()=>so,MistralForCausalLM:()=>na,MistralModel:()=>Yc,MistralPreTrainedModel:()=>Qc,MobileBertForMaskedLM:()=>Dt,MobileBertForQuestionAnswering:()=>Jt,MobileBertForSequenceClassification:()=>Ft,MobileBertModel:()=>ga,MobileBertPreTrainedModel:()=>Wr,MobileLLMForCausalLM:()=>Ji,MobileLLMModel:()=>Vf,MobileLLMPreTrainedModel:()=>Mu,MobileNetV1ForImageClassification:()=>ms,MobileNetV1ForSemanticSegmentation:()=>Al,MobileNetV1Model:()=>fh,MobileNetV1PreTrainedModel:()=>pi,MobileNetV2ForImageClassification:()=>jp,MobileNetV2ForSemanticSegmentation:()=>mo,MobileNetV2Model:()=>Fp,MobileNetV2PreTrainedModel:()=>fo,MobileNetV3ForImageClassification:()=>eu,MobileNetV3ForSemanticSegmentation:()=>tu,MobileNetV3Model:()=>hc,MobileNetV3PreTrainedModel:()=>Xu,MobileNetV4ForImageClassification:()=>hh,MobileNetV4ForSemanticSegmentation:()=>nu,MobileNetV4Model:()=>mh,MobileNetV4PreTrainedModel:()=>Hs,MobileViTForImageClassification:()=>qd,MobileViTModel:()=>Hd,MobileViTPreTrainedModel:()=>os,MobileViTV2ForImageClassification:()=>zc,MobileViTV2Model:()=>Vs,MobileViTV2PreTrainedModel:()=>ss,ModelOutput:()=>$e,ModernBertDecoderForCausalLM:()=>nn,ModernBertDecoderModel:()=>At,ModernBertDecoderPreTrainedModel:()=>xn,ModernBertForMaskedLM:()=>He,ModernBertForSequenceClassification:()=>Bt,ModernBertForTokenClassification:()=>qt,ModernBertModel:()=>st,ModernBertPreTrainedModel:()=>wt,Moondream1ForConditionalGeneration:()=>Xl,MoonshineForConditionalGeneration:()=>Ii,MoonshineModel:()=>ql,MoonshinePreTrainedModel:()=>Xo,MptForCausalLM:()=>rc,MptModel:()=>nc,MptPreTrainedModel:()=>Au,MultiModalityCausalLM:()=>p_,MultiModalityPreTrainedModel:()=>_h,MusicgenForCausalLM:()=>Do,MusicgenForConditionalGeneration:()=>zp,MusicgenModel:()=>Vi,MusicgenPreTrainedModel:()=>Jc,NanoChatForCausalLM:()=>kn,NanoChatModel:()=>Yt,NanoChatPreTrainedModel:()=>Et,NeoBertForMaskedLM:()=>mt,NeoBertForQuestionAnswering:()=>dt,NeoBertForSequenceClassification:()=>Tt,NeoBertForTokenClassification:()=>Ke,NeoBertModel:()=>kt,NeoBertPreTrainedModel:()=>Ye,NomicBertModel:()=>rt,NomicBertPreTrainedModel:()=>Ct,OPTForCausalLM:()=>Jg,OPTModel:()=>Qf,OPTPreTrainedModel:()=>Xf,Olmo2ForCausalLM:()=>to,Olmo2Model:()=>eo,Olmo2PreTrainedModel:()=>Jl,OlmoForCausalLM:()=>Tu,OlmoModel:()=>Zl,OlmoPreTrainedModel:()=>vl,OpenELMForCausalLM:()=>rs,OpenELMModel:()=>yl,OpenELMPreTrainedModel:()=>Su,OwlViTForObjectDetection:()=>Fc,OwlViTModel:()=>Xd,OwlViTPreTrainedModel:()=>Iu,Owlv2ForObjectDetection:()=>am,Owlv2Model:()=>rm,Owlv2PreTrainedModel:()=>sc,PaliGemmaForConditionalGeneration:()=>Pc,PaliGemmaPreTrainedModel:()=>Zi,ParakeetForCTC:()=>Vu,ParakeetPreTrainedModel:()=>Vm,PatchTSMixerForPrediction:()=>gc,PatchTSMixerModel:()=>qs,PatchTSMixerPreTrainedModel:()=>Pi,PatchTSTForPrediction:()=>$r,PatchTSTModel:()=>rr,PatchTSTPreTrainedModel:()=>Zn,Phi3ForCausalLM:()=>$a,Phi3Model:()=>Zg,Phi3PreTrainedModel:()=>qf,Phi3VForCausalLM:()=>Rs,Phi3VPreTrainedModel:()=>gl,PhiForCausalLM:()=>Yg,PhiModel:()=>Hf,PhiPreTrainedModel:()=>Oc,PreTrainedModel:()=>re,PretrainedMixin:()=>Yn,PvtForImageClassification:()=>Jf,PvtModel:()=>Zf,PvtPreTrainedModel:()=>Rc,PyAnnoteForAudioFrameClassification:()=>Wm,PyAnnoteModel:()=>Mp,PyAnnotePreTrainedModel:()=>wp,QuestionAnsweringModelOutput:()=>za,Qwen2ForCausalLM:()=>Ud,Qwen2Model:()=>is,Qwen2PreTrainedModel:()=>as,Qwen2VLForConditionalGeneration:()=>ii,Qwen2VLPreTrainedModel:()=>bl,Qwen3ForCausalLM:()=>Pu,Qwen3Model:()=>tc,Qwen3PreTrainedModel:()=>Cu,RFDetrForObjectDetection:()=>lc,RFDetrModel:()=>Lu,RFDetrObjectDetectionOutput:()=>Sl,RFDetrPreTrainedModel:()=>Sa,RTDetrForObjectDetection:()=>Ui,RTDetrModel:()=>Ws,RTDetrObjectDetectionOutput:()=>ca,RTDetrPreTrainedModel:()=>Zd,RTDetrV2ForObjectDetection:()=>Vn,RTDetrV2Model:()=>cs,RTDetrV2ObjectDetectionOutput:()=>zr,RTDetrV2PreTrainedModel:()=>Bc,ResNetForImageClassification:()=>Fu,ResNetModel:()=>Ca,ResNetPreTrainedModel:()=>di,RoFormerForMaskedLM:()=>tr,RoFormerForQuestionAnswering:()=>xr,RoFormerForSequenceClassification:()=>Rt,RoFormerForTokenClassification:()=>Kn,RoFormerModel:()=>En,RoFormerPreTrainedModel:()=>hn,RobertaForMaskedLM:()=>pl,RobertaForQuestionAnswering:()=>Cs,RobertaForSequenceClassification:()=>Ko,RobertaForTokenClassification:()=>Ss,RobertaModel:()=>vo,RobertaPreTrainedModel:()=>Si,Sam2ImageSegmentationOutput:()=>Gc,Sam2Model:()=>dc,Sam2PreTrainedModel:()=>_p,Sam3TrackerModel:()=>Fm,SamImageSegmentationOutput:()=>Lm,SamModel:()=>a_,SamPreTrainedModel:()=>r_,SapiensForDepthEstimation:()=>pm,SapiensForNormalEstimation:()=>t_,SapiensForSemanticSegmentation:()=>lp,SapiensPreTrainedModel:()=>Bu,SegformerForImageClassification:()=>uh,SegformerForSemanticSegmentation:()=>ua,SegformerModel:()=>u_,SegformerPreTrainedModel:()=>Rp,Seq2SeqLMOutput:()=>Nh,SequenceClassifierOutput:()=>Cn,SiglipModel:()=>bi,SiglipPreTrainedModel:()=>lo,SiglipTextModel:()=>Mr,SiglipVisionModel:()=>rn,SmolLM3ForCausalLM:()=>Yl,SmolLM3Model:()=>Fs,SmolLM3PreTrainedModel:()=>po,SmolVLMForConditionalGeneration:()=>es,SnacDecoderModel:()=>vc,SnacEncoderModel:()=>Xs,SnacModel:()=>Ga,SnacPreTrainedModel:()=>Lo,SpeechT5ForSpeechToText:()=>ds,SpeechT5ForTextToSpeech:()=>Pp,SpeechT5HifiGan:()=>l_,SpeechT5Model:()=>s_,SpeechT5PreTrainedModel:()=>Xc,SqueezeBertForMaskedLM:()=>Pe,SqueezeBertForQuestionAnswering:()=>lt,SqueezeBertForSequenceClassification:()=>ke,SqueezeBertModel:()=>ye,SqueezeBertPreTrainedModel:()=>G,StableLmForCausalLM:()=>dh,StableLmModel:()=>fs,StableLmPreTrainedModel:()=>xi,Starcoder2ForCausalLM:()=>lh,Starcoder2Model:()=>$p,Starcoder2PreTrainedModel:()=>Op,StyleTextToSpeech2Model:()=>nh,StyleTextToSpeech2PreTrainedModel:()=>Cp,SupertonicForConditionalGeneration:()=>Oo,SupertonicPreTrainedModel:()=>rh,Swin2SRForImageSuperResolution:()=>op,Swin2SRModel:()=>ip,Swin2SRPreTrainedModel:()=>Vc,SwinForImageClassification:()=>ap,SwinForSemanticSegmentation:()=>us,SwinModel:()=>ju,SwinPreTrainedModel:()=>Cl,T5ForConditionalGeneration:()=>or,T5Model:()=>mn,T5PreTrainedModel:()=>bn,TableTransformerForObjectDetection:()=>Jd,TableTransformerModel:()=>_a,TableTransformerObjectDetectionOutput:()=>ep,TableTransformerPreTrainedModel:()=>om,TokenClassifierOutput:()=>Ra,TrOCRForCausalLM:()=>ah,TrOCRPreTrainedModel:()=>kp,UltravoxModel:()=>Io,UltravoxPreTrainedModel:()=>Bp,UniSpeechForCTC:()=>oi,UniSpeechForSequenceClassification:()=>Km,UniSpeechModel:()=>Da,UniSpeechPreTrainedModel:()=>Kc,UniSpeechSatForAudioFrameClassification:()=>Xm,UniSpeechSatForCTC:()=>qm,UniSpeechSatForSequenceClassification:()=>qc,UniSpeechSatModel:()=>Hm,UniSpeechSatPreTrainedModel:()=>Hc,VaultGemmaForCausalLM:()=>ec,VaultGemmaModel:()=>Kf,VaultGemmaPreTrainedModel:()=>Bd,ViTForImageClassification:()=>Wd,ViTMAEModel:()=>Ml,ViTMAEPreTrainedModel:()=>wl,ViTMSNForImageClassification:()=>ic,ViTMSNModel:()=>em,ViTMSNPreTrainedModel:()=>Kd,ViTModel:()=>xl,ViTPreTrainedModel:()=>Vd,VisionEncoderDecoderModel:()=>Qo,VitMatteForImageMatting:()=>nm,VitMattePreTrainedModel:()=>Tl,VitPoseForPoseEstimation:()=>Ou,VitPosePreTrainedModel:()=>Gd,VitsModel:()=>Wa,VitsModelOutput:()=>C_,VitsPreTrainedModel:()=>ch,VoxtralForConditionalGeneration:()=>va,Wav2Vec2BertForCTC:()=>o_,Wav2Vec2BertForSequenceClassification:()=>Wu,Wav2Vec2BertModel:()=>Qm,Wav2Vec2BertPreTrainedModel:()=>fc,Wav2Vec2ForAudioFrameClassification:()=>Um,Wav2Vec2ForCTC:()=>Pl,Wav2Vec2ForSequenceClassification:()=>Nm,Wav2Vec2Model:()=>Bm,Wav2Vec2PreTrainedModel:()=>Gs,WavLMForAudioFrameClassification:()=>Gu,WavLMForCTC:()=>Ep,WavLMForSequenceClassification:()=>th,WavLMForXVector:()=>Sp,WavLMModel:()=>Tp,WavLMPreTrainedModel:()=>kl,WeSpeakerResNetModel:()=>i_,WeSpeakerResNetPreTrainedModel:()=>Gm,WhisperForConditionalGeneration:()=>Ds,WhisperModel:()=>$s,WhisperPreTrainedModel:()=>oo,XLMForQuestionAnswering:()=>Hl,XLMForSequenceClassification:()=>yo,XLMForTokenClassification:()=>ks,XLMModel:()=>Kl,XLMPreTrainedModel:()=>io,XLMRobertaForMaskedLM:()=>As,XLMRobertaForQuestionAnswering:()=>fl,XLMRobertaForSequenceClassification:()=>qo,XLMRobertaForTokenClassification:()=>Os,XLMRobertaModel:()=>bo,XLMRobertaPreTrainedModel:()=>Ho,XLMWithLMHeadModel:()=>Ps,XVectorOutput:()=>Xp,YolosForObjectDetection:()=>Im,YolosModel:()=>gp,YolosObjectDetectionOutput:()=>Rm,YolosPreTrainedModel:()=>hp});var r=n("./src/configs.js"),o=n("./src/backends/onnx.js"),s=n("./src/utils/dtypes.js"),l=n("./src/utils/generic.js"),u=n("./src/utils/core.js"),d=n("./src/utils/hub.js"),p=n("./src/utils/constants.js"),g=n("./src/generation/logits_process.js"),h=n("./src/generation/configuration_utils.js"),m=n("./src/utils/tensor.js"),x=n("./src/utils/image.js"),_=n("./src/utils/maths.js"),b=n("./src/generation/stopping_criteria.js"),I=n("./src/generation/logits_sampler.js"),T=n("./src/env.js"),S=n("./src/models/whisper/generation_whisper.js"),D=n("./src/models/whisper/common_whisper.js");const E={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12,Supertonic:13},C=new Map,P=new Map,w=new Map;async function R(L,z,he){let Ae=he.config?.["transformers.js_config"]??{},tt=he.device??Ae.device;tt&&typeof tt!="string"&&(tt.hasOwnProperty(z)?tt=tt[z]:(console.warn(`device not specified for "${z}". Using the default device.`),tt=null));const et=tt??(T.apis.IS_NODE_ENV?"cpu":"wasm"),bt=(0,o.deviceToExecutionProviders)(et),It=Ae.device_config??{};It.hasOwnProperty(et)&&(Ae={...Ae,...It[et]});let Vt=he.dtype??Ae.dtype;if(typeof Vt!="string"&&(Vt&&Vt.hasOwnProperty(z)?Vt=Vt[z]:(Vt=s.DEFAULT_DEVICE_DTYPE_MAPPING[et]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${z}". Using the default dtype (${Vt}) for this device (${et}).`))),Vt===s.DATA_TYPES.auto){let Wn=Ae.dtype;typeof Wn!="string"&&(Wn=Wn?.[z]),Wn&&Wn!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(Wn)?Vt=Wn:Vt=s.DEFAULT_DEVICE_DTYPE_MAPPING[et]??s.DATA_TYPES.fp32}const en=Vt;if(s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(en)){if(en===s.DATA_TYPES.fp16&&et==="webgpu"&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${et}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${en}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);const Sn=Ae.kv_cache_dtype,Mn=Sn?typeof Sn=="string"?Sn:Sn[en]??"float32":void 0;if(Mn&&!["float32","float16"].includes(Mn))throw new Error(`Invalid kv_cache_dtype: ${Mn}. Should be one of: float32, float16`);const Dn={dtype:en,kv_cache_dtype:Mn,device:et},cn=s.DEFAULT_DTYPE_SUFFIX_MAPPING[en],ir=`${z}${cn}.onnx`,un=`${he.subfolder??""}/${ir}`,dn={...he.session_options};dn.executionProviders??=bt;const Jn=Ae.free_dimension_overrides;Jn?dn.freeDimensionOverrides??=Jn:et.startsWith("webnn")&&!dn.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${et}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const yr=T.apis.IS_NODE_ENV&&T.env.useFSCache,Jr=(0,d.getModelFile)(L,un,!0,he,yr),da=he.use_external_data_format??Ae.use_external_data_format;let ya=[];if(da){let Wn;typeof da=="object"?da.hasOwnProperty(ir)?Wn=da[ir]:da.hasOwnProperty(z)?Wn=da[z]:Wn=!1:Wn=da;const pa=+Wn;if(pa>d.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${pa}) exceeds the maximum allowed value (${d.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let Fa=0;Fa<pa;++Fa){const bc=`${ir}_data${Fa===0?"":"_"+Fa}`,Ai=`${he.subfolder??""}/${bc}`;ya.push(new Promise(async(ho,Rl)=>{const Ll=await(0,d.getModelFile)(L,Ai,!0,he,yr);ho(Ll instanceof Uint8Array?{path:bc,data:Ll}:bc)}))}}else dn.externalData!==void 0&&(ya=dn.externalData.map(async Wn=>{if(typeof Wn.data=="string"){const pa=await(0,d.getModelFile)(L,Wn.data,!0,he);return{...Wn,data:pa}}return Wn}));if(ya.length>0){const Wn=await Promise.all(ya);T.apis.IS_NODE_ENV||(dn.externalData=Wn)}if(et==="webgpu"){const Wn=(0,r.getCacheShapes)(he.config,{prefix:"present"});if(Object.keys(Wn).length>0&&!(0,o.isONNXProxy)()){const pa={};for(const Fa in Wn)pa[Fa]="gpu-buffer";dn.preferredOutputLocation=pa}}return{buffer_or_path:await Jr,session_options:dn,session_config:Dn}}async function U(L,z,he){return Object.fromEntries(await Promise.all(Object.keys(z).map(async Ae=>{const{buffer_or_path:tt,session_options:et,session_config:bt}=await R(L,z[Ae],he),It=await(0,o.createInferenceSession)(tt,et,bt);return[Ae,It]})))}async function N(L,z,he){return Object.fromEntries(await Promise.all(Object.keys(z).map(async Ae=>{const tt=await(0,d.getModelJSON)(L,z[Ae],!1,he);return[Ae,tt]})))}function ie(L,z){const he=Object.create(null),Ae=[];for(const bt of L.inputNames){const It=z[bt];if(!(It instanceof m.Tensor)){Ae.push(bt);continue}he[bt]=(0,o.isONNXProxy)()?It.clone():It}if(Ae.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${Ae.join(", ")}.`);const tt=Object.keys(z).length,et=L.inputNames.length;if(tt>et){let bt=Object.keys(z).filter(It=>!L.inputNames.includes(It));console.warn(`WARNING: Too many inputs were provided (${tt} > ${et}). The following inputs will be ignored: "${bt.join(", ")}".`)}return he}async function ee(L,z){const he=ie(L,z);try{const Ae=Object.fromEntries(Object.entries(he).map(([et,bt])=>[et,bt.ort_tensor])),tt=await(0,o.runInferenceSession)(L,Ae);return q(tt)}catch(Ae){const tt=Object.fromEntries(Object.entries(he).map(([et,bt])=>{const It={type:bt.type,dims:bt.dims,location:bt.location};return It.location!=="gpu-buffer"&&(It.data=bt.data),[et,It]}));throw console.error(`An error occurred during model execution: "${Ae}".`),console.error("Inputs given to model:",tt),Ae}}function q(L){for(let z in L)(0,o.isONNXTensor)(L[z])?L[z]=new m.Tensor(L[z]):typeof L[z]=="object"&&q(L[z]);return L}function oe(L){if(L instanceof m.Tensor)return L;if(L.length===0)throw Error("items must be non-empty");if(Array.isArray(L[0])){if(L.some(z=>z.length!==L[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new m.Tensor("int64",BigInt64Array.from(L.flat().map(z=>BigInt(z))),[L.length,L[0].length])}else return new m.Tensor("int64",BigInt64Array.from(L.map(z=>BigInt(z))),[1,L.length])}function ae(L){return new m.Tensor("bool",[L],[1])}async function X(L,z){let{encoder_outputs:he,input_ids:Ae,decoder_input_ids:tt,...et}=z;if(!he){const It=(0,u.pick)(z,L.sessions.model.inputNames);he=(await se(L,It)).last_hidden_state}return et.input_ids=tt,et.encoder_hidden_states=he,L.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(et.encoder_attention_mask=z.attention_mask),await be(L,et,!0)}async function se(L,z){const he=L.sessions.model,Ae=(0,u.pick)(z,he.inputNames);if(he.inputNames.includes("inputs_embeds")&&!Ae.inputs_embeds){if(!z.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");Ae.inputs_embeds=await L.encode_text({input_ids:z.input_ids})}if(he.inputNames.includes("token_type_ids")&&!Ae.token_type_ids){if(!Ae.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");Ae.token_type_ids=(0,m.zeros_like)(Ae.input_ids)}if(he.inputNames.includes("pixel_mask")&&!Ae.pixel_mask){if(!Ae.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const tt=Ae.pixel_values.dims;Ae.pixel_mask=(0,m.ones)([tt[0],tt[2],tt[3]])}return await ee(he,Ae)}async function le(L,z){const he=await L.encode(z);return await L.decode(he)}async function be(L,z,he=!1){const Ae=L.sessions[he?"decoder_model_merged":"model"],{past_key_values:tt,...et}=z;if(Ae.inputNames.includes("use_cache_branch")&&(et.use_cache_branch=ae(!!tt)),Ae.inputNames.includes("position_ids")&&et.attention_mask&&!et.position_ids){const It=["paligemma","gemma3_text","gemma3"].includes(L.config.model_type)?1:0;et.position_ids=Re(et,tt,It)}L.addPastKeyValues(et,tt);const bt=(0,u.pick)(et,Ae.inputNames);return await ee(Ae,bt)}function Ee({modality_token_id:L,inputs_embeds:z,modality_features:he,input_ids:Ae,attention_mask:tt}){const et=Ae.tolist().map(en=>en.reduce((Sn,Mn,Dn)=>(Mn==L&&Sn.push(Dn),Sn),[])),bt=et.reduce((en,Sn)=>en+Sn.length,0),It=he.dims[0];if(bt!==It)throw new Error(`Number of tokens and features do not match: tokens: ${bt}, features ${It}`);let Vt=0;for(let en=0;en<et.length;++en){const Sn=et[en],Mn=z[en];for(let Dn=0;Dn<Sn.length;++Dn)Mn[Sn[Dn]].data.set(he[Vt++].data)}return{inputs_embeds:z,attention_mask:tt}}function Y({image_token_id:L,inputs_embeds:z,image_features:he,input_ids:Ae,attention_mask:tt}){return Ee({modality_token_id:L,inputs_embeds:z,modality_features:he,input_ids:Ae,attention_mask:tt})}function te({audio_token_id:L,inputs_embeds:z,audio_features:he,input_ids:Ae,attention_mask:tt}){return Ee({modality_token_id:L,inputs_embeds:z,modality_features:he,input_ids:Ae,attention_mask:tt})}async function J(L,{encode_function:z,merge_function:he,modality_input_name:Ae,modality_output_name:tt,input_ids:et=null,attention_mask:bt=null,position_ids:It=null,inputs_embeds:Vt=null,past_key_values:en=null,generation_config:Sn=null,logits_processor:Mn=null,...Dn}){const cn=Dn[Ae];if(!Vt){if(Vt=await L.encode_text({input_ids:et,...Dn}),cn&&et.dims[1]!==1){const un=await z({[Ae]:cn,...Dn});({inputs_embeds:Vt,attention_mask:bt}=he({[tt]:un,inputs_embeds:Vt,input_ids:et,attention_mask:bt}))}else if(en&&cn&&et.dims[1]===1){const un=et.dims[1],dn=Object.values(en)[0].dims.at(-2);bt=(0,m.cat)([(0,m.ones)([et.dims[0],dn]),bt.slice(null,[bt.dims[1]-un,bt.dims[1]])],1)}}if(!It&&L.config.model_type==="qwen2_vl"){const{image_grid_thw:un,video_grid_thw:dn}=Dn;[It]=L.get_rope_index(et,un,dn,bt)}return await be(L,{inputs_embeds:Vt,past_key_values:en,attention_mask:bt,position_ids:It,generation_config:Sn,logits_processor:Mn},!0)}async function H(L,z){return await J(L,{...z,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:L.encode_audio.bind(L),merge_function:L._merge_input_ids_with_audio_features.bind(L)})}async function _e(L,z){return await J(L,{...z,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:L.encode_image.bind(L),merge_function:L._merge_input_ids_with_image_features.bind(L)})}function Te(L,z=0){const[he,Ae]=L.dims,tt=L.data,et=new BigInt64Array(tt.length);for(let bt=0;bt<he;++bt){const It=bt*Ae;let Vt=BigInt(z);for(let en=0;en<Ae;++en){const Sn=It+en;tt[Sn]===0n?et[Sn]=BigInt(1):(et[Sn]=Vt,Vt+=tt[Sn])}}return{data:et,dims:L.dims}}function Re(L,z=null,he=0){const{input_ids:Ae,inputs_embeds:tt,attention_mask:et}=L,{data:bt,dims:It}=Te(et,he);let Vt=new m.Tensor("int64",bt,It);if(z){const en=-(Ae??tt).dims.at(1);Vt=Vt.slice(null,[en,null])}return Vt}function We(L,z,he,Ae){const tt=he.past_key_values?Object.values(he.past_key_values)[0].dims.at(-2):0;if(!he.attention_mask){let et;for(const bt of["input_ids","inputs_embeds","position_ids"])if(he[bt]){et=he[bt].dims;break}if(!et)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");he.attention_mask=(0,m.ones)([et[0],tt+et[1]])}if(he.past_key_values){const{input_ids:et,attention_mask:bt}=he;bt&&bt.dims[1]>et.dims[1]||tt<et.dims[1]&&(he.input_ids=et.slice(null,[tt,null]))}return he}function at(L,z,he,Ae){return he.past_key_values&&(z=z.map(tt=>[tt.at(-1)])),{...he,decoder_input_ids:oe(z)}}function Oe(L,...z){return L.config.is_encoder_decoder?at(L,...z):We(L,...z)}function ge(L,z,he,Ae){const tt=!!he.past_key_values;return Ae.guidance_scale!==null&&Ae.guidance_scale>1&&(tt?he.input_ids=(0,m.cat)([he.input_ids,he.input_ids],0):(he.input_ids=(0,m.cat)([he.input_ids,(0,m.full_like)(he.input_ids,BigInt(Ae.pad_token_id))],0),he.attention_mask=(0,m.cat)([he.attention_mask,(0,m.full_like)(he.attention_mask,0n)],0))),(tt||!he.pixel_values)&&(he.pixel_values=(0,m.full)([0,0,3,384,384],1)),tt&&(he.images_seq_mask=new m.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),he.images_emb_mask=new m.Tensor("bool",new Array(0).fill(!1),[1,1,0])),he}class re extends l.Callable{main_input_name="input_ids";forward_params=["input_ids","attention_mask"];constructor(z,he,Ae){super(),this.config=z,this.sessions=he,this.configs=Ae;const tt=w.get(this.constructor),et=C.get(tt);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,et){case E.DecoderOnly:this.can_generate=!0,this._forward=be,this._prepare_inputs_for_generation=We;break;case E.Seq2Seq:case E.Vision2Seq:case E.Musicgen:this.can_generate=!0,this._forward=X,this._prepare_inputs_for_generation=at;break;case E.EncoderDecoder:this._forward=X;break;case E.ImageTextToText:this.can_generate=!0,this._forward=_e,this._prepare_inputs_for_generation=Oe;break;case E.AudioTextToText:this.can_generate=!0,this._forward=H,this._prepare_inputs_for_generation=Oe;break;case E.Phi3V:case E.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=Oe;break;case E.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=ge;break;case E.AutoEncoder:this._forward=le;break;default:this._forward=se;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){const z=[];for(const he of Object.values(this.sessions))he?.handler?.dispose&&z.push(he.handler.dispose());return await Promise.all(z)}static async from_pretrained(z,{progress_callback:he=null,config:Ae=null,cache_dir:tt=null,local_files_only:et=!1,revision:bt="main",model_file_name:It=null,subfolder:Vt="onnx",device:en=null,dtype:Sn=null,use_external_data_format:Mn=null,session_options:Dn={}}={}){let cn={progress_callback:he,config:Ae,cache_dir:tt,local_files_only:et,revision:bt,model_file_name:It,subfolder:Vt,device:en,dtype:Sn,use_external_data_format:Mn,session_options:Dn};const ir=w.get(this),un=C.get(ir);Ae=cn.config=await r.AutoConfig.from_pretrained(z,cn);let dn;if(un===E.DecoderOnly)dn=await Promise.all([U(z,{model:cn.model_file_name??"model"},cn),N(z,{generation_config:"generation_config.json"},cn)]);else if(un===E.Seq2Seq||un===E.Vision2Seq)dn=await Promise.all([U(z,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},cn),N(z,{generation_config:"generation_config.json"},cn)]);else if(un===E.MaskGeneration)dn=await Promise.all([U(z,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},cn)]);else if(un===E.EncoderDecoder)dn=await Promise.all([U(z,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},cn)]);else if(un===E.ImageTextToText){const Jn={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Ae.is_encoder_decoder&&(Jn.model="encoder_model"),dn=await Promise.all([U(z,Jn,cn),N(z,{generation_config:"generation_config.json"},cn)])}else if(un===E.AudioTextToText){const Jn={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};dn=await Promise.all([U(z,Jn,cn),N(z,{generation_config:"generation_config.json"},cn)])}else if(un===E.ImageAudioTextToText){const Jn={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};dn=await Promise.all([U(z,Jn,cn),N(z,{generation_config:"generation_config.json"},cn)])}else if(un===E.Musicgen)dn=await Promise.all([U(z,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},cn),N(z,{generation_config:"generation_config.json"},cn)]);else if(un===E.MultiModality)dn=await Promise.all([U(z,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},cn),N(z,{generation_config:"generation_config.json"},cn)]);else if(un===E.Phi3V)dn=await Promise.all([U(z,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},cn),N(z,{generation_config:"generation_config.json"},cn)]);else if(un===E.AutoEncoder)dn=await Promise.all([U(z,{encoder_model:"encoder_model",decoder_model:"decoder_model"},cn)]);else if(un===E.Supertonic)dn=await Promise.all([U(z,{text_encoder:"text_encoder",latent_denoiser:"latent_denoiser",voice_decoder:"voice_decoder"},cn)]);else{if(un!==E.EncoderOnly){const Jn=ir??Ae?.model_type;Jn!=="custom"&&console.warn(`Model type for '${Jn}' not found, assuming encoder-only architecture. Please report this at ${p.GITHUB_ISSUE_URL}.`)}dn=await Promise.all([U(z,{model:cn.model_file_name??"model"},cn)])}return new this(Ae,...dn)}async _call(z){return await this.forward(z)}async forward(z){return await this._forward(this,z)}get generation_config(){return this.configs?.generation_config??null}_get_logits_processor(z,he,Ae=null){const tt=new g.LogitsProcessorList;if(z.repetition_penalty!==null&&z.repetition_penalty!==1&&tt.push(new g.RepetitionPenaltyLogitsProcessor(z.repetition_penalty)),z.no_repeat_ngram_size!==null&&z.no_repeat_ngram_size>0&&tt.push(new g.NoRepeatNGramLogitsProcessor(z.no_repeat_ngram_size)),z.bad_words_ids!==null&&tt.push(new g.NoBadWordsLogitsProcessor(z.bad_words_ids,z.eos_token_id)),z.min_length!==null&&z.eos_token_id!==null&&z.min_length>0&&tt.push(new g.MinLengthLogitsProcessor(z.min_length,z.eos_token_id)),z.min_new_tokens!==null&&z.eos_token_id!==null&&z.min_new_tokens>0&&tt.push(new g.MinNewTokensLengthLogitsProcessor(he,z.min_new_tokens,z.eos_token_id)),z.forced_bos_token_id!==null&&tt.push(new g.ForcedBOSTokenLogitsProcessor(z.forced_bos_token_id)),z.forced_eos_token_id!==null&&tt.push(new g.ForcedEOSTokenLogitsProcessor(z.max_length,z.forced_eos_token_id)),z.begin_suppress_tokens!==null){const et=he>1||z.forced_bos_token_id===null?he:he+1;tt.push(new g.SuppressTokensAtBeginLogitsProcessor(z.begin_suppress_tokens,et))}return z.guidance_scale!==null&&z.guidance_scale>1&&tt.push(new g.ClassifierFreeGuidanceLogitsProcessor(z.guidance_scale)),z.temperature===0&&z.do_sample&&(console.warn("`do_sample` changed to false because `temperature: 0` implies greedy sampling (always selecting the most likely token), which is incompatible with `do_sample: true`."),z.do_sample=!1),z.do_sample&&z.temperature!==null&&z.temperature!==1&&tt.push(new g.TemperatureLogitsWarper(z.temperature)),Ae!==null&&tt.extend(Ae),tt}_prepare_generation_config(z,he,Ae=h.GenerationConfig){const tt={...this.config};for(const bt of["decoder","generator","text_config"])bt in tt&&Object.assign(tt,tt[bt]);const et=new Ae(tt);return Object.assign(et,this.generation_config??{}),z&&Object.assign(et,z),he&&Object.assign(et,(0,u.pick)(he,Object.getOwnPropertyNames(et))),et}_get_stopping_criteria(z,he=null){const Ae=new b.StoppingCriteriaList;return z.max_length!==null&&Ae.push(new b.MaxLengthCriteria(z.max_length,this.config.max_position_embeddings??null)),z.eos_token_id!==null&&Ae.push(new b.EosTokenCriteria(z.eos_token_id)),he&&Ae.extend(he),Ae}_validate_model_class(){if(!this.can_generate){const z=[Mh,Dl,Vp,td],he=w.get(this.constructor),Ae=new Set,tt=this.config.model_type;for(const bt of z){const It=bt.get(tt);It&&Ae.add(It[0])}let et=`The current model class (${he}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw Ae.size>0&&(et+=` Please use the following class instead: ${[...Ae].join(", ")}`),Error(et)}}prepare_inputs_for_generation(...z){return this._prepare_inputs_for_generation(this,...z)}_update_model_kwargs_for_generation({generated_input_ids:z,outputs:he,model_inputs:Ae,is_encoder_decoder:tt}){return Ae.past_key_values=this.getPastKeyValues(he,Ae.past_key_values),Ae.input_ids=new m.Tensor("int64",z.flat(),[z.length,1]),tt||(Ae.attention_mask=(0,m.cat)([Ae.attention_mask,(0,m.ones)([Ae.attention_mask.dims[0],1])],1)),Ae.position_ids=null,Ae}_prepare_model_inputs({inputs:z,bos_token_id:he,model_kwargs:Ae}){const tt=(0,u.pick)(Ae,this.forward_params),et=this.main_input_name;if(et in tt){if(z)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else tt[et]=z;return{inputs_tensor:tt[et],model_inputs:tt,model_input_name:et}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:z,model_inputs:he,model_input_name:Ae,generation_config:tt}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!he.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:bt,pixel_values:It,attention_mask:Vt,...en}=he,Sn=await this._prepare_inputs_embeds(he);he={...en,...(0,u.pick)(Sn,["inputs_embeds","attention_mask"])}}let{last_hidden_state:et}=await se(this,he);if(tt.guidance_scale!==null&&tt.guidance_scale>1)et=(0,m.cat)([et,(0,m.full_like)(et,0)],0),"attention_mask"in he&&(he.attention_mask=(0,m.cat)([he.attention_mask,(0,m.zeros_like)(he.attention_mask)],0));else if(he.decoder_input_ids){const bt=oe(he.decoder_input_ids).dims[0];if(bt!==et.dims[0]){if(et.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${et.dims[0]}) than the decoder inputs (${bt}).`);et=(0,m.cat)(Array.from({length:bt},()=>et),0)}}return he.encoder_outputs=et,he}_prepare_decoder_input_ids_for_generation({batch_size:z,model_input_name:he,model_kwargs:Ae,decoder_start_token_id:tt,bos_token_id:et,generation_config:bt}){let{decoder_input_ids:It,...Vt}=Ae;if(!(It instanceof m.Tensor)){if(It)Array.isArray(It[0])||(It=Array.from({length:z},()=>It));else if(tt??=et,this.config.model_type==="musicgen")It=Array.from({length:z*this.config.decoder.num_codebooks},()=>[tt]);else if(Array.isArray(tt)){if(tt.length!==z)throw new Error(`\`decoder_start_token_id\` expcted to have length ${z} but got ${tt.length}`);It=tt}else It=Array.from({length:z},()=>[tt]);It=oe(It)}return Ae.decoder_attention_mask=(0,m.ones_like)(It),{input_ids:It,model_inputs:Vt}}async generate({inputs:z=null,generation_config:he=null,logits_processor:Ae=null,stopping_criteria:tt=null,streamer:et=null,...bt}){this._validate_model_class(),he=this._prepare_generation_config(he,bt);let{inputs_tensor:It,model_inputs:Vt,model_input_name:en}=this._prepare_model_inputs({inputs:z,model_kwargs:bt});const Sn=this.config.is_encoder_decoder;Sn&&("encoder_outputs"in Vt||(Vt=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:It,model_inputs:Vt,model_input_name:en,generation_config:he})));let Mn;Sn?{input_ids:Mn,model_inputs:Vt}=this._prepare_decoder_input_ids_for_generation({batch_size:Vt[en].dims.at(0),model_input_name:en,model_kwargs:Vt,decoder_start_token_id:he.decoder_start_token_id,bos_token_id:he.bos_token_id,generation_config:he}):Mn=Vt[en];let Dn=Mn.dims.at(-1);he.max_new_tokens!==null&&(he.max_length=Dn+he.max_new_tokens);const cn=this._get_logits_processor(he,Dn,Ae),ir=this._get_stopping_criteria(he,tt),un=Vt[en].dims.at(0),dn=I.LogitsSampler.getSampler(he),Jn=new Array(un).fill(0),yr=Mn.tolist();et&&et.put(yr);let Jr,da={};for(;;){if(Vt=this.prepare_inputs_for_generation(yr,Vt,he),Jr=await this.forward(Vt),he.output_attentions&&he.return_dict_in_generate){const Ai=this.getAttentions(Jr);for(const ho in Ai)ho in da||(da[ho]=[]),da[ho].push(Ai[ho])}const Wn=Jr.logits.slice(null,-1,null),pa=cn(yr,Wn),Fa=[];for(let Ai=0;Ai<pa.dims.at(0);++Ai){const ho=pa[Ai],Rl=await dn(ho);for(const[Ll,Qp]of Rl){const wi=BigInt(Ll);Jn[Ai]+=Qp,yr[Ai].push(wi),Fa.push([wi]);break}}if(et&&et.put(Fa),ir(yr).every(Ai=>Ai))break;Vt=this._update_model_kwargs_for_generation({generated_input_ids:Fa,outputs:Jr,model_inputs:Vt,is_encoder_decoder:Sn})}et&&et.end();const ya=this.getPastKeyValues(Jr,Vt.past_key_values,!0),jr=new m.Tensor("int64",yr.flat(),[yr.length,yr[0].length]);if(he.return_dict_in_generate)return{sequences:jr,past_key_values:ya,...da};for(const Wn of Object.values(Jr))Wn.location==="gpu-buffer"&&Wn.dispose();return jr}getPastKeyValues(z,he,Ae=!1){const tt=Object.create(null);for(const et in z)if(et.startsWith("present")){const bt=et.replace("present_conv","past_conv").replace("present","past_key_values"),It=et.includes("encoder");if(It&&he?tt[bt]=he[bt]:tt[bt]=z[et],he&&(!It||Ae)){const Vt=he[bt];Vt.location==="gpu-buffer"&&Vt.dispose()}}return tt}getAttentions(z){const he={};for(const Ae of["cross_attentions","encoder_attentions","decoder_attentions"])for(const tt in z)tt.startsWith(Ae)&&(Ae in he||(he[Ae]=[]),he[Ae].push(z[tt]));return he}addPastKeyValues(z,he){if(he)Object.assign(z,he);else{const Ae=this.sessions.decoder_model_merged??this.sessions.model,tt=(z[this.main_input_name]??z.attention_mask)?.dims?.[0]??1,et=Ae?.config?.kv_cache_dtype??"float32",bt=et==="float16"?m.DataTypeMap.float16:m.DataTypeMap.float32,It=(0,r.getCacheShapes)(this.config,{batch_size:tt});for(const Vt in It){const en=It[Vt].reduce((Sn,Mn)=>Sn*Mn,1);z[Vt]=new m.Tensor(et,new bt(en),It[Vt])}}}async encode_image({pixel_values:z}){return(await ee(this.sessions.vision_encoder,{pixel_values:z})).image_features}async encode_text({input_ids:z}){return(await ee(this.sessions.embed_tokens,{input_ids:z})).inputs_embeds}async encode_audio({audio_values:z}){return(await ee(this.sessions.audio_encoder,{audio_values:z})).audio_features}}class $e{}class Ge extends $e{constructor({last_hidden_state:z,hidden_states:he=null,attentions:Ae=null}){super(),this.last_hidden_state=z,this.hidden_states=he,this.attentions=Ae}}class qe extends re{}class it extends qe{}class Ve extends qe{async _call(z){return new La(await super._call(z))}}class Be extends qe{async _call(z){return new Cn(await super._call(z))}}class _t extends qe{async _call(z){return new Ra(await super._call(z))}}class Ne extends qe{async _call(z){return new za(await super._call(z))}}class Ye extends re{}class kt extends Ye{}class mt extends Ye{async _call(z){return new La(await super._call(z))}}class Tt extends Ye{async _call(z){return new Cn(await super._call(z))}}class Ke extends Ye{async _call(z){return new Ra(await super._call(z))}}class dt extends Ye{async _call(z){return new za(await super._call(z))}}class wt extends re{}class st extends wt{}class He extends wt{async _call(z){return new La(await super._call(z))}}class Bt extends wt{async _call(z){return new Cn(await super._call(z))}}class qt extends wt{async _call(z){return new Ra(await super._call(z))}}class xn extends re{}class At extends xn{}class nn extends xn{}class Ct extends re{}class rt extends Ct{}class hn extends re{}class En extends hn{}class tr extends hn{async _call(z){return new La(await super._call(z))}}class Rt extends hn{async _call(z){return new Cn(await super._call(z))}}class Kn extends hn{async _call(z){return new Ra(await super._call(z))}}class xr extends hn{async _call(z){return new za(await super._call(z))}}class mr extends re{}class qa extends mr{}class on extends mr{async _call(z){return new La(await super._call(z))}}class wr extends mr{async _call(z){return new Cn(await super._call(z))}}class Qi extends mr{async _call(z){return new Ra(await super._call(z))}}class Xa extends mr{async _call(z){return new za(await super._call(z))}}class sa extends re{}class wn extends sa{}class vi extends sa{async _call(z){return new La(await super._call(z))}}class B extends sa{async _call(z){return new Cn(await super._call(z))}}class xe extends sa{async _call(z){return new Ra(await super._call(z))}}class pe extends sa{async _call(z){return new za(await super._call(z))}}class we extends re{}class Se extends we{}class Xe extends we{async _call(z){return new La(await super._call(z))}}class ht extends we{async _call(z){return new Cn(await super._call(z))}}class Lt extends we{async _call(z){return new Ra(await super._call(z))}}class Qt extends we{async _call(z){return new za(await super._call(z))}}class jt extends re{}class gn extends jt{}class Gt extends jt{async _call(z){return new La(await super._call(z))}}class yn extends jt{async _call(z){return new Cn(await super._call(z))}}class Fn extends jt{async _call(z){return new Ra(await super._call(z))}}class pr extends jt{async _call(z){return new za(await super._call(z))}}class Vr extends re{}class fr extends Vr{}class In extends Vr{async _call(z){return new La(await super._call(z))}}class wa extends Vr{async _call(z){return new Cn(await super._call(z))}}class hr extends Vr{async _call(z){return new Ra(await super._call(z))}}class Cr extends Vr{async _call(z){return new za(await super._call(z))}}class la extends re{}class ha extends la{}class Ma extends la{async _call(z){return new Cn(await super._call(z))}}class Pr extends la{async _call(z){return new Ra(await super._call(z))}}class gr extends la{async _call(z){return new za(await super._call(z))}}class Ja extends la{async _call(z){return new La(await super._call(z))}}class ei extends re{}class ao extends ei{}class An extends ei{async _call(z){return new La(await super._call(z))}}class yi extends ei{async _call(z){return new Cn(await super._call(z))}}class Aa extends ei{async _call(z){return new Ra(await super._call(z))}}class Wr extends re{}class ga extends Wr{}class Dt extends Wr{async _call(z){return new La(await super._call(z))}}class Ft extends Wr{async _call(z){return new Cn(await super._call(z))}}class Jt extends Wr{async _call(z){return new za(await super._call(z))}}class fn extends re{}class Ei extends fn{}class Qr extends fn{async _call(z){return new La(await super._call(z))}}class ti extends fn{async _call(z){return new Cn(await super._call(z))}}class _o extends fn{async _call(z){return new Ra(await super._call(z))}}class Qe extends fn{async _call(z){return new za(await super._call(z))}}class G extends re{}class ye extends G{}class Pe extends G{async _call(z){return new La(await super._call(z))}}class ke extends G{async _call(z){return new Cn(await super._call(z))}}class lt extends G{async _call(z){return new za(await super._call(z))}}class ot extends re{}class Kt extends ot{}class Ht extends ot{async _call(z){return new Cn(await super._call(z))}}class Xt extends ot{async _call(z){return new za(await super._call(z))}}class zt extends ot{async _call(z){return new La(await super._call(z))}}class bn extends re{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"]}class mn extends bn{}class or extends bn{}class ta extends re{}class lr extends ta{}class On extends ta{}class Hn extends re{}class Ta extends Hn{}class Qa extends Hn{}class Gr extends re{}class Kr extends Gr{}class kr extends Gr{}class nr extends Gr{async _call(z){return new Cn(await super._call(z))}}class Ar extends re{}class ni extends Ar{}class ri extends Ar{}class Hr extends Ar{async _call(z){return new Cn(await super._call(z))}}class Ya extends Ar{}class Yr extends re{}class Lr extends Yr{}class Xn extends Yr{}class _r extends re{}class Ua extends _r{}class ci extends _r{}class Si extends re{}class vo extends Si{}class pl extends Si{async _call(z){return new La(await super._call(z))}}class Ko extends Si{async _call(z){return new Cn(await super._call(z))}}class Ss extends Si{async _call(z){return new Ra(await super._call(z))}}class Cs extends Si{async _call(z){return new za(await super._call(z))}}class io extends re{}class Kl extends io{}class Ps extends io{async _call(z){return new La(await super._call(z))}}class yo extends io{async _call(z){return new Cn(await super._call(z))}}class ks extends io{async _call(z){return new Ra(await super._call(z))}}class Hl extends io{async _call(z){return new za(await super._call(z))}}class Ho extends re{}class bo extends Ho{}class As extends Ho{async _call(z){return new La(await super._call(z))}}class qo extends Ho{async _call(z){return new Cn(await super._call(z))}}class Os extends Ho{async _call(z){return new Ra(await super._call(z))}}class fl extends Ho{async _call(z){return new za(await super._call(z))}}class Ea extends re{}class xo extends Ea{}class Yi extends Ea{}class oo extends re{requires_attention_mask=!1;main_input_name="input_features";forward_params=["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"]}class $s extends oo{}class Ds extends oo{_prepare_generation_config(z,he){return super._prepare_generation_config(z,he,S.WhisperGenerationConfig)}_retrieve_init_tokens(z){const he=[z.decoder_start_token_id];let Ae=z.language;const tt=z.task;if(z.is_multilingual){Ae||(console.warn("No language specified - defaulting to English (en)."),Ae="en");const bt=`<|${(0,D.whisper_language_to_code)(Ae)}|>`;he.push(z.lang_to_id[bt]),he.push(z.task_to_id[tt??"transcribe"])}else if(Ae||tt)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!z.return_timestamps&&z.no_timestamps_token_id&&he.at(-1)!==z.no_timestamps_token_id?he.push(z.no_timestamps_token_id):z.return_timestamps&&he.at(-1)===z.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),he.pop()),he.filter(et=>et!=null)}async generate({inputs:z=null,generation_config:he=null,logits_processor:Ae=null,stopping_criteria:tt=null,...et}){he=this._prepare_generation_config(he,et);const bt=et.decoder_input_ids??this._retrieve_init_tokens(he);if(he.return_timestamps&&(Ae??=new g.LogitsProcessorList,Ae.push(new g.WhisperTimeStampLogitsProcessor(he,bt))),he.begin_suppress_tokens&&(Ae??=new g.LogitsProcessorList,Ae.push(new g.SuppressTokensAtBeginLogitsProcessor(he.begin_suppress_tokens,bt.length))),he.return_token_timestamps){if(!he.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");he.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),he.output_attentions=!0,he.return_dict_in_generate=!0}const It=await super.generate({inputs:z,generation_config:he,logits_processor:Ae,decoder_input_ids:bt,...et});return he.return_token_timestamps&&(It.token_timestamps=this._extract_token_timestamps(It,he.alignment_heads,he.num_frames)),It}_extract_token_timestamps(z,he,Ae=null,tt=.02){if(!z.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");Ae==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let et=this.config.median_filter_width;et===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),et=7);const bt=z.cross_attentions,It=Array.from({length:this.config.decoder_layers},(un,dn)=>(0,m.cat)(bt.map(Jn=>Jn[dn]),2)),Vt=(0,m.stack)(he.map(([un,dn])=>{if(un>=It.length)throw new Error(`Layer index ${un} is out of bounds for cross attentions (length ${It.length}).`);return Ae?It[un].slice(null,dn,null,[0,Ae]):It[un].slice(null,dn)})).transpose(1,0,2,3),[en,Sn]=(0,m.std_mean)(Vt,-2,0,!0),Mn=Vt.clone();for(let un=0;un<Mn.dims[0];++un){const dn=Mn[un];for(let Jn=0;Jn<dn.dims[0];++Jn){const yr=dn[Jn],Jr=en[un][Jn][0].data,da=Sn[un][Jn][0].data;for(let ya=0;ya<yr.dims[0];++ya){let jr=yr[ya].data;for(let Wn=0;Wn<jr.length;++Wn)jr[Wn]=(jr[Wn]-da[Wn])/Jr[Wn];jr.set((0,_.medianFilter)(jr,et))}}}const Dn=[(0,m.mean)(Mn,1)],cn=z.sequences.dims,ir=new m.Tensor("float32",new Float32Array(cn[0]*cn[1]),cn);for(let un=0;un<cn[0];++un){const dn=Dn[un].neg().squeeze_(0),[Jn,yr]=(0,_.dynamic_time_warping)(dn.tolist()),Jr=Array.from({length:Jn.length-1},(jr,Wn)=>Jn[Wn+1]-Jn[Wn]),da=(0,u.mergeArrays)([1],Jr).map(jr=>!!jr),ya=[];for(let jr=0;jr<da.length;++jr)da[jr]&&ya.push(yr[jr]*tt);ir[un].data.set(ya,1)}return ir}}class ml extends Ds{}class Xo extends re{requires_attention_mask=!1;main_input_name="input_values";forward_params=["input_values","decoder_input_ids","past_key_values"]}class ql extends Xo{}class Ii extends Xo{}class Qo extends re{main_input_name="pixel_values";forward_params=["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"]}class Is extends re{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class wo extends Is{_merge_input_ids_with_image_features(z){const he=z.image_features.dims.at(-1),Ae=z.image_features.view(-1,he);return Y({image_token_id:this.config.image_token_index,...z,image_features:Ae})}}class hl extends wo{}class Xl extends wo{}class Cc extends re{forward_params=["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"];main_input_name="inputs_embeds"}class Yo extends Cc{_merge_input_ids_with_image_features({inputs_embeds:z,image_features:he,input_ids:Ae,attention_mask:tt}){return{inputs_embeds:(0,m.cat)([he,z],1),attention_mask:(0,m.cat)([(0,m.ones)(he.dims.slice(0,2)),tt],1)}}async _prepare_inputs_embeds({input_ids:z,pixel_values:he,inputs_embeds:Ae,attention_mask:tt}){if(!z&&!he)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let et,bt;return z&&(et=await this.encode_text({input_ids:z})),he&&(bt=await this.encode_image({pixel_values:he})),et&&bt?{inputs_embeds:Ae,attention_mask:tt}=this._merge_input_ids_with_image_features({inputs_embeds:et,image_features:bt,input_ids:z,attention_mask:tt}):Ae=et||bt,{inputs_embeds:Ae,attention_mask:tt}}async forward({input_ids:z,pixel_values:he,attention_mask:Ae,decoder_input_ids:tt,decoder_attention_mask:et,encoder_outputs:bt,past_key_values:It,inputs_embeds:Vt,decoder_inputs_embeds:en}){if(Vt||({inputs_embeds:Vt,attention_mask:Ae}=await this._prepare_inputs_embeds({input_ids:z,pixel_values:he,inputs_embeds:Vt,attention_mask:Ae})),!bt){let{last_hidden_state:Dn}=await se(this,{inputs_embeds:Vt,attention_mask:Ae});bt=Dn}if(!en){if(!tt)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");en=await this.encode_text({input_ids:tt})}return await be(this,{inputs_embeds:en,attention_mask:et,encoder_attention_mask:Ae,encoder_hidden_states:bt,past_key_values:It},!0)}}class Zi extends re{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Pc extends Zi{_merge_input_ids_with_image_features(z){const he=z.image_features.dims.at(-1),Ae=z.image_features.view(-1,he);return Y({image_token_id:this.config.image_token_index,...z,image_features:Ae})}}class Zo extends Is{_merge_input_ids_with_image_features(z){const he=z.image_features.dims.at(-1),Ae=z.image_features.view(-1,he);return Y({image_token_id:this.config.image_token_index,...z,image_features:Ae})}}class so extends Zo{}class Mo extends re{forward_params=["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"]}class Jo extends Mo{async forward({input_ids:z=null,attention_mask:he=null,pixel_values:Ae=null,input_features:tt=null,input_features_mask:et=null,position_ids:bt=null,inputs_embeds:It=null,per_layer_inputs:Vt=null,past_key_values:en=null,generation_config:Sn=null,logits_processor:Mn=null,...Dn}){if((!It||!Vt)&&({inputs_embeds:It,per_layer_inputs:Vt}=await ee(this.sessions.embed_tokens,{input_ids:z}),z.dims[1]!==1)){if(Ae){const{image_features:ir}=await ee(this.sessions.vision_encoder,{pixel_values:Ae});({inputs_embeds:It,attention_mask:he}=this._merge_input_ids_with_image_features({image_features:ir,inputs_embeds:It,input_ids:z,attention_mask:he}))}if(tt){const{audio_features:ir}=await ee(this.sessions.audio_encoder,{input_features:tt,input_features_mask:et});({inputs_embeds:It,attention_mask:he}=this._merge_input_ids_with_audio_features({audio_features:ir,inputs_embeds:It,input_ids:z,attention_mask:he}))}}return await be(this,{inputs_embeds:It,per_layer_inputs:Vt,past_key_values:en,attention_mask:he,position_ids:bt,generation_config:Sn,logits_processor:Mn},!0)}_merge_input_ids_with_image_features(z){const he=z.image_features.dims.at(-1),Ae=z.image_features.view(-1,he);return Y({image_token_id:this.config.image_token_id,...z,image_features:Ae})}_merge_input_ids_with_audio_features(z){const he=z.audio_features.dims.at(-1),Ae=z.audio_features.view(-1,he);return te({audio_token_id:this.config.audio_token_id,...z,audio_features:Ae})}}class Ql extends re{forward_params=["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"]}class Ri extends Ql{async encode_image({pixel_values:z,pixel_attention_mask:he}){return(await ee(this.sessions.vision_encoder,{pixel_values:z,pixel_attention_mask:he})).image_features}_merge_input_ids_with_image_features(z){const he=z.image_features.dims.at(-1),Ae=z.image_features.view(-1,he);return Y({image_token_id:this.config.image_token_id,...z,image_features:Ae})}}class es extends Ri{}class gl extends re{forward_params=["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"]}class Rs extends gl{async forward({input_ids:z=null,attention_mask:he=null,pixel_values:Ae=null,image_sizes:tt=null,position_ids:et=null,inputs_embeds:bt=null,past_key_values:It=null,generation_config:Vt=null,logits_processor:en=null,...Sn}){if(!bt){let Dn;if(Ae&&z.dims[1]!==1){if(!tt)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:Dn}=await ee(this.sessions.vision_encoder,{pixel_values:Ae,image_sizes:tt}))}else{const cn=this.config.normalized_config.hidden_size;Dn=new m.Tensor("float32",[],[0,cn])}({inputs_embeds:bt}=await ee(this.sessions.prepare_inputs_embeds,{input_ids:z,image_features:Dn}))}return await be(this,{inputs_embeds:bt,past_key_values:It,attention_mask:he,position_ids:et,generation_config:Vt,logits_processor:en},!1)}}class Ci extends re{}class Ls extends Ci{}class To extends Ci{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"text_model"})}}class Eo extends Ci{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"text_model"})}}class kc extends Ci{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"vision_model"})}}class zs extends Ci{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"vision_model"})}}class lo extends re{}class bi extends lo{}class Mr extends lo{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"text_model"})}}class rn extends Ci{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"vision_model"})}}class co extends re{}class _l extends co{}class uo extends re{}class ts extends uo{async forward(z){const he=!z.input_ids,Ae=!z.pixel_values;if(he&&Ae)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(he&&(z.input_ids=(0,m.ones)([z.pixel_values.dims[0],1])),Ae){const{image_size:en}=this.config.vision_config;z.pixel_values=(0,m.full)([0,3,en,en],0)}const{text_embeddings:tt,image_embeddings:et,l2norm_text_embeddings:bt,l2norm_image_embeddings:It}=await super.forward(z),Vt={};return he||(Vt.text_embeddings=tt,Vt.l2norm_text_embeddings=bt),Ae||(Vt.image_embeddings=et,Vt.l2norm_image_embeddings=It),Vt}}class Oa extends uo{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"text_model"})}}class So extends uo{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"vision_model"})}}class Li extends re{}class zi extends Li{}class Va extends Li{}class v extends re{}class O extends v{}class j extends v{}class V extends re{}class Z extends V{}class ce extends V{}class ve extends re{}class Me extends ve{}class Le extends ve{}class Ze extends re{}class ze extends Ze{}class Ie extends Ze{}class Fe extends re{}class y extends Fe{}class $ extends Fe{}class F extends re{}class W extends F{}class Q extends F{}class ue extends re{}class Ce extends ue{}class je extends ue{}class nt extends re{}class pt extends nt{}class gt extends nt{}class $t extends re{}class Ot extends $t{}class Et extends re{}class Yt extends Et{}class kn extends Et{}class Qn extends re{}class vn extends Qn{}class Bn extends Qn{}class Or extends re{}class ui extends Or{}class Tr extends Or{}class po extends re{}class Fs extends po{}class Yl extends po{}class Bf extends re{}class Fi extends Bf{}class Ld extends Bf{}class Co extends re{}class Nf extends Co{}class wu extends Co{}class js extends re{}class zd extends js{}class Uf extends js{}class Mu extends re{}class Vf extends Mu{}class Ji extends Mu{}class vl extends re{}class Zl extends vl{}class Tu extends vl{}class Jl extends re{}class eo extends Jl{}class to extends Jl{}class ns extends re{}class Po extends ns{}class ko extends ns{}class Ao extends re{}class Wf extends Ao{}class Fd extends Ao{}class Eu extends re{}class Gf extends Eu{}class ai extends Eu{}class Zr extends re{}class sr extends Zr{}class Bs extends Zr{}class ji extends re{}class jd extends ji{}class Ns extends ji{}class Bd extends re{}class Kf extends Bd{}class ec extends Bd{}class Us extends re{}class Nd extends Us{}class Ac extends Us{}class Su extends re{}class yl extends Su{}class rs extends Su{}class as extends re{}class is extends as{}class Ud extends as{}class Cu extends re{}class tc extends Cu{}class Pu extends Cu{}class bl extends re{forward_params=["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"]}class ii extends bl{get_rope_index(z,he,Ae,tt){const{vision_config:et,image_token_id:bt,video_token_id:It,vision_start_token_id:Vt}=this.config,en=et.spatial_merge_size??2,Sn=[];if(he||Ae){let Mn=z.tolist();tt||(tt=(0,m.ones_like)(z));const Dn=tt.tolist(),cn=Array.from({length:3},yr=>Array.from({length:z.dims[0]},Jr=>Array.from({length:z.dims[1]},da=>1))),ir=he?he.tolist():[],un=Ae?Ae.tolist():[];let dn=0,Jn=0;for(let yr=0;yr<Mn.length;++yr){const Jr=Mn[yr].filter((ea,ja)=>Dn[yr][ja]==1),ya=Jr.reduce((ea,ja,Qs)=>(ja==Vt&&ea.push(Qs),ea),[]).map(ea=>Jr[ea+1]),jr=ya.filter(ea=>ea==bt).length,Wn=ya.filter(ea=>ea==It).length;let pa=[],Fa=0,bc=jr,Ai=Wn;for(let ea=0;ea<ya.length;++ea){const ja=Jr.findIndex((Fl,Mi)=>Mi>Fa&&Fl==bt),Qs=Jr.findIndex((Fl,Mi)=>Mi>Fa&&Fl==It),Fo=bc>0&&ja!==-1?ja:Jr.length+1,mi=Ai>0&&Qs!==-1?Qs:Jr.length+1;let ld,ou,jo,Wh;Fo<mi?([ou,jo,Wh]=ir[dn],++dn,--bc,ld=Fo):([ou,jo,Wh]=un[Jn],++Jn,--Ai,ld=mi);const[$y,zl,cd]=[Number(ou),Math.floor(Number(jo)/en),Math.floor(Number(Wh)/en)],Gh=ld-Fa,P_=pa.length>0?(0,_.max)(pa.at(-1))[0]+1:0;pa.push(Array.from({length:3*Gh},(Fl,Mi)=>P_+Mi%Gh));const Kh=Gh+P_,Yp=$y*zl*cd,Dy=Array.from({length:Yp},(Fl,Mi)=>Kh+Math.floor(Mi/(zl*cd))),Iy=Array.from({length:Yp},(Fl,Mi)=>Kh+Math.floor(Mi/cd)%zl),Ry=Array.from({length:Yp},(Fl,Mi)=>Kh+Mi%cd);pa.push([Dy,Iy,Ry].flat()),Fa=ld+Yp}if(Fa<Jr.length){const ea=pa.length>0?(0,_.max)(pa.at(-1))[0]+1:0,ja=Jr.length-Fa;pa.push(Array.from({length:3*ja},(Qs,Fo)=>ea+Fo%ja))}const ho=pa.reduce((ea,ja)=>ea+ja.length,0),Rl=new Array(ho);let Ll=0;for(let ea=0;ea<3;++ea)for(let ja=0;ja<pa.length;++ja){const Qs=pa[ja],Fo=Qs.length/3;for(let mi=ea*Fo;mi<(ea+1)*Fo;++mi)Rl[Ll++]=Qs[mi]}let Qp=0;const wi=Dn[yr];for(let ea=0;ea<wi.length;++ea)if(wi[ea]==1){for(let ja=0;ja<3;++ja)cn[ja][yr][ea]=Rl[ja*ho/3+Qp];++Qp}const Vh=(0,_.max)(Rl)[0];Sn.push(Vh+1-Mn[yr].length)}return[new m.Tensor("int64",cn.flat(1/0),[3,z.dims[0],z.dims[1]]),new m.Tensor("int64",Sn,[Sn.length,1])]}else if(tt){const{data:Mn,dims:Dn}=Te(tt),cn=BigInt64Array.from({length:3*Mn.length},(un,dn)=>Mn[dn%Mn.length]),ir=Array.from({length:Dn[0]},(un,dn)=>(0,_.max)(Mn.subarray(Dn[1]*dn,Dn[1]*(dn+1)))[0]+1n+BigInt(Dn[1]));return[new m.Tensor("int64",cn,[3,...Dn]),new m.Tensor("int64",ir,[ir.length,1])]}else{const[Mn,Dn]=z.dims,cn=BigInt64Array.from({length:3*Mn*Dn},(ir,un)=>BigInt(Math.floor(un%Dn/Mn)));return[new m.Tensor("int64",cn,[3,...z.dims]),(0,m.zeros)([Mn,1])]}}async encode_image({pixel_values:z,image_grid_thw:he}){return(await ee(this.sessions.vision_encoder,{pixel_values:z,grid_thw:he})).image_features}_merge_input_ids_with_image_features(z){return Y({image_token_id:this.config.image_token_id,...z})}prepare_inputs_for_generation(z,he,Ae){if(he.attention_mask&&!he.position_ids)if(!he.past_key_values)[he.position_ids,he.rope_deltas]=this.get_rope_index(he.input_ids,he.image_grid_thw,he.video_grid_thw,he.attention_mask);else{he.pixel_values=null;const tt=BigInt(Object.values(he.past_key_values)[0].dims.at(-2)),et=he.rope_deltas.map(bt=>tt+bt);he.position_ids=(0,m.stack)([et,et,et],0)}return he}}class Oc extends re{}class Hf extends Oc{}class Yg extends Oc{}class qf extends re{}class Zg extends qf{}class $a extends qf{}class ku extends re{}class $c extends ku{}class Dc extends ku{}class Au extends re{}class nc extends Au{}class rc extends Au{}class Xf extends re{}class Qf extends Xf{}class Jg extends Xf{}class Vd extends re{}class xl extends Vd{}class Wd extends Vd{async _call(z){return new Cn(await super._call(z))}}class Ic extends re{}class Yf extends Ic{}class ac extends Ic{async _call(z){return new Cn(await super._call(z))}}class Gd extends re{}class Ou extends Gd{}class Rc extends re{}class Zf extends Rc{}class Jf extends Rc{async _call(z){return new Cn(await super._call(z))}}class wl extends re{}class Ml extends wl{}class Kd extends re{}class em extends Kd{}class ic extends Kd{async _call(z){return new Cn(await super._call(z))}}class Lc extends re{}class $u extends Lc{}class oc extends re{}class Du extends oc{}class tm extends oc{async _call(z){return new Cn(await super._call(z))}}class Tl extends re{}class nm extends Tl{async _call(z){return new Uh(await super._call(z))}}class os extends re{}class Hd extends os{}class qd extends os{async _call(z){return new Cn(await super._call(z))}}class ss extends re{}class Vs extends ss{}class zc extends ss{async _call(z){return new Cn(await super._call(z))}}class Iu extends re{}class Xd extends Iu{}class Fc extends Iu{}class sc extends re{}class rm extends sc{}class am extends sc{}class El extends re{}class Ru extends El{}class im extends El{async _call(z){return new Cn(await super._call(z))}}class jc extends re{}class Qd extends jc{}class Bi extends jc{async _call(z){return new ls(await super._call(z))}}class Ni extends jc{async _call(z){return new Yd(await super._call(z))}}class ls extends $e{constructor({logits:z,pred_boxes:he}){super(),this.logits=z,this.pred_boxes=he}}class Yd extends $e{constructor({logits:z,pred_boxes:he,pred_masks:Ae}){super(),this.logits=z,this.pred_boxes=he,this.pred_masks=Ae}}class Zd extends re{}class Ws extends Zd{}class Ui extends Zd{async _call(z){return new ca(await super._call(z))}}class ca extends $e{constructor({logits:z,pred_boxes:he}){super(),this.logits=z,this.pred_boxes=he}}class Bc extends re{}class cs extends Bc{}class Vn extends Bc{async _call(z){return new zr(await super._call(z))}}class zr extends ca{}class Sa extends re{}class Lu extends Sa{}class lc extends Sa{async _call(z){return new Sl(await super._call(z))}}class Sl extends ca{}class Nc extends re{}class Uc extends Nc{}class cc extends Nc{async _call(z){return new ca(await super._call(z))}}class om extends re{}class _a extends om{}class Jd extends om{async _call(z){return new ep(await super._call(z))}}class ep extends ls{}class tp extends re{}class sm extends tp{}class e_ extends tp{async _call(z){return new Cn(await super._call(z))}}class zu extends re{}class np extends zu{}class rp extends zu{async _call(z){return new Cn(await super._call(z))}}class di extends re{}class Ca extends di{}class Fu extends di{async _call(z){return new Cn(await super._call(z))}}class Cl extends re{}class ju extends Cl{}class ap extends Cl{async _call(z){return new Cn(await super._call(z))}}class us extends Cl{}class Vc extends re{}class ip extends Vc{}class op extends Vc{}class sp extends re{}class lm extends sp{}class cm extends sp{}class um extends re{}class dm extends um{}class Bu extends re{}class lp extends Bu{}class pm extends Bu{}class t_ extends Bu{}class fm extends re{}class mm extends fm{}class hm extends re{}class cp extends hm{}class gm extends re{}class _m extends gm{}class up extends re{}class vm extends up{}class ym extends up{}class bm extends re{}class xm extends bm{}class uc extends bm{}class wm extends re{}class Nu extends wm{}class Wc extends re{}class Mm extends Wc{}class dp extends Wc{async _call(z){return new Cn(await super._call(z))}}class Tm extends re{}class Em extends Tm{}class Sm extends Tm{async _call(z){return new Cn(await super._call(z))}}class pp extends re{}class Cm extends pp{}class Pm extends pp{async _call(z){return new Cn(await super._call(z))}}class Uu extends re{}class km extends Uu{}class Am extends Uu{async _call(z){return new Cn(await super._call(z))}}class fp extends re{}class Om extends fp{}class $m extends re{}class n_ extends $m{}class mp extends re{}class Dm extends mp{}class hp extends re{}class gp extends hp{}class Im extends hp{async _call(z){return new Rm(await super._call(z))}}class Rm extends $e{constructor({logits:z,pred_boxes:he}){super(),this.logits=z,this.pred_boxes=he}}class r_ extends re{}class a_ extends r_{async get_image_embeddings({pixel_values:z}){return await se(this,{pixel_values:z})}async forward(z){!z.image_embeddings||!z.image_positional_embeddings?z={...z,...await this.get_image_embeddings(z)}:z={...z},z.input_labels??=(0,m.ones)(z.input_points.dims.slice(0,-1));const he={image_embeddings:z.image_embeddings,image_positional_embeddings:z.image_positional_embeddings};return z.input_points&&(he.input_points=z.input_points),z.input_labels&&(he.input_labels=z.input_labels),z.input_boxes&&(he.input_boxes=z.input_boxes),await ee(this.sessions.prompt_encoder_mask_decoder,he)}async _call(z){return new Lm(await super._call(z))}}class Lm extends $e{constructor({iou_scores:z,pred_masks:he}){super(),this.iou_scores=z,this.pred_masks=he}}class Gc extends $e{constructor({iou_scores:z,pred_masks:he,object_score_logits:Ae}){super(),this.iou_scores=z,this.pred_masks=he,this.object_score_logits=Ae}}class _p extends re{}class dc extends _p{async get_image_embeddings({pixel_values:z}){return await se(this,{pixel_values:z})}async forward(z){const{num_feature_levels:he}=this.config.vision_config;if(Array.from({length:he},(bt,It)=>`image_embeddings.${It}`).some(bt=>!z[bt])?z={...z,...await this.get_image_embeddings(z)}:z={...z},z.input_points){if(z.input_boxes&&z.input_boxes.dims[1]!==1)throw new Error("When both `input_points` and `input_boxes` are provided, the number of boxes per image must be 1.");const bt=z.input_points.dims;z.input_labels??=(0,m.ones)(bt.slice(0,-1)),z.input_boxes??=(0,m.full)([bt[0],0,4],0)}else if(z.input_boxes){const bt=z.input_boxes.dims;z.input_labels=(0,m.full)([bt[0],bt[1],0],-1n),z.input_points=(0,m.full)([bt[0],1,0,2],0)}else throw new Error("At least one of `input_points` or `input_boxes` must be provided.");const tt=this.sessions.prompt_encoder_mask_decoder,et=(0,u.pick)(z,tt.inputNames);return await ee(tt,et)}async _call(z){return new Gc(await super._call(z))}}class zm extends dc{}class Fm extends dc{}class pc extends re{}class jm extends pc{}class vp extends pc{}class yp extends re{}class bp extends yp{}class xp extends yp{}class Gs extends re{}class Bm extends Gs{}class Pl extends Gs{async _call(z){return new zo(await super._call(z))}}class Nm extends Gs{async _call(z){return new Cn(await super._call(z))}}class Um extends Gs{async _call(z){return new Ra(await super._call(z))}}class Vm extends re{}class Vu extends Vm{async _call(z){return new zo(await super._call(z))}}class wp extends re{}class Mp extends wp{}class Wm extends wp{async _call(z){return new Ra(await super._call(z))}}class Gm extends re{}class i_ extends Gm{}class Kc extends re{}class Da extends Kc{}class oi extends Kc{async _call(z){return new zo(await super._call(z))}}class Km extends Kc{async _call(z){return new Cn(await super._call(z))}}class Hc extends re{}class Hm extends Hc{}class qm extends Hc{async _call(z){return new zo(await super._call(z))}}class qc extends Hc{async _call(z){return new Cn(await super._call(z))}}class Xm extends Hc{async _call(z){return new Ra(await super._call(z))}}class fc extends re{}class Qm extends fc{}class o_ extends fc{async _call(z){return new zo(await super._call(z))}}class Wu extends fc{async _call(z){return new Cn(await super._call(z))}}class Ym extends re{}class Zm extends Gs{}class Jm extends Gs{async _call(z){return new zo(await super._call(z))}}class eh extends Gs{async _call(z){return new Cn(await super._call(z))}}class kl extends re{}class Tp extends kl{}class Ep extends kl{async _call(z){return new zo(await super._call(z))}}class th extends kl{async _call(z){return new Cn(await super._call(z))}}class Sp extends kl{async _call(z){return new Xp(await super._call(z))}}class Gu extends kl{async _call(z){return new Ra(await super._call(z))}}class Cp extends re{}class nh extends Cp{}class Xc extends re{}class s_ extends Xc{}class ds extends Xc{}class Pp extends Xc{async generate_speech(z,he,{threshold:Ae=.5,minlenratio:tt=0,maxlenratio:et=20,vocoder:bt=null}={}){const It={input_ids:z},{encoder_outputs:Vt,encoder_attention_mask:en}=await se(this,It),Sn=Vt.dims[1]/this.config.reduction_factor,Mn=Math.floor(Sn*et),Dn=Math.floor(Sn*tt),cn=this.config.num_mel_bins;let ir=[],un=null,dn=null,Jn=0;for(;;){++Jn;const da=ae(!!dn);let ya;dn?ya=dn.output_sequence_out:ya=new m.Tensor("float32",new Float32Array(cn),[1,1,cn]);let jr={use_cache_branch:da,output_sequence:ya,encoder_attention_mask:en,speaker_embeddings:he,encoder_hidden_states:Vt};this.addPastKeyValues(jr,un),dn=await ee(this.sessions.decoder_model_merged,jr),un=this.getPastKeyValues(dn,un);const{prob:Wn,spectrum:pa}=dn;if(ir.push(pa),Jn>=Dn&&(Array.from(Wn.data).filter(Fa=>Fa>=Ae).length>0||Jn>=Mn))break}const yr=(0,m.cat)(ir),{waveform:Jr}=await ee(bt.sessions.model,{spectrogram:yr});return{spectrogram:yr,waveform:Jr}}}class l_ extends re{main_input_name="spectrogram"}class rh extends re{}class Oo extends rh{async generate_speech({input_ids:z,attention_mask:he,style:Ae,num_inference_steps:tt=5,speed:et=1.05}){const{sampling_rate:bt,chunk_compress_factor:It,base_chunk_size:Vt,latent_dim:en}=this.config,{last_hidden_state:Sn,durations:Mn}=await ee(this.sessions.text_encoder,{input_ids:z,attention_mask:he,style:Ae});Mn.div_(et);const Dn=Mn.max().item()*bt,cn=Vt*It,ir=Math.floor((Dn+cn-1)/cn),un=z.dims[0],dn=(0,m.ones)([un,ir]),Jn=(0,m.full)([un],tt);let yr=(0,m.randn)([un,en*It,ir]);for(let da=0;da<tt;++da){const ya=(0,m.full)([un],da);({denoised_latents:yr}=await ee(this.sessions.latent_denoiser,{style:Ae,noisy_latents:yr,latent_mask:dn,encoder_outputs:Sn,attention_mask:he,timestep:ya,num_inference_steps:Jn}))}const{waveform:Jr}=await ee(this.sessions.voice_decoder,{latents:yr});return{waveform:Jr,durations:Mn}}}class kp extends re{}class ah extends kp{}class Qc extends re{}class Yc extends Qc{}class na extends Qc{}class ih extends re{}class c_ extends ih{}class oh extends ih{}class mc extends re{}class Ks extends mc{}class sh extends mc{}class Ap extends re{}class Zc extends Ap{}class $o extends Ap{}class Op extends re{}class $p extends Op{}class lh extends Op{}class Ku extends re{}class Dp extends Ku{}class Hu extends Ku{}class qu extends re{}class ps extends qu{}class Ia extends qu{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"text_model"})}}class Ip extends qu{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"audio_model"})}}class ch extends re{}class Wa extends ch{async _call(z){return new C_(await super._call(z))}}class Rp extends re{}class u_ extends Rp{}class uh extends Rp{}class ua extends Rp{}class xi extends re{}class fs extends xi{}class dh extends xi{}class Lp extends re{}class ph extends Lp{}class d_ extends Lp{async _call(z){return new Cn(await super._call(z))}}class Jc extends re{}class Vi extends Jc{}class Do extends Jc{}class zp extends re{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"];_apply_and_filter_by_delay_pattern_mask(z){const[he,Ae]=z.dims,tt=this.config.decoder.num_codebooks,et=Ae-tt;let bt=0;for(let en=0;en<z.size;++en){if(z.data[en]===this.config.decoder.pad_token_id)continue;const Sn=en%Ae,Mn=Math.floor(en/Ae)%tt,Dn=Sn-Mn;Dn>0&&Dn<=et&&(z.data[bt++]=z.data[en])}const It=Math.floor(he/tt),Vt=bt/(It*tt);return new m.Tensor(z.type,z.data.slice(0,bt),[It,tt,Vt])}prepare_inputs_for_generation(z,he,Ae){let tt=structuredClone(z);for(let bt=0;bt<tt.length;++bt)for(let It=0;It<tt[bt].length;++It)bt%this.config.decoder.num_codebooks>=It&&(tt[bt][It]=BigInt(this.config.decoder.pad_token_id));return Ae.guidance_scale!==null&&Ae.guidance_scale>1&&(tt=tt.concat(tt)),super.prepare_inputs_for_generation(tt,he,Ae)}async generate(z){const he=await super.generate(z),Ae=this._apply_and_filter_by_delay_pattern_mask(he).unsqueeze_(0),{audio_values:tt}=await ee(this.sessions.encodec_decode,{audio_codes:Ae});return tt}}class pi extends re{}class fh extends pi{}class ms extends pi{async _call(z){return new Cn(await super._call(z))}}class Al extends pi{}class fo extends re{}class Fp extends fo{}class jp extends fo{async _call(z){return new Cn(await super._call(z))}}class mo extends fo{}class Xu extends re{}class hc extends Xu{}class eu extends Xu{async _call(z){return new Cn(await super._call(z))}}class tu extends Xu{}class Hs extends re{}class mh extends Hs{}class hh extends Hs{async _call(z){return new Cn(await super._call(z))}}class nu extends Hs{}class gh extends re{}class Qu extends gh{}class _h extends re{}class p_ extends _h{forward_params=["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"];constructor(...z){super(...z),this._generation_mode="text"}async forward(z){const he=this._generation_mode??"text";let Ae;if(he==="text"||!z.past_key_values){const Vt=this.sessions.prepare_inputs_embeds,en=(0,u.pick)(z,Vt.inputNames);Ae=await ee(Vt,en)}else{const Vt=this.sessions.gen_img_embeds,en=(0,u.pick)({image_ids:z.input_ids},Vt.inputNames);Ae=await ee(Vt,en)}const tt={...z,...Ae},et=await be(this,tt),bt=this.sessions[he==="text"?"lm_head":"gen_head"];if(!bt)throw new Error(`Unable to find "${bt}" generation head`);const It=await ee(bt,(0,u.pick)(et,bt.inputNames));return{...Ae,...et,...It}}async generate(z){return this._generation_mode="text",super.generate(z)}async generate_images(z){this._generation_mode="image";const he=(z.inputs??z[this.main_input_name]).dims[1],tt=(await super.generate(z)).slice(null,[he,null]),et=this.sessions.image_decode,{decoded_image:bt}=await ee(et,{generated_tokens:tt}),It=bt.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),Vt=[];for(const en of It){const Sn=x.RawImage.fromTensor(en);Vt.push(Sn)}return Vt}}class f_ extends $e{constructor({char_logits:z,bpe_logits:he,wp_logits:Ae}){super(),this.char_logits=z,this.bpe_logits=he,this.wp_logits=Ae}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class vr extends re{}class qr extends vr{async _call(z){return new f_(await super._call(z))}}class Zn extends re{}class rr extends Zn{}class $r extends Zn{}class Pi extends re{}class qs extends Pi{}class gc extends Pi{}class Bp extends re{forward_params=["input_ids","attention_mask","position_ids","audio_values","past_key_values"]}class Io extends Bp{_merge_input_ids_with_audio_features(z){const he=z.audio_features.dims.at(-1),Ae=z.audio_features.view(-1,he);return te({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...z,audio_features:Ae})}}class va extends Io{}class Ro extends re{main_input_name="input_values";forward_params=["input_values"]}class Ol extends $e{constructor({audio_codes:z}){super(),this.audio_codes=z}}class Np extends $e{constructor({audio_values:z}){super(),this.audio_values=z}}class Wi extends Ro{async encode(z){return new Ol(await ee(this.sessions.encoder_model,z))}async decode(z){return new Np(await ee(this.sessions.decoder_model,z))}}class _c extends Ro{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"encoder_model"})}}class ru extends Ro{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"decoder_model"})}}class fi extends re{main_input_name="input_values";forward_params=["input_values"]}class Up extends $e{constructor({audio_codes:z}){super(),this.audio_codes=z}}class Yu extends $e{constructor({audio_values:z}){super(),this.audio_values=z}}class vh extends fi{async encode(z){return new Up(await ee(this.sessions.encoder_model,z))}async decode(z){return new Yu(await ee(this.sessions.decoder_model,z))}}class Zu extends fi{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"encoder_model"})}}class Ju extends fi{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"decoder_model"})}}class Lo extends re{main_input_name="input_values";forward_params=["input_values"]}class Ga extends Lo{async encode(z){return await ee(this.sessions.encoder_model,z)}async decode(z){return await ee(this.sessions.decoder_model,z)}}class Xs extends Lo{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"encoder_model"})}}class vc extends Lo{static async from_pretrained(z,he={}){return super.from_pretrained(z,{...he,model_file_name:he.model_file_name??"decoder_model"})}}class Yn{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(z,{progress_callback:he=null,config:Ae=null,cache_dir:tt=null,local_files_only:et=!1,revision:bt="main",model_file_name:It=null,subfolder:Vt="onnx",device:en=null,dtype:Sn=null,use_external_data_format:Mn=null,session_options:Dn={}}={}){const cn={progress_callback:he,config:Ae,cache_dir:tt,local_files_only:et,revision:bt,model_file_name:It,subfolder:Vt,device:en,dtype:Sn,use_external_data_format:Mn,session_options:Dn};if(cn.config=await r.AutoConfig.from_pretrained(z,cn),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const ir=cn.config.model_type;for(const un of this.MODEL_CLASS_MAPPINGS){let dn=un.get(ir);if(!dn){for(const Jn of un.values())if(Jn[0]===ir){dn=Jn;break}if(!dn)continue}return await dn[1].from_pretrained(z,cn)}if(this.BASE_IF_FAIL)return Kp.has(ir)||console.warn(`Unknown model class "${ir}", attempting to construct from base class.`),await re.from_pretrained(z,cn);throw Error(`Unsupported model type: ${ir}`)}}const yh=new Map([["bert",["BertModel",it]],["neobert",["NeoBertModel",kt]],["modernbert",["ModernBertModel",st]],["nomic_bert",["NomicBertModel",rt]],["roformer",["RoFormerModel",En]],["electra",["ElectraModel",wn]],["esm",["EsmModel",ao]],["convbert",["ConvBertModel",qa]],["camembert",["CamembertModel",Se]],["deberta",["DebertaModel",gn]],["deberta-v2",["DebertaV2Model",fr]],["mpnet",["MPNetModel",Ei]],["albert",["AlbertModel",Kt]],["distilbert",["DistilBertModel",ha]],["roberta",["RobertaModel",vo]],["xlm",["XLMModel",Kl]],["xlm-roberta",["XLMRobertaModel",bo]],["clap",["ClapModel",ps]],["clip",["CLIPModel",Ls]],["clipseg",["CLIPSegModel",zi]],["chinese_clip",["ChineseCLIPModel",_l]],["siglip",["SiglipModel",bi]],["jina_clip",["JinaCLIPModel",ts]],["mobilebert",["MobileBertModel",ga]],["squeezebert",["SqueezeBertModel",ye]],["wav2vec2",["Wav2Vec2Model",Bm]],["wav2vec2-bert",["Wav2Vec2BertModel",Qm]],["unispeech",["UniSpeechModel",Da]],["unispeech-sat",["UniSpeechSatModel",Hm]],["hubert",["HubertModel",Zm]],["wavlm",["WavLMModel",Tp]],["audio-spectrogram-transformer",["ASTModel",xo]],["vits",["VitsModel",Wa]],["pyannote",["PyAnnoteModel",Mp]],["wespeaker-resnet",["WeSpeakerResNetModel",i_]],["detr",["DetrModel",Qd]],["rt_detr",["RTDetrModel",Ws]],["rt_detr_v2",["RTDetrV2Model",cs]],["rf_detr",["RFDetrModel",Lu]],["d_fine",["DFineModel",Uc]],["table-transformer",["TableTransformerModel",_a]],["vit",["ViTModel",xl]],["ijepa",["IJepaModel",Yf]],["pvt",["PvtModel",Zf]],["vit_msn",["ViTMSNModel",em]],["vit_mae",["ViTMAEModel",Ml]],["groupvit",["GroupViTModel",$u]],["fastvit",["FastViTModel",Du]],["mobilevit",["MobileViTModel",Hd]],["mobilevitv2",["MobileViTV2Model",Vs]],["owlvit",["OwlViTModel",Xd]],["owlv2",["Owlv2Model",rm]],["beit",["BeitModel",Ru]],["deit",["DeiTModel",sm]],["hiera",["HieraModel",np]],["convnext",["ConvNextModel",Mm]],["convnextv2",["ConvNextV2Model",Em]],["dinov2",["Dinov2Model",Cm]],["dinov2_with_registers",["Dinov2WithRegistersModel",km]],["dinov3_vit",["DINOv3ViTModel",Om]],["dinov3_convnext",["DINOv3ConvNextModel",n_]],["resnet",["ResNetModel",Ca]],["swin",["SwinModel",ju]],["swin2sr",["Swin2SRModel",ip]],["donut-swin",["DonutSwinModel",Nu]],["yolos",["YolosModel",gp]],["dpt",["DPTModel",lm]],["glpn",["GLPNModel",xm]],["hifigan",["SpeechT5HifiGan",l_]],["efficientnet",["EfficientNetModel",ph]],["decision_transformer",["DecisionTransformerModel",Qu]],["patchtst",["PatchTSTForPrediction",rr]],["patchtsmixer",["PatchTSMixerForPrediction",qs]],["mobilenet_v1",["MobileNetV1Model",fh]],["mobilenet_v2",["MobileNetV2Model",Fp]],["mobilenet_v3",["MobileNetV3Model",hc]],["mobilenet_v4",["MobileNetV4Model",mh]],["maskformer",["MaskFormerModel",vm]],["mgp-str",["MgpstrForSceneTextRecognition",qr]],["style_text_to_speech_2",["StyleTextToSpeech2Model",nh]]]),bh=new Map([["t5",["T5Model",mn]],["longt5",["LongT5Model",lr]],["mt5",["MT5Model",Ta]],["bart",["BartModel",Kr]],["mbart",["MBartModel",ni]],["marian",["MarianModel",jm]],["whisper",["WhisperModel",$s]],["m2m_100",["M2M100Model",bp]],["blenderbot",["BlenderbotModel",Lr]],["blenderbot-small",["BlenderbotSmallModel",Ua]]]),m_=new Map([["mimi",["MimiModel",Wi]],["dac",["DacModel",vh]],["snac",["SnacModel",Ga]]]),ed=new Map([["bloom",["BloomModel",$c]],["jais",["JAISModel",Z]],["gpt2",["GPT2Model",O]],["gptj",["GPTJModel",y]],["gpt_bigcode",["GPTBigCodeModel",W]],["gpt_neo",["GPTNeoModel",Me]],["gpt_neox",["GPTNeoXModel",ze]],["codegen",["CodeGenModel",Ce]],["llama",["LlamaModel",pt]],["nanochat",["NanoChatModel",Yt]],["arcee",["ArceeModel",vn]],["lfm2",["Lfm2Model",ui]],["smollm3",["SmolLM3Model",Fs]],["exaone",["ExaoneModel",zd]],["olmo",["OlmoModel",Zl]],["olmo2",["Olmo2Model",eo]],["mobilellm",["MobileLLMModel",Vf]],["granite",["GraniteModel",Po]],["granitemoehybrid",["GraniteMoeHybridModel",Wf]],["cohere",["CohereModel",Gf]],["gemma",["GemmaModel",sr]],["gemma2",["Gemma2Model",jd]],["vaultgemma",["VaultGemmaModel",Kf]],["gemma3_text",["Gemma3Model",Nd]],["helium",["HeliumModel",Fi]],["glm",["GlmModel",Nf]],["openelm",["OpenELMModel",yl]],["qwen2",["Qwen2Model",is]],["qwen3",["Qwen3Model",tc]],["phi",["PhiModel",Hf]],["phi3",["Phi3Model",Zg]],["mpt",["MptModel",nc]],["opt",["OPTModel",Qf]],["mistral",["MistralModel",Yc]],["ministral",["MinistralModel",c_]],["ministral3",["Ministral3Model",Ks]],["ernie4_5",["Ernie4_5Model",Zc]],["starcoder2",["Starcoder2Model",$p]],["falcon",["FalconModel",Dp]],["stablelm",["StableLmModel",fs]],["modernbert-decoder",["ModernBertDecoderModel",At]]]),td=new Map([["speecht5",["SpeechT5ForSpeechToText",ds]],["whisper",["WhisperForConditionalGeneration",Ds]],["lite-whisper",["LiteWhisperForConditionalGeneration",ml]],["moonshine",["MoonshineForConditionalGeneration",Ii]]]),Gi=new Map([["speecht5",["SpeechT5ForTextToSpeech",Pp]]]),xh=new Map([["vits",["VitsModel",Wa]],["musicgen",["MusicgenForConditionalGeneration",zp]],["supertonic",["SupertonicForConditionalGeneration",Oo]]]),ki=new Map([["bert",["BertForSequenceClassification",Be]],["neobert",["NeoBertForSequenceClassification",Tt]],["modernbert",["ModernBertForSequenceClassification",Bt]],["roformer",["RoFormerForSequenceClassification",Rt]],["electra",["ElectraForSequenceClassification",B]],["esm",["EsmForSequenceClassification",yi]],["convbert",["ConvBertForSequenceClassification",wr]],["camembert",["CamembertForSequenceClassification",ht]],["deberta",["DebertaForSequenceClassification",yn]],["deberta-v2",["DebertaV2ForSequenceClassification",wa]],["mpnet",["MPNetForSequenceClassification",ti]],["albert",["AlbertForSequenceClassification",Ht]],["distilbert",["DistilBertForSequenceClassification",Ma]],["roberta",["RobertaForSequenceClassification",Ko]],["xlm",["XLMForSequenceClassification",yo]],["xlm-roberta",["XLMRobertaForSequenceClassification",qo]],["bart",["BartForSequenceClassification",nr]],["mbart",["MBartForSequenceClassification",Hr]],["mobilebert",["MobileBertForSequenceClassification",Ft]],["squeezebert",["SqueezeBertForSequenceClassification",ke]]]),wh=new Map([["bert",["BertForTokenClassification",_t]],["neobert",["NeoBertForTokenClassification",Ke]],["modernbert",["ModernBertForTokenClassification",qt]],["roformer",["RoFormerForTokenClassification",Kn]],["electra",["ElectraForTokenClassification",xe]],["esm",["EsmForTokenClassification",Aa]],["convbert",["ConvBertForTokenClassification",Qi]],["camembert",["CamembertForTokenClassification",Lt]],["deberta",["DebertaForTokenClassification",Fn]],["deberta-v2",["DebertaV2ForTokenClassification",hr]],["mpnet",["MPNetForTokenClassification",_o]],["distilbert",["DistilBertForTokenClassification",Pr]],["roberta",["RobertaForTokenClassification",Ss]],["xlm",["XLMForTokenClassification",ks]],["xlm-roberta",["XLMRobertaForTokenClassification",Os]]]),Vp=new Map([["t5",["T5ForConditionalGeneration",or]],["longt5",["LongT5ForConditionalGeneration",On]],["mt5",["MT5ForConditionalGeneration",Qa]],["bart",["BartForConditionalGeneration",kr]],["mbart",["MBartForConditionalGeneration",ri]],["marian",["MarianMTModel",vp]],["m2m_100",["M2M100ForConditionalGeneration",xp]],["blenderbot",["BlenderbotForConditionalGeneration",Xn]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",ci]]]),Mh=new Map([["bloom",["BloomForCausalLM",Dc]],["gpt2",["GPT2LMHeadModel",j]],["jais",["JAISLMHeadModel",ce]],["gptj",["GPTJForCausalLM",$]],["gpt_bigcode",["GPTBigCodeForCausalLM",Q]],["gpt_neo",["GPTNeoForCausalLM",Le]],["gpt_neox",["GPTNeoXForCausalLM",Ie]],["codegen",["CodeGenForCausalLM",je]],["llama",["LlamaForCausalLM",gt]],["nanochat",["NanoChatForCausalLM",kn]],["llama4_text",["Llama4ForCausalLM",Ot]],["arcee",["ArceeForCausalLM",Bn]],["lfm2",["Lfm2ForCausalLM",Tr]],["smollm3",["SmolLM3ForCausalLM",Yl]],["exaone",["ExaoneForCausalLM",Uf]],["olmo",["OlmoForCausalLM",Tu]],["olmo2",["Olmo2ForCausalLM",to]],["mobilellm",["MobileLLMForCausalLM",Ji]],["granite",["GraniteForCausalLM",ko]],["granitemoehybrid",["GraniteMoeHybridForCausalLM",Fd]],["cohere",["CohereForCausalLM",ai]],["gemma",["GemmaForCausalLM",Bs]],["gemma2",["Gemma2ForCausalLM",Ns]],["vaultgemma",["VaultGemmaForCausalLM",ec]],["gemma3_text",["Gemma3ForCausalLM",Ac]],["helium",["HeliumForCausalLM",Ld]],["glm",["GlmForCausalLM",wu]],["openelm",["OpenELMForCausalLM",rs]],["qwen2",["Qwen2ForCausalLM",Ud]],["qwen3",["Qwen3ForCausalLM",Pu]],["phi",["PhiForCausalLM",Yg]],["phi3",["Phi3ForCausalLM",$a]],["mpt",["MptForCausalLM",rc]],["opt",["OPTForCausalLM",Jg]],["mbart",["MBartForCausalLM",Ya]],["mistral",["MistralForCausalLM",na]],["ministral",["MinistralForCausalLM",oh]],["ministral3",["Ministral3ForCausalLM",sh]],["ernie4_5",["Ernie4_5ForCausalLM",$o]],["starcoder2",["Starcoder2ForCausalLM",lh]],["falcon",["FalconForCausalLM",Hu]],["trocr",["TrOCRForCausalLM",ah]],["stablelm",["StableLmForCausalLM",dh]],["modernbert-decoder",["ModernBertDecoderForCausalLM",nn]],["phi3_v",["Phi3VForCausalLM",Rs]]]),$l=new Map([["multi_modality",["MultiModalityCausalLM",p_]]]),nd=new Map([["bert",["BertForMaskedLM",Ve]],["neobert",["NeoBertForMaskedLM",mt]],["modernbert",["ModernBertForMaskedLM",He]],["roformer",["RoFormerForMaskedLM",tr]],["electra",["ElectraForMaskedLM",vi]],["esm",["EsmForMaskedLM",An]],["convbert",["ConvBertForMaskedLM",on]],["camembert",["CamembertForMaskedLM",Xe]],["deberta",["DebertaForMaskedLM",Gt]],["deberta-v2",["DebertaV2ForMaskedLM",In]],["mpnet",["MPNetForMaskedLM",Qr]],["albert",["AlbertForMaskedLM",zt]],["distilbert",["DistilBertForMaskedLM",Ja]],["roberta",["RobertaForMaskedLM",pl]],["xlm",["XLMWithLMHeadModel",Ps]],["xlm-roberta",["XLMRobertaForMaskedLM",As]],["mobilebert",["MobileBertForMaskedLM",Dt]],["squeezebert",["SqueezeBertForMaskedLM",Pe]]]),Wp=new Map([["bert",["BertForQuestionAnswering",Ne]],["neobert",["NeoBertForQuestionAnswering",dt]],["roformer",["RoFormerForQuestionAnswering",xr]],["electra",["ElectraForQuestionAnswering",pe]],["convbert",["ConvBertForQuestionAnswering",Xa]],["camembert",["CamembertForQuestionAnswering",Qt]],["deberta",["DebertaForQuestionAnswering",pr]],["deberta-v2",["DebertaV2ForQuestionAnswering",Cr]],["mpnet",["MPNetForQuestionAnswering",Qe]],["albert",["AlbertForQuestionAnswering",Xt]],["distilbert",["DistilBertForQuestionAnswering",gr]],["roberta",["RobertaForQuestionAnswering",Cs]],["xlm",["XLMForQuestionAnswering",Hl]],["xlm-roberta",["XLMRobertaForQuestionAnswering",fl]],["mobilebert",["MobileBertForQuestionAnswering",Jt]],["squeezebert",["SqueezeBertForQuestionAnswering",lt]]]),Dl=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Qo]],["idefics3",["Idefics3ForConditionalGeneration",Ri]],["smolvlm",["SmolVLMForConditionalGeneration",es]]]),Th=new Map([["llava",["LlavaForConditionalGeneration",wo]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",hl]],["moondream1",["Moondream1ForConditionalGeneration",Xl]],["florence2",["Florence2ForConditionalGeneration",Yo]],["qwen2-vl",["Qwen2VLForConditionalGeneration",ii]],["idefics3",["Idefics3ForConditionalGeneration",Ri]],["smolvlm",["SmolVLMForConditionalGeneration",es]],["paligemma",["PaliGemmaForConditionalGeneration",Pc]],["llava_qwen2",["LlavaQwen2ForCausalLM",Zo]],["gemma3n",["Gemma3nForConditionalGeneration",Jo]],["mistral3",["Mistral3ForConditionalGeneration",so]]]),Eh=new Map([["ultravox",["UltravoxModel",Io]],["voxtral",["VoxtralForConditionalGeneration",va]]]),h_=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Qo]]]),Sh=new Map([["vit",["ViTForImageClassification",Wd]],["ijepa",["IJepaForImageClassification",ac]],["pvt",["PvtForImageClassification",Jf]],["vit_msn",["ViTMSNForImageClassification",ic]],["fastvit",["FastViTForImageClassification",tm]],["mobilevit",["MobileViTForImageClassification",qd]],["mobilevitv2",["MobileViTV2ForImageClassification",zc]],["beit",["BeitForImageClassification",im]],["deit",["DeiTForImageClassification",e_]],["hiera",["HieraForImageClassification",rp]],["convnext",["ConvNextForImageClassification",dp]],["convnextv2",["ConvNextV2ForImageClassification",Sm]],["dinov2",["Dinov2ForImageClassification",Pm]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",Am]],["resnet",["ResNetForImageClassification",Fu]],["swin",["SwinForImageClassification",ap]],["segformer",["SegformerForImageClassification",uh]],["efficientnet",["EfficientNetForImageClassification",d_]],["mobilenet_v1",["MobileNetV1ForImageClassification",ms]],["mobilenet_v2",["MobileNetV2ForImageClassification",jp]],["mobilenet_v3",["MobileNetV3ForImageClassification",eu]],["mobilenet_v4",["MobileNetV4ForImageClassification",hh]]]),rd=new Map([["detr",["DetrForObjectDetection",Bi]],["rt_detr",["RTDetrForObjectDetection",Ui]],["rt_detr_v2",["RTDetrV2ForObjectDetection",Vn]],["rf_detr",["RFDetrForObjectDetection",lc]],["d_fine",["DFineForObjectDetection",cc]],["table-transformer",["TableTransformerForObjectDetection",Jd]],["yolos",["YolosForObjectDetection",Im]]]),Gp=new Map([["owlvit",["OwlViTForObjectDetection",Fc]],["owlv2",["Owlv2ForObjectDetection",am]],["grounding-dino",["GroundingDinoForObjectDetection",Dm]]]),au=new Map([["detr",["DetrForSegmentation",Ni]],["clipseg",["CLIPSegForImageSegmentation",Va]]]),g_=new Map([["segformer",["SegformerForSemanticSegmentation",ua]],["sapiens",["SapiensForSemanticSegmentation",lp]],["swin",["SwinForSemanticSegmentation",us]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",Al]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",mo]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",tu]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",nu]]]),__=new Map([["detr",["DetrForSegmentation",Ni]],["maskformer",["MaskFormerForInstanceSegmentation",ym]]]),Ch=new Map([["sam",["SamModel",a_]],["sam2",["Sam2Model",dc]],["edgetam",["EdgeTamModel",zm]],["sam3_tracker",["Sam3TrackerModel",Fm]]]),Ph=new Map([["wav2vec2",["Wav2Vec2ForCTC",Pl]],["wav2vec2-bert",["Wav2Vec2BertForCTC",o_]],["unispeech",["UniSpeechForCTC",oi]],["unispeech-sat",["UniSpeechSatForCTC",qm]],["wavlm",["WavLMForCTC",Ep]],["hubert",["HubertForCTC",Jm]],["parakeet_ctc",["ParakeetForCTC",Vu]]]),yc=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Nm]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wu]],["unispeech",["UniSpeechForSequenceClassification",Km]],["unispeech-sat",["UniSpeechSatForSequenceClassification",qc]],["wavlm",["WavLMForSequenceClassification",th]],["hubert",["HubertForSequenceClassification",eh]],["audio-spectrogram-transformer",["ASTForAudioClassification",Yi]]]),ad=new Map([["wavlm",["WavLMForXVector",Sp]]]),kh=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",Xm]],["wavlm",["WavLMForAudioFrameClassification",Gu]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Um]],["pyannote",["PyAnnoteForAudioFrameClassification",Wm]]]),Ah=new Map([["vitmatte",["VitMatteForImageMatting",nm]]]),v_=new Map([["patchtst",["PatchTSTForPrediction",$r]],["patchtsmixer",["PatchTSMixerForPrediction",gc]]]),Oh=new Map([["swin2sr",["Swin2SRForImageSuperResolution",op]]]),$h=new Map([["dpt",["DPTForDepthEstimation",cm]],["depth_anything",["DepthAnythingForDepthEstimation",dm]],["glpn",["GLPNForDepthEstimation",uc]],["sapiens",["SapiensForDepthEstimation",pm]],["depth_pro",["DepthProForDepthEstimation",mm]],["metric3d",["Metric3DForDepthEstimation",cp]],["metric3dv2",["Metric3Dv2ForDepthEstimation",_m]]]),Dh=new Map([["sapiens",["SapiensForNormalEstimation",t_]]]),id=new Map([["vitpose",["VitPoseForPoseEstimation",Ou]]]),Ih=new Map([["clip",["CLIPVisionModelWithProjection",zs]],["siglip",["SiglipVisionModel",rn]],["jina_clip",["JinaCLIPVisionModel",So]]]),Rh=[[yh,E.EncoderOnly],[bh,E.EncoderDecoder],[ed,E.DecoderOnly],[m_,E.AutoEncoder],[ki,E.EncoderOnly],[wh,E.EncoderOnly],[Vp,E.Seq2Seq],[td,E.Seq2Seq],[Mh,E.DecoderOnly],[$l,E.MultiModality],[nd,E.EncoderOnly],[Wp,E.EncoderOnly],[Dl,E.Vision2Seq],[Th,E.ImageTextToText],[Eh,E.AudioTextToText],[Sh,E.EncoderOnly],[au,E.EncoderOnly],[__,E.EncoderOnly],[g_,E.EncoderOnly],[Ah,E.EncoderOnly],[v_,E.EncoderOnly],[Oh,E.EncoderOnly],[$h,E.EncoderOnly],[Dh,E.EncoderOnly],[id,E.EncoderOnly],[rd,E.EncoderOnly],[Gp,E.EncoderOnly],[Ch,E.MaskGeneration],[Ph,E.EncoderOnly],[yc,E.EncoderOnly],[Gi,E.Seq2Seq],[xh,E.EncoderOnly],[ad,E.EncoderOnly],[kh,E.EncoderOnly],[Ih,E.EncoderOnly]];for(const[L,z]of Rh)for(const[he,Ae]of L.values())C.set(he,z),w.set(Ae,he),P.set(he,Ae);const Fr=[["MusicgenForConditionalGeneration",zp,E.Musicgen],["Phi3VForCausalLM",Rs,E.Phi3V],["CLIPTextModelWithProjection",Eo,E.EncoderOnly],["SiglipTextModel",Mr,E.EncoderOnly],["JinaCLIPTextModel",Oa,E.EncoderOnly],["ClapTextModelWithProjection",Ia,E.EncoderOnly],["ClapAudioModelWithProjection",Ip,E.EncoderOnly],["DacEncoderModel",Zu,E.EncoderOnly],["DacDecoderModel",Ju,E.EncoderOnly],["MimiEncoderModel",_c,E.EncoderOnly],["MimiDecoderModel",ru,E.EncoderOnly],["SnacEncoderModel",Xs,E.EncoderOnly],["SnacDecoderModel",vc,E.EncoderOnly],["Gemma3nForConditionalGeneration",Jo,E.ImageAudioTextToText],["SupertonicForConditionalGeneration",Oo,E.Supertonic]];for(const[L,z,he]of Fr)C.set(L,he),w.set(z,L),P.set(L,z);const Kp=new Map([["modnet",au],["birefnet",au],["isnet",au],["ben",au]]);for(const[L,z]of Kp.entries())z.set(L,["PreTrainedModel",re]),C.set(L,E.EncoderOnly),w.set(re,L),P.set(L,re);class xy extends Yn{static MODEL_CLASS_MAPPINGS=Rh.map(z=>z[0]);static BASE_IF_FAIL=!0}class y_ extends Yn{static MODEL_CLASS_MAPPINGS=[ki]}class wy extends Yn{static MODEL_CLASS_MAPPINGS=[wh]}class My extends Yn{static MODEL_CLASS_MAPPINGS=[Vp]}class Ty extends Yn{static MODEL_CLASS_MAPPINGS=[td]}class Hp extends Yn{static MODEL_CLASS_MAPPINGS=[Gi]}class iu extends Yn{static MODEL_CLASS_MAPPINGS=[xh]}class Lh extends Yn{static MODEL_CLASS_MAPPINGS=[Mh]}class qp extends Yn{static MODEL_CLASS_MAPPINGS=[nd]}class zh extends Yn{static MODEL_CLASS_MAPPINGS=[Wp]}class Il extends Yn{static MODEL_CLASS_MAPPINGS=[Dl]}class hs extends Yn{static MODEL_CLASS_MAPPINGS=[Sh]}class od extends Yn{static MODEL_CLASS_MAPPINGS=[au]}class Ey extends Yn{static MODEL_CLASS_MAPPINGS=[g_]}class b_ extends Yn{static MODEL_CLASS_MAPPINGS=[__]}class x_ extends Yn{static MODEL_CLASS_MAPPINGS=[rd]}class w_ extends Yn{static MODEL_CLASS_MAPPINGS=[Gp]}class M_ extends Yn{static MODEL_CLASS_MAPPINGS=[Ch]}class Sy extends Yn{static MODEL_CLASS_MAPPINGS=[Ph]}class Fh extends Yn{static MODEL_CLASS_MAPPINGS=[yc]}class T_ extends Yn{static MODEL_CLASS_MAPPINGS=[ad]}class E_ extends Yn{static MODEL_CLASS_MAPPINGS=[kh]}class Cy extends Yn{static MODEL_CLASS_MAPPINGS=[h_]}class jh extends Yn{static MODEL_CLASS_MAPPINGS=[Ah]}class Bh extends Yn{static MODEL_CLASS_MAPPINGS=[Oh]}class Py extends Yn{static MODEL_CLASS_MAPPINGS=[$h]}class ky extends Yn{static MODEL_CLASS_MAPPINGS=[Dh]}class sd extends Yn{static MODEL_CLASS_MAPPINGS=[id]}class Ay extends Yn{static MODEL_CLASS_MAPPINGS=[Ih]}class S_ extends Yn{static MODEL_CLASS_MAPPINGS=[Th]}class ar extends Yn{static MODEL_CLASS_MAPPINGS=[Eh]}class Nh extends $e{constructor({logits:z,past_key_values:he,encoder_outputs:Ae,decoder_attentions:tt=null,cross_attentions:et=null}){super(),this.logits=z,this.past_key_values=he,this.encoder_outputs=Ae,this.decoder_attentions=tt,this.cross_attentions=et}}class Cn extends $e{constructor({logits:z,...he}){super(),this.logits=z;const Ae=Object.values(he);Ae.length>0&&(this.attentions=Ae)}}class Xp extends $e{constructor({logits:z,embeddings:he}){super(),this.logits=z,this.embeddings=he}}class Ra extends $e{constructor({logits:z}){super(),this.logits=z}}class La extends $e{constructor({logits:z}){super(),this.logits=z}}class za extends $e{constructor({start_logits:z,end_logits:he}){super(),this.start_logits=z,this.end_logits=he}}class zo extends $e{constructor({logits:z}){super(),this.logits=z}}class Oy extends $e{constructor({logits:z,past_key_values:he}){super(),this.logits=z,this.past_key_values=he}}class Uh extends $e{constructor({alphas:z}){super(),this.alphas=z}}class C_ extends $e{constructor({waveform:z,spectrogram:he}){super(),this.waveform=z,this.spectrogram=he}}}),"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":((e,t,n)=>{n.r(t),n.d(t,{ASTFeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var o=n("./src/utils/audio.js");class s extends r.FeatureExtractor{constructor(u){super(u);const d=this.config.sampling_rate,p=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(d/2),d,null,"kaldi",!0);this.mel_filters=p,this.window=(0,o.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(u,d){return(0,o.spectrogram)(u,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:d,transpose:!0})}async _call(u){(0,r.validate_audio_inputs)(u,"ASTFeatureExtractor");const d=await this._extract_fbank_features(u,this.config.max_length);if(this.config.do_normalize){const p=this.std*2,g=d.data;for(let h=0;h<g.length;++h)g[h]=(g[h]-this.mean)/p}return{input_values:d.unsqueeze_(0)}}}}),"./src/models/auto/feature_extraction_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoFeatureExtractor:()=>l});var r=n("./src/utils/constants.js"),o=n("./src/utils/hub.js");n("./src/base/feature_extraction_utils.js");var s=n("./src/models/feature_extractors.js");class l{static async from_pretrained(d,p={}){const g=await(0,o.getModelJSON)(d,r.FEATURE_EXTRACTOR_NAME,!0,p),h=g.feature_extractor_type,m=s[h];if(!m)throw new Error(`Unknown feature_extractor_type: '${h}'. Please report this at ${r.GITHUB_ISSUE_URL}.`);return new m(g)}}}),"./src/models/auto/image_processing_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoImageProcessor:()=>u});var r=n("./src/utils/constants.js"),o=n("./src/utils/hub.js"),s=n("./src/base/image_processors_utils.js"),l=n("./src/models/image_processors.js");class u{static async from_pretrained(p,g={}){const h=await(0,o.getModelJSON)(p,r.IMAGE_PROCESSOR_NAME,!0,g),m=h.image_processor_type??h.feature_extractor_type;let x=l[m?.replace(/Fast$/,"")];return x||(m!==void 0&&console.warn(`Image processor type '${m}' not found, assuming base ImageProcessor. Please report this at ${r.GITHUB_ISSUE_URL}.`),x=s.ImageProcessor),new x(h)}}}),"./src/models/auto/processing_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoProcessor:()=>p});var r=n("./src/utils/constants.js"),o=n("./src/utils/hub.js"),s=n("./src/base/processing_utils.js"),l=n("./src/models/processors.js"),u=n("./src/models/image_processors.js"),d=n("./src/models/feature_extractors.js");class p{static async from_pretrained(h,m={}){const x=await(0,o.getModelJSON)(h,r.IMAGE_PROCESSOR_NAME,!0,m),{image_processor_type:_,feature_extractor_type:b,processor_class:I}=x;if(I&&l[I])return l[I].from_pretrained(h,m);if(!_&&!b)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const T={};if(_){const D=u[_.replace(/Fast$/,"")];if(!D)throw new Error(`Unknown image_processor_type: '${_}'.`);T.image_processor=new D(x)}if(b){const D=u[b];if(D)T.image_processor=new D(x);else{const E=d[b];if(!E)throw new Error(`Unknown feature_extractor_type: '${b}'.`);T.feature_extractor=new E(x)}}const S={};return new s.Processor(S,T,null)}}}),"./src/models/beit/image_processing_beit.js":((e,t,n)=>{n.r(t),n.d(t,{BeitFeatureExtractor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/bit/image_processing_bit.js":((e,t,n)=>{n.r(t),n.d(t,{BitImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/chinese_clip/image_processing_chinese_clip.js":((e,t,n)=>{n.r(t),n.d(t,{ChineseCLIPFeatureExtractor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/clap/feature_extraction_clap.js":((e,t,n)=>{n.r(t),n.d(t,{ClapFeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var o=n("./src/utils/audio.js");class s extends r.FeatureExtractor{constructor(u){super(u),this.mel_filters=(0,o.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,o.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,o.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(u,d,p,g){let h;const m=u.length-d;if(m>0)if(p==="rand_trunc"){const x=Math.floor(Math.random()*(m+1));u=u.subarray(x,x+d),h=await this._extract_fbank_features(u,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${p}" not implemented`);else{if(m<0){let x=new Float64Array(d);if(x.set(u),g==="repeat")for(let _=u.length;_<d;_+=u.length)x.set(u.subarray(0,Math.min(u.length,d-_)),_);else if(g==="repeatpad")for(let _=u.length;_<-m;_+=u.length)x.set(u,_);u=x}if(p==="fusion")throw new Error(`Truncation strategy "${p}" not implemented`);h=await this._extract_fbank_features(u,this.mel_filters_slaney,this.config.nb_max_samples)}return h.unsqueeze_(0)}async _extract_fbank_features(u,d,p=null){return(0,o.spectrogram)(u,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:d,log_mel:"dB",max_num_frames:p,do_pad:!1,transpose:!0})}async _call(u,{max_length:d=null}={}){return(0,r.validate_audio_inputs)(u,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(u,d??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}}),"./src/models/clip/image_processing_clip.js":((e,t,n)=>{n.r(t),n.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/convnext/image_processing_convnext.js":((e,t,n)=>{n.r(t),n.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{constructor(u){super(u),this.crop_pct=this.config.crop_pct??224/256}async resize(u){const d=this.size?.shortest_edge;if(d===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(d<384){const p=Math.floor(d/this.crop_pct),[g,h]=this.get_resize_output_image_size(u,{shortest_edge:p});u=await u.resize(g,h,{resample:this.resample}),u=await u.center_crop(d,d)}else u=await u.resize(d,d,{resample:this.resample});return u}}class s extends o{}}),"./src/models/dac/feature_extraction_dac.js":((e,t,n)=>{n.r(t),n.d(t,{DacFeatureExtractor:()=>o});var r=n("./src/models/encodec/feature_extraction_encodec.js");class o extends r.EncodecFeatureExtractor{}}),"./src/models/deit/image_processing_deit.js":((e,t,n)=>{n.r(t),n.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/detr/image_processing_detr.js":((e,t,n)=>{n.r(t),n.d(t,{DetrFeatureExtractor:()=>l,DetrImageProcessor:()=>s});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");class s extends r.ImageProcessor{async _call(d){const p=await super._call(d),g=[p.pixel_values.dims[0],64,64],h=(0,o.full)(g,1n);return{...p,pixel_mask:h}}post_process_object_detection(...d){return(0,r.post_process_object_detection)(...d)}post_process_panoptic_segmentation(...d){return(0,r.post_process_panoptic_segmentation)(...d)}post_process_instance_segmentation(...d){return(0,r.post_process_instance_segmentation)(...d)}}class l extends s{}}),"./src/models/dinov3_vit/image_processing_dinov3_vit.js":((e,t,n)=>{n.r(t),n.d(t,{DINOv3ViTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/donut/image_processing_donut.js":((e,t,n)=>{n.r(t),n.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{pad_image(u,d,p,g={}){const[h,m,x]=d;let _=this.image_mean;Array.isArray(this.image_mean)||(_=new Array(x).fill(_));let b=this.image_std;Array.isArray(b)||(b=new Array(x).fill(_));const I=_.map((T,S)=>-T/b[S]);return super.pad_image(u,d,p,{center:!0,constant_values:I,...g})}}class s extends o{}}),"./src/models/dpt/image_processing_dpt.js":((e,t,n)=>{n.r(t),n.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/efficientnet/image_processing_efficientnet.js":((e,t,n)=>{n.r(t),n.d(t,{EfficientNetImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{constructor(l){super(l),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(u=>u*u))}}}),"./src/models/encodec/feature_extraction_encodec.js":((e,t,n)=>{n.r(t),n.d(t,{EncodecFeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js");class s extends r.FeatureExtractor{async _call(u){(0,r.validate_audio_inputs)(u,"EncodecFeatureExtractor"),u instanceof Float64Array&&(u=new Float32Array(u));const d=this.config.feature_size;if(u.length%d!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${d}).`);const p=[1,d,u.length/d];return{input_values:new o.Tensor("float32",u,p)}}}}),"./src/models/feature_extractors.js":((e,t,n)=>{n.r(t),n.d(t,{ASTFeatureExtractor:()=>r.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>l.DacFeatureExtractor,EncodecFeatureExtractor:()=>o.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>u.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>T.ImageProcessor,MoonshineFeatureExtractor:()=>d.MoonshineFeatureExtractor,ParakeetFeatureExtractor:()=>p.ParakeetFeatureExtractor,PyAnnoteFeatureExtractor:()=>g.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>h.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>m.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>x.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>_.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>b.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>I.WhisperFeatureExtractor});var r=n("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),o=n("./src/models/encodec/feature_extraction_encodec.js"),s=n("./src/models/clap/feature_extraction_clap.js"),l=n("./src/models/dac/feature_extraction_dac.js"),u=n("./src/models/gemma3n/feature_extraction_gemma3n.js"),d=n("./src/models/moonshine/feature_extraction_moonshine.js"),p=n("./src/models/parakeet/feature_extraction_parakeet.js"),g=n("./src/models/pyannote/feature_extraction_pyannote.js"),h=n("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),m=n("./src/models/snac/feature_extraction_snac.js"),x=n("./src/models/speecht5/feature_extraction_speecht5.js"),_=n("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),b=n("./src/models/wespeaker/feature_extraction_wespeaker.js"),I=n("./src/models/whisper/feature_extraction_whisper.js"),T=n("./src/base/image_processors_utils.js")}),"./src/models/florence2/processing_florence2.js":((e,t,n)=>{n.r(t),n.d(t,{Florence2Processor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");class l extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;constructor(d,p,g){super(d,p,g);const{tasks_answer_post_processing_type:h,task_prompts_without_inputs:m,task_prompts_with_input:x}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(h??{})),this.task_prompts_without_inputs=new Map(Object.entries(m??{})),this.task_prompts_with_input=new Map(Object.entries(x??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(d){typeof d=="string"&&(d=[d]);const p=[];for(const g of d)if(this.task_prompts_without_inputs.has(g))p.push(this.task_prompts_without_inputs.get(g));else{for(const[h,m]of this.task_prompts_with_input)if(g.includes(h)){p.push(m.replaceAll("{input}",g).replaceAll(h,""));break}p.length!==d.length&&p.push(g)}return p}post_process_generation(d,p,g){const h=this.tasks_answer_post_processing_type.get(p)??"pure_text";d=d.replaceAll("<s>","").replaceAll("</s>","");let m;switch(h){case"pure_text":m=d;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const x=h==="ocr"?"quad_boxes":"bboxes",_=d.matchAll(this.regexes[x]),b=[],I=[];for(const[T,S,...D]of _)b.push(S?S.trim():b.at(-1)??""),I.push(D.map((E,C)=>(Number(E)+.5)/this.size_per_bin*g[C%2]));m={labels:b,[x]:I};break;default:throw new Error(`Task "${p}" (of type "${h}") not yet implemented.`)}return{[p]:m}}async _call(d,p=null,g={}){if(!d&&!p)throw new Error("Either text or images must be provided");const h=await this.image_processor(d,g),m=p?this.tokenizer(this.construct_prompts(p),g):{};return{...h,...m}}}}),"./src/models/gemma3n/feature_extraction_gemma3n.js":((e,t,n)=>{n.r(t),n.d(t,{Gemma3nAudioFeatureExtractor:()=>l});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/audio.js");class l extends r.FeatureExtractor{constructor(d){super(d);const{fft_length:p,feature_size:g,min_frequency:h,max_frequency:m,sampling_rate:x,frame_length:_}=this.config,b=(0,s.mel_filter_bank)(Math.floor(1+p/2),g,h,m,x,null,"htk",!1);this.mel_filters=b,this.window=(0,s.window_function)(_,"hann")}async _extract_fbank_features(d,p){return(0,s.spectrogram)(d,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(d,{max_length:p=48e4,truncation:g=!0,padding:h=!0,pad_to_multiple_of:m=128}={}){if((0,r.validate_audio_inputs)(d,"Gemma3nAudioFeatureExtractor"),g&&d.length>p&&(d=d.slice(0,p)),h&&d.length%m!==0){const b=m-d.length%m,I=new Float64Array(d.length+b);I.set(d),this.config.padding_value!==0&&I.fill(this.config.padding_value,d.length),d=I}const x=await this._extract_fbank_features(d,this.config.max_length),_=(0,o.full)([1,x.dims[0]],!0);return{input_features:x.unsqueeze_(0),input_features_mask:_}}}}),"./src/models/gemma3n/processing_gemma3n.js":((e,t,n)=>{n.r(t),n.d(t,{Gemma3nProcessor:()=>u});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/models/auto/feature_extraction_auto.js"),l=n("./src/tokenizers.js");n("./src/utils/image.js"),n("./src/utils/audio.js");class u extends r.Processor{static image_processor_class=o.AutoImageProcessor;static feature_extractor_class=s.AutoFeatureExtractor;static tokenizer_class=l.AutoTokenizer;static uses_processor_config=!0;static uses_chat_template_file=!0;constructor(p,g,h){super(p,g,h),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:m,boa_token:x,audio_token:_,eoa_token:b,image_token_id:I,boi_token:T,image_token:S,eoi_token:D}=this.tokenizer.config;this.audio_token_id=m,this.boa_token=x,this.audio_token=_;const E=_.repeat(this.audio_seq_length);this.full_audio_sequence=`

${x}${E}${b}

`,this.image_token_id=I,this.boi_token=T,this.image_token=S;const C=S.repeat(this.image_seq_length);this.full_image_sequence=`

${T}${C}${D}

`}async _call(p,g=null,h=null,m={}){typeof p=="string"&&(p=[p]);let x;h&&(x=await this.feature_extractor(h,m),p=p.map(I=>I.replaceAll(this.audio_token,this.full_audio_sequence)));let _;return g&&(_=await this.image_processor(g,m),p=p.map(I=>I.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(p,m),..._,...x}}}}),"./src/models/glpn/image_processing_glpn.js":((e,t,n)=>{n.r(t),n.d(t,{GLPNFeatureExtractor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/grounding_dino/image_processing_grounding_dino.js":((e,t,n)=>{n.r(t),n.d(t,{GroundingDinoImageProcessor:()=>s});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");class s extends r.ImageProcessor{async _call(u){const d=await super._call(u),p=d.pixel_values.dims,g=(0,o.ones)([p[0],p[2],p[3]]);return{...d,pixel_mask:g}}}}),"./src/models/grounding_dino/processing_grounding_dino.js":((e,t,n)=>{n.r(t),n.d(t,{GroundingDinoProcessor:()=>d});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js"),l=n("./src/base/image_processors_utils.js");function u(p,g){const m=p.dims.at(-1)-1,x=p.tolist();x.fill(!1,0,1),x.fill(!1,m);const _=g.tolist();return x.map((b,I)=>b?I:null).filter(b=>b!==null).map(b=>_[b])}class d extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;async _call(g,h,m={}){const x=g?await this.image_processor(g,m):{};return{...h?this.tokenizer(h,m):{},...x}}post_process_grounded_object_detection(g,h,{box_threshold:m=.25,text_threshold:x=.25,target_sizes:_=null}={}){const{logits:b,pred_boxes:I}=g,T=b.dims[0];if(_!==null&&_.length!==T)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const S=b.dims.at(1),D=b.sigmoid(),E=D.max(-1).tolist(),C=I.tolist().map(w=>w.map(R=>(0,l.center_to_corners_format)(R))),P=[];for(let w=0;w<T;++w){const R=_!==null?_[w]:null;R!==null&&(C[w]=C[w].map(q=>q.map((oe,ae)=>oe*R[(ae+1)%2])));const U=E[w],N=[],ie=[],ee=[];for(let q=0;q<S;++q){const oe=U[q];if(oe<=m)continue;const ae=C[w][q],X=D[w][q];N.push(oe),ee.push(ae);const se=u(X.gt(x),h[w]);ie.push(se)}P.push({scores:N,boxes:ee,labels:this.batch_decode(ie)})}return P}}}),"./src/models/idefics3/image_processing_idefics3.js":((e,t,n)=>{n.r(t),n.d(t,{Idefics3ImageProcessor:()=>s});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");class s extends r.ImageProcessor{constructor(u){super(u),this.do_image_splitting=u.do_image_splitting??!0,this.max_image_size=u.max_image_size}get_resize_for_vision_encoder(u,d){let[p,g]=u.dims.slice(-2);const h=g/p;return g>=p?(g=Math.ceil(g/d)*d,p=Math.floor(g/h),p=Math.ceil(p/d)*d):(p=Math.ceil(p/d)*d,g=Math.floor(p*h),g=Math.ceil(g/d)*d),{height:p,width:g}}async _call(u,{do_image_splitting:d=null,return_row_col_info:p=!1}={}){let g;if(!Array.isArray(u))g=[[u]];else{if(u.length===0||!u[0])throw new Error("No images provided.");Array.isArray(u[0])?g=u:g=[u]}let h=[],m=[],x=[];const _=[],b=[];for(const w of g){let R=await Promise.all(w.map(ie=>this.preprocess(ie)));_.push(...R.map(ie=>ie.original_size)),b.push(...R.map(ie=>ie.reshaped_input_size)),R.forEach(ie=>ie.pixel_values.unsqueeze_(0));const{longest_edge:U}=this.max_image_size;let N;if(d??this.do_image_splitting){let ie=new Array(R.length),ee=new Array(R.length);N=await Promise.all(R.map(async(q,oe)=>{const ae=this.get_resize_for_vision_encoder(q.pixel_values,U),X=await(0,o.interpolate_4d)(q.pixel_values,{size:[ae.height,ae.width]}),{frames:se,num_splits_h:le,num_splits_w:be}=await this.split_image(X,this.max_image_size);return ie[oe]=le,ee[oe]=be,(0,o.cat)(se,0)})),m.push(ie),x.push(ee)}else{const ie=[U,U];N=await Promise.all(R.map(ee=>(0,o.interpolate_4d)(ee.pixel_values,{size:ie}))),m.push(new Array(R.length).fill(0)),x.push(new Array(R.length).fill(0))}h.push((0,o.cat)(N,0))}const I=h.length,[T,S,D,E]=h[0].dims;let C,P;if(I===1)C=h[0].unsqueeze_(0),P=(0,o.full)([I,T,D,E],!0);else{const w=Math.max(...h.map(N=>N.dims.at(0)));P=(0,o.full)([I,w,D,E],!0);const R=P.data,U=w*D*E;for(let N=0;N<I;++N){const ie=h[N].dims[0];if(ie<w){h[N]=(0,o.cat)([h[N],(0,o.full)([w-ie,S,D,E],0)],0);const ee=N*U+ie*D*E,q=(N+1)*U;R.fill(!1,ee,q)}}C=(0,o.stack)(h,0)}return{pixel_values:C,pixel_attention_mask:P,original_sizes:_,reshaped_input_sizes:b,...p?{rows:m,cols:x}:{}}}async split_image(u,{longest_edge:d}){const p=d,g=d,h=[],[m,x]=u.dims.slice(-2);let _=0,b=0;if(m>p||x>g){_=Math.ceil(m/p),b=Math.ceil(x/g);const I=Math.ceil(m/_),T=Math.ceil(x/b);for(let E=0;E<_;++E)for(let C=0;C<b;++C){let P,w,R,U;E===_-1?(w=m-I,U=m):(w=E*I,U=(E+1)*I),C===b-1?(P=x-T,R=x):(P=C*T,R=(C+1)*T);const N=[w,P],ie=[U,R],ee=await(0,o.slice)(u,N,ie,[2,3]);h.push(ee)}const S=p,D=g;(m!==S||x!==D)&&(u=await(0,o.interpolate_4d)(u,{size:[S,D]}))}return h.push(u),{frames:h,num_splits_h:_,num_splits_w:b}}}}),"./src/models/idefics3/processing_idefics3.js":((e,t,n)=>{n.r(t),n.d(t,{Idefics3Processor:()=>g});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");n("./src/utils/image.js");var l=n("./src/utils/core.js");function u(h,m,x,_,b,I){let T="";for(let S=0;S<m;++S){for(let D=0;D<x;++D)T+=_+`<row_${S+1}_col_${D+1}>`+b.repeat(h);T+=`
`}return T+=`
${_}${I}`+b.repeat(h)+`${_}`,T}function d(h,m,x,_){return`${m}${_}`+x.repeat(h)+`${m}`}function p(h,m,x,_,b,I){return h===0&&m===0?d(x,_,b,I):u(x,h,m,_,b,I)}class g extends r.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;fake_image_token="<fake_token_around_image>";image_token="<image>";global_img_token="<global-img>";async _call(m,x=null,_={}){_.return_row_col_info??=!0;let b;x&&(b=await this.image_processor(x,_)),Array.isArray(m)||(m=[m]);const I=b.rows??[new Array(m.length).fill(0)],T=b.cols??[new Array(m.length).fill(0)],S=this.config.image_seq_len,D=[],E=[];for(let P=0;P<m.length;++P){const w=m[P],R=I[P],U=T[P];D.push((0,l.count)(w,this.image_token));const N=R.map((q,oe)=>p(q,U[oe],S,this.fake_image_token,this.image_token,this.global_img_token)),ie=w.split(this.image_token);if(ie.length===0)throw new Error("The image token should be present in the text.");let ee=ie[0];for(let q=0;q<N.length;++q)ee+=N[q]+ie[q+1];E.push(ee)}return{...this.tokenizer(E),...b}}}}),"./src/models/image_processors.js":((e,t,n)=>{n.r(t),n.d(t,{BeitFeatureExtractor:()=>r.BeitFeatureExtractor,BitImageProcessor:()=>o.BitImageProcessor,CLIPFeatureExtractor:()=>l.CLIPFeatureExtractor,CLIPImageProcessor:()=>l.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>u.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>u.ConvNextImageProcessor,DINOv3ViTImageProcessor:()=>g.DINOv3ViTImageProcessor,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTImageProcessor:()=>m.DPTImageProcessor,DeiTFeatureExtractor:()=>d.DeiTFeatureExtractor,DeiTImageProcessor:()=>d.DeiTImageProcessor,DetrFeatureExtractor:()=>p.DetrFeatureExtractor,DetrImageProcessor:()=>p.DetrImageProcessor,DonutFeatureExtractor:()=>h.DonutFeatureExtractor,DonutImageProcessor:()=>h.DonutImageProcessor,EfficientNetImageProcessor:()=>x.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>_.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>b.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>I.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>S.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>D.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>E.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>C.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>C.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>P.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>P.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>w.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>w.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>R.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>R.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>U.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>U.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>N.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>N.MobileViTImageProcessor,NougatImageProcessor:()=>ie.NougatImageProcessor,OwlViTFeatureExtractor:()=>q.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>q.OwlViTImageProcessor,Owlv2ImageProcessor:()=>ee.Owlv2ImageProcessor,Phi3VImageProcessor:()=>oe.Phi3VImageProcessor,PixtralImageProcessor:()=>ae.PixtralImageProcessor,PvtImageProcessor:()=>X.PvtImageProcessor,Qwen2VLImageProcessor:()=>se.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>le.RTDetrImageProcessor,Sam2ImageProcessor:()=>Ee.Sam2ImageProcessor,Sam3ImageProcessor:()=>Y.Sam3ImageProcessor,SamImageProcessor:()=>be.SamImageProcessor,SegformerFeatureExtractor:()=>te.SegformerFeatureExtractor,SegformerImageProcessor:()=>te.SegformerImageProcessor,SiglipImageProcessor:()=>J.SiglipImageProcessor,SmolVLMImageProcessor:()=>H.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>_e.Swin2SRImageProcessor,VLMImageProcessor:()=>T.VLMImageProcessor,ViTFeatureExtractor:()=>Te.ViTFeatureExtractor,ViTImageProcessor:()=>Te.ViTImageProcessor,VitMatteImageProcessor:()=>Re.VitMatteImageProcessor,VitPoseImageProcessor:()=>We.VitPoseImageProcessor,YolosFeatureExtractor:()=>at.YolosFeatureExtractor,YolosImageProcessor:()=>at.YolosImageProcessor});var r=n("./src/models/beit/image_processing_beit.js"),o=n("./src/models/bit/image_processing_bit.js"),s=n("./src/models/chinese_clip/image_processing_chinese_clip.js"),l=n("./src/models/clip/image_processing_clip.js"),u=n("./src/models/convnext/image_processing_convnext.js"),d=n("./src/models/deit/image_processing_deit.js"),p=n("./src/models/detr/image_processing_detr.js"),g=n("./src/models/dinov3_vit/image_processing_dinov3_vit.js"),h=n("./src/models/donut/image_processing_donut.js"),m=n("./src/models/dpt/image_processing_dpt.js"),x=n("./src/models/efficientnet/image_processing_efficientnet.js"),_=n("./src/models/glpn/image_processing_glpn.js"),b=n("./src/models/grounding_dino/image_processing_grounding_dino.js"),I=n("./src/models/idefics3/image_processing_idefics3.js"),T=n("./src/models/janus/image_processing_janus.js"),S=n("./src/models/jina_clip/image_processing_jina_clip.js"),D=n("./src/models/llava_onevision/image_processing_llava_onevision.js"),E=n("./src/models/mask2former/image_processing_mask2former.js"),C=n("./src/models/maskformer/image_processing_maskformer.js"),P=n("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),w=n("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),R=n("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),U=n("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),N=n("./src/models/mobilevit/image_processing_mobilevit.js"),ie=n("./src/models/nougat/image_processing_nougat.js"),ee=n("./src/models/owlv2/image_processing_owlv2.js"),q=n("./src/models/owlvit/image_processing_owlvit.js"),oe=n("./src/models/phi3_v/image_processing_phi3_v.js"),ae=n("./src/models/pixtral/image_processing_pixtral.js"),X=n("./src/models/pvt/image_processing_pvt.js"),se=n("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),le=n("./src/models/rt_detr/image_processing_rt_detr.js"),be=n("./src/models/sam/image_processing_sam.js"),Ee=n("./src/models/sam2/image_processing_sam2.js"),Y=n("./src/models/sam3/image_processing_sam3.js"),te=n("./src/models/segformer/image_processing_segformer.js"),J=n("./src/models/siglip/image_processing_siglip.js"),H=n("./src/models/smolvlm/image_processing_smolvlm.js"),_e=n("./src/models/swin2sr/image_processing_swin2sr.js"),Te=n("./src/models/vit/image_processing_vit.js"),Re=n("./src/models/vitmatte/image_processing_vitmatte.js"),We=n("./src/models/vitpose/image_processing_vitpose.js"),at=n("./src/models/yolos/image_processing_yolos.js")}),"./src/models/janus/image_processing_janus.js":((e,t,n)=>{n.r(t),n.d(t,{VLMImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{constructor(l){super({do_pad:!0,pad_size:{width:l.image_size,height:l.image_size},...l}),this.constant_values=this.config.background_color.map(u=>u*this.rescale_factor)}pad_image(l,u,d,p){return super.pad_image(l,u,d,{constant_values:this.constant_values,center:!0,...p})}}}),"./src/models/janus/processing_janus.js":((e,t,n)=>{n.r(t),n.d(t,{VLChatProcessor:()=>p});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js"),l=n("./src/utils/core.js"),u=n("./src/utils/tensor.js"),d=n("./src/utils/image.js");class p extends r.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;constructor(h,m,x){super(h,m,x),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(h,{images:m=null,chat_template:x="default"}={}){m?Array.isArray(m)||(m=[m]):m=await Promise.all(h.filter(N=>N.images).flatMap(N=>N.images).map(N=>d.RawImage.read(N)));const _=this.tokenizer,b=_.apply_chat_template(h,{tokenize:!1,add_generation_prompt:!0,chat_template:x}),I=N=>_.encode(N,{add_special_tokens:!1}),T=b.split(this.image_tag),S=T.length-1;if(m.length!==S)throw new Error(`Number of images provided (${m.length}) does not match number of "${this.image_tag}" image tags (${S})`);const[D,E,C]=_.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let P=I(T[0]),w=new Array(P.length).fill(!1);for(let N=1;N<T.length;++N){const ie=new Array(this.num_image_tokens).fill(D),ee=I(T[N]);P=(0,l.mergeArrays)(P,[E],ie,[C],ee);const q=new Array(this.num_image_tokens).fill(!0);w=(0,l.mergeArrays)(w,[!1],q,[!1],new Array(ee.length).fill(!1))}const R=[1,P.length],U={input_ids:new u.Tensor("int64",P,R),attention_mask:new u.Tensor("int64",new Array(P.length).fill(1),R),images_seq_mask:new u.Tensor("bool",w,R),images_emb_mask:new u.Tensor("bool",new Array(S*this.num_image_tokens).fill(!0),[1,S,this.num_image_tokens])};if(m&&m.length>0){const N=await this.image_processor(m);return N.pixel_values.unsqueeze_(0),{...U,...N}}return U}}}),"./src/models/jina_clip/image_processing_jina_clip.js":((e,t,n)=>{n.r(t),n.d(t,{JinaCLIPImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{constructor(l){const{resize_mode:u,fill_color:d,interpolation:p,size:g,...h}=l,m=u==="squash"?{width:g,height:g}:u==="shortest"?{shortest_edge:g}:{longest_edge:g},x=p==="bicubic"?3:2;super({...h,size:m,resample:x,do_center_crop:!0,crop_size:g,do_normalize:!0})}}}),"./src/models/jina_clip/processing_jina_clip.js":((e,t,n)=>{n.r(t),n.d(t,{JinaCLIPProcessor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");class l extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;async _call(d=null,p=null,g={}){if(!d&&!p)throw new Error("Either text or images must be provided");const h=d?this.tokenizer(d,g):{},m=p?await this.image_processor(p,g):{};return{...h,...m}}}}),"./src/models/llava/processing_llava.js":((e,t,n)=>{n.r(t),n.d(t,{LlavaProcessor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");class l extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;static uses_processor_config=!0;async _call(d,p=null,g={}){const h=await this.image_processor(d,g);if(p){const[x,_]=h.pixel_values.dims.slice(-2),{image_token:b,patch_size:I,num_additional_image_tokens:T}=this.config,S=Math.floor(x/I)*Math.floor(_/I)+T;p=structuredClone(p),Array.isArray(p)||(p=[p]);for(let D=0;D<p.length;++D)p[D]=p[D].replace(b,b.repeat(S))}const m=p?this.tokenizer(p,g):{};return{...h,...m}}}}),"./src/models/llava_onevision/image_processing_llava_onevision.js":((e,t,n)=>{n.r(t),n.d(t,{LlavaOnevisionImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/mask2former/image_processing_mask2former.js":((e,t,n)=>{n.r(t),n.d(t,{Mask2FormerImageProcessor:()=>o});var r=n("./src/models/maskformer/image_processing_maskformer.js");class o extends r.MaskFormerImageProcessor{}}),"./src/models/maskformer/image_processing_maskformer.js":((e,t,n)=>{n.r(t),n.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_panoptic_segmentation(...u){return(0,r.post_process_panoptic_segmentation)(...u)}post_process_instance_segmentation(...u){return(0,r.post_process_instance_segmentation)(...u)}}class s extends o{}}),"./src/models/mgp_str/processing_mgp_str.js":((e,t,n)=>{n.r(t),n.d(t,{MgpstrProcessor:()=>d});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js"),l=n("./src/utils/maths.js");const u={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class d extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(g,h){if(!u.hasOwnProperty(h))throw new Error(`Format ${h} is not supported.`);const[m,x]=u[h],_=this[m].bind(this),[b,I]=g.dims,T=[],S=[],D=g.tolist();for(let C=0;C<b;++C){const P=D[C],w=[],R=[];for(let N=1;N<I;++N){const[ie,ee]=(0,l.max)((0,l.softmax)(P[N]));if(R.push(ie),ee==x)break;w.push(ee)}const U=R.length>0?R.reduce((N,ie)=>N*ie,1):0;S.push(w),T.push(U)}return[_(S),T]}char_decode(g){return this.char_tokenizer.batch_decode(g).map(h=>h.replaceAll(" ",""))}bpe_decode(g){return this.bpe_tokenizer.batch_decode(g)}wp_decode(g){return this.wp_tokenizer.batch_decode(g).map(h=>h.replaceAll(" ",""))}batch_decode([g,h,m]){const[x,_]=this._decode_helper(g,"char"),[b,I]=this._decode_helper(h,"bpe"),[T,S]=this._decode_helper(m,"wp"),D=[],E=[];for(let C=0;C<x.length;++C){const[P,w]=(0,l.max)([_[C],I[C],S[C]]);D.push([x[C],b[C],T[C]][w]),E.push(P)}return{generated_text:D,scores:E,char_preds:x,bpe_preds:b,wp_preds:T}}static async from_pretrained(...g){const h=await super.from_pretrained(...g),m=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),x=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return h.components={image_processor:h.image_processor,char_tokenizer:h.tokenizer,bpe_tokenizer:m,wp_tokenizer:x},h}async _call(g,h=null){const m=await this.image_processor(g);return h&&(m.labels=this.tokenizer(h).input_ids),m}}}),"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/mobilevit/image_processing_mobilevit.js":((e,t,n)=>{n.r(t),n.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/moonshine/feature_extraction_moonshine.js":((e,t,n)=>{n.r(t),n.d(t,{MoonshineFeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js");class s extends r.FeatureExtractor{async _call(u){(0,r.validate_audio_inputs)(u,"MoonshineFeatureExtractor"),u instanceof Float64Array&&(u=new Float32Array(u));const d=[1,u.length];return{input_values:new o.Tensor("float32",u,d)}}}}),"./src/models/moonshine/processing_moonshine.js":((e,t,n)=>{n.r(t),n.d(t,{MoonshineProcessor:()=>l});var r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/tokenizers.js"),s=n("./src/base/processing_utils.js");class l extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/nougat/image_processing_nougat.js":((e,t,n)=>{n.r(t),n.d(t,{NougatImageProcessor:()=>o});var r=n("./src/models/donut/image_processing_donut.js");class o extends r.DonutImageProcessor{}}),"./src/models/owlv2/image_processing_owlv2.js":((e,t,n)=>{n.r(t),n.d(t,{Owlv2ImageProcessor:()=>o});var r=n("./src/models/owlvit/image_processing_owlvit.js");class o extends r.OwlViTImageProcessor{}}),"./src/models/owlvit/image_processing_owlvit.js":((e,t,n)=>{n.r(t),n.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_object_detection(...u){return(0,r.post_process_object_detection)(...u)}}class s extends o{}}),"./src/models/owlvit/processing_owlvit.js":((e,t,n)=>{n.r(t),n.d(t,{OwlViTProcessor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");class l extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor}}),"./src/models/paligemma/processing_paligemma.js":((e,t,n)=>{n.r(t),n.d(t,{PaliGemmaProcessor:()=>d});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");const l="<image>";function u(p,g,h,m,x){return`${m.repeat(h*x)}${g}${p}
`}class d extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;static uses_processor_config=!1;async _call(g,h=null,m={}){h||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),h=""),Array.isArray(g)||(g=[g]),Array.isArray(h)||(h=[h]);const x=this.tokenizer.bos_token,_=this.image_processor.config.image_seq_length;let b;h.some(S=>S.includes(l))?b=h.map(S=>{const D=S.replaceAll(l,l.repeat(_)),E=D.lastIndexOf(l),C=E===-1?0:E+l.length;return D.slice(0,C)+x+D.slice(C)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),b=h.map(S=>u(S,x,_,l,g.length)));const I=this.tokenizer(b,m);return{...await this.image_processor(g,m),...I}}}}),"./src/models/parakeet/feature_extraction_parakeet.js":((e,t,n)=>{n.r(t),n.d(t,{ParakeetFeatureExtractor:()=>u});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/audio.js");const l=1e-5;class u extends r.FeatureExtractor{constructor(p){super(p),this.config.mel_filters??=(0,s.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,this.config.sampling_rate/2,this.config.sampling_rate,"slaney","slaney");const g=(0,s.window_function)(this.config.win_length,"hann",{periodic:!1});this.window=new Float64Array(this.config.n_fft);const h=Math.floor((this.config.n_fft-this.config.win_length)/2);this.window.set(g,h)}async _extract_fbank_features(p){const g=this.config.preemphasis;p=new Float64Array(p);for(let m=p.length-1;m>=1;--m)p[m]-=g*p[m-1];return await(0,s.spectrogram)(p,this.window,this.window.length,this.config.hop_length,{fft_length:this.config.n_fft,power:2,mel_filters:this.config.mel_filters,log_mel:"log",mel_floor:-1/0,pad_mode:"constant",center:!0,transpose:!0,mel_offset:2**-24})}async _call(p){(0,r.validate_audio_inputs)(p,"ParakeetFeatureExtractor");const g=await this._extract_fbank_features(p),h=Math.floor((p.length+Math.floor(this.config.n_fft/2)*2-this.config.n_fft)/this.config.hop_length),m=g.data;m.fill(0,h*g.dims[1]);const[x,_]=g.dims,b=new Float64Array(_),I=new Float64Array(_);for(let D=0;D<h;++D){const E=D*_;for(let C=0;C<_;++C){const P=m[E+C];b[C]+=P,I[C]+=P*P}}const T=h>1?h-1:1;for(let D=0;D<_;++D){const E=b[D]/h,C=(I[D]-h*E*E)/T,w=1/(Math.sqrt(C)+l);for(let R=0;R<h;++R){const U=R*_+D;m[U]=(m[U]-E)*w}}const S=new BigInt64Array(x);return S.fill(1n,0,h),{input_features:g.unsqueeze_(0),attention_mask:new o.Tensor("int64",S,[1,x])}}}}),"./src/models/phi3_v/image_processing_phi3_v.js":((e,t,n)=>{n.r(t),n.d(t,{Phi3VImageProcessor:()=>g});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");const s=336,l=[2,3],{ceil:u,floor:d,sqrt:p}=Math;class g extends r.ImageProcessor{constructor(m){super({...m,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=m.num_crops}calc_num_image_tokens_from_image_size(m,x){const{num_img_tokens:_}=this.config;return d((d(x/s)*d(m/s)+1)*_+1+(d(x/s)+1)*p(_))}get_resize_output_image_size(m,x){const _=this._num_crops,[b,I]=m.size;let T=b/I,S=1;for(;S*Math.ceil(S/T)<=_;)S+=1;S-=1;const D=Math.floor(S*336),E=Math.floor(D/T);return[D,E]}pad_image(m,x,_,b={}){const[I,T]=x,S=s*u(I/s),D=s*u(T/s),E=[1,1,1].map((C,P)=>(C-this.image_mean[P])/this.image_std[P]);return super.pad_image(m,x,{width:D,height:S},{center:!0,constant_values:E,...b})}async _call(m,{num_crops:x=null}={}){if(this._num_crops=x??=this.config.num_crops,x<4||p(x)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(m)||(m=[m]);const _=m.length,b=await Promise.all(m.map(w=>this.preprocess(w))),I=b.map(w=>w.original_size),T=b.map(w=>w.reshaped_input_size),S=[];for(const{pixel_values:w}of b){w.unsqueeze_(0);const[R,U]=w.dims.slice(-2),N=await(0,o.interpolate_4d)(w,{size:[s,s],mode:"bicubic"});if(x>0){const ie=[],ee=p(x),q=d(U/ee),oe=d(R/ee);for(let X=0;X<ee;++X)for(let se=0;se<ee;++se){let le,be,Ee,Y;X===ee-1?(be=R-oe,Y=R):(be=X*oe,Y=(X+1)*oe),se===ee-1?(le=U-q,Ee=U):(le=se*q,Ee=(se+1)*q);const te=[be,le],J=[Y,Ee],H=await(0,o.slice)(w,te,J,l);ie.push(H)}const ae=await(0,o.interpolate_4d)((0,o.cat)(ie,0),{size:[s,s],mode:"bicubic"});S.push((0,o.cat)([N,ae],0))}else S.push(N)}const D=(0,o.stack)(S,0),E=T.map(w=>w.map(R=>s*u(R/s))),C=new o.Tensor("int64",E.flat(),[_,2]),P=E.map(([w,R])=>this.calc_num_image_tokens_from_image_size(R,w));return{pixel_values:D,original_sizes:I,reshaped_input_sizes:T,image_sizes:C,num_img_tokens:P}}}}),"./src/models/phi3_v/processing_phi3_v.js":((e,t,n)=>{n.r(t),n.d(t,{Phi3VProcessor:()=>d});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");n("./src/utils/image.js");const l="<|image|>",u=/<\|image_\d+\|>/g;class d extends r.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(g,h=null,{padding:m=!0,truncation:x=!0,num_crops:_=null}={}){Array.isArray(g)||(g=[g]);let b,I;if(h){I=await this.image_processor(h,{num_crops:_});const{num_img_tokens:T}=I,S=g.map((E,C)=>E.split(u).join(l.repeat(T[C])));b=this.tokenizer(S,{padding:m,truncation:x});const D=this.tokenizer.model.convert_tokens_to_ids([l])[0];b.input_ids.map_(E=>E==D?-E:E)}else b=this.tokenizer(g);return{...b,...I}}}}),"./src/models/pixtral/image_processing_pixtral.js":((e,t,n)=>{n.r(t),n.d(t,{PixtralImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{get_resize_output_image_size(l,u){const{longest_edge:d}=u;if(d===void 0)throw new Error("size must contain 'longest_edge'");const[p,g]=l.size,h=Math.max(p,g)/d;let m=p,x=g;h>1&&(m=Math.floor(p/h),x=Math.floor(g/h));const{patch_size:_,spatial_merge_size:b}=this.config;if(!b)throw new Error("config must contain 'spatial_merge_size'");const I=_*b,T=Math.floor((m-1)/I)+1,S=Math.floor((x-1)/I)+1;return[T*I,S*I]}}}),"./src/models/pixtral/processing_pixtral.js":((e,t,n)=>{n.r(t),n.d(t,{PixtralProcessor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");class l extends r.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;static uses_processor_config=!0;async _call(d,p=null,g={}){const h=await this.image_processor(d,g);if(p){const[x,_]=h.pixel_values.dims.slice(-2),{image_token:b,image_break_token:I,image_end_token:T,patch_size:S,spatial_merge_size:D}=this.config,E=S*D,C=Math.floor(x/E),P=Math.floor(_/E);p=structuredClone(p),Array.isArray(p)||(p=[p]);for(let w=0;w<p.length;++w){const R=b.repeat(P),U=R+I,N=R+T,ie=U.repeat(C-1)+N;p[w]=p[w].replace(b,ie)}}const m=p?this.tokenizer(p,g):{};return{...h,...m}}}}),"./src/models/processors.js":((e,t,n)=>{n.r(t),n.d(t,{Florence2Processor:()=>r.Florence2Processor,Gemma3nProcessor:()=>o.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>l.Idefics3Processor,JinaCLIPProcessor:()=>d.JinaCLIPProcessor,LlavaProcessor:()=>p.LlavaProcessor,MgpstrProcessor:()=>g.MgpstrProcessor,MoonshineProcessor:()=>h.MoonshineProcessor,OwlViTProcessor:()=>m.OwlViTProcessor,PaliGemmaProcessor:()=>x.PaliGemmaProcessor,Phi3VProcessor:()=>_.Phi3VProcessor,PixtralProcessor:()=>b.PixtralProcessor,PyAnnoteProcessor:()=>I.PyAnnoteProcessor,Qwen2VLProcessor:()=>T.Qwen2VLProcessor,Sam2Processor:()=>D.Sam2Processor,Sam2VideoProcessor:()=>D.Sam2VideoProcessor,SamProcessor:()=>S.SamProcessor,SmolVLMProcessor:()=>E.SmolVLMProcessor,SpeechT5Processor:()=>C.SpeechT5Processor,UltravoxProcessor:()=>P.UltravoxProcessor,VLChatProcessor:()=>u.VLChatProcessor,VoxtralProcessor:()=>w.VoxtralProcessor,Wav2Vec2Processor:()=>R.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>U.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>N.WhisperProcessor});var r=n("./src/models/florence2/processing_florence2.js"),o=n("./src/models/gemma3n/processing_gemma3n.js"),s=n("./src/models/grounding_dino/processing_grounding_dino.js"),l=n("./src/models/idefics3/processing_idefics3.js"),u=n("./src/models/janus/processing_janus.js"),d=n("./src/models/jina_clip/processing_jina_clip.js"),p=n("./src/models/llava/processing_llava.js"),g=n("./src/models/mgp_str/processing_mgp_str.js"),h=n("./src/models/moonshine/processing_moonshine.js"),m=n("./src/models/owlvit/processing_owlvit.js"),x=n("./src/models/paligemma/processing_paligemma.js"),_=n("./src/models/phi3_v/processing_phi3_v.js"),b=n("./src/models/pixtral/processing_pixtral.js"),I=n("./src/models/pyannote/processing_pyannote.js"),T=n("./src/models/qwen2_vl/processing_qwen2_vl.js"),S=n("./src/models/sam/processing_sam.js"),D=n("./src/models/sam2/processing_sam2.js"),E=n("./src/models/smolvlm/processing_smolvlm.js"),C=n("./src/models/speecht5/processing_speecht5.js"),P=n("./src/models/ultravox/processing_ultravox.js"),w=n("./src/models/voxtral/processing_voxtral.js"),R=n("./src/models/wav2vec2/processing_wav2vec2.js"),U=n("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),N=n("./src/models/whisper/processing_whisper.js")}),"./src/models/pvt/image_processing_pvt.js":((e,t,n)=>{n.r(t),n.d(t,{PvtImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/pyannote/feature_extraction_pyannote.js":((e,t,n)=>{n.r(t),n.d(t,{PyAnnoteFeatureExtractor:()=>l});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/maths.js");class l extends r.FeatureExtractor{async _call(d){(0,r.validate_audio_inputs)(d,"PyAnnoteFeatureExtractor"),d instanceof Float64Array&&(d=new Float32Array(d));const p=[1,1,d.length];return{input_values:new o.Tensor("float32",d,p)}}samples_to_frames(d){return(d-this.config.offset)/this.config.step}post_process_speaker_diarization(d,p){const g=p/this.samples_to_frames(p)/this.config.sampling_rate,h=[];for(const m of d.tolist()){const x=[];let _=-1;for(let b=0;b<m.length;++b){const I=(0,s.softmax)(m[b]),[T,S]=(0,s.max)(I),[D,E]=[b,b+1];S!==_?(_=S,x.push({id:S,start:D,end:E,score:T})):(x.at(-1).end=E,x.at(-1).score+=T)}h.push(x.map(({id:b,start:I,end:T,score:S})=>({id:b,start:I*g,end:T*g,confidence:S/(T-I)})))}return h}}}),"./src/models/pyannote/processing_pyannote.js":((e,t,n)=>{n.r(t),n.d(t,{PyAnnoteProcessor:()=>s});var r=n("./src/base/processing_utils.js"),o=n("./src/models/pyannote/feature_extraction_pyannote.js");class s extends r.Processor{static feature_extractor_class=o.PyAnnoteFeatureExtractor;async _call(u){return await this.feature_extractor(u)}post_process_speaker_diarization(...u){return this.feature_extractor.post_process_speaker_diarization(...u)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}}),"./src/models/qwen2_vl/image_processing_qwen2_vl.js":((e,t,n)=>{n.r(t),n.d(t,{Qwen2VLImageProcessor:()=>s});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");class s extends r.ImageProcessor{async _call(u,...d){const{pixel_values:p,original_sizes:g,reshaped_input_sizes:h}=await super._call(u,...d);let m=p;const{temporal_patch_size:x,merge_size:_,patch_size:b}=this.config;m.dims[0]===1&&(m=(0,o.cat)(Array.from({length:x},()=>m),0));const I=m.dims[0]/x,T=m.dims[1],S=Math.floor(m.dims[2]/b),D=Math.floor(m.dims[3]/b),E=m.view(I,x,T,Math.floor(S/_),_,b,Math.floor(D/_),_,b).permute(0,3,6,4,7,2,1,5,8).view(I*S*D,T*x*b*b),C=new o.Tensor("int64",[I,S,D],[1,3]);return{pixel_values:E,image_grid_thw:C,original_sizes:g,reshaped_input_sizes:h}}}}),"./src/models/qwen2_vl/processing_qwen2_vl.js":((e,t,n)=>{n.r(t),n.d(t,{Qwen2VLProcessor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js"),s=n("./src/tokenizers.js");n("./src/utils/image.js");class l extends r.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(d,p=null,...g){Array.isArray(d)||(d=[d]);let h,m;if(p&&(h=await this.image_processor(p),m=h.image_grid_thw),m){let _=this.image_processor.config.merge_size**2,b=0;const I=m.tolist();d=d.map(T=>{for(;T.includes("<|image_pad|>");){const S=Number(I[b++].reduce((D,E)=>D*E,1n));T=T.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(S/_)))}return T.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(d),...h}}}}),"./src/models/rt_detr/image_processing_rt_detr.js":((e,t,n)=>{n.r(t),n.d(t,{RTDetrImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_object_detection(...l){return(0,r.post_process_object_detection)(...l)}}}),"./src/models/sam/image_processing_sam.js":((e,t,n)=>{n.r(t),n.d(t,{SamImageProcessor:()=>l});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/core.js"),s=n("./src/utils/tensor.js");class l extends r.ImageProcessor{reshape_input_points(d,p,g,h=!1){d=structuredClone(d);let m=(0,o.calculateDimensions)(d);if(m.length===3)h||(m=[1,...m]),d=[d];else if(m.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let x=0;x<d.length;++x){const[_,b]=p[x],[I,T]=g[x],S=[T/b,I/_];for(let D=0;D<d[x].length;++D)for(let E=0;E<d[x][D].length;++E)for(let C=0;C<d[x][D][E].length;++C)d[x][D][E][C]*=S[C%2]}return new s.Tensor("float32",Float32Array.from(d.flat(1/0)),m)}add_input_labels(d,p){let g=(0,o.calculateDimensions)(d);if(g.length===2)g=[1,...g],d=[d];else if(g.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(g.some((h,m)=>h!==p.dims[m]))throw Error(`The first ${g.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",d.flat(1/0).map(BigInt),g)}async _call(d,{input_points:p=null,input_labels:g=null,input_boxes:h=null}={}){const m=await super._call(d);if(p&&(m.input_points=this.reshape_input_points(p,m.original_sizes,m.reshaped_input_sizes)),g){if(!m.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");m.input_labels=this.add_input_labels(g,m.input_points)}return h&&(m.input_boxes=this.reshape_input_points(h,m.original_sizes,m.reshaped_input_sizes,!0)),m}async post_process_masks(d,p,g,{mask_threshold:h=0,binarize:m=!0,pad_size:x=null}={}){const _=[];x=x??this.pad_size??this.size;const b=[x.height,x.width];for(let I=0;I<p.length;++I){const T=p[I],S=g[I];let D=await(0,s.interpolate_4d)(d[I],{mode:"bilinear",size:b});if(D=D.slice(null,null,[0,S[0]],[0,S[1]]),D=await(0,s.interpolate_4d)(D,{mode:"bilinear",size:T}),m){const E=D.data,C=new Uint8Array(E.length);for(let P=0;P<E.length;++P)E[P]>h&&(C[P]=1);D=new s.Tensor("bool",C,D.dims)}_.push(D)}return _}generate_crop_boxes(d,p,{crop_n_layers:g=0,overlap_ratio:h=512/1500,points_per_crop:m=32,crop_n_points_downscale_factor:x=1}={}){}}}),"./src/models/sam/processing_sam.js":((e,t,n)=>{n.r(t),n.d(t,{SamProcessor:()=>s});var r=n("./src/base/processing_utils.js"),o=n("./src/models/auto/image_processing_auto.js");class s extends r.Processor{static image_processor_class=o.AutoImageProcessor;async _call(...u){return await this.image_processor(...u)}post_process_masks(...u){return this.image_processor.post_process_masks(...u)}reshape_input_points(...u){return this.image_processor.reshape_input_points(...u)}}}),"./src/models/sam2/image_processing_sam2.js":((e,t,n)=>{n.r(t),n.d(t,{Sam2ImageProcessor:()=>r.SamImageProcessor});var r=n("./src/models/sam/image_processing_sam.js")}),"./src/models/sam2/processing_sam2.js":((e,t,n)=>{n.r(t),n.d(t,{Sam2Processor:()=>o,Sam2VideoProcessor:()=>s});var r=n("./src/models/sam/processing_sam.js");class o extends r.SamProcessor{}class s extends o{}}),"./src/models/sam3/image_processing_sam3.js":((e,t,n)=>{n.r(t),n.d(t,{Sam3ImageProcessor:()=>r.Sam2ImageProcessor});var r=n("./src/models/sam2/image_processing_sam2.js")}),"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":((e,t,n)=>{n.r(t),n.d(t,{SeamlessM4TFeatureExtractor:()=>l});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js"),s=n("./src/utils/audio.js");class l extends r.FeatureExtractor{constructor(d){super(d);const p=this.config.sampling_rate,g=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(p/2),p,null,"kaldi",!0);this.mel_filters=g,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(d,p){return d=d.map(g=>g*32768),(0,s.spectrogram)(d,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:p,transpose:!0})}async _call(d,{padding:p=!0,pad_to_multiple_of:g=2,do_normalize_per_mel_bins:h=!0,return_attention_mask:m=!0}={}){(0,r.validate_audio_inputs)(d,"SeamlessM4TFeatureExtractor");let x=await this._extract_fbank_features(d,this.config.max_length);if(h){const[C,P]=x.dims,w=x.data;for(let R=0;R<P;++R){let U=0;for(let q=0;q<C;++q)U+=w[q*P+R];const N=U/C;let ie=0;for(let q=0;q<C;++q)ie+=(w[q*P+R]-N)**2;ie/=C-1;const ee=Math.sqrt(ie+1e-7);for(let q=0;q<C;++q){const oe=q*P+R;w[oe]=(w[oe]-N)/ee}}}let _;if(p){const[C,P]=x.dims,w=x.data,R=C%g;if(R>0){const U=new Float32Array(P*(C+R));U.set(w),U.fill(this.config.padding_value,w.length);const N=C+R;x=new o.Tensor(x.type,U,[N,P]),m&&(_=new o.Tensor("int64",new BigInt64Array(N),[1,N]),_.data.fill(1n,0,C))}}const[b,I]=x.dims,T=this.config.stride;if(b%T!==0)throw new Error(`The number of frames (${b}) must be a multiple of the stride (${T}).`);const D=x.view(1,Math.floor(b/T),I*T),E={input_features:D};if(m){const C=D.dims[1],P=new BigInt64Array(C);if(_){const w=_.data;for(let R=1,U=0;R<b;R+=T,++U)P[U]=w[R]}else P.fill(1n);E.attention_mask=new o.Tensor("int64",P,[1,C])}return E}}}),"./src/models/segformer/image_processing_segformer.js":((e,t,n)=>{n.r(t),n.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_semantic_segmentation(...u){return(0,r.post_process_semantic_segmentation)(...u)}}class s extends o{}}),"./src/models/siglip/image_processing_siglip.js":((e,t,n)=>{n.r(t),n.d(t,{SiglipImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}}),"./src/models/smolvlm/image_processing_smolvlm.js":((e,t,n)=>{n.r(t),n.d(t,{SmolVLMImageProcessor:()=>r.Idefics3ImageProcessor});var r=n("./src/models/idefics3/image_processing_idefics3.js")}),"./src/models/smolvlm/processing_smolvlm.js":((e,t,n)=>{n.r(t),n.d(t,{SmolVLMProcessor:()=>r.Idefics3Processor});var r=n("./src/models/idefics3/processing_idefics3.js")}),"./src/models/snac/feature_extraction_snac.js":((e,t,n)=>{n.r(t),n.d(t,{SnacFeatureExtractor:()=>o});var r=n("./src/models/dac/feature_extraction_dac.js");class o extends r.DacFeatureExtractor{}}),"./src/models/speecht5/feature_extraction_speecht5.js":((e,t,n)=>{n.r(t),n.d(t,{SpeechT5FeatureExtractor:()=>o});var r=n("./src/base/feature_extraction_utils.js");class o extends r.FeatureExtractor{}}),"./src/models/speecht5/processing_speecht5.js":((e,t,n)=>{n.r(t),n.d(t,{SpeechT5Processor:()=>l});var r=n("./src/base/processing_utils.js"),o=n("./src/tokenizers.js"),s=n("./src/models/auto/feature_extraction_auto.js");class l extends r.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=s.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/swin2sr/image_processing_swin2sr.js":((e,t,n)=>{n.r(t),n.d(t,{Swin2SRImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{pad_image(l,u,d,p={}){const[g,h,m]=u;return super.pad_image(l,u,{width:h+(d-h%d)%d,height:g+(d-g%d)%d},{mode:"symmetric",center:!1,constant_values:-1,...p})}}}),"./src/models/ultravox/processing_ultravox.js":((e,t,n)=>{n.r(t),n.d(t,{UltravoxProcessor:()=>l});var r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/tokenizers.js"),s=n("./src/base/processing_utils.js");class l extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;static uses_processor_config=!0;async _call(d,p=null,g={}){if(Array.isArray(d))throw new Error("Batched inputs are not supported yet.");let h={};if(p){const x=p.length,{input_features:_}=await this.feature_extractor(p,{...g,max_length:x}),b=Math.round(x/this.config.encoder_ds_factor+1e-4),I=1+Math.ceil(b/this.config.stack_factor);h.audio_token_len=[I],h.audio_values=_;const T=this.config.audio_placeholder;if(!d.includes(T))throw new Error(`The input text does not contain the image token ${T}.`);d=d.replaceAll(T,T.repeat(I))}return{...this.tokenizer(d,{add_special_tokens:!1,...g}),...h}}}}),"./src/models/vit/image_processing_vit.js":((e,t,n)=>{n.r(t),n.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{}class s extends o{}}),"./src/models/vitmatte/image_processing_vitmatte.js":((e,t,n)=>{n.r(t),n.d(t,{VitMatteImageProcessor:()=>s});var r=n("./src/base/image_processors_utils.js"),o=n("./src/utils/tensor.js");class s extends r.ImageProcessor{async _call(u,d){Array.isArray(u)||(u=[u]),Array.isArray(d)||(d=[d]);const p=await Promise.all(u.map(m=>this.preprocess(m))),g=await Promise.all(d.map(m=>this.preprocess(m,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,o.stack)(p.map((m,x)=>(0,o.cat)([m.pixel_values,g[x].pixel_values],0)),0),original_sizes:p.map(m=>m.original_size),reshaped_input_sizes:p.map(m=>m.reshaped_input_size)}}}}),"./src/models/vitpose/image_processing_vitpose.js":((e,t,n)=>{n.r(t),n.d(t,{VitPoseImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_pose_estimation(l,u,{threshold:d=null}={}){const p=l.tolist(),[g,h,m,x]=l.dims,_=[];for(let b=0;b<g;++b){const I=p[b],T=u[b],S=[];for(let D=0;D<T.length;++D){const E=T[D],C=[],P=[],w=[],R=E.at(-2)/x,U=E.at(-1)/m;for(let N=0;N<I.length;++N){let[ie,ee]=[0,0],q=0,oe=-1/0;const ae=I[N];for(let se=0;se<ae.length;++se){const le=ae[se];for(let be=0;be<le.length;++be){const Ee=le[be];q+=Ee,oe=Math.max(oe,Ee),ie+=(be+.5)*Ee,ee+=se*Ee}}if(d!=null&&oe<d)continue;const X=[R*ie/q,U*ee/q];C.push(X),w.push(N),P.push(oe)}S.push({bbox:E,scores:P,labels:w,keypoints:C})}_.push(S)}return _}}}),"./src/models/voxtral/processing_voxtral.js":((e,t,n)=>{n.r(t),n.d(t,{VoxtralProcessor:()=>h});var r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/tokenizers.js"),s=n("./src/base/processing_utils.js"),l=n("./src/utils/tensor.js");const u="[AUDIO]",d="[BEGIN_AUDIO]",p=375;function g(m,x){const _=[];for(let b=0;b<m.length;b+=x)_.push(m.subarray(b,Math.min(b+x,m.length)));return _}class h extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;static uses_processor_config=!1;async _call(x,_=null,b={}){if(Array.isArray(x))throw new Error("Batched inputs are not supported yet.");const I={};if(_){if(!x.includes(u))throw new Error(`The input text does not contain the audio token ${u}.`);Array.isArray(_)||(_=[_]);const S=x.split(u),D=S.length-1;if(D!==_.length)throw new Error(`The number of audio inputs (${_.length}) does not match the number of audio tokens in the text (${D}).`);const E=this.feature_extractor.config.n_samples,C=_.map(N=>g(N,E)),P=C.map(N=>N.length),w=C.flat(),R=(await Promise.all(w.map(N=>this.feature_extractor(N,b)))).map(N=>N.input_features);I.audio_values=R.length>1?(0,l.cat)(R,0):R[0];let U=S[0];for(let N=0;N<P.length;++N){U+=d;for(let ie=0;ie<P[N];++ie)U+=u.repeat(p);U+=S[N+1]}x=U}return{...this.tokenizer(x,{add_special_tokens:!1,...b}),...I}}}}),"./src/models/wav2vec2/feature_extraction_wav2vec2.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2FeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js"),o=n("./src/utils/tensor.js");class s extends r.FeatureExtractor{_zero_mean_unit_var_norm(u){const p=u.reduce((h,m)=>h+m,0)/u.length,g=u.reduce((h,m)=>h+(m-p)**2,0)/u.length;return u.map(h=>(h-p)/Math.sqrt(g+1e-7))}async _call(u){(0,r.validate_audio_inputs)(u,"Wav2Vec2FeatureExtractor"),u instanceof Float64Array&&(u=new Float32Array(u));let d=u;this.config.do_normalize&&(d=this._zero_mean_unit_var_norm(d));const p=[1,d.length];return{input_values:new o.Tensor("float32",d,p),attention_mask:new o.Tensor("int64",new BigInt64Array(d.length).fill(1n),p)}}}}),"./src/models/wav2vec2/processing_wav2vec2.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2Processor:()=>l});var r=n("./src/tokenizers.js"),o=n("./src/models/auto/feature_extraction_auto.js"),s=n("./src/base/processing_utils.js");class l extends s.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2ProcessorWithLM:()=>l});var r=n("./src/tokenizers.js"),o=n("./src/models/auto/feature_extraction_auto.js"),s=n("./src/base/processing_utils.js");class l extends s.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/wespeaker/feature_extraction_wespeaker.js":((e,t,n)=>{n.r(t),n.d(t,{WeSpeakerFeatureExtractor:()=>s});var r=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var o=n("./src/utils/audio.js");class s extends r.FeatureExtractor{constructor(u){super(u);const d=this.config.sampling_rate,p=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(d/2),d,null,"kaldi",!0);this.mel_filters=p,this.window=(0,o.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(u){return u=u.map(d=>d*32768),(0,o.spectrogram)(u,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(u){(0,r.validate_audio_inputs)(u,"WeSpeakerFeatureExtractor");const d=(await this._extract_fbank_features(u)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const p=d.mean(1).data,g=d.data,[h,m,x]=d.dims;for(let _=0;_<h;++_){const b=_*m*x,I=_*x;for(let T=0;T<m;++T){const S=b+T*x;for(let D=0;D<x;++D)g[S+D]-=p[I+D]}}}return{input_features:d}}}}),"./src/models/whisper/common_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WHISPER_LANGUAGE_MAPPING:()=>o,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>l});const r=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],o=new Map(r),s=new Map([...r.map(([u,d])=>[d,u]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function l(u){u=u.toLowerCase();let d=s.get(u);if(d===void 0){const p=u.match(/^<\|([a-z]{2})\|>$/);if(p&&(u=p[1]),o.has(u))d=u;else{const h=u.length===2?o.keys():o.values();throw new Error(`Language "${u}" is not supported. Must be one of: ${JSON.stringify(Array.from(h))}`)}}return d}}),"./src/models/whisper/feature_extraction_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperFeatureExtractor:()=>l});var r=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var o=n("./src/utils/audio.js"),s=n("./src/utils/maths.js");class l extends r.FeatureExtractor{constructor(d){super(d),this.config.mel_filters??=(0,o.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=(0,o.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(d){const p=await(0,o.spectrogram)(d,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(d.length/this.config.hop_length),this.config.nb_max_frames)}),g=p.data,h=(0,s.max)(g)[0];for(let m=0;m<g.length;++m)g[m]=(Math.max(g[m],h-8)+4)/4;return p}async _call(d,{max_length:p=null}={}){(0,r.validate_audio_inputs)(d,"WhisperFeatureExtractor");let g;const h=p??this.config.n_samples;return d.length>h?(d.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),g=d.slice(0,h)):(g=new Float32Array(h),g.set(d)),{input_features:(await this._extract_fbank_features(g)).unsqueeze_(0)}}}}),"./src/models/whisper/generation_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperGenerationConfig:()=>o});var r=n("./src/generation/configuration_utils.js");class o extends r.GenerationConfig{return_timestamps=null;return_token_timestamps=null;num_frames=null;alignment_heads=null;task=null;language=null;no_timestamps_token_id=null;prompt_ids=null;is_multilingual=null;lang_to_id=null;task_to_id=null;max_initial_timestamp_index=1}}),"./src/models/whisper/processing_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperProcessor:()=>l});var r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/tokenizers.js"),s=n("./src/base/processing_utils.js");class l extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/yolos/image_processing_yolos.js":((e,t,n)=>{n.r(t),n.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>o});var r=n("./src/base/image_processors_utils.js");class o extends r.ImageProcessor{post_process_object_detection(...u){return(0,r.post_process_object_detection)(...u)}}class s extends o{}}),"./src/ops/registry.js":((e,t,n)=>{n.r(t),n.d(t,{TensorOpRegistry:()=>l});var r=n("./src/backends/onnx.js"),o=n("./src/utils/tensor.js");const s=async(u,d,p)=>{const g=await(0,r.createInferenceSession)(new Uint8Array(u),d);return(async h=>{const m=(0,r.isONNXProxy)(),x=Object.fromEntries(Object.entries(h).map(([b,I])=>[b,(m?I.clone():I).ort_tensor])),_=await(0,r.runInferenceSession)(g,x);return Array.isArray(p)?p.map(b=>new o.Tensor(_[b])):new o.Tensor(_[p])})};class l{static session_options={};static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=s([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=s([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=s([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=s([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=s([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=s([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=s([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=s([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}}),"./src/pipelines.js":((e,t,n)=>{n.r(t),n.d(t,{AudioClassificationPipeline:()=>ee,AutomaticSpeechRecognitionPipeline:()=>oe,BackgroundRemovalPipeline:()=>le,DepthEstimationPipeline:()=>_e,DocumentQuestionAnsweringPipeline:()=>te,FeatureExtractionPipeline:()=>N,FillMaskPipeline:()=>D,ImageClassificationPipeline:()=>X,ImageFeatureExtractionPipeline:()=>ie,ImageSegmentationPipeline:()=>se,ImageToImagePipeline:()=>H,ImageToTextPipeline:()=>ae,ObjectDetectionPipeline:()=>Ee,Pipeline:()=>b,QuestionAnsweringPipeline:()=>S,SummarizationPipeline:()=>C,Text2TextGenerationPipeline:()=>E,TextClassificationPipeline:()=>I,TextGenerationPipeline:()=>R,TextToAudioPipeline:()=>J,TokenClassificationPipeline:()=>T,TranslationPipeline:()=>P,ZeroShotAudioClassificationPipeline:()=>q,ZeroShotClassificationPipeline:()=>U,ZeroShotImageClassificationPipeline:()=>be,ZeroShotObjectDetectionPipeline:()=>Y,pipeline:()=>We});var r=n("./src/tokenizers.js"),o=n("./src/models.js"),s=n("./src/models/auto/processing_auto.js");n("./src/base/processing_utils.js");var l=n("./src/utils/generic.js"),u=n("./src/utils/core.js"),d=n("./src/utils/maths.js"),p=n("./src/utils/audio.js"),g=n("./src/utils/tensor.js"),h=n("./src/utils/image.js");async function m(Oe){return Array.isArray(Oe)||(Oe=[Oe]),await Promise.all(Oe.map(ge=>h.RawImage.read(ge)))}async function x(Oe,ge){return Array.isArray(Oe)||(Oe=[Oe]),await Promise.all(Oe.map(re=>typeof re=="string"||re instanceof URL?(0,p.read_audio)(re,ge):re instanceof Float64Array?new Float32Array(re):re))}function _(Oe,ge){ge&&(Oe=Oe.map(it=>it|0));const[re,$e,Ge,qe]=Oe;return{xmin:re,ymin:$e,xmax:Ge,ymax:qe}}class b extends l.Callable{constructor({task:ge,model:re,tokenizer:$e=null,processor:Ge=null}){super(),this.task=ge,this.model=re,this.tokenizer=$e,this.processor=Ge}async dispose(){await this.model.dispose()}}class I extends b{constructor(ge){super(ge)}async _call(ge,{top_k:re=1}={}){const $e=this.tokenizer(ge,{padding:!0,truncation:!0}),Ge=await this.model($e),qe=this.model.config.problem_type==="multi_label_classification"?Be=>Be.sigmoid():Be=>new g.Tensor("float32",(0,d.softmax)(Be.data),Be.dims),it=this.model.config.id2label,Ve=[];for(const Be of Ge.logits){const _t=qe(Be),Ne=await(0,g.topk)(_t,re),Ye=Ne[0].tolist(),mt=Ne[1].tolist().map((Tt,Ke)=>({label:it?it[Tt]:`LABEL_${Tt}`,score:Ye[Ke]}));re===1?Ve.push(...mt):Ve.push(mt)}return Array.isArray(ge)||re===1?Ve:Ve[0]}}class T extends b{constructor(ge){super(ge)}async _call(ge,{ignore_labels:re=["O"]}={}){const $e=Array.isArray(ge),Ge=this.tokenizer($e?ge:[ge],{padding:!0,truncation:!0}),it=(await this.model(Ge)).logits,Ve=this.model.config.id2label,Be=[];for(let _t=0;_t<it.dims[0];++_t){const Ne=Ge.input_ids[_t],Ye=it[_t],kt=[];for(let mt=0;mt<Ye.dims[0];++mt){const Tt=Ye[mt],Ke=(0,d.max)(Tt.data)[1],dt=Ve?Ve[Ke]:`LABEL_${Ke}`;if(re.includes(dt))continue;const wt=this.tokenizer.decode([Ne[mt].item()],{skip_special_tokens:!0});if(wt==="")continue;const st=(0,d.softmax)(Tt.data);kt.push({entity:dt,score:st[Ke],index:mt,word:wt})}Be.push(kt)}return $e?Be:Be[0]}}class S extends b{constructor(ge){super(ge)}async _call(ge,re,{top_k:$e=1}={}){const Ge=this.tokenizer(ge,{text_pair:re,padding:!0,truncation:!0}),{start_logits:qe,end_logits:it}=await this.model(Ge),Ve=Ge.input_ids.tolist(),Be=Ge.attention_mask.tolist(),_t=this.tokenizer.all_special_ids,Ne=[];for(let Ye=0;Ye<qe.dims[0];++Ye){const kt=Ve[Ye],mt=kt.findIndex(He=>He==this.tokenizer.sep_token_id);Be[Ye].map((He,Bt)=>He==1&&(Bt===0||Bt>mt&&_t.findIndex(qt=>qt==kt[Bt])===-1));const Tt=qe[Ye].tolist(),Ke=it[Ye].tolist();for(let He=1;He<Tt.length;++He)(Be[Ye]==0||He<=mt||_t.findIndex(Bt=>Bt==kt[He])!==-1)&&(Tt[He]=-1/0,Ke[He]=-1/0);const dt=(0,d.softmax)(Tt).map((He,Bt)=>[He,Bt]),wt=(0,d.softmax)(Ke).map((He,Bt)=>[He,Bt]);dt[0][0]=0,wt[0][0]=0;const st=(0,u.product)(dt,wt).filter(He=>He[0][1]<=He[1][1]).map(He=>[He[0][1],He[1][1],He[0][0]*He[1][0]]).sort((He,Bt)=>Bt[2]-He[2]);for(let He=0;He<Math.min(st.length,$e);++He){const[Bt,qt,xn]=st[He],At=kt.slice(Bt,qt+1),nn=this.tokenizer.decode(At,{skip_special_tokens:!0});Ne.push({answer:nn,score:xn})}}return $e===1?Ne[0]:Ne}}class D extends b{constructor(ge){super(ge)}async _call(ge,{top_k:re=5}={}){const $e=this.tokenizer(ge,{padding:!0,truncation:!0}),{logits:Ge}=await this.model($e),qe=[],it=$e.input_ids.tolist();for(let Ve=0;Ve<it.length;++Ve){const Be=it[Ve],_t=Be.findIndex(Tt=>Tt==this.tokenizer.mask_token_id);if(_t===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const Ne=Ge[Ve][_t],Ye=await(0,g.topk)(new g.Tensor("float32",(0,d.softmax)(Ne.data),Ne.dims),re),kt=Ye[0].tolist(),mt=Ye[1].tolist();qe.push(mt.map((Tt,Ke)=>{const dt=Be.slice();return dt[_t]=Tt,{score:kt[Ke],token:Number(Tt),token_str:this.tokenizer.decode([Tt]),sequence:this.tokenizer.decode(dt,{skip_special_tokens:!0})}}))}return Array.isArray(ge)?qe:qe[0]}}class E extends b{_key="generated_text";constructor(ge){super(ge)}async _call(ge,re={}){Array.isArray(ge)||(ge=[ge]),this.model.config.prefix&&(ge=ge.map(Be=>this.model.config.prefix+Be));const $e=this.model.config.task_specific_params;$e&&$e[this.task]&&$e[this.task].prefix&&(ge=ge.map(Be=>$e[this.task].prefix+Be));const Ge=this.tokenizer,qe={padding:!0,truncation:!0};let it;this instanceof P&&"_build_translation_inputs"in Ge?it=Ge._build_translation_inputs(ge,qe,re):it=Ge(ge,qe);const Ve=await this.model.generate({...it,...re});return Ge.batch_decode(Ve,{skip_special_tokens:!0}).map(Be=>({[this._key]:Be}))}}class C extends E{_key="summary_text";constructor(ge){super(ge)}}class P extends E{_key="translation_text";constructor(ge){super(ge)}}function w(Oe){return Array.isArray(Oe)&&Oe.every(ge=>"role"in ge&&"content"in ge)}class R extends b{constructor(ge){super(ge)}async _call(ge,re={}){let $e=!1,Ge=!1,qe=re.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,it;if(typeof ge=="string")it=ge=[ge];else if(Array.isArray(ge)&&ge.every(mt=>typeof mt=="string"))$e=!0,it=ge;else{if(w(ge))ge=[ge];else if(Array.isArray(ge)&&ge.every(w))$e=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Ge=!0,it=ge.map(mt=>this.tokenizer.apply_chat_template(mt,{tokenize:!1,add_generation_prompt:!0})),qe=!1}const Ve=Ge?!1:re.return_full_text??!0;this.tokenizer.padding_side="left";const Be=this.tokenizer(it,{add_special_tokens:qe,padding:!0,truncation:!0}),_t=await this.model.generate({...Be,...re}),Ne=this.tokenizer.batch_decode(_t,{skip_special_tokens:!0});let Ye;!Ve&&Be.input_ids.dims.at(-1)>0&&(Ye=this.tokenizer.batch_decode(Be.input_ids,{skip_special_tokens:!0}).map(mt=>mt.length));const kt=Array.from({length:ge.length},mt=>[]);for(let mt=0;mt<Ne.length;++mt){const Tt=Math.floor(mt/_t.dims[0]*ge.length);Ye&&(Ne[mt]=Ne[mt].slice(Ye[Tt])),kt[Tt].push({generated_text:Ge?[...ge[Tt],{role:"assistant",content:Ne[mt]}]:Ne[mt]})}return!$e&&kt.length===1?kt[0]:kt}}class U extends b{constructor(ge){super(ge),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([re,$e])=>[re.toLowerCase(),$e])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(ge,re,{hypothesis_template:$e="This example is {}.",multi_label:Ge=!1}={}){const qe=Array.isArray(ge);qe||(ge=[ge]),Array.isArray(re)||(re=[re]);const it=re.map(_t=>$e.replace("{}",_t)),Ve=Ge||re.length===1,Be=[];for(const _t of ge){const Ne=[];for(const mt of it){const Tt=this.tokenizer(_t,{text_pair:mt,padding:!0,truncation:!0}),Ke=await this.model(Tt);Ve?Ne.push([Ke.logits.data[this.contradiction_id],Ke.logits.data[this.entailment_id]]):Ne.push(Ke.logits.data[this.entailment_id])}const kt=(Ve?Ne.map(mt=>(0,d.softmax)(mt)[1]):(0,d.softmax)(Ne)).map((mt,Tt)=>[mt,Tt]).sort((mt,Tt)=>Tt[0]-mt[0]);Be.push({sequence:_t,labels:kt.map(mt=>re[mt[1]]),scores:kt.map(mt=>mt[0])})}return qe?Be:Be[0]}}class N extends b{constructor(ge){super(ge)}async _call(ge,{pooling:re="none",normalize:$e=!1,quantize:Ge=!1,precision:qe="binary"}={}){const it=this.tokenizer(ge,{padding:!0,truncation:!0}),Ve=await this.model(it);let Be=Ve.last_hidden_state??Ve.logits??Ve.token_embeddings;switch(re){case"none":break;case"mean":Be=(0,g.mean_pooling)(Be,it.attention_mask);break;case"first_token":case"cls":Be=Be.slice(null,0);break;case"last_token":case"eos":Be=Be.slice(null,-1);break;default:throw Error(`Pooling method '${re}' not supported.`)}return $e&&(Be=Be.normalize(2,-1)),Ge&&(Be=(0,g.quantize_embeddings)(Be,qe)),Be}}class ie extends b{constructor(ge){super(ge)}async _call(ge,{pool:re=null}={}){const $e=await m(ge),{pixel_values:Ge}=await this.processor($e),qe=await this.model({pixel_values:Ge});let it;if(re){if(!("pooler_output"in qe))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");it=qe.pooler_output}else it=qe.last_hidden_state??qe.logits??qe.image_embeds;return it}}class ee extends b{constructor(ge){super(ge)}async _call(ge,{top_k:re=5}={}){const $e=this.processor.feature_extractor.config.sampling_rate,Ge=await x(ge,$e),qe=this.model.config.id2label,it=[];for(const Ve of Ge){const Be=await this.processor(Ve),Ne=(await this.model(Be)).logits[0],Ye=await(0,g.topk)(new g.Tensor("float32",(0,d.softmax)(Ne.data),Ne.dims),re),kt=Ye[0].tolist(),Tt=Ye[1].tolist().map((Ke,dt)=>({label:qe?qe[Ke]:`LABEL_${Ke}`,score:kt[dt]}));it.push(Tt)}return Array.isArray(ge)?it:it[0]}}class q extends b{constructor(ge){super(ge)}async _call(ge,re,{hypothesis_template:$e="This is a sound of {}."}={}){const Ge=!Array.isArray(ge);Ge&&(ge=[ge]);const qe=re.map(Ne=>$e.replace("{}",Ne)),it=this.tokenizer(qe,{padding:!0,truncation:!0}),Ve=this.processor.feature_extractor.config.sampling_rate,Be=await x(ge,Ve),_t=[];for(const Ne of Be){const Ye=await this.processor(Ne),kt=await this.model({...it,...Ye}),mt=(0,d.softmax)(kt.logits_per_audio.data);_t.push([...mt].map((Tt,Ke)=>({score:Tt,label:re[Ke]})))}return Ge?_t[0]:_t}}class oe extends b{constructor(ge){super(ge)}async _call(ge,re={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(ge,re);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":case"parakeet_ctc":return this._call_wav2vec2(ge,re);case"moonshine":return this._call_moonshine(ge,re);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(ge,re){re.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),re.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const $e=!Array.isArray(ge);$e&&(ge=[ge]);const Ge=this.processor.feature_extractor.config.sampling_rate,qe=await x(ge,Ge),it=[];for(const Ve of qe){const Be=await this.processor(Ve),Ne=(await this.model(Be)).logits[0],Ye=[];for(const mt of Ne)Ye.push((0,d.max)(mt.data)[1]);const kt=this.tokenizer.decode(Ye,{skip_special_tokens:!0}).trim();it.push({text:kt})}return $e?it[0]:it}async _call_whisper(ge,re){const $e=re.return_timestamps??!1,Ge=re.chunk_length_s??0,qe=re.force_full_sequences??!1;let it=re.stride_length_s??null;const Ve={...re};$e==="word"&&(Ve.return_token_timestamps=!0,Ve.return_timestamps=!1);const Be=!Array.isArray(ge);Be&&(ge=[ge]);const _t=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Ne=this.processor.feature_extractor.config.hop_length,Ye=this.processor.feature_extractor.config.sampling_rate,kt=await x(ge,Ye),mt=[];for(const Tt of kt){let Ke=[];if(Ge>0){if(it===null)it=Ge/6;else if(Ge<=it)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const st=Ye*Ge,He=Ye*it,Bt=st-2*He;let qt=0;for(;;){const xn=qt+st,At=Tt.subarray(qt,xn),nn=await this.processor(At),Ct=qt===0,rt=xn>=Tt.length;if(Ke.push({stride:[At.length,Ct?0:He,rt?0:He],input_features:nn.input_features,is_last:rt}),rt)break;qt+=Bt}}else Ke=[{stride:[Tt.length,0,0],input_features:(await this.processor(Tt)).input_features,is_last:!0}];for(const st of Ke){Ve.num_frames=Math.floor(st.stride[0]/Ne);const He=await this.model.generate({inputs:st.input_features,...Ve});$e==="word"?(st.tokens=He.sequences.tolist()[0],st.token_timestamps=He.token_timestamps.tolist()[0].map(Bt=>(0,d.round)(Bt,2))):st.tokens=He[0].tolist(),st.stride=st.stride.map(Bt=>Bt/Ye)}const[dt,wt]=this.tokenizer._decode_asr(Ke,{time_precision:_t,return_timestamps:$e,force_full_sequences:qe});mt.push({text:dt,...wt})}return Be?mt[0]:mt}async _call_moonshine(ge,re){const $e=!Array.isArray(ge);$e&&(ge=[ge]);const Ge=this.processor.feature_extractor.config.sampling_rate,qe=await x(ge,Ge),it=[];for(const Ve of qe){const Be=await this.processor(Ve),_t=Math.floor(Ve.length/Ge)*6,Ne=await this.model.generate({max_new_tokens:_t,...re,...Be}),Ye=this.processor.batch_decode(Ne,{skip_special_tokens:!0})[0];it.push({text:Ye})}return $e?it[0]:it}}class ae extends b{constructor(ge){super(ge)}async _call(ge,re={}){const $e=Array.isArray(ge),Ge=await m(ge),{pixel_values:qe}=await this.processor(Ge),it=[];for(const Ve of qe){Ve.dims=[1,...Ve.dims];const Be=await this.model.generate({inputs:Ve,...re}),_t=this.tokenizer.batch_decode(Be,{skip_special_tokens:!0}).map(Ne=>({generated_text:Ne.trim()}));it.push(_t)}return $e?it:it[0]}}class X extends b{constructor(ge){super(ge)}async _call(ge,{top_k:re=5}={}){const $e=await m(ge),{pixel_values:Ge}=await this.processor($e),qe=await this.model({pixel_values:Ge}),it=this.model.config.id2label,Ve=[];for(const Be of qe.logits){const _t=await(0,g.topk)(new g.Tensor("float32",(0,d.softmax)(Be.data),Be.dims),re),Ne=_t[0].tolist(),kt=_t[1].tolist().map((mt,Tt)=>({label:it?it[mt]:`LABEL_${mt}`,score:Ne[Tt]}));Ve.push(kt)}return Array.isArray(ge)?Ve:Ve[0]}}class se extends b{constructor(ge){super(ge),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(ge,{threshold:re=.5,mask_threshold:$e=.5,overlap_mask_area_threshold:Ge=.8,label_ids_to_fuse:qe=null,target_sizes:it=null,subtask:Ve=null}={}){if(Array.isArray(ge)&&ge.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const _t=await m(ge),Ne=_t.map(st=>[st.height,st.width]),Ye=await this.processor(_t),{inputNames:kt,outputNames:mt}=this.model.sessions.model;if(!kt.includes("pixel_values")){if(kt.length!==1)throw Error(`Expected a single input name, but got ${kt.length} inputs: ${kt}.`);const st=kt[0];if(st in Ye)throw Error(`Input name ${st} already exists in the inputs.`);Ye[st]=Ye.pixel_values}const Tt=await this.model(Ye);let Ke=null;if(Ve!==null)Ke=this.subtasks_mapping[Ve];else if(this.processor.image_processor){for(const[st,He]of Object.entries(this.subtasks_mapping))if(He in this.processor.image_processor){Ke=this.processor.image_processor[He].bind(this.processor.image_processor),Ve=st;break}}const dt=this.model.config.id2label,wt=[];if(Ve)if(Ve==="panoptic"||Ve==="instance"){const st=Ke(Tt,re,$e,Ge,qe,it??Ne)[0],He=st.segmentation;for(const Bt of st.segments_info){const qt=new Uint8ClampedArray(He.data.length);for(let At=0;At<He.data.length;++At)He.data[At]===Bt.id&&(qt[At]=255);const xn=new h.RawImage(qt,He.dims[1],He.dims[0],1);wt.push({score:Bt.score,label:dt[Bt.label_id],mask:xn})}}else if(Ve==="semantic"){const{segmentation:st,labels:He}=Ke(Tt,it??Ne)[0];for(const Bt of He){const qt=new Uint8ClampedArray(st.data.length);for(let At=0;At<st.data.length;++At)st.data[At]===Bt&&(qt[At]=255);const xn=new h.RawImage(qt,st.dims[1],st.dims[0],1);wt.push({score:null,label:dt[Bt],mask:xn})}}else throw Error(`Subtask ${Ve} not supported.`);else{const He=Tt[mt[0]];for(let Bt=0;Bt<Ne.length;++Bt){const qt=Ne[Bt],xn=He[Bt];xn.data.some(nn=>nn<-1e-5||nn>1+1e-5)&&xn.sigmoid_();const At=await h.RawImage.fromTensor(xn.mul_(255).to("uint8")).resize(qt[1],qt[0]);wt.push({label:null,score:null,mask:At})}}return wt}}class le extends se{constructor(ge){super(ge)}async _call(ge,re={}){if(Array.isArray(ge)&&ge.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const Ge=await m(ge),qe=await super._call(ge,re);return Ge.map((Ve,Be)=>{const _t=Ve.clone();return _t.putAlpha(qe[Be].mask),_t})}}class be extends b{constructor(ge){super(ge)}async _call(ge,re,{hypothesis_template:$e="This is a photo of {}"}={}){const Ge=Array.isArray(ge),qe=await m(ge),it=re.map(kt=>$e.replace("{}",kt)),Ve=this.tokenizer(it,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Be}=await this.processor(qe),_t=await this.model({...Ve,pixel_values:Be}),Ne=this.model.config.model_type==="siglip"?kt=>kt.sigmoid().data:kt=>(0,d.softmax)(kt.data),Ye=[];for(const kt of _t.logits_per_image){const Tt=[...Ne(kt)].map((Ke,dt)=>({score:Ke,label:re[dt]}));Tt.sort((Ke,dt)=>dt.score-Ke.score),Ye.push(Tt)}return Ge?Ye:Ye[0]}}class Ee extends b{constructor(ge){super(ge)}async _call(ge,{threshold:re=.9,percentage:$e=!1}={}){const Ge=Array.isArray(ge);if(Ge&&ge.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const qe=await m(ge),it=$e?null:qe.map(mt=>[mt.height,mt.width]),{pixel_values:Ve,pixel_mask:Be}=await this.processor(qe),_t=await this.model({pixel_values:Ve,pixel_mask:Be}),Ne=this.processor.image_processor.post_process_object_detection(_t,re,it),Ye=this.model.config.id2label,kt=Ne.map(mt=>mt.boxes.map((Tt,Ke)=>({score:mt.scores[Ke],label:Ye[mt.classes[Ke]],box:_(Tt,!$e)})));return Ge?kt:kt[0]}}class Y extends b{constructor(ge){super(ge)}async _call(ge,re,{threshold:$e=.1,top_k:Ge=null,percentage:qe=!1}={}){const it=Array.isArray(ge),Ve=await m(ge),Be=this.tokenizer(re,{padding:!0,truncation:!0}),_t=await this.processor(Ve),Ne=[];for(let Ye=0;Ye<Ve.length;++Ye){const kt=Ve[Ye],mt=qe?null:[[kt.height,kt.width]],Tt=_t.pixel_values[Ye].unsqueeze_(0),Ke=await this.model({...Be,pixel_values:Tt});let dt;if("post_process_grounded_object_detection"in this.processor){const wt=this.processor.post_process_grounded_object_detection(Ke,Be.input_ids,{box_threshold:$e,text_threshold:$e,target_sizes:mt})[0];dt=wt.boxes.map((st,He)=>({score:wt.scores[He],label:wt.labels[He],box:_(st,!qe)}))}else{const wt=this.processor.image_processor.post_process_object_detection(Ke,$e,mt,!0)[0];dt=wt.boxes.map((st,He)=>({score:wt.scores[He],label:re[wt.classes[He]],box:_(st,!qe)}))}dt.sort((wt,st)=>st.score-wt.score),Ge!==null&&(dt=dt.slice(0,Ge)),Ne.push(dt)}return it?Ne:Ne[0]}}class te extends b{constructor(ge){super(ge)}async _call(ge,re,$e={}){const Ge=(await m(ge))[0],{pixel_values:qe}=await this.processor(Ge),it=`<s_docvqa><s_question>${re}</s_question><s_answer>`,Ve=this.tokenizer(it,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Be=await this.model.generate({inputs:qe,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:Ve,...$e}),Ne=this.tokenizer.batch_decode(Be)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Ye=null;return Ne&&Ne.length>=2&&(Ye=Ne[1].trim()),[{answer:Ye}]}}class J extends b{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(ge){super(ge),this.vocoder=ge.vocoder??null}async _prepare_speaker_embeddings(ge){if((typeof ge=="string"||ge instanceof URL)&&(ge=new Float32Array(await(await fetch(ge)).arrayBuffer())),ge instanceof Float32Array)ge=new g.Tensor("float32",ge,[ge.length]);else if(!(ge instanceof g.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");return ge}async _call(ge,{speaker_embeddings:re=null,num_inference_steps:$e,speed:Ge}={}){return this.processor?this._call_text_to_spectrogram(ge,{speaker_embeddings:re}):this.model.config.model_type==="supertonic"?this._call_supertonic(ge,{speaker_embeddings:re,num_inference_steps:$e,speed:Ge}):this._call_text_to_waveform(ge)}async _call_supertonic(ge,{speaker_embeddings:re,num_inference_steps:$e,speed:Ge}){if(!re)throw new Error("Speaker embeddings must be provided for Supertonic models.");re=await this._prepare_speaker_embeddings(re);const{sampling_rate:qe,style_dim:it}=this.model.config;re=re.view(1,-1,it);const Ve=this.tokenizer(ge,{padding:!0,truncation:!0}),{waveform:Be}=await this.model.generate_speech({...Ve,style:re,num_inference_steps:$e,speed:Ge});return new p.RawAudio(Be.data,qe)}async _call_text_to_waveform(ge){const re=this.tokenizer(ge,{padding:!0,truncation:!0}),{waveform:$e}=await this.model(re),Ge=this.model.config.sampling_rate;return new p.RawAudio($e.data,Ge)}async _call_text_to_spectrogram(ge,{speaker_embeddings:re}){this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await o.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"}));const{input_ids:$e}=this.tokenizer(ge,{padding:!0,truncation:!0});re=await this._prepare_speaker_embeddings(re),re=re.view(1,-1);const{waveform:Ge}=await this.model.generate_speech($e,re,{vocoder:this.vocoder}),qe=this.processor.feature_extractor.config.sampling_rate;return new p.RawAudio(Ge.data,qe)}}class H extends b{constructor(ge){super(ge)}async _call(ge){const re=await m(ge),$e=await this.processor(re),Ge=await this.model($e),qe=[];for(const it of Ge.reconstruction){const Ve=it.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");qe.push(h.RawImage.fromTensor(Ve))}return qe.length>1?qe:qe[0]}}class _e extends b{constructor(ge){super(ge)}async _call(ge){const re=await m(ge),$e=await this.processor(re),{predicted_depth:Ge}=await this.model($e),qe=[];for(let it=0;it<re.length;++it){const Ve=Ge[it],[Be,_t]=Ve.dims.slice(-2),[Ne,Ye]=re[it].size,kt=(await(0,g.interpolate_4d)(Ve.view(1,1,Be,_t),{size:[Ye,Ne],mode:"bilinear"})).view(Ye,Ne),mt=kt.min().item(),Tt=kt.max().item(),Ke=kt.sub(mt).div_(Tt-mt).mul_(255).to("uint8").unsqueeze(0),dt=h.RawImage.fromTensor(Ke);qe.push({predicted_depth:kt,depth:dt})}return qe.length>1?qe:qe[0]}}const Te=Object.freeze({"text-classification":{tokenizer:r.AutoTokenizer,pipeline:I,model:o.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:r.AutoTokenizer,pipeline:T,model:o.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:r.AutoTokenizer,pipeline:S,model:o.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:r.AutoTokenizer,pipeline:D,model:o.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:r.AutoTokenizer,pipeline:C,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:r.AutoTokenizer,pipeline:P,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:r.AutoTokenizer,pipeline:E,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:r.AutoTokenizer,pipeline:R,model:o.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:r.AutoTokenizer,pipeline:U,model:o.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:ee,model:o.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:r.AutoTokenizer,pipeline:q,model:o.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:r.AutoTokenizer,pipeline:oe,model:[o.AutoModelForSpeechSeq2Seq,o.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:r.AutoTokenizer,pipeline:J,model:[o.AutoModelForTextToWaveform,o.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:r.AutoTokenizer,pipeline:ae,model:o.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:X,model:o.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:se,model:[o.AutoModelForImageSegmentation,o.AutoModelForSemanticSegmentation,o.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:le,model:[o.AutoModelForImageSegmentation,o.AutoModelForSemanticSegmentation,o.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:r.AutoTokenizer,pipeline:be,model:o.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:Ee,model:o.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:r.AutoTokenizer,pipeline:Y,model:o.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:r.AutoTokenizer,pipeline:te,model:o.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:H,model:o.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:_e,model:o.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:r.AutoTokenizer,pipeline:N,model:o.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:ie,model:[o.AutoModelForImageFeatureExtraction,o.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),Re=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function We(Oe,ge=null,{progress_callback:re=null,config:$e=null,cache_dir:Ge=null,local_files_only:qe=!1,revision:it="main",device:Ve=null,dtype:Be=null,subfolder:_t="onnx",use_external_data_format:Ne=null,model_file_name:Ye=null,session_options:kt={}}={}){Oe=Re[Oe]??Oe;const mt=Te[Oe.split("_",1)[0]];if(!mt)throw Error(`Unsupported pipeline: ${Oe}. Must be one of [${Object.keys(Te)}]`);ge||(ge=mt.default.model,console.log(`No model specified. Using default model: "${ge}".`));const Tt={progress_callback:re,config:$e,cache_dir:Ge,local_files_only:qe,revision:it,device:Ve,dtype:Be,subfolder:_t,use_external_data_format:Ne,model_file_name:Ye,session_options:kt},Ke=new Map([["tokenizer",mt.tokenizer],["model",mt.model],["processor",mt.processor]]),dt=await at(Ke,ge,Tt);dt.task=Oe,(0,u.dispatchCallback)(re,{status:"ready",task:Oe,model:ge});const wt=mt.pipeline;return new wt(dt)}async function at(Oe,ge,re){const $e=Object.create(null),Ge=[];for(const[qe,it]of Oe.entries()){if(!it)continue;let Ve;Array.isArray(it)?Ve=new Promise(async(Be,_t)=>{let Ne;for(const Ye of it){if(Ye===null){Be(null);return}try{Be(await Ye.from_pretrained(ge,re));return}catch(kt){if(kt.message?.includes("Unsupported model type"))Ne=kt;else if(kt.message?.includes("Could not locate file"))Ne=kt;else{_t(kt);return}}}_t(Ne)}):Ve=it.from_pretrained(ge,re),$e[qe]=Ve,Ge.push(Ve)}await Promise.all(Ge);for(const[qe,it]of Object.entries($e))$e[qe]=await it;return $e}}),"./src/tokenizers.js":((e,t,n)=>{n.r(t),n.d(t,{AlbertTokenizer:()=>Qi,AutoTokenizer:()=>_o,BartTokenizer:()=>jt,BertTokenizer:()=>wr,BlenderbotSmallTokenizer:()=>Ft,BlenderbotTokenizer:()=>Dt,BloomTokenizer:()=>Fn,CLIPTokenizer:()=>yi,CamembertTokenizer:()=>Se,CodeGenTokenizer:()=>An,CodeLlamaTokenizer:()=>fr,CohereTokenizer:()=>Qr,ConvBertTokenizer:()=>xe,DebertaTokenizer:()=>wn,DebertaV2Tokenizer:()=>vi,DistilBertTokenizer:()=>we,ElectraTokenizer:()=>ht,EsmTokenizer:()=>la,FalconTokenizer:()=>hr,GPT2Tokenizer:()=>Qt,GPTNeoXTokenizer:()=>Cr,GemmaTokenizer:()=>Ma,Grok1Tokenizer:()=>Pr,HerbertTokenizer:()=>B,LlamaTokenizer:()=>Vr,M2M100Tokenizer:()=>ei,MBart50Tokenizer:()=>Gt,MBartTokenizer:()=>gn,MPNetTokenizer:()=>wa,MarianTokenizer:()=>Wr,MgpstrTokenizer:()=>ti,MobileBertTokenizer:()=>Xa,NllbTokenizer:()=>Ja,NougatTokenizer:()=>fn,PreTrainedTokenizer:()=>on,Qwen2Tokenizer:()=>ha,RoFormerTokenizer:()=>pe,RobertaTokenizer:()=>yn,SiglipTokenizer:()=>Aa,SpeechT5Tokenizer:()=>Jt,SqueezeBertTokenizer:()=>sa,T5Tokenizer:()=>Lt,TokenizerModel:()=>ie,VitsTokenizer:()=>Ei,Wav2Vec2CTCTokenizer:()=>ga,WhisperTokenizer:()=>ao,XLMRobertaTokenizer:()=>In,XLMTokenizer:()=>Xe,is_chinese_char:()=>D});var r=n("./src/utils/generic.js"),o=n("./src/utils/core.js"),s=n("./src/utils/hub.js"),l=n("./src/utils/maths.js"),u=n("./src/utils/tensor.js"),d=n("./src/utils/data-structures.js"),p=n("./node_modules/@huggingface/jinja/dist/index.js"),g=n("./src/models/whisper/common_whisper.js");async function h(Qe,G){const ye=await Promise.all([(0,s.getModelJSON)(Qe,"tokenizer.json",!0,G),(0,s.getModelJSON)(Qe,"tokenizer_config.json",!0,G)]);return G.legacy!==null&&(ye[1].legacy=G.legacy),ye}function m(Qe,G){const ye=[];let Pe=0;for(const ke of Qe.matchAll(G)){const lt=ke[0];Pe<ke.index&&ye.push(Qe.slice(Pe,ke.index)),lt.length>0&&ye.push(lt),Pe=ke.index+lt.length}return Pe<Qe.length&&ye.push(Qe.slice(Pe)),ye}function x(Qe,G=!0){if(Qe.Regex!==void 0){let ye=Qe.Regex.replace(/\\([#&~])/g,"$1");for(const[Pe,ke]of U)ye=ye.replaceAll(Pe,ke);return new RegExp(ye,"gu")}else if(Qe.String!==void 0){const ye=(0,o.escapeRegExp)(Qe.String);return new RegExp(G?ye:`(${ye})`,"gu")}else return console.warn("Unknown pattern type:",Qe),null}function _(Qe){return new Map(Object.entries(Qe))}function b(Qe){const G=Qe.dims;switch(G.length){case 1:return Qe.tolist();case 2:if(G[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Qe.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${G.length}.`)}}function I(Qe){return Qe.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function T(Qe){return Qe.replace(new RegExp("\\p{M}","gu"),"")}function S(Qe){return T(Qe.toLowerCase())}function D(Qe){return Qe>=19968&&Qe<=40959||Qe>=13312&&Qe<=19903||Qe>=131072&&Qe<=173791||Qe>=173824&&Qe<=177983||Qe>=177984&&Qe<=178207||Qe>=178208&&Qe<=183983||Qe>=63744&&Qe<=64255||Qe>=194560&&Qe<=195103}function E(Qe,G,ye){const Pe=[];let ke=0;for(;ke<Qe.length;){if(Pe.push(Qe[ke]),(G.get(Qe[ke])??ye)!==ye){++ke;continue}for(;++ke<Qe.length&&(G.get(Qe[ke])??ye)===ye;)G.get(Pe.at(-1))!==ye&&(Pe[Pe.length-1]+=Qe[ke])}return Pe}function C(Qe){return Qe.match(/\S+/g)||[]}const P="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",w=new RegExp(`^[${P}]+$`,"gu"),R=".,!?",U=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],["(?i:[sdmt]|ll|ve|re)","(?:[sS]|[dD]|[mM]|[tT]|[lL][lL]|[vV][eE]|[rR][eE])"],["[^\\r\\n\\p{L}\\p{N}]?+","[^\\r\\n\\p{L}\\p{N}]?"],["[^\\s\\p{L}\\p{N}]++","[^\\s\\p{L}\\p{N}]+"],[` ?[^(\\s|[${R}])]+`,` ?[^\\s${R}]+`]]);class N{constructor(G){this.content=G.content,this.id=G.id,this.single_word=G.single_word??!1,this.lstrip=G.lstrip??!1,this.rstrip=G.rstrip??!1,this.special=G.special??!1,this.normalized=G.normalized??null}}class ie extends r.Callable{constructor(G){super(),this.config=G,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(G,...ye){switch(G.type){case"WordPiece":return new ee(G);case"Unigram":return new q(G,...ye);case"BPE":return new X(G);default:if(G.vocab)return Array.isArray(G.vocab)?new q(G,...ye):Object.hasOwn(G,"continuing_subword_prefix")&&Object.hasOwn(G,"unk_token")?Object.hasOwn(G,"merges")?new X(G):new ee(G):new se(G,...ye);throw new Error(`Unknown TokenizerModel type: ${G.type}`)}}_call(G){return G=this.encode(G),this.fuse_unk&&(G=E(G,this.tokens_to_ids,this.unk_token_id)),G}encode(G){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(G){return G.map(ye=>this.tokens_to_ids.get(ye)??this.unk_token_id)}convert_ids_to_tokens(G){return G.map(ye=>this.vocab[ye]??this.unk_token)}}class ee extends ie{constructor(G){super(G),this.tokens_to_ids=_(G.vocab),this.unk_token_id=this.tokens_to_ids.get(G.unk_token),this.unk_token=G.unk_token,this.max_input_chars_per_word=G.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[ye,Pe]of this.tokens_to_ids)this.vocab[Pe]=ye}encode(G){const ye=[];for(const Pe of G){const ke=[...Pe];if(ke.length>this.max_input_chars_per_word){ye.push(this.unk_token);continue}let lt=!1,ot=0;const Kt=[];for(;ot<ke.length;){let Ht=ke.length,Xt=null;for(;ot<Ht;){let zt=ke.slice(ot,Ht).join("");if(ot>0&&(zt=this.config.continuing_subword_prefix+zt),this.tokens_to_ids.has(zt)){Xt=zt;break}--Ht}if(Xt===null){lt=!0;break}Kt.push(Xt),ot=Ht}lt?ye.push(this.unk_token):ye.push(...Kt)}return ye}}class q extends ie{constructor(G,ye){super(G);const Pe=G.vocab.length;this.vocab=new Array(Pe),this.scores=new Array(Pe);for(let ke=0;ke<Pe;++ke)[this.vocab[ke],this.scores[ke]]=G.vocab[ke];this.unk_token_id=G.unk_id,this.unk_token=this.vocab[G.unk_id],this.tokens_to_ids=new Map(this.vocab.map((ke,lt)=>[ke,lt])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ye.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,l.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new d.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(G){const ye=G.chars,Pe=1;let ke=0;for(;ke<ye.length;){let lt=!1;const ot=ye.slice(ke).join(""),Kt=this.trie.commonPrefixSearch(ot);for(const Ht of Kt){const Xt=this.tokens_to_ids.get(Ht),zt=this.scores[Xt],bn=(0,o.len)(Ht);G.insert(ke,bn,zt,Xt),!lt&&bn===Pe&&(lt=!0)}lt||G.insert(ke,Pe,this.unk_score,this.unk_token_id),ke+=Pe}}tokenize(G){const ye=new d.TokenLattice(G,this.bos_token_id,this.eos_token_id);return this.populateNodes(ye),ye.tokens()}encode(G){const ye=[];for(const Pe of G){const ke=this.tokenize(Pe);ye.push(...ke)}return ye}}const oe=(()=>{const Qe=[...Array.from({length:94},(ke,lt)=>lt+33),...Array.from({length:12},(ke,lt)=>lt+161),...Array.from({length:82},(ke,lt)=>lt+174)],G=Qe.slice();let ye=0;for(let ke=0;ke<256;++ke)Qe.includes(ke)||(Qe.push(ke),G.push(256+ye),ye+=1);const Pe=G.map(ke=>String.fromCharCode(ke));return Object.fromEntries(Qe.map((ke,lt)=>[ke,Pe[lt]]))})(),ae=(0,o.reverseDictionary)(oe);class X extends ie{constructor(G){super(G),this.tokens_to_ids=_(G.vocab),this.unk_token_id=this.tokens_to_ids.get(G.unk_token),this.unk_token=G.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[Pe,ke]of this.tokens_to_ids)this.vocab[ke]=Pe;const ye=Array.isArray(G.merges[0]);this.merges=ye?G.merges:G.merges.map(Pe=>Pe.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((Pe,ke)=>[JSON.stringify(Pe),ke])),this.end_of_word_suffix=G.end_of_word_suffix,this.continuing_subword_suffix=G.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new d.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(G){if(G.length===0)return[];const ye=this.cache.get(G);if(ye!==void 0)return ye;const Pe=Array.from(G);this.end_of_word_suffix&&(Pe[Pe.length-1]+=this.end_of_word_suffix);let ke=[];if(Pe.length>1){const lt=new d.PriorityQueue((Ht,Xt)=>Ht.score<Xt.score);let ot={token:Pe[0],bias:0,prev:null,next:null},Kt=ot;for(let Ht=1;Ht<Pe.length;++Ht){const Xt={bias:Ht/Pe.length,token:Pe[Ht],prev:Kt,next:null};Kt.next=Xt,this._add_node(lt,Kt),Kt=Xt}for(;!lt.isEmpty();){const Ht=lt.pop();if(Ht.deleted||!Ht.next||Ht.next.deleted)continue;if(Ht.deleted=!0,Ht.next.deleted=!0,Ht.prev){const zt={...Ht.prev};Ht.prev.deleted=!0,Ht.prev=zt,zt.prev?zt.prev.next=zt:ot=zt}const Xt={token:Ht.token+Ht.next.token,bias:Ht.bias,prev:Ht.prev,next:Ht.next.next};Xt.prev?(Xt.prev.next=Xt,this._add_node(lt,Xt.prev)):ot=Xt,Xt.next&&(Xt.next.prev=Xt,this._add_node(lt,Xt))}for(let Ht=ot;Ht!==null;Ht=Ht.next)ke.push(Ht.token)}else ke=Pe;if(this.continuing_subword_suffix)for(let lt=0;lt<ke.length-1;++lt)ke[lt]+=this.continuing_subword_suffix;return G.length<this.max_length_to_cache&&this.cache.put(G,ke),ke}_add_node(G,ye){const Pe=this.bpe_ranks.get(JSON.stringify([ye.token,ye.next.token]));Pe!==void 0&&(ye.score=Pe+ye.bias,G.push(ye))}encode(G){const ye=[];for(const Pe of G){if(this.ignore_merges&&this.tokens_to_ids.has(Pe)){ye.push(Pe);continue}const ke=this.bpe(Pe);for(const lt of ke)if(this.tokens_to_ids.has(lt))ye.push(lt);else if(this.byte_fallback){const ot=Array.from(this.text_encoder.encode(lt)).map(Kt=>`<0x${Kt.toString(16).toUpperCase().padStart(2,"0")}>`);ot.every(Kt=>this.tokens_to_ids.has(Kt))?ye.push(...ot):ye.push(this.unk_token)}else ye.push(this.unk_token)}return ye}}class se extends ie{constructor(G,ye){super(G),this.tokens_to_ids=_(ye.target_lang?G.vocab[ye.target_lang]:G.vocab),this.bos_token=ye.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ye.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=ye.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=ye.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[Pe,ke]of this.tokens_to_ids)this.vocab[ke]=Pe}encode(G){return G}}class le extends r.Callable{constructor(G){super(),this.config=G}static fromConfig(G){if(G===null)return null;switch(G.type){case"BertNormalizer":return new Oe(G);case"Precompiled":return new rt(G);case"Sequence":return new at(G);case"Replace":return new be(G);case"NFC":return new Y(G);case"NFD":return new te(G);case"NFKC":return new J(G);case"NFKD":return new H(G);case"Strip":return new _e(G);case"StripAccents":return new Te(G);case"Lowercase":return new Re(G);case"Prepend":return new We(G);default:throw new Error(`Unknown Normalizer type: ${G.type}`)}}normalize(G){throw Error("normalize should be implemented in subclass.")}_call(G){return this.normalize(G)}}class be extends le{normalize(G){const ye=x(this.config.pattern);return ye===null?G:G.replaceAll(ye,this.config.content)}}class Ee extends le{form=void 0;normalize(G){return G=G.normalize(this.form),G}}class Y extends Ee{form="NFC"}class te extends Ee{form="NFD"}class J extends Ee{form="NFKC"}class H extends Ee{form="NFKD"}class _e extends le{normalize(G){return this.config.strip_left&&this.config.strip_right?G=G.trim():(this.config.strip_left&&(G=G.trimStart()),this.config.strip_right&&(G=G.trimEnd())),G}}class Te extends le{normalize(G){return G=T(G),G}}class Re extends le{normalize(G){return G=G.toLowerCase(),G}}class We extends le{normalize(G){return G=this.config.prepend+G,G}}class at extends le{constructor(G){super(G),this.normalizers=G.normalizers.map(ye=>le.fromConfig(ye))}normalize(G){return this.normalizers.reduce((ye,Pe)=>Pe.normalize(ye),G)}}class Oe extends le{_tokenize_chinese_chars(G){const ye=[];for(let Pe=0;Pe<G.length;++Pe){const ke=G[Pe],lt=ke.charCodeAt(0);D(lt)?(ye.push(" "),ye.push(ke),ye.push(" ")):ye.push(ke)}return ye.join("")}stripAccents(G){return G.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(G){switch(G){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(G)}}_clean_text(G){const ye=[];for(const Pe of G){const ke=Pe.charCodeAt(0);ke===0||ke===65533||this._is_control(Pe)||(/^\s$/.test(Pe)?ye.push(" "):ye.push(Pe))}return ye.join("")}normalize(G){return this.config.clean_text&&(G=this._clean_text(G)),this.config.handle_chinese_chars&&(G=this._tokenize_chinese_chars(G)),this.config.lowercase?(G=G.toLowerCase(),this.config.strip_accents!==!1&&(G=this.stripAccents(G))):this.config.strip_accents&&(G=this.stripAccents(G)),G}}class ge extends r.Callable{static fromConfig(G){if(G===null)return null;switch(G.type){case"BertPreTokenizer":return new re(G);case"Sequence":return new hn(G);case"Whitespace":return new En(G);case"WhitespaceSplit":return new tr(G);case"Metaspace":return new nn(G);case"ByteLevel":return new $e(G);case"Split":return new Ge(G);case"Punctuation":return new qe(G);case"Digits":return new it(G);case"Replace":return new Rt(G);case"FixedLength":return new Kn(G);default:throw new Error(`Unknown PreTokenizer type: ${G.type}`)}}pre_tokenize_text(G,ye){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(G,ye){return(Array.isArray(G)?G.map(Pe=>this.pre_tokenize_text(Pe,ye)):this.pre_tokenize_text(G,ye)).flat()}_call(G,ye){return this.pre_tokenize(G,ye)}}class re extends ge{constructor(G){super(),this.pattern=new RegExp(`[^\\s${P}]+|[${P}]`,"gu")}pre_tokenize_text(G,ye){return G.trim().match(this.pattern)||[]}}class $e extends ge{constructor(G){super(),this.config=G,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=oe,this.text_encoder=new TextEncoder}pre_tokenize_text(G,ye){return this.add_prefix_space&&!G.startsWith(" ")&&(G=" "+G),(this.use_regex?G.match(this.pattern)||[]:[G]).map(ke=>Array.from(this.text_encoder.encode(ke),lt=>this.byte_encoder[lt]).join(""))}}class Ge extends ge{constructor(G){super(),this.config=G,this.pattern=x(this.config.pattern,this.config.invert)}pre_tokenize_text(G,ye){return this.pattern===null?[]:this.config.invert?G.match(this.pattern)||[]:this.config.behavior?.toLowerCase()==="removed"?G.split(this.pattern).filter(Pe=>Pe):m(G,this.pattern)}}class qe extends ge{constructor(G){super(),this.config=G,this.pattern=new RegExp(`[^${P}]+|[${P}]+`,"gu")}pre_tokenize_text(G,ye){return G.match(this.pattern)||[]}}class it extends ge{constructor(G){super(),this.config=G;const ye=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(ye,"gu")}pre_tokenize_text(G,ye){return G.match(this.pattern)||[]}}class Ve extends r.Callable{constructor(G){super(),this.config=G}static fromConfig(G){if(G===null)return null;switch(G.type){case"TemplateProcessing":return new Ne(G);case"ByteLevel":return new Ye(G);case"RobertaProcessing":return new _t(G);case"BertProcessing":return new Be(G);case"Sequence":return new kt(G);default:throw new Error(`Unknown PostProcessor type: ${G.type}`)}}post_process(G,...ye){throw Error("post_process should be implemented in subclass.")}_call(G,...ye){return this.post_process(G,...ye)}}class Be extends Ve{constructor(G){super(G),this.cls=G.cls[0],this.sep=G.sep[0]}post_process(G,ye=null,{add_special_tokens:Pe=!0}={}){Pe&&(G=(0,o.mergeArrays)([this.cls],G,[this.sep]));let ke=new Array(G.length).fill(0);if(ye!==null){const lt=Pe&&this instanceof _t?[this.sep]:[],ot=Pe?[this.sep]:[];G=(0,o.mergeArrays)(G,lt,ye,ot),ke=(0,o.mergeArrays)(ke,new Array(ye.length+lt.length+ot.length).fill(1))}return{tokens:G,token_type_ids:ke}}}class _t extends Be{}class Ne extends Ve{constructor(G){super(G),this.single=G.single,this.pair=G.pair}post_process(G,ye=null,{add_special_tokens:Pe=!0}={}){const ke=ye===null?this.single:this.pair;let lt=[],ot=[];for(const Kt of ke)"SpecialToken"in Kt?Pe&&(lt.push(Kt.SpecialToken.id),ot.push(Kt.SpecialToken.type_id)):"Sequence"in Kt&&(Kt.Sequence.id==="A"?(lt=(0,o.mergeArrays)(lt,G),ot=(0,o.mergeArrays)(ot,new Array(G.length).fill(Kt.Sequence.type_id))):Kt.Sequence.id==="B"&&(lt=(0,o.mergeArrays)(lt,ye),ot=(0,o.mergeArrays)(ot,new Array(ye.length).fill(Kt.Sequence.type_id))));return{tokens:lt,token_type_ids:ot}}}class Ye extends Ve{post_process(G,ye=null){return ye&&(G=(0,o.mergeArrays)(G,ye)),{tokens:G}}}class kt extends Ve{constructor(G){super(G),this.processors=G.processors.map(ye=>Ve.fromConfig(ye))}post_process(G,ye=null,Pe={}){let ke;for(const lt of this.processors)if(lt instanceof Ye)G=lt.post_process(G).tokens,ye&&(ye=lt.post_process(ye).tokens);else{const ot=lt.post_process(G,ye,Pe);G=ot.tokens,ke=ot.token_type_ids}return{tokens:G,token_type_ids:ke}}}class mt extends r.Callable{constructor(G){super(),this.config=G,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=G.trim_offsets}static fromConfig(G){if(G===null)return null;switch(G.type){case"WordPiece":return new st(G);case"Metaspace":return new Ct(G);case"ByteLevel":return new He(G);case"Replace":return new Tt(G);case"ByteFallback":return new Ke(G);case"Fuse":return new dt(G);case"Strip":return new wt(G);case"Sequence":return new qt(G);case"CTC":return new Bt(G);case"BPEDecoder":return new xn(G);default:throw new Error(`Unknown Decoder type: ${G.type}`)}}_call(G){return this.decode(G)}decode(G){return this.decode_chain(G).join("")}decode_chain(G){throw Error("`decode_chain` should be implemented in subclass.")}}class Tt extends mt{decode_chain(G){const ye=x(this.config.pattern);return ye===null?G:G.map(Pe=>Pe.replaceAll(ye,this.config.content))}}class Ke extends mt{constructor(G){super(G),this.text_decoder=new TextDecoder}decode_chain(G){const ye=[];let Pe=[];for(const ke of G){let lt=null;if(ke.length===6&&ke.startsWith("<0x")&&ke.endsWith(">")){const ot=parseInt(ke.slice(3,5),16);isNaN(ot)||(lt=ot)}if(lt!==null)Pe.push(lt);else{if(Pe.length>0){const ot=this.text_decoder.decode(Uint8Array.from(Pe));ye.push(ot),Pe=[]}ye.push(ke)}}if(Pe.length>0){const ke=this.text_decoder.decode(Uint8Array.from(Pe));ye.push(ke),Pe=[]}return ye}}class dt extends mt{decode_chain(G){return[G.join("")]}}class wt extends mt{constructor(G){super(G),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(G){return G.map(ye=>{let Pe=0;for(let lt=0;lt<this.start&&ye[lt]===this.content;++lt){Pe=lt+1;continue}let ke=ye.length;for(let lt=0;lt<this.stop;++lt){const ot=ye.length-lt-1;if(ye[ot]===this.content){ke=ot;continue}else break}return ye.slice(Pe,ke)})}}class st extends mt{constructor(G){super(G),this.cleanup=G.cleanup}decode_chain(G){return G.map((ye,Pe)=>(Pe!==0&&(ye.startsWith(this.config.prefix)?ye=ye.replace(this.config.prefix,""):ye=" "+ye),this.cleanup&&(ye=I(ye)),ye))}}class He extends mt{constructor(G){super(G),this.byte_decoder=ae,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(G){const ye=G.join(""),Pe=new Uint8Array([...ye].map(lt=>this.byte_decoder[lt]));return this.text_decoder.decode(Pe)}decode_chain(G){const ye=[];let Pe=[];for(const ke of G)this.added_tokens.find(lt=>lt.content===ke)!==void 0?(Pe.length>0&&(ye.push(this.convert_tokens_to_string(Pe)),Pe=[]),ye.push(ke)):Pe.push(ke);return Pe.length>0&&ye.push(this.convert_tokens_to_string(Pe)),ye}}class Bt extends mt{constructor(G){super(G),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(G){if(G.length===0)return"";const ye=[G[0]];for(let lt=1;lt<G.length;++lt)G[lt]!==ye.at(-1)&&ye.push(G[lt]);let ke=ye.filter(lt=>lt!==this.pad_token).join("");return this.cleanup&&(ke=I(ke).replaceAll(this.word_delimiter_token," ").trim()),ke}decode_chain(G){return[this.convert_tokens_to_string(G)]}}class qt extends mt{constructor(G){super(G),this.decoders=G.decoders.map(ye=>mt.fromConfig(ye))}decode_chain(G){return this.decoders.reduce((ye,Pe)=>Pe.decode_chain(ye),G)}}class xn extends mt{constructor(G){super(G),this.suffix=this.config.suffix}decode_chain(G){return G.map((ye,Pe)=>ye.replaceAll(this.suffix,Pe===G.length-1?"":" "))}}class At extends mt{decode_chain(G){let ye="";for(let Pe=1;Pe<G.length;Pe+=2)ye+=G[Pe];return[ye]}}class nn extends ge{constructor(G){super(),this.replacement=G.replacement,this.strRep=G.str_rep||this.replacement,this.prepend_scheme=G.prepend_scheme??"always"}pre_tokenize_text(G,{section_index:ye=void 0}={}){let Pe=G.replaceAll(" ",this.strRep);return!Pe.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&ye===0)&&(Pe=this.strRep+Pe),[Pe]}}class Ct extends mt{constructor(G){super(G),this.replacement=G.replacement}decode_chain(G){const ye=[];for(let Pe=0;Pe<G.length;++Pe){let ke=G[Pe].replaceAll(this.replacement," ");Pe==0&&ke.startsWith(" ")&&(ke=ke.substring(1)),ye.push(ke)}return ye}}class rt extends le{constructor(G){super(G),this.charsmap=G.precompiled_charsmap}normalize(G){return G=G.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),G=G.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),G.includes("")?G=G.split("").map(Pe=>Pe.normalize("NFKC")).join(""):G=G.normalize("NFKC"),G}}class hn extends ge{constructor(G){super(),this.tokenizers=G.pretokenizers.map(ye=>ge.fromConfig(ye))}pre_tokenize_text(G,ye){return this.tokenizers.reduce((Pe,ke)=>ke.pre_tokenize(Pe,ye),[G])}}class En extends ge{constructor(G){super()}pre_tokenize_text(G,ye){return G.match(/\w+|[^\w\s]+/g)||[]}}class tr extends ge{constructor(G){super()}pre_tokenize_text(G,ye){return C(G)}}class Rt extends ge{constructor(G){super(),this.config=G,this.pattern=x(this.config.pattern),this.content=this.config.content}pre_tokenize_text(G,ye){return this.pattern===null?[G]:[G.replaceAll(this.pattern,this.config.content)]}}class Kn extends ge{constructor(G){super(),this._length=G.length}pre_tokenize_text(G,ye){const Pe=[];for(let ke=0;ke<G.length;ke+=this._length)Pe.push(G.slice(ke,ke+this._length));return Pe}}const xr=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function mr(Qe,G,ye,Pe){for(const ke of Object.keys(Qe)){const lt=G-Qe[ke].length,ot=ye(ke),Kt=new Array(lt).fill(ot);Qe[ke]=Pe==="right"?(0,o.mergeArrays)(Qe[ke],Kt):(0,o.mergeArrays)(Kt,Qe[ke])}}function qa(Qe,G){for(const ye of Object.keys(Qe))Qe[ye].length=G}class on extends r.Callable{return_token_type_ids=!1;padding_side="right";constructor(G,ye){super(),this.config=ye,this.normalizer=le.fromConfig(G.normalizer),this.pre_tokenizer=ge.fromConfig(G.pre_tokenizer),this.model=ie.fromConfig(G.model,ye),this.post_processor=Ve.fromConfig(G.post_processor),this.decoder=mt.fromConfig(G.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const Pe of G.added_tokens){const ke=new N(Pe);this.added_tokens.push(ke),this.model.tokens_to_ids.set(ke.content,ke.id),this.model.vocab[ke.id]=ke.content,ke.special&&(this.special_tokens.push(ke.content),this.all_special_ids.push(ke.id))}if(this.additional_special_tokens=ye.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new d.DictionarySplitter(this.added_tokens.map(Pe=>Pe.content)),this.added_tokens_map=new Map(this.added_tokens.map(Pe=>[Pe.content,Pe])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=ye.model_max_length,this.remove_space=ye.remove_space,this.clean_up_tokenization_spaces=ye.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=ye.do_lowercase_and_remove_accent??!1,ye.padding_side&&(this.padding_side=ye.padding_side),this.add_bos_token=ye.add_bos_token,this.add_eos_token=ye.add_eos_token,this.legacy=!1,this.chat_template=ye.chat_template??null,Array.isArray(this.chat_template)){const Pe=Object.create(null);for(const{name:ke,template:lt}of this.chat_template){if(typeof ke!="string"||typeof lt!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');Pe[ke]=lt}this.chat_template=Pe}this._compiled_template_cache=new Map}getToken(...G){for(const ye of G){const Pe=this.config[ye];if(Pe)if(typeof Pe=="object"){if(Pe.__type==="AddedToken")return Pe.content;throw Error(`Unknown token: ${Pe}`)}else return Pe}return null}static async from_pretrained(G,{progress_callback:ye=null,config:Pe=null,cache_dir:ke=null,local_files_only:lt=!1,revision:ot="main",legacy:Kt=null}={}){const Ht=await h(G,{progress_callback:ye,config:Pe,cache_dir:ke,local_files_only:lt,revision:ot,legacy:Kt});return new this(...Ht)}_call(G,{text_pair:ye=null,add_special_tokens:Pe=!0,padding:ke=!1,truncation:lt=null,max_length:ot=null,return_tensor:Kt=!0,return_token_type_ids:Ht=null}={}){const Xt=Array.isArray(G);let zt;if(Xt){if(G.length===0)throw Error("text array must be non-empty");if(ye!==null){if(Array.isArray(ye)){if(G.length!==ye.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");zt=G.map((mn,or)=>this._encode_plus(mn,{text_pair:ye[or],add_special_tokens:Pe,return_token_type_ids:Ht}))}else zt=G.map(mn=>this._encode_plus(mn,{add_special_tokens:Pe,return_token_type_ids:Ht}))}else{if(G==null)throw Error("text may not be null or undefined");if(Array.isArray(ye))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");zt=[this._encode_plus(G,{text_pair:ye,add_special_tokens:Pe,return_token_type_ids:Ht})]}if(ot===null?ot=this.model_max_length:lt===null&&(ke===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),ot=this.model_max_length):ke===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),lt=!0)),ke===!0&&(ot=Math.min((0,l.max)(zt.map(mn=>mn.input_ids.length))[0],ot??1/0)),ot=Math.min(ot,this.model_max_length??1/0),ke||lt)for(let mn=0;mn<zt.length;++mn)zt[mn].input_ids.length!==ot&&(zt[mn].input_ids.length>ot?lt&&qa(zt[mn],ot):ke&&mr(zt[mn],ot,or=>or==="input_ids"?this.pad_token_id:0,this.padding_side));const bn={};if(Kt){if(!(ke&&lt)&&zt.some(or=>{for(const ta of Object.keys(or))if(or[ta].length!==zt[0][ta]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const mn=[zt.length,zt[0].input_ids.length];for(const or of Object.keys(zt[0]))bn[or]=new u.Tensor("int64",BigInt64Array.from(zt.flatMap(ta=>ta[or]).map(BigInt)),mn)}else{for(const mn of Object.keys(zt[0]))bn[mn]=zt.map(or=>or[mn]);if(!Xt)for(const mn of Object.keys(bn))bn[mn]=bn[mn][0]}return bn}_encode_text(G){if(G===null)return null;const ye=this.added_tokens_splitter.split(G);for(let ke=0;ke<ye.length;++ke){const lt=this.added_tokens_map.get(ye[ke]);lt&&(lt.lstrip&&ke>0&&(ye[ke-1]=ye[ke-1].trimEnd()),lt.rstrip&&ke<ye.length-1&&(ye[ke+1]=ye[ke+1].trimStart()))}return ye.flatMap((ke,lt)=>{if(ke.length===0)return[];if(this.added_tokens_map.has(ke))return[ke];if(this.remove_space===!0&&(ke=ke.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ke=S(ke)),this.normalizer!==null&&(ke=this.normalizer(ke)),ke.length===0)return[];const ot=this.pre_tokenizer!==null?this.pre_tokenizer(ke,{section_index:lt}):[ke];return this.model(ot)})}_encode_plus(G,{text_pair:ye=null,add_special_tokens:Pe=!0,return_token_type_ids:ke=null}={}){const{tokens:lt,token_type_ids:ot}=this._tokenize_helper(G,{pair:ye,add_special_tokens:Pe}),Kt=this.model.convert_tokens_to_ids(lt),Ht={input_ids:Kt,attention_mask:new Array(Kt.length).fill(1)};return(ke??this.return_token_type_ids)&&ot&&(Ht.token_type_ids=ot),Ht}_tokenize_helper(G,{pair:ye=null,add_special_tokens:Pe=!1}={}){const ke=this._encode_text(G),lt=this._encode_text(ye);return this.post_processor?this.post_processor(ke,lt,{add_special_tokens:Pe}):{tokens:(0,o.mergeArrays)(ke??[],lt??[])}}tokenize(G,{pair:ye=null,add_special_tokens:Pe=!1}={}){return this._tokenize_helper(G,{pair:ye,add_special_tokens:Pe}).tokens}encode(G,{text_pair:ye=null,add_special_tokens:Pe=!0,return_token_type_ids:ke=null}={}){return this._encode_plus(G,{text_pair:ye,add_special_tokens:Pe,return_token_type_ids:ke}).input_ids}batch_decode(G,ye={}){return G instanceof u.Tensor&&(G=G.tolist()),G.map(Pe=>this.decode(Pe,ye))}decode(G,ye={}){if(G instanceof u.Tensor&&(G=b(G)),!Array.isArray(G)||G.length===0||!(0,o.isIntegralNumber)(G[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(G,ye)}decode_single(G,{skip_special_tokens:ye=!1,clean_up_tokenization_spaces:Pe=null}){let ke=this.model.convert_ids_to_tokens(G);ye&&(ke=ke.filter(ot=>!this.special_tokens.includes(ot)));let lt=this.decoder?this.decoder(ke):ke.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(lt=lt.replaceAll(this.decoder.end_of_word_suffix," "),ye&&(lt=lt.trim())),(Pe??this.clean_up_tokenization_spaces)&&(lt=I(lt)),lt}get_chat_template({chat_template:G=null,tools:ye=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const Pe=this.chat_template;if(G!==null&&Object.hasOwn(Pe,G))G=Pe[G];else if(G===null)if(ye!==null&&"tool_use"in Pe)G=Pe.tool_use;else if("default"in Pe)G=Pe.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(Pe).sort()}.`)}else if(G===null)if(this.chat_template)G=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return G}apply_chat_template(G,{tools:ye=null,documents:Pe=null,chat_template:ke=null,add_generation_prompt:lt=!1,tokenize:ot=!0,padding:Kt=!1,truncation:Ht=!1,max_length:Xt=null,return_tensor:zt=!0,return_dict:bn=!1,tokenizer_kwargs:mn={},...or}={}){if(ke=this.get_chat_template({chat_template:ke,tools:ye}),typeof ke!="string")throw Error(`chat_template must be a string, but got ${typeof ke}`);let ta=this._compiled_template_cache.get(ke);ta===void 0&&(ta=new p.Template(ke),this._compiled_template_cache.set(ke,ta));const lr=Object.create(null);for(const Hn of xr){const Ta=this.getToken(Hn);Ta&&(lr[Hn]=Ta)}const On=ta.render({messages:G,add_generation_prompt:lt,tools:ye,documents:Pe,...lr,...or});if(ot){const Hn=this._call(On,{add_special_tokens:!1,padding:Kt,truncation:Ht,max_length:Xt,return_tensor:zt,...mn});return bn?Hn:Hn.input_ids}return On}}class wr extends on{return_token_type_ids=!0}class Qi extends on{return_token_type_ids=!0}class Xa extends on{return_token_type_ids=!0}class sa extends on{return_token_type_ids=!0}class wn extends on{return_token_type_ids=!0}class vi extends on{return_token_type_ids=!0}class B extends on{return_token_type_ids=!0}class xe extends on{return_token_type_ids=!0}class pe extends on{return_token_type_ids=!0}class we extends on{}class Se extends on{}class Xe extends on{return_token_type_ids=!0;constructor(G,ye){super(G,ye),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ht extends on{return_token_type_ids=!0}class Lt extends on{}class Qt extends on{}class jt extends on{}class gn extends on{constructor(G,ye){super(G,ye),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(Pe=>this.languageRegex.test(Pe)),this.lang_to_token=Pe=>Pe}_build_translation_inputs(G,ye,Pe){return gr(this,G,ye,Pe)}}class Gt extends gn{}class yn extends on{}class Fn extends on{}const pr="";class Vr extends on{padding_side="left";constructor(G,ye){super(G,ye),this.legacy=ye.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new nn({replacement:pr,prepend_scheme:"first"}))}_encode_text(G){if(G===null)return null;if(this.legacy||G.length===0)return super._encode_text(G);let ye=super._encode_text(pr+G.replaceAll(pr," "));return ye.length>1&&ye[0]===pr&&this.special_tokens.includes(ye[1])&&(ye=ye.slice(1)),ye}}class fr extends on{}class In extends on{}class wa extends on{}class hr extends on{}class Cr extends on{}class la extends on{}class ha extends on{}class Ma extends on{}class Pr extends on{}function gr(Qe,G,ye,Pe){if(!("language_codes"in Qe)||!Array.isArray(Qe.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Qe)||!(Qe.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Qe)||typeof Qe.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const ke=Pe.src_lang,lt=Pe.tgt_lang;if(!Qe.language_codes.includes(lt))throw new Error(`Target language code "${lt}" is not valid. Must be one of: {${Qe.language_codes.join(", ")}}`);if(ke!==void 0){if(!Qe.language_codes.includes(ke))throw new Error(`Source language code "${ke}" is not valid. Must be one of: {${Qe.language_codes.join(", ")}}`);for(const ot of Qe.post_processor.config.single)if("SpecialToken"in ot&&Qe.languageRegex.test(ot.SpecialToken.id)){ot.SpecialToken.id=Qe.lang_to_token(ke);break}}return Pe.forced_bos_token_id=Qe.model.convert_tokens_to_ids([Qe.lang_to_token(lt)])[0],Qe._call(G,ye)}class Ja extends on{constructor(G,ye){super(G,ye),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(Pe=>this.languageRegex.test(Pe)),this.lang_to_token=Pe=>Pe}_build_translation_inputs(G,ye,Pe){return gr(this,G,ye,Pe)}}class ei extends on{constructor(G,ye){super(G,ye),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(Pe=>this.languageRegex.test(Pe)).map(Pe=>Pe.slice(2,-2)),this.lang_to_token=Pe=>`__${Pe}__`}_build_translation_inputs(G,ye,Pe){return gr(this,G,ye,Pe)}}class ao extends on{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(G,{return_timestamps:ye=!1,return_language:Pe=!1,time_precision:ke=null,force_full_sequences:lt=!0}={}){if(ke===null)throw Error("Must specify time_precision");let ot=null;const Kt=ye==="word";function Ht(){return{language:ot,timestamp:[null,null],text:""}}const Xt=[];let zt=Ht(),bn=0;const mn=this.timestamp_begin,ta=mn+1500;let lr=[],On=[],Hn=!1,Ta=null;const Qa=new Set(this.all_special_ids);for(const kr of G){const nr=kr.tokens,Ar=Kt?kr.token_timestamps:null;let ni=null,ri=mn;if("stride"in kr){const[Yr,Lr,Xn]=kr.stride;if(bn-=Lr,Ta=Yr-Xn,Lr&&(ri=Lr/ke+mn),Xn)for(let _r=nr.length-1;_r>=0;--_r){const Ua=Number(nr[_r]);if(Ua>=mn){if(ni!==null&&(Ua-mn)*ke<Ta)break;ni=Ua}}}let Hr=[],Ya=[];for(let Yr=0;Yr<nr.length;++Yr){const Lr=Number(nr[Yr]);if(Qa.has(Lr)){const Xn=this.decode([Lr]),_r=g.WHISPER_LANGUAGE_MAPPING.get(Xn.slice(2,-2));if(_r!==void 0){if(ot!==null&&_r!==ot&&!ye){lr.push(Hr);const Ua=this.findLongestCommonSequence(lr)[0],ci=this.decode(Ua);zt.text=ci,Xt.push(zt),lr=[],Hr=[],zt=Ht()}ot=zt.language=_r}}else if(Lr>=mn&&Lr<=ta){const Xn=(Lr-mn)*ke+bn,_r=(0,l.round)(Xn,2);if(ni!==null&&Lr>=ni)Hn=!0;else if(Hn||lr.length>0&&Lr<ri)Hn=!1;else if(zt.timestamp[0]===null)zt.timestamp[0]=_r;else if(_r!==zt.timestamp[0]){zt.timestamp[1]=_r,lr.push(Hr),Kt&&On.push(Ya);const[Ua,ci]=this.findLongestCommonSequence(lr,On),Si=this.decode(Ua);zt.text=Si,Kt&&(zt.words=this.collateWordTimestamps(Ua,ci,ot)),Xt.push(zt),lr=[],Hr=[],On=[],Ya=[],zt=Ht()}}else if(Hr.push(Lr),Kt){let Xn=(0,l.round)(Ar[Yr]+bn,2),_r;if(Yr+1<Ar.length){_r=(0,l.round)(Ar[Yr+1]+bn,2);const Ua=this.decode([Lr]);w.test(Ua)&&(_r=(0,l.round)(Math.min(Xn+ke,_r),2))}else _r=null;Ya.push([Xn,_r])}}if("stride"in kr){const[Yr,Lr,Xn]=kr.stride;bn+=Yr-Xn}Hr.length>0?(lr.push(Hr),Kt&&On.push(Ya)):lr.every(Yr=>Yr.length===0)&&(zt=Ht(),lr=[],Hr=[],On=[],Ya=[])}if(lr.length>0){if(lt&&ye)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[kr,nr]=this.findLongestCommonSequence(lr,On),Ar=this.decode(kr);zt.text=Ar,Kt&&(zt.words=this.collateWordTimestamps(kr,nr,ot)),Xt.push(zt)}let Gr=Object.create(null);const Kr=Xt.map(kr=>kr.text).join("");if(ye||Pe){for(let kr=0;kr<Xt.length;++kr){const nr=Xt[kr];ye||delete nr.timestamp,Pe||delete nr.language}if(Kt){const kr=[];for(const nr of Xt)for(const Ar of nr.words)kr.push(Ar);Gr={chunks:kr}}else Gr={chunks:Xt}}return[Kr,Gr]}findLongestCommonSequence(G,ye=null){let Pe=G[0],ke=Pe.length,lt=[];const ot=Array.isArray(ye)&&ye.length>0;let Kt=ot?[]:null,Ht=ot?ye[0]:null;for(let Xt=1;Xt<G.length;++Xt){const zt=G[Xt];let bn=0,mn=[ke,ke,0,0];const or=zt.length;for(let Gr=1;Gr<ke+or;++Gr){const Kr=Math.max(0,ke-Gr),kr=Math.min(ke,ke+or-Gr),nr=Pe.slice(Kr,kr),Ar=Math.max(0,Gr-ke),ni=Math.min(or,Gr),ri=zt.slice(Ar,ni);if(nr.length!==ri.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let Hr;ot?Hr=nr.filter((Lr,Xn)=>Lr===ri[Xn]&&Ht[Kr+Xn]<=ye[Xt][Ar+Xn]).length:Hr=nr.filter((Lr,Xn)=>Lr===ri[Xn]).length;const Ya=Gr/1e4,Yr=Hr/Gr+Ya;Hr>1&&Yr>bn&&(bn=Yr,mn=[Kr,kr,Ar,ni])}const[ta,lr,On,Hn]=mn,Ta=Math.floor((lr+ta)/2),Qa=Math.floor((Hn+On)/2);lt.push(...Pe.slice(0,Ta)),Pe=zt.slice(Qa),ke=Pe.length,ot&&(Kt.push(...Ht.slice(0,Ta)),Ht=ye[Xt].slice(Qa))}return lt.push(...Pe),ot?(Kt.push(...Ht),[lt,Kt]):[lt,[]]}collateWordTimestamps(G,ye,Pe){const[ke,lt,ot]=this.combineTokensIntoWords(G,Pe),Kt=[];for(let Ht=0;Ht<ke.length;++Ht){const Xt=ot[Ht];Kt.push({text:ke[Ht],timestamp:[ye[Xt.at(0)][0],ye[Xt.at(-1)][1]]})}return Kt}combineTokensIntoWords(G,ye,Pe=`"'([{-`,ke=`"'.,!?:)]}`){ye=ye??"english";let lt,ot,Kt;return["chinese","japanese","thai","lao","myanmar"].includes(ye)?[lt,ot,Kt]=this.splitTokensOnUnicode(G):[lt,ot,Kt]=this.splitTokensOnSpaces(G),this.mergePunctuations(lt,ot,Kt,Pe,ke)}decode(G,ye){let Pe;return ye?.decode_with_timestamps?(G instanceof u.Tensor&&(G=b(G)),Pe=this.decodeWithTimestamps(G,ye)):Pe=super.decode(G,ye),Pe}decodeWithTimestamps(G,ye){const Pe=ye?.time_precision??.02,ke=Array.from(this.all_special_ids).at(-1)+1;let lt=[[]];for(let ot of G)if(ot=Number(ot),ot>=ke){const Kt=((ot-ke)*Pe).toFixed(2);lt.push(`<|${Kt}|>`),lt.push([])}else lt[lt.length-1].push(ot);return lt=lt.map(ot=>typeof ot=="string"?ot:super.decode(ot,ye)),lt.join("")}splitTokensOnUnicode(G){const ye=this.decode(G,{decode_with_timestamps:!0}),Pe="",ke=[],lt=[],ot=[];let Kt=[],Ht=[],Xt=0;for(let zt=0;zt<G.length;++zt){const bn=G[zt];Kt.push(bn),Ht.push(zt);const mn=this.decode(Kt,{decode_with_timestamps:!0});(!mn.includes(Pe)||ye[Xt+mn.indexOf(Pe)]===Pe)&&(ke.push(mn),lt.push(Kt),ot.push(Ht),Kt=[],Ht=[],Xt+=mn.length)}return[ke,lt,ot]}splitTokensOnSpaces(G){const[ye,Pe,ke]=this.splitTokensOnUnicode(G),lt=[],ot=[],Kt=[],Ht=new RegExp(`^[${P}]$`,"gu");for(let Xt=0;Xt<ye.length;++Xt){const zt=ye[Xt],bn=Pe[Xt],mn=ke[Xt],or=bn[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),ta=zt.startsWith(" "),lr=zt.trim(),On=Ht.test(lr);if(or||ta||On||lt.length===0)lt.push(zt),ot.push(bn),Kt.push(mn);else{const Hn=lt.length-1;lt[Hn]+=zt,ot[Hn].push(...bn),Kt[Hn].push(...mn)}}return[lt,ot,Kt]}mergePunctuations(G,ye,Pe,ke,lt){const ot=structuredClone(G),Kt=structuredClone(ye),Ht=structuredClone(Pe);let Xt=ot.length-2,zt=ot.length-1;for(;Xt>=0;)ot[Xt].startsWith(" ")&&ke.includes(ot[Xt].trim())?(ot[zt]=ot[Xt]+ot[zt],Kt[zt]=(0,o.mergeArrays)(Kt[Xt],Kt[zt]),Ht[zt]=(0,o.mergeArrays)(Ht[Xt],Ht[zt]),ot[Xt]="",Kt[Xt]=[],Ht[Xt]=[]):zt=Xt,--Xt;for(Xt=0,zt=1;zt<ot.length;)!ot[Xt].endsWith(" ")&&lt.includes(ot[zt])?(ot[Xt]+=ot[zt],Kt[Xt]=(0,o.mergeArrays)(Kt[Xt],Kt[zt]),Ht[Xt]=(0,o.mergeArrays)(Ht[Xt],Ht[zt]),ot[zt]="",Kt[zt]=[],Ht[zt]=[]):Xt=zt,++zt;return[ot.filter(bn=>bn),Kt.filter(bn=>bn.length>0),Ht.filter(bn=>bn.length>0)]}}class An extends on{}class yi extends on{}class Aa extends on{}class Wr extends on{constructor(G,ye){super(G,ye),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(Pe=>this.languageRegex.test(Pe)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(G){if(G===null)return null;const[ye,...Pe]=G.trim().split(this.languageRegex);if(Pe.length===0)return super._encode_text(ye);if(Pe.length===2){const[ke,lt]=Pe;return this.supported_language_codes.includes(ke)||console.warn(`Unsupported language code "${ke}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,o.mergeArrays)([ke],super._encode_text(lt))}}}class ga extends on{}class Dt extends on{}class Ft extends on{}class Jt extends on{}class fn extends on{}class Ei extends on{constructor(G,ye){super(G,ye),this.decoder=new At({})}}class Qr extends on{}class ti extends on{}class _o{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:Lt,DistilBertTokenizer:we,CamembertTokenizer:Se,DebertaTokenizer:wn,DebertaV2Tokenizer:vi,BertTokenizer:wr,HerbertTokenizer:B,ConvBertTokenizer:xe,RoFormerTokenizer:pe,XLMTokenizer:Xe,ElectraTokenizer:ht,MobileBertTokenizer:Xa,SqueezeBertTokenizer:sa,AlbertTokenizer:Qi,GPT2Tokenizer:Qt,BartTokenizer:jt,MBartTokenizer:gn,MBart50Tokenizer:Gt,RobertaTokenizer:yn,WhisperTokenizer:ao,CodeGenTokenizer:An,CLIPTokenizer:yi,SiglipTokenizer:Aa,MarianTokenizer:Wr,BloomTokenizer:Fn,NllbTokenizer:Ja,M2M100Tokenizer:ei,LlamaTokenizer:Vr,CodeLlamaTokenizer:fr,XLMRobertaTokenizer:In,MPNetTokenizer:wa,FalconTokenizer:hr,GPTNeoXTokenizer:Cr,EsmTokenizer:la,Wav2Vec2CTCTokenizer:ga,BlenderbotTokenizer:Dt,BlenderbotSmallTokenizer:Ft,SpeechT5Tokenizer:Jt,NougatTokenizer:fn,VitsTokenizer:Ei,Qwen2Tokenizer:ha,GemmaTokenizer:Ma,Grok1Tokenizer:Pr,CohereTokenizer:Qr,MgpstrTokenizer:ti,PreTrainedTokenizer:on};static async from_pretrained(G,{progress_callback:ye=null,config:Pe=null,cache_dir:ke=null,local_files_only:lt=!1,revision:ot="main",legacy:Kt=null}={}){const[Ht,Xt]=await h(G,{progress_callback:ye,config:Pe,cache_dir:ke,local_files_only:lt,revision:ot,legacy:Kt}),zt=Xt.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let bn=this.TOKENIZER_CLASS_MAPPING[zt];return bn||(console.warn(`Unknown tokenizer class "${zt}", attempting to construct from base class.`),bn=on),new bn(Ht,Xt)}}}),"./src/utils/audio.js":((e,t,n)=>{n.r(t),n.d(t,{RawAudio:()=>ee,hamming:()=>m,hanning:()=>h,mel_filter_bank:()=>D,read_audio:()=>p,spectrogram:()=>R,window_function:()=>U});var r=n("./src/utils/hub.js"),o=n("./src/utils/maths.js"),s=n("./src/utils/core.js"),l=n("./src/env.js"),u=n("./src/utils/tensor.js"),d=n("?7992");async function p(q,oe){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const ae=await(await(0,r.getFile)(q)).arrayBuffer(),X=new AudioContext({sampleRate:oe});typeof oe>"u"&&console.warn(`No sampling rate provided, using default of ${X.sampleRate}Hz.`);const se=await X.decodeAudioData(ae);let le;if(se.numberOfChannels===2){const be=Math.sqrt(2),Ee=se.getChannelData(0),Y=se.getChannelData(1);le=new Float32Array(Ee.length);for(let te=0;te<se.length;++te)le[te]=be*(Ee[te]+Y[te])/2}else le=se.getChannelData(0);return le}function g(q,oe){if(q<1)return new Float64Array;if(q===1)return new Float64Array([1]);const ae=1-oe,X=2*Math.PI/(q-1),se=new Float64Array(q);for(let le=0;le<q;++le)se[le]=oe-ae*Math.cos(le*X);return se}function h(q){return g(q,.5)}function m(q){return g(q,.54)}const x={htk:q=>2595*Math.log10(1+q/700),kaldi:q=>1127*Math.log(1+q/700),slaney:(q,oe=1e3,ae=15,X=27/Math.log(6.4))=>q>=oe?ae+Math.log(q/oe)*X:3*q/200};function _(q,oe="htk"){const ae=x[oe];if(!ae)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof q=="number"?ae(q):q.map(X=>ae(X))}const b={htk:q=>700*(10**(q/2595)-1),kaldi:q=>700*(Math.exp(q/1127)-1),slaney:(q,oe=1e3,ae=15,X=Math.log(6.4)/27)=>q>=ae?oe*Math.exp(X*(q-ae)):200*q/3};function I(q,oe="htk"){const ae=b[oe];if(!ae)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof q=="number"?ae(q):q.map(X=>ae(X))}function T(q,oe){const ae=Float64Array.from({length:oe.length-1},(be,Ee)=>oe[Ee+1]-oe[Ee]),X=Array.from({length:q.length},()=>new Array(oe.length));for(let be=0;be<q.length;++be){const Ee=X[be];for(let Y=0;Y<oe.length;++Y)Ee[Y]=oe[Y]-q[be]}const se=oe.length-2,le=Array.from({length:se},()=>new Array(q.length));for(let be=0;be<q.length;++be){const Ee=X[be];for(let Y=0;Y<se;++Y){const te=-Ee[Y]/ae[Y],J=Ee[Y+2]/ae[Y+1];le[Y][be]=Math.max(0,Math.min(te,J))}}return le}function S(q,oe,ae){const X=(oe-q)/(ae-1);return Float64Array.from({length:ae},(se,le)=>q+X*le)}function D(q,oe,ae,X,se,le=null,be="htk",Ee=!1){if(le!==null&&le!=="slaney")throw new Error('norm must be one of null or "slaney"');if(q<2)throw new Error(`Require num_frequency_bins: ${q} >= 2`);if(ae>X)throw new Error(`Require min_frequency: ${ae} <= max_frequency: ${X}`);const Y=_(ae,be),te=_(X,be),J=S(Y,te,oe+2);let H=I(J,be),_e;if(Ee){const Re=se/((q-1)*2);_e=_(Float64Array.from({length:q},(We,at)=>at*Re),be),H=J}else _e=S(0,Math.floor(se/2),q);const Te=T(_e,H);if(le!==null&&le==="slaney")for(let Re=0;Re<oe;++Re){const We=Te[Re],at=2/(H[Re+2]-H[Re]);for(let Oe=0;Oe<q;++Oe)We[Oe]*=at}return Te}function E(q,oe,ae){const X=new q.constructor(q.length+oe+ae),se=q.length-1;for(let le=0;le<q.length;++le)X[oe+le]=q[le];for(let le=1;le<=oe;++le)X[oe-le]=q[(0,s.calculateReflectOffset)(le,se)];for(let le=1;le<=ae;++le)X[se+oe+le]=q[(0,s.calculateReflectOffset)(se-le,se)];return X}function C(q,oe,ae,X,se){if(ae<=0)throw new Error("reference must be greater than zero");if(X<=0)throw new Error("min_value must be greater than zero");ae=Math.max(X,ae);const le=Math.log10(ae);for(let be=0;be<q.length;++be)q[be]=oe*Math.log10(Math.max(X,q[be])-le);if(se!==null){if(se<=0)throw new Error("db_range must be greater than zero");const be=(0,o.max)(q)[0]-se;for(let Ee=0;Ee<q.length;++Ee)q[Ee]=Math.max(q[Ee],be)}return q}function P(q,oe=1,ae=1e-5,X=null){return C(q,20,oe,ae,X)}function w(q,oe=1,ae=1e-10,X=null){return C(q,10,oe,ae,X)}async function R(q,oe,ae,X,{fft_length:se=null,power:le=1,center:be=!0,pad_mode:Ee="reflect",onesided:Y=!0,preemphasis:te=null,preemphasis_htk_flavor:J=!0,mel_filters:H=null,mel_floor:_e=1e-10,log_mel:Te=null,reference:Re=1,min_value:We=1e-10,db_range:at=null,remove_dc_offset:Oe=null,min_num_frames:ge=null,max_num_frames:re=null,do_pad:$e=!0,transpose:Ge=!1,mel_offset:qe=0}={}){const it=oe.length;if(se===null&&(se=ae),ae>se)throw Error(`frame_length (${ae}) may not be larger than fft_length (${se})`);if(it!==ae)throw new Error(`Length of the window (${it}) must equal frame_length (${ae})`);if(X<=0)throw new Error("hop_length must be greater than zero");if(le===null&&H!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!J)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(be)switch(Ee){case"reflect":{const st=Math.floor((se-1)/2)+1;q=E(q,st,st);break}case"constant":{const st=Math.floor(se/2),He=new q.constructor(q.length+2*st);He.set(q,st),q=He;break}default:throw new Error(`pad_mode="${Ee}" not implemented yet.`)}let Ve=Math.floor(1+Math.floor((q.length-ae)/X));ge!==null&&Ve<ge&&(Ve=ge);const Be=Y?Math.floor(se/2)+1:se;let _t=Ve,Ne=Ve;re!==null&&(re>Ve?$e&&(Ne=re):Ne=_t=re);const Ye=new o.FFT(se),kt=new Float64Array(se),mt=new Float64Array(Ye.outputBufferSize),Tt=new Float32Array(Be*Ne);for(let st=0;st<_t;++st){const He=st*X,Bt=Math.min(q.length-He,ae);Bt!==ae&&kt.fill(0,0,ae);for(let qt=0;qt<Bt;++qt)kt[qt]=q[He+qt];if(Oe){let qt=0;for(let At=0;At<Bt;++At)qt+=kt[At];const xn=qt/Bt;for(let At=0;At<Bt;++At)kt[At]-=xn}if(te!==null){for(let qt=Bt-1;qt>=1;--qt)kt[qt]-=te*kt[qt-1];kt[0]*=1-te}for(let qt=0;qt<oe.length;++qt)kt[qt]*=oe[qt];Ye.realTransform(mt,kt);for(let qt=0;qt<Be;++qt){const xn=qt<<1;Tt[qt*Ne+st]=mt[xn]**2+mt[xn+1]**2}}if(le!==null&&le!==2){const st=le/2;for(let He=0;He<Tt.length;++He)Tt[He]**=st}const Ke=H.length;let dt=await(0,u.matmul)(new u.Tensor("float32",H.flat(),[Ke,Be]),new u.Tensor("float32",Tt,[Be,Ne]));Ge&&(dt=dt.transpose(1,0));const wt=dt.data;for(let st=0;st<wt.length;++st)wt[st]=qe+Math.max(_e,wt[st]);if(le!==null&&Te!==null){const st=Math.min(wt.length,_t*Ke);switch(Te){case"log":for(let He=0;He<st;++He)wt[He]=Math.log(wt[He]);break;case"log10":for(let He=0;He<st;++He)wt[He]=Math.log10(wt[He]);break;case"dB":if(le===1)P(wt,Re,We,at);else if(le===2)w(wt,Re,We,at);else throw new Error(`Cannot use log_mel option '${Te}' with power ${le}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Te}'`)}}return dt}function U(q,oe,{periodic:ae=!0,frame_length:X=null,center:se=!0}={}){const le=ae?q+1:q;let be;switch(oe){case"boxcar":be=new Float64Array(le).fill(1);break;case"hann":case"hann_window":be=h(le);break;case"hamming":be=m(le);break;case"povey":be=h(le).map(Ee=>Math.pow(Ee,.85));break;default:throw new Error(`Unknown window type ${oe}.`)}if(ae&&(be=be.subarray(0,q)),X===null)return be;if(q>X)throw new Error(`Length of the window (${q}) may not be larger than frame_length (${X})`);return be}function N(q,oe){let ae=44;const X=new ArrayBuffer(ae+q.length*4),se=new DataView(X);ie(se,0,"RIFF"),se.setUint32(4,36+q.length*4,!0),ie(se,8,"WAVE"),ie(se,12,"fmt "),se.setUint32(16,16,!0),se.setUint16(20,3,!0),se.setUint16(22,1,!0),se.setUint32(24,oe,!0),se.setUint32(28,oe*4,!0),se.setUint16(32,4,!0),se.setUint16(34,32,!0),ie(se,36,"data"),se.setUint32(40,q.length*4,!0);for(let le=0;le<q.length;++le,ae+=4)se.setFloat32(ae,q[le],!0);return X}function ie(q,oe,ae){for(let X=0;X<ae.length;++X)q.setUint8(oe+X,ae.charCodeAt(X))}class ee{constructor(oe,ae){this.audio=oe,this.sampling_rate=ae}toWav(){return N(this.audio,this.sampling_rate)}toBlob(){const oe=this.toWav();return new Blob([oe],{type:"audio/wav"})}async save(oe){let ae;if(l.apis.IS_BROWSER_ENV){if(l.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");ae=s.saveBlob}else if(l.apis.IS_FS_AVAILABLE)ae=async(X,se)=>{let le=await se.arrayBuffer();d.writeFileSync(X,Buffer.from(le))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await ae(oe,this.toBlob())}}}),"./src/utils/constants.js":((e,t,n)=>{n.r(t),n.d(t,{CHAT_TEMPLATE_NAME:()=>d,CONFIG_NAME:()=>o,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>p,GITHUB_ISSUE_URL:()=>r,IMAGE_PROCESSOR_NAME:()=>l,PROCESSOR_NAME:()=>u});const r="https://github.com/huggingface/transformers.js/issues/new/choose",o="config.json",s="preprocessor_config.json",l=s,u="processor_config.json",d="chat_template.jinja",p="generation_config.json"}),"./src/utils/core.js":((e,t,n)=>{n.r(t),n.d(t,{calculateDimensions:()=>p,calculateReflectOffset:()=>x,count:()=>T,dispatchCallback:()=>r,escapeRegExp:()=>s,isIntegralNumber:()=>u,isNullishDimension:()=>d,isTypedArray:()=>l,len:()=>I,mergeArrays:()=>h,pick:()=>b,pop:()=>g,product:()=>m,reverseDictionary:()=>o,saveBlob:()=>_});function r(S,D){S&&S(D)}function o(S){return Object.fromEntries(Object.entries(S).map(([D,E])=>[E,D]))}function s(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(S){return S?.prototype?.__proto__?.constructor?.name==="TypedArray"}function u(S){return Number.isInteger(S)||typeof S=="bigint"}function d(S){return S==null||S===-1}function p(S){const D=[];let E=S;for(;Array.isArray(E);)D.push(E.length),E=E[0];return D}function g(S,D,E=void 0){const C=S[D];if(C!==void 0)return delete S[D],C;if(E===void 0)throw Error(`Key ${D} does not exist in object.`);return E}function h(...S){return Array.prototype.concat.apply([],S)}function m(...S){return S.reduce((D,E)=>D.flatMap(C=>E.map(P=>[C,P])))}function x(S,D){return Math.abs((S+D)%(2*D)-D)}function _(S,D){const E=URL.createObjectURL(D),C=document.createElement("a");C.href=E,C.download=S,C.click(),C.remove(),URL.revokeObjectURL(E)}function b(S,D){return Object.assign({},...D.map(E=>{if(S[E]!==void 0)return{[E]:S[E]}}))}function I(S){let D=0;for(const E of S)++D;return D}function T(S,D){let E=0;for(const C of S)C===D&&++E;return E}}),"./src/utils/data-structures.js":((e,t,n)=>{n.r(t),n.d(t,{CharTrie:()=>o,DictionarySplitter:()=>d,LRUCache:()=>p,PriorityQueue:()=>r,TokenLattice:()=>l});class r{constructor(h=(x,_)=>x>_,m=1/0){this._heap=[],this._comparator=h,this._maxSize=m}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...h){return this.extend(h)}extend(h){for(const m of h)if(this.size<this._maxSize)this._heap.push(m),this._siftUp();else{const x=this._smallest();this._comparator(m,this._heap[x])&&(this._heap[x]=m,this._siftUpFrom(x))}return this.size}pop(){const h=this.peek(),m=this.size-1;return m>0&&this._swap(0,m),this._heap.pop(),this._siftDown(),h}replace(h){const m=this.peek();return this._heap[0]=h,this._siftDown(),m}_parent(h){return(h+1>>>1)-1}_left(h){return(h<<1)+1}_right(h){return h+1<<1}_greater(h,m){return this._comparator(this._heap[h],this._heap[m])}_swap(h,m){const x=this._heap[h];this._heap[h]=this._heap[m],this._heap[m]=x}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(h){for(;h>0&&this._greater(h,this._parent(h));)this._swap(h,this._parent(h)),h=this._parent(h)}_siftDown(){let h=0;for(;this._left(h)<this.size&&this._greater(this._left(h),h)||this._right(h)<this.size&&this._greater(this._right(h),h);){const m=this._right(h)<this.size&&this._greater(this._right(h),this._left(h))?this._right(h):this._left(h);this._swap(h,m),h=m}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class o{constructor(){this.root=s.default()}extend(h){for(const m of h)this.push(m)}push(h){let m=this.root;for(const x of h){let _=m.children.get(x);_===void 0&&(_=s.default(),m.children.set(x,_)),m=_}m.isLeaf=!0}*commonPrefixSearch(h){let m=this.root;if(m===void 0)return;let x="";for(const _ of h){if(x+=_,m=m.children.get(_),m===void 0)return;m.isLeaf&&(yield x)}}}class s{constructor(h,m){this.isLeaf=h,this.children=m}static default(){return new s(!1,new Map)}}class l{constructor(h,m,x){this.chars=Array.from(h),this.len=this.chars.length,this.bosTokenId=m,this.eosTokenId=x,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const _=new u(this.bosTokenId,0,0,0,0),b=new u(this.eosTokenId,1,this.len,0,0);this.nodes.push(_.clone()),this.nodes.push(b.clone()),this.beginNodes[this.len].push(b),this.endNodes[0].push(_)}insert(h,m,x,_){const b=this.nodes.length,I=new u(_,b,h,m,x);this.beginNodes[h].push(I),this.endNodes[h+m].push(I),this.nodes.push(I)}viterbi(){const h=this.len;let m=0;for(;m<=h;){if(this.beginNodes[m].length==0)return[];for(let T of this.beginNodes[m]){T.prev=null;let S=0,D=null;for(let E of this.endNodes[m]){const C=E.backtraceScore+T.score;(D===null||C>S)&&(D=E.clone(),S=C)}if(D!==null)T.prev=D,T.backtraceScore=S;else return[]}++m}const x=[],b=this.beginNodes[h][0].prev;if(b===null)return[];let I=b.clone();for(;I.prev!==null;)x.push(I.clone()),I=I.clone().prev.clone();return x.reverse(),x}piece(h){return this.chars.slice(h.pos,h.pos+h.length).join("")}tokens(){return this.viterbi().map(m=>this.piece(m))}tokenIds(){return this.viterbi().map(m=>m.tokenId)}}class u{constructor(h,m,x,_,b){this.tokenId=h,this.nodeId=m,this.pos=x,this.length=_,this.score=b,this.prev=null,this.backtraceScore=0}clone(){const h=new u(this.tokenId,this.nodeId,this.pos,this.length,this.score);return h.prev=this.prev,h.backtraceScore=this.backtraceScore,h}}class d{constructor(h){this.trie=this._buildTrie(h)}_buildTrie(h){const m=Object.create(null);for(const x of h){let _=m;for(let b=0;b<x.length;++b)_=_[x[b]]??=Object.create(null);_.end=x}return m}split(h){const m=[],x=h.length;let _=0,b=0;for(;b<x;){let I=this.trie,T=null,S=b;for(;S<x&&(I=I[h[S]]);)I.end&&(T=I.end),++S;T?(b>_&&m.push(h.slice(_,b)),m.push(T),b+=T.length,_=b):++b}return _<x&&m.push(h.slice(_)),m}}class p{constructor(h){this.capacity=h,this.cache=new Map}get(h){if(!this.cache.has(h))return;const m=this.cache.get(h);return this.cache.delete(h),this.cache.set(h,m),m}put(h,m){this.cache.has(h)&&this.cache.delete(h),this.cache.set(h,m),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}}),"./src/utils/devices.js":((e,t,n)=>{n.r(t),n.d(t,{DEVICE_TYPES:()=>r});const r=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})}),"./src/utils/dtypes.js":((e,t,n)=>{n.r(t),n.d(t,{DATA_TYPES:()=>l,DEFAULT_DEVICE_DTYPE_MAPPING:()=>u,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>d,isWebGpuFp16Supported:()=>s});var r=n("./src/env.js"),o=n("./src/utils/devices.js");const s=(function(){let p;return async function(){if(p===void 0)if(!r.apis.IS_WEBGPU_AVAILABLE)p=!1;else try{p=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{p=!1}return p}})(),l=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),u=Object.freeze({[o.DEVICE_TYPES.wasm]:l.q8}),d=Object.freeze({[l.fp32]:"",[l.fp16]:"_fp16",[l.int8]:"_int8",[l.uint8]:"_uint8",[l.q8]:"_quantized",[l.q4]:"_q4",[l.q4f16]:"_q4f16",[l.bnb4]:"_bnb4"})}),"./src/utils/generic.js":((e,t,n)=>{n.r(t),n.d(t,{Callable:()=>r});const r=class{constructor(){let o=function(...s){return o._call(...s)};return Object.setPrototypeOf(o,new.target.prototype)}_call(...o){throw Error("Must implement _call method in subclass")}}}),"./src/utils/hub.js":((e,t,n)=>{n.r(t),n.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>u,getFile:()=>x,getModelFile:()=>S,getModelJSON:()=>E,getModelText:()=>D});var r=n("?7992"),o=n("?5af5"),s=n("./src/env.js"),l=n("./src/utils/core.js");const u=100,d={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class p{constructor(R){if(this.filePath=R,this.headers=new Headers,this.exists=r.existsSync(R),this.exists){this.status=200,this.statusText="OK";let U=r.statSync(R);this.headers.set("content-length",U.size.toString()),this.updateContentType();const N=r.createReadStream(R);this.body=new ReadableStream({start(ie){N.on("data",ee=>ie.enqueue(ee)),N.on("end",()=>ie.close()),N.on("error",ee=>ie.error(ee))},cancel(){N.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const R=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",d[R]??"application/octet-stream")}clone(){let R=new p(this.filePath);return R.exists=this.exists,R.status=this.status,R.statusText=this.statusText,R.headers=new Headers(this.headers),R}async arrayBuffer(){return(await r.promises.readFile(this.filePath)).buffer}async blob(){const R=await r.promises.readFile(this.filePath);return new Blob([R],{type:this.headers.get("content-type")})}async text(){return await r.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function g(w,R=null,U=null){let N;try{N=new URL(w)}catch{return!1}return!(R&&!R.includes(N.protocol)||U&&!U.includes(N.hostname))}const h=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function m(w){return!(!h.test(w)||w.includes("..")||w.includes("--")||w.endsWith(".git")||w.endsWith(".ipynb"))}async function x(w){if(s.env.useFS&&!g(w,["http:","https:","blob:"]))return new p(w instanceof URL?w.protocol==="file:"?w.pathname:w.toString():w);if(typeof process<"u"&&process?.release?.name==="node"){const R=!!k0?.TESTING_REMOTELY,U=s.env.version,N=new Headers;if(N.set("User-Agent",`transformers.js/${U}; is_ci/${R};`),g(w,["http:","https:"],["huggingface.co","hf.co"])){const ee=k0?.HF_TOKEN??k0?.HF_ACCESS_TOKEN;ee&&N.set("Authorization",`Bearer ${ee}`)}return fetch(w,{headers:N})}else return fetch(w)}const _={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function b(w,R,U){if(!U)return null;const N=_[w]??`Error (${w}) occurred while trying to load file`;throw Error(`${N}: "${R}".`)}class I{constructor(R){this.path=R}async match(R){let U=o.join(this.path,R),N=new p(U);if(N.exists)return N}async put(R,U,N=void 0){let ie=o.join(this.path,R);try{const ee=U.headers.get("Content-Length"),q=parseInt(ee??"0");let oe=0;await r.promises.mkdir(o.dirname(ie),{recursive:!0});const ae=r.createWriteStream(ie),X=U.body.getReader();for(;;){const{done:se,value:le}=await X.read();if(se)break;await new Promise((Ee,Y)=>{ae.write(le,te=>{if(te){Y(te);return}Ee()})}),oe+=le.length;const be=q?oe/q*100:0;N?.({progress:be,loaded:oe,total:q})}ae.close()}catch(ee){try{await r.promises.unlink(ie)}catch{}throw ee}}}async function T(w,...R){for(let U of R)try{let N=await w.match(U);if(N)return N}catch{continue}}async function S(w,R,U=!0,N={},ie=!1){if(!s.env.allowLocalModels){if(N.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,l.dispatchCallback)(N.progress_callback,{status:"initiate",name:w,file:R});let ee;if(!ee&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");ee=s.env.customCache}if(!ee&&s.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{ee=await caches.open("transformers-cache")}catch(_e){console.warn("An error occurred while opening the browser cache:",_e)}}if(!ee&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");ee=new I(N.cache_dir??s.env.cacheDir)}const q=N.revision??"main",oe=P(w,R),ae=m(w),X=ae?P(s.env.localModelPath,oe):oe,se=P(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",w).replaceAll("{revision}",encodeURIComponent(q)),R);let le;const be=ee instanceof I?q==="main"?oe:P(w,q,R):se;let Ee=!1,Y;ee&&(Y=await T(ee,X,be));const te=Y!==void 0;if(Y===void 0){if(s.env.allowLocalModels)if(g(oe,["http:","https:"])){if(N.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${oe}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${oe}.`)}else try{Y=await x(X),le=X}catch(Te){console.warn(`Unable to load from local path "${X}": "${Te}"`)}if(Y===void 0||Y.status===404){if(N.local_files_only||!s.env.allowRemoteModels){if(U)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${X}".`);return null}if(!ae)throw Error(`Local file missing at "${X}" and download aborted due to invalid model ID "${w}".`);if(Y=await x(se),Y.status!==200)return b(Y.status,se,U);le=be}Ee=ee&&typeof Response<"u"&&Y instanceof Response&&Y.status===200}(0,l.dispatchCallback)(N.progress_callback,{status:"download",name:w,file:R});let J;if(!(s.apis.IS_NODE_ENV&&ie)){let _e;N.progress_callback?te&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(_e=new Uint8Array(await Y.arrayBuffer()),(0,l.dispatchCallback)(N.progress_callback,{status:"progress",name:w,file:R,progress:100,loaded:_e.length,total:_e.length})):_e=await C(Y,Te=>{(0,l.dispatchCallback)(N.progress_callback,{status:"progress",name:w,file:R,...Te})}):_e=new Uint8Array(await Y.arrayBuffer()),J=_e}if(Ee&&le&&await ee.match(le)===void 0)if(J)await ee.put(le,new Response(J,{headers:Y.headers})).catch(_e=>{console.warn(`Unable to add response to browser cache: ${_e}.`)});else{const _e=N.progress_callback?Te=>(0,l.dispatchCallback)(N.progress_callback,{status:"progress",name:w,file:R,...Te}):void 0;await ee.put(le,Y,_e)}if((0,l.dispatchCallback)(N.progress_callback,{status:"done",name:w,file:R}),J){if(!s.apis.IS_NODE_ENV&&ie)throw new Error("Cannot return path in a browser environment.");return J}if(Y instanceof p)return Y.filePath;const H=await ee?.match(le);if(H instanceof p)return H.filePath;if(H instanceof Response)return new Uint8Array(await H.arrayBuffer());if(typeof H=="string")return H;throw new Error("Unable to get model file path or buffer.")}async function D(w,R,U=!0,N={}){const ie=await S(w,R,U,N,!1);return ie===null?null:new TextDecoder("utf-8").decode(ie)}async function E(w,R,U=!0,N={}){const ie=await D(w,R,U,N);return ie===null?{}:JSON.parse(ie)}async function C(w,R){const U=w.headers.get("Content-Length");U===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let N=parseInt(U??"0"),ie=new Uint8Array(N),ee=0;const q=w.body.getReader();async function oe(){const{done:ae,value:X}=await q.read();if(ae)return;const se=ee+X.length;if(se>N){N=se;const be=new Uint8Array(N);be.set(ie),ie=be}ie.set(X,ee),ee=se;const le=ee/N*100;return R({progress:le,loaded:ee,total:N}),oe()}return await oe(),ie}function P(...w){return w=w.map((R,U)=>(U&&(R=R.replace(new RegExp("^/"),"")),U!==w.length-1&&(R=R.replace(new RegExp("/$"),"")),R)),w.join("/")}}),"./src/utils/image.js":((e,t,n)=>{n.r(t),n.d(t,{RawImage:()=>_,load_image:()=>b});var r=n("./src/utils/core.js"),o=n("./src/utils/hub.js"),s=n("./src/env.js"),l=n("./src/utils/tensor.js"),u=n("?2b25");let d,p,g;const h=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(h)d=(I,T)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(I,T)},g=self.createImageBitmap,p=self.ImageData;else if(u)g=async I=>{const S=(await I.metadata()).channels,{data:D,info:E}=await I.rotate().raw().toBuffer({resolveWithObject:!0}),C=new _(new Uint8ClampedArray(D),E.width,E.height,E.channels);return S!==void 0&&S!==E.channels&&C.convert(S),C};else throw new Error("Unable to load image processing library.");const m={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},x=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class _{constructor(T,S,D,E){this.data=T,this.width=S,this.height=D,this.channels=E}get size(){return[this.width,this.height]}static async read(T){if(T instanceof _)return T;if(typeof T=="string"||T instanceof URL)return await this.fromURL(T);if(T instanceof Blob)return await this.fromBlob(T);if(typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&T instanceof OffscreenCanvas)return this.fromCanvas(T);throw new Error(`Unsupported input type: ${typeof T}`)}static fromCanvas(T){if(!h)throw new Error("fromCanvas() is only supported in browser environments.");const D=T.getContext("2d").getImageData(0,0,T.width,T.height).data;return new _(D,T.width,T.height,4)}static async fromURL(T){const S=await(0,o.getFile)(T);if(S.status!==200)throw new Error(`Unable to read image from "${T}" (${S.status} ${S.statusText})`);const D=await S.blob();return this.fromBlob(D)}static async fromBlob(T){if(h){const S=await g(T),D=d(S.width,S.height).getContext("2d");return D.drawImage(S,0,0),new this(D.getImageData(0,0,S.width,S.height).data,S.width,S.height,4)}else{const S=u(await T.arrayBuffer());return await g(S)}}static fromTensor(T,S="CHW"){if(T.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${T.dims.length} dimensions.`);if(S==="CHW")T=T.transpose(1,2,0);else if(S!=="HWC")throw new Error(`Unsupported channel format: ${S}`);if(!(T.data instanceof Uint8ClampedArray||T.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${T.type}`);switch(T.dims[2]){case 1:case 2:case 3:case 4:return new _(T.data,T.dims[1],T.dims[0],T.dims[2]);default:throw new Error(`Unsupported number of channels: ${T.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const T=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let S=0,D=0;S<this.data.length;S+=this.channels){const E=this.data[S],C=this.data[S+1],P=this.data[S+2];T[D++]=Math.round(.2989*E+.587*C+.114*P)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const T=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let S=0,D=0;S<this.data.length;++S)T[D++]=this.data[S],T[D++]=this.data[S],T[D++]=this.data[S];break;case 4:for(let S=0,D=0;S<this.data.length;S+=4)T[D++]=this.data[S],T[D++]=this.data[S+1],T[D++]=this.data[S+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const T=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let S=0,D=0;S<this.data.length;++S)T[D++]=this.data[S],T[D++]=this.data[S],T[D++]=this.data[S],T[D++]=255;break;case 3:for(let S=0,D=0;S<this.data.length;S+=3)T[D++]=this.data[S],T[D++]=this.data[S+1],T[D++]=this.data[S+2],T[D++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,4)}putAlpha(T){if(T.width!==this.width||T.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${T.width}x${T.height}`);if(T.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${T.channels}`);const S=this.data,D=T.data,E=this.width*this.height;if(this.channels===3){const C=new Uint8ClampedArray(E*4);for(let P=0,w=0,R=0;P<E;++P)C[R++]=S[w++],C[R++]=S[w++],C[R++]=S[w++],C[R++]=D[P];return this._update(C,this.width,this.height,4)}else if(this.channels===4){for(let C=0;C<E;++C)S[4*C+3]=D[C];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(T,S,{resample:D=2}={}){if(this.width===T&&this.height===S)return this;let E=m[D]??D;const C=(0,r.isNullishDimension)(T),P=(0,r.isNullishDimension)(S);if(C&&P)return this;if(C?T=S/this.height*this.width:P&&(S=T/this.width*this.height),h){const w=this.channels,R=this.toCanvas(),U=d(T,S).getContext("2d");return U.drawImage(R,0,0,T,S),new _(U.getImageData(0,0,T,S).data,T,S,4).convert(w)}else{let w=this.toSharp();switch(E){case"box":case"hamming":(E==="box"||E==="hamming")&&(console.warn(`Resampling method ${E} is not yet supported. Using bilinear instead.`),E="bilinear");case"nearest":case"bilinear":case"bicubic":w=w.affine([T/this.width,0,0,S/this.height],{interpolator:E});break;case"lanczos":w=w.resize({width:T,height:S,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${E} is not supported.`)}return await g(w)}}async pad([T,S,D,E]){if(T=Math.max(T,0),S=Math.max(S,0),D=Math.max(D,0),E=Math.max(E,0),T===0&&S===0&&D===0&&E===0)return this;if(h){const C=this.channels,P=this.toCanvas(),w=this.width+T+S,R=this.height+D+E,U=d(w,R).getContext("2d");return U.drawImage(P,0,0,this.width,this.height,T,D,this.width,this.height),new _(U.getImageData(0,0,w,R).data,w,R,4).convert(C)}else{const C=this.toSharp().extend({left:T,right:S,top:D,bottom:E});return await g(C)}}async crop([T,S,D,E]){if(T=Math.max(T,0),S=Math.max(S,0),D=Math.min(D,this.width-1),E=Math.min(E,this.height-1),T===0&&S===0&&D===this.width-1&&E===this.height-1)return this;const C=D-T+1,P=E-S+1;if(h){const w=this.channels,R=this.toCanvas(),U=d(C,P).getContext("2d");return U.drawImage(R,T,S,C,P,0,0,C,P),new _(U.getImageData(0,0,C,P).data,C,P,4).convert(w)}else{const w=this.toSharp().extract({left:T,top:S,width:C,height:P});return await g(w)}}async center_crop(T,S){if(this.width===T&&this.height===S)return this;const D=(this.width-T)/2,E=(this.height-S)/2;if(h){const C=this.channels,P=this.toCanvas(),w=d(T,S).getContext("2d");let R=0,U=0,N=0,ie=0;return D>=0?R=D:N=-D,E>=0?U=E:ie=-E,w.drawImage(P,R,U,T,S,N,ie,T,S),new _(w.getImageData(0,0,T,S).data,T,S,4).convert(C)}else{let C=this.toSharp();if(D>=0&&E>=0)C=C.extract({left:Math.floor(D),top:Math.floor(E),width:T,height:S});else if(D<=0&&E<=0){const P=Math.floor(-E),w=Math.floor(-D);C=C.extend({top:P,left:w,right:T-this.width-w,bottom:S-this.height-P})}else{let P=[0,0],w=0;E<0?(P[0]=Math.floor(-E),P[1]=S-this.height-P[0]):w=Math.floor(E);let R=[0,0],U=0;D<0?(R[0]=Math.floor(-D),R[1]=T-this.width-R[0]):U=Math.floor(D),C=C.extend({top:P[0],bottom:P[1],left:R[0],right:R[1]}).extract({left:U,top:w,width:T,height:S})}return await g(C)}}async toBlob(T="image/png",S=1){if(!h)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:T,quality:S})}toTensor(T="CHW"){let S=new l.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(T!=="HWC")if(T==="CHW")S=S.permute(2,0,1);else throw new Error(`Unsupported channel format: ${T}`);return S}toCanvas(){if(!h)throw new Error("toCanvas() is only supported in browser environments.");const T=this.clone().rgba(),S=d(T.width,T.height),D=new p(T.data,T.width,T.height);return S.getContext("2d").putImageData(D,0,0),S}split(){const{data:T,width:S,height:D,channels:E}=this,C=T.constructor,P=T.length/E,w=Array.from({length:E},()=>new C(P));for(let R=0;R<P;++R){const U=E*R;for(let N=0;N<E;++N)w[N][R]=T[U+N]}return w.map(R=>new _(R,S,D,1))}_update(T,S,D,E=null){return this.data=T,this.width=S,this.height=D,E!==null&&(this.channels=E),this}clone(){return new _(this.data.slice(),this.width,this.height,this.channels)}convert(T){if(this.channels===T)return this;switch(T){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(T){if(h){if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const S=T.split(".").pop().toLowerCase(),D=x.get(S)??"image/png",E=await this.toBlob(D);(0,r.saveBlob)(T,E)}else{if(s.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(T);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(h)throw new Error("toSharp() is only supported in server-side environments.");return u(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const b=_.read.bind(_)}),"./src/utils/maths.js":((e,t,n)=>{n.r(t),n.d(t,{FFT:()=>b,bankers_round:()=>S,cos_sim:()=>d,dot:()=>u,dynamic_time_warping:()=>D,interpolate_data:()=>r,log_softmax:()=>l,magnitude:()=>p,max:()=>h,medianFilter:()=>I,min:()=>g,permute_data:()=>o,round:()=>T,softmax:()=>s});function r(E,[C,P,w],[R,U],N="bilinear",ie=!1){const ee=U/w,q=R/P,oe=new E.constructor(R*U*C),ae=P*w,X=R*U;for(let se=0;se<R;++se)for(let le=0;le<U;++le){const be=se*U+le,Ee=(le+.5)/ee-.5,Y=(se+.5)/q-.5;let te=Math.floor(Ee),J=Math.floor(Y);const H=Math.min(te+1,w-1),_e=Math.min(J+1,P-1);te=Math.max(te,0),J=Math.max(J,0);const Te=Ee-te,Re=Y-J,We=(1-Te)*(1-Re),at=Te*(1-Re),Oe=(1-Te)*Re,ge=Te*Re,re=J*w,$e=_e*w,Ge=re+te,qe=re+H,it=$e+te,Ve=$e+H;for(let Be=0;Be<C;++Be){const _t=Be*ae;oe[Be*X+be]=We*E[_t+Ge]+at*E[_t+qe]+Oe*E[_t+it]+ge*E[_t+Ve]}}return oe}function o(E,C,P){const w=new Array(P.length),R=new Array(P.length);for(let ie=P.length-1,ee=1;ie>=0;--ie)R[ie]=ee,w[ie]=C[P[ie]],ee*=w[ie];const U=P.map((ie,ee)=>R[P.indexOf(ee)]),N=new E.constructor(E.length);for(let ie=0;ie<E.length;++ie){let ee=0;for(let q=C.length-1,oe=ie;q>=0;--q)ee+=oe%C[q]*U[q],oe=Math.floor(oe/C[q]);N[ee]=E[ie]}return[N,w]}function s(E){const C=h(E)[0],P=E.map(U=>Math.exp(U-C)),w=P.reduce((U,N)=>U+N,0);return P.map(U=>U/w)}function l(E){const C=h(E)[0];let P=0;for(let U=0;U<E.length;++U)P+=Math.exp(E[U]-C);const w=Math.log(P);return E.map(U=>U-C-w)}function u(E,C){let P=0;for(let w=0;w<E.length;++w)P+=E[w]*C[w];return P}function d(E,C){const P=u(E,C),w=p(E),R=p(C);return P/(w*R)}function p(E){return Math.sqrt(E.reduce((C,P)=>C+P*P,0))}function g(E){if(E.length===0)throw Error("Array must not be empty");let C=E[0],P=0;for(let w=1;w<E.length;++w)E[w]<C&&(C=E[w],P=w);return[C,P]}function h(E){if(E.length===0)throw Error("Array must not be empty");let C=E[0],P=0;for(let w=1;w<E.length;++w)E[w]>C&&(C=E[w],P=w);return[C,P]}function m(E){return E>0&&(E&E-1)===0}class x{constructor(C){if(this.size=C|0,this.size<=1||!m(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=C<<1,this.table=new Float64Array(this.size*2);for(let w=0;w<this.table.length;w+=2){const R=Math.PI*w/this.size;this.table[w]=Math.cos(R),this.table[w+1]=-Math.sin(R)}let P=0;for(let w=1;this.size>w;w<<=1)++P;this._width=P%2===0?P-1:P,this._bitrev=new Int32Array(1<<this._width);for(let w=0;w<this._bitrev.length;++w){this._bitrev[w]=0;for(let R=0;R<this._width;R+=2){const U=this._width-R-2;this._bitrev[w]|=(w>>>R&3)<<U}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(C,P){const w=P||new Array(C.length>>>1);for(let R=0;R<C.length;R+=2)w[R>>>1]=C[R];return w}toComplexArray(C,P){const w=P||this.createComplexArray();for(let R=0;R<w.length;R+=2)w[R]=C[R>>>1],w[R+1]=0;return w}transform(C,P){if(C===P)throw new Error("Input and output buffers must be different");this._transform4(C,P,1)}realTransform(C,P){if(C===P)throw new Error("Input and output buffers must be different");this._realTransform4(C,P,1)}inverseTransform(C,P){if(C===P)throw new Error("Input and output buffers must be different");this._transform4(C,P,-1);for(let w=0;w<C.length;++w)C[w]/=this.size}_transform4(C,P,w){const R=this._csize;let N=1<<this._width,ie=R/N<<1,ee,q;const oe=this._bitrev;if(ie===4)for(ee=0,q=0;ee<R;ee+=ie,++q){const X=oe[q];this._singleTransform2(P,C,ee,X,N)}else for(ee=0,q=0;ee<R;ee+=ie,++q){const X=oe[q];this._singleTransform4(P,C,ee,X,N,w)}const ae=this.table;for(N>>=2;N>=2;N>>=2){ie=R/N<<1;const X=ie>>>2;for(ee=0;ee<R;ee+=ie){const se=ee+X-1;for(let le=ee,be=0;le<se;le+=2,be+=N){const Ee=le,Y=Ee+X,te=Y+X,J=te+X,H=C[Ee],_e=C[Ee+1],Te=C[Y],Re=C[Y+1],We=C[te],at=C[te+1],Oe=C[J],ge=C[J+1],re=ae[be],$e=w*ae[be+1],Ge=Te*re-Re*$e,qe=Te*$e+Re*re,it=ae[2*be],Ve=w*ae[2*be+1],Be=We*it-at*Ve,_t=We*Ve+at*it,Ne=ae[3*be],Ye=w*ae[3*be+1],kt=Oe*Ne-ge*Ye,mt=Oe*Ye+ge*Ne,Tt=H+Be,Ke=_e+_t,dt=H-Be,wt=_e-_t,st=Ge+kt,He=qe+mt,Bt=w*(Ge-kt),qt=w*(qe-mt);C[Ee]=Tt+st,C[Ee+1]=Ke+He,C[Y]=dt+qt,C[Y+1]=wt-Bt,C[te]=Tt-st,C[te+1]=Ke-He,C[J]=dt-qt,C[J+1]=wt+Bt}}}}_singleTransform2(C,P,w,R,U){const N=C[R],ie=C[R+1],ee=C[R+U],q=C[R+U+1];P[w]=N+ee,P[w+1]=ie+q,P[w+2]=N-ee,P[w+3]=ie-q}_singleTransform4(C,P,w,R,U,N){const ie=U*2,ee=U*3,q=C[R],oe=C[R+1],ae=C[R+U],X=C[R+U+1],se=C[R+ie],le=C[R+ie+1],be=C[R+ee],Ee=C[R+ee+1],Y=q+se,te=oe+le,J=q-se,H=oe-le,_e=ae+be,Te=X+Ee,Re=N*(ae-be),We=N*(X-Ee);P[w]=Y+_e,P[w+1]=te+Te,P[w+2]=J+We,P[w+3]=H-Re,P[w+4]=Y-_e,P[w+5]=te-Te,P[w+6]=J-We,P[w+7]=H+Re}_realTransform4(C,P,w){const R=this._csize;let N=1<<this._width,ie=R/N<<1,ee,q;const oe=this._bitrev;if(ie===4)for(ee=0,q=0;ee<R;ee+=ie,++q){const se=oe[q];this._singleRealTransform2(P,C,ee,se>>>1,N>>>1)}else for(ee=0,q=0;ee<R;ee+=ie,++q){const se=oe[q];this._singleRealTransform4(P,C,ee,se>>>1,N>>>1,w)}const ae=this.table;for(N>>=2;N>=2;N>>=2){ie=R/N<<1;const se=ie>>>1,le=se>>>1,be=le>>>1;for(ee=0;ee<R;ee+=ie)for(let Ee=0,Y=0;Ee<=be;Ee+=2,Y+=N){const te=ee+Ee,J=te+le,H=J+le,_e=H+le,Te=C[te],Re=C[te+1],We=C[J],at=C[J+1],Oe=C[H],ge=C[H+1],re=C[_e],$e=C[_e+1],Ge=Te,qe=Re,it=ae[Y],Ve=w*ae[Y+1],Be=We*it-at*Ve,_t=We*Ve+at*it,Ne=ae[2*Y],Ye=w*ae[2*Y+1],kt=Oe*Ne-ge*Ye,mt=Oe*Ye+ge*Ne,Tt=ae[3*Y],Ke=w*ae[3*Y+1],dt=re*Tt-$e*Ke,wt=re*Ke+$e*Tt,st=Ge+kt,He=qe+mt,Bt=Ge-kt,qt=qe-mt,xn=Be+dt,At=_t+wt,nn=w*(Be-dt),Ct=w*(_t-wt);if(C[te]=st+xn,C[te+1]=He+At,C[J]=Bt+Ct,C[J+1]=qt-nn,Ee===0){C[H]=st-xn,C[H+1]=He-At;continue}if(Ee===be)continue;const rt=ee+le-Ee,hn=ee+se-Ee;C[rt]=Bt-w*Ct,C[rt+1]=-qt-w*nn,C[hn]=st-w*xn,C[hn+1]=-He+w*At}}const X=R>>>1;for(let se=2;se<X;se+=2)C[R-se]=C[se],C[R-se+1]=-C[se+1]}_singleRealTransform2(C,P,w,R,U){const N=C[R],ie=C[R+U];P[w]=N+ie,P[w+1]=0,P[w+2]=N-ie,P[w+3]=0}_singleRealTransform4(C,P,w,R,U,N){const ie=U*2,ee=U*3,q=C[R],oe=C[R+U],ae=C[R+ie],X=C[R+ee],se=q+ae,le=q-ae,be=oe+X,Ee=N*(oe-X);P[w]=se+be,P[w+1]=0,P[w+2]=le,P[w+3]=-Ee,P[w+4]=se-be,P[w+5]=0,P[w+6]=le,P[w+7]=Ee}}class _{constructor(C){const P=2*(C-1),w=2*(2*C-1),R=2**Math.ceil(Math.log2(w));this.bufferSize=R,this._a=P;const U=new Float64Array(w),N=new Float64Array(R);this._chirpBuffer=new Float64Array(R),this._buffer1=new Float64Array(R),this._buffer2=new Float64Array(R),this._outBuffer1=new Float64Array(R),this._outBuffer2=new Float64Array(R);const ie=-2*Math.PI/C,ee=Math.cos(ie),q=Math.sin(ie);for(let oe=0;oe<w>>1;++oe){const ae=(oe+1-C)**2/2,X=Math.sqrt(ee**2+q**2)**ae,se=ae*Math.atan2(q,ee),le=2*oe;U[le]=X*Math.cos(se),U[le+1]=X*Math.sin(se),N[le]=U[le],N[le+1]=-U[le+1]}this._slicedChirpBuffer=U.subarray(P,w),this._f=new x(R>>1),this._f.transform(this._chirpBuffer,N)}_transform(C,P,w){const R=this._buffer1,U=this._buffer2,N=this._outBuffer1,ie=this._outBuffer2,ee=this._chirpBuffer,q=this._slicedChirpBuffer,oe=this._a;if(w)for(let ae=0;ae<q.length;ae+=2){const X=ae+1,se=ae>>1,le=P[se];R[ae]=le*q[ae],R[X]=le*q[X]}else for(let ae=0;ae<q.length;ae+=2){const X=ae+1;R[ae]=P[ae]*q[ae]-P[X]*q[X],R[X]=P[ae]*q[X]+P[X]*q[ae]}this._f.transform(N,R);for(let ae=0;ae<ee.length;ae+=2){const X=ae+1;U[ae]=N[ae]*ee[ae]-N[X]*ee[X],U[X]=N[ae]*ee[X]+N[X]*ee[ae]}this._f.inverseTransform(ie,U);for(let ae=0;ae<ie.length;ae+=2){const X=ie[ae+oe],se=ie[ae+oe+1],le=q[ae],be=q[ae+1];C[ae]=X*le-se*be,C[ae+1]=X*be+se*le}}transform(C,P){this._transform(C,P,!1)}realTransform(C,P){this._transform(C,P,!0)}}class b{constructor(C){this.fft_length=C,this.isPowerOfTwo=m(C),this.isPowerOfTwo?(this.fft=new x(C),this.outputBufferSize=2*C):(this.fft=new _(C),this.outputBufferSize=this.fft.bufferSize)}realTransform(C,P){this.fft.realTransform(C,P)}transform(C,P){this.fft.transform(C,P)}}function I(E,C){if(C%2===0||C<=0)throw new Error("Window size must be a positive odd number");const P=new E.constructor(E.length),w=new E.constructor(C),R=Math.floor(C/2);for(let U=0;U<E.length;++U){let N=0;for(let ie=-R;ie<=R;++ie){let ee=U+ie;ee<0?ee=Math.abs(ee):ee>=E.length&&(ee=2*(E.length-1)-ee),w[N++]=E[ee]}w.sort(),P[U]=w[R]}return P}function T(E,C){const P=Math.pow(10,C);return Math.round(E*P)/P}function S(E){const C=Math.round(E);return Math.abs(E)%1===.5?C%2===0?C:C-1:C}function D(E){const C=E.length,P=E[0].length,w=[C+1,P+1],R=Array.from({length:w[0]},()=>Array(w[1]).fill(1/0));R[0][0]=0;const U=Array.from({length:w[0]},()=>Array(w[1]).fill(-1));for(let oe=1;oe<w[1];++oe)for(let ae=1;ae<w[0];++ae){const X=R[ae-1][oe-1],se=R[ae-1][oe],le=R[ae][oe-1];let be,Ee;X<se&&X<le?(be=X,Ee=0):se<X&&se<le?(be=se,Ee=1):(be=le,Ee=2),R[ae][oe]=E[ae-1][oe-1]+be,U[ae][oe]=Ee}for(let oe=0;oe<w[1];++oe)U[0][oe]=2;for(let oe=0;oe<w[0];++oe)U[oe][0]=1;let N=C,ie=P,ee=[],q=[];for(;N>0||ie>0;)switch(ee.push(N-1),q.push(ie-1),U[N][ie]){case 0:--N,--ie;break;case 1:--N;break;case 2:--ie;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${N}, ${ie}]. Please file a bug report.`)}return ee.reverse(),q.reverse(),[ee,q]}}),"./src/utils/tensor.js":((e,t,n)=>{n.r(t),n.d(t,{DataTypeMap:()=>l,Tensor:()=>u,cat:()=>P,full:()=>q,full_like:()=>oe,interpolate:()=>g,interpolate_4d:()=>h,layer_norm:()=>S,matmul:()=>m,mean:()=>N,mean_pooling:()=>T,ones:()=>ae,ones_like:()=>X,permute:()=>p,quantize_embeddings:()=>Y,rand:()=>be,randn:()=>Ee,rfft:()=>x,slice:()=>I,stack:()=>w,std_mean:()=>U,topk:()=>_,zeros:()=>se,zeros_like:()=>le});var r=n("./src/utils/maths.js"),o=n("./src/backends/onnx.js"),s=n("./src/ops/registry.js");const l=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class u{get dims(){return this.ort_tensor.dims}set dims(J){this.ort_tensor.dims=J}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}ort_tensor;constructor(...J){return(0,o.isONNXTensor)(J[0])?this.ort_tensor=J[0]:this.ort_tensor=new o.Tensor(J[0],J[1],J[2]),new Proxy(this,{get:(H,_e)=>{if(typeof _e=="string"){let Te=Number(_e);if(Number.isInteger(Te))return H._getitem(Te)}return H[_e]},set:(H,_e,Te)=>H[_e]=Te})}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[J,...H]=this.dims;if(H.length>0){const _e=H.reduce((Te,Re)=>Te*Re);for(let Te=0;Te<J;++Te)yield this._subarray(Te,_e,H)}else yield*this.data}_getitem(J){const[H,..._e]=this.dims;if(J=C(J,H),_e.length>0){const Te=_e.reduce((Re,We)=>Re*We);return this._subarray(J,Te,_e)}else return new u(this.type,[this.data[J]],_e)}indexOf(J){const H=this.data;for(let _e=0;_e<H.length;++_e)if(H[_e]==J)return _e;return-1}_subarray(J,H,_e){const Te=J*H,Re=(J+1)*H,We="subarray"in this.data?this.data.subarray(Te,Re):this.data.slice(Te,Re);return new u(this.type,We,_e)}item(){const J=this.data;if(J.length!==1)throw new Error(`a Tensor with ${J.length} elements cannot be converted to Scalar`);return J[0]}tolist(){return d(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const J=this.data;for(let H=0;H<J.length;++H)J[H]=1/(1+Math.exp(-J[H]));return this}map(J){return this.clone().map_(J)}map_(J){const H=this.data;for(let _e=0;_e<H.length;++_e)H[_e]=J(H[_e],_e,H);return this}mul(J){return this.clone().mul_(J)}mul_(J){const H=this.data;for(let _e=0;_e<H.length;++_e)H[_e]*=J;return this}div(J){return this.clone().div_(J)}div_(J){const H=this.data;for(let _e=0;_e<H.length;++_e)H[_e]/=J;return this}add(J){return this.clone().add_(J)}add_(J){const H=this.data;for(let _e=0;_e<H.length;++_e)H[_e]+=J;return this}sub(J){return this.clone().sub_(J)}sub_(J){const H=this.data;for(let _e=0;_e<H.length;++_e)H[_e]-=J;return this}clone(){return new u(this.type,this.data.slice(),this.dims.slice())}slice(...J){const H=[],_e=[];for(let re=0;re<this.dims.length;++re){let $e=J[re];if($e==null)_e.push([0,this.dims[re]]),H.push(this.dims[re]);else if(typeof $e=="number")$e=C($e,this.dims[re],re),_e.push([$e,$e+1]);else if(Array.isArray($e)&&$e.length===2){let[Ge,qe]=$e;if(Ge=Ge===null?0:C(Ge,this.dims[re],re,!1),qe=qe===null?this.dims[re]:C(qe,this.dims[re],re,!1),Ge>qe)throw new Error(`Invalid slice: ${$e}`);const it=[Math.max(Ge,0),Math.min(qe,this.dims[re])];_e.push(it),H.push(it[1]-it[0])}else throw new Error(`Invalid slice: ${$e}`)}const Te=_e.map(([re,$e])=>$e-re),Re=Te.reduce((re,$e)=>re*$e),We=this.data,at=new We.constructor(Re),Oe=this.stride();let ge=!0;for(let re=1;re<Te.length;++re)if(_e[re][0]!==0||_e[re][1]!==this.dims[re]){ge=!1;break}if(ge){const re=_e[0][0]*Oe[0],$e=_e[0][1]*Oe[0];if(ArrayBuffer.isView(We))at.set(We.subarray(re,$e));else if(Array.isArray(We)){const Ge=We.slice(re,$e);for(let qe=0;qe<Ge.length;++qe)at[qe]=Ge[qe]}else throw new Error("Unsupported data type for slicing")}else for(let re=0;re<Re;++re){let $e=0;for(let Ge=Te.length-1,qe=re;Ge>=0;--Ge){const it=Te[Ge];$e+=(qe%it+_e[Ge][0])*Oe[Ge],qe=Math.floor(qe/it)}at[re]=We[$e]}return new u(this.type,at,H)}permute(...J){return p(this,J)}transpose(...J){return this.permute(...J)}sum(J=null,H=!1){return this.norm(1,J,H)}norm(J="fro",H=null,_e=!1){if(J==="fro")J=2;else if(typeof J=="string")throw Error(`Unsupported norm: ${J}`);const Te=this.data,Re=(ge,re)=>ge+re**J;if(H===null){const ge=Te.reduce(Re,0)**(1/J);return new u(this.type,[ge],[])}const[We,at,Oe]=R(Re,this,H,_e);if(J!==1)for(let ge=0;ge<at.length;++ge)at[ge]=at[ge]**(1/J);return new u(We,at,Oe)}normalize_(J=2,H=1){H=C(H,this.dims.length);const _e=this.norm(J,H,!0),Te=this.data,Re=_e.data;for(let We=0;We<Te.length;++We){let at=0;for(let Oe=this.dims.length-1,ge=We,re=1;Oe>=0;--Oe){const $e=this.dims[Oe];if(Oe!==H){const Ge=ge%$e;at+=Ge*re,re*=this.dims[Oe]}ge=Math.floor(ge/$e)}Te[We]/=Re[at]}return this}normalize(J=2,H=1){return this.clone().normalize_(J,H)}stride(){return ie(this.dims)}squeeze(J=null){return new u(this.type,this.data,D(this.dims,J))}squeeze_(J=null){return this.dims=D(this.dims,J),this}unsqueeze(J=null){return new u(this.type,this.data,E(this.dims,J))}unsqueeze_(J=null){return this.dims=E(this.dims,J),this}flatten_(J=0,H=-1){H=(H+this.dims.length)%this.dims.length;let _e=this.dims.slice(0,J),Te=this.dims.slice(J,H+1),Re=this.dims.slice(H+1);return this.dims=[..._e,Te.reduce((We,at)=>We*at,1),...Re],this}flatten(J=0,H=-1){return this.clone().flatten_(J,H)}view(...J){let H=-1;for(let Te=0;Te<J.length;++Te)if(J[Te]===-1){if(H!==-1)throw new Error("Only one dimension can be inferred");H=Te}const _e=this.data;if(H!==-1){const Te=J.reduce((Re,We,at)=>at!==H?Re*We:Re,1);J[H]=_e.length/Te}return new u(this.type,_e,J)}neg_(){const J=this.data;for(let H=0;H<J.length;++H)J[H]=-J[H];return this}neg(){return this.clone().neg_()}gt(J){const H=new Uint8Array(this.data.length),_e=this.data;for(let Te=0;Te<_e.length;++Te)H[Te]=_e[Te]>J?1:0;return new u("bool",H,this.dims)}lt(J){const H=new Uint8Array(this.data.length),_e=this.data;for(let Te=0;Te<_e.length;++Te)H[Te]=_e[Te]<J?1:0;return new u("bool",H,this.dims)}clamp_(J,H){const _e=this.data;for(let Te=0;Te<_e.length;++Te)_e[Te]=Math.min(Math.max(_e[Te],J),H);return this}clamp(J,H){return this.clone().clamp_(J,H)}round_(){const J=this.data;for(let H=0;H<J.length;++H)J[H]=Math.round(J[H]);return this}round(){return this.clone().round_()}mean(J=null,H=!1){return N(this,J,H)}min(J=null,H=!1){if(J===null){const We=(0,r.min)(this.data)[0];return new u(this.type,[We],[])}const[_e,Te,Re]=R((We,at)=>Math.min(We,at),this,J,H,1/0);return new u(_e,Te,Re)}max(J=null,H=!1){if(J===null){const We=(0,r.max)(this.data)[0];return new u(this.type,[We],[])}const[_e,Te,Re]=R((We,at)=>Math.max(We,at),this,J,H,-1/0);return new u(_e,Te,Re)}argmin(J=null,H=!1){if(J!==null)throw new Error("`dim !== null` not yet implemented.");const _e=(0,r.min)(this.data)[1];return new u("int64",[BigInt(_e)],[])}argmax(J=null,H=!1){if(J!==null)throw new Error("`dim !== null` not yet implemented.");const _e=(0,r.max)(this.data)[1];return new u("int64",[BigInt(_e)],[])}to(J){if(this.type===J)return this;if(!l.hasOwnProperty(J))throw new Error(`Unsupported type: ${J}`);let H;const _e=["int64","uint64"].includes(this.type),Te=["int64","uint64"].includes(J);return _e&&!Te?H=Number:!_e&&Te&&(["float16","float32","float64"].includes(this.type)?H=Re=>BigInt(Math.floor(Re)):H=BigInt),new u(J,l[J].from(this.data,H),this.dims)}}function d(te,J){const H=te.length,_e=J.reduce((Re,We)=>Re*We);if(H!==_e)throw Error(`cannot reshape array of size ${H} into shape (${J})`);let Te=te;for(let Re=J.length-1;Re>=0;Re--)Te=Te.reduce((We,at)=>{let Oe=We[We.length-1];return Oe.length<J[Re]?Oe.push(at):We.push([at]),We},[[]]);return Te[0]}function p(te,J){const[H,_e]=(0,r.permute_data)(te.data,te.dims,J);return new u(te.type,H,_e)}function g(te,[J,H],_e="bilinear",Te=!1){const Re=te.dims.at(-3)??1,We=te.dims.at(-2),at=te.dims.at(-1);let Oe=(0,r.interpolate_data)(te.data,[Re,We,at],[J,H],_e,Te);return new u(te.type,Oe,[Re,J,H])}async function h(te,{size:J=null,mode:H="bilinear"}={}){if(te.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!J)throw new Error("`interpolate_4d` requires a `size` argument.");let _e;if(J.length===2)_e=[...te.dims.slice(0,2),...J];else if(J.length===3)_e=[te.dims[0],...J];else if(J.length===4)_e=J;else throw new Error("`size` must be of length 2, 3, or 4.");let Te;if(H==="nearest")Te=await s.TensorOpRegistry.nearest_interpolate_4d;else if(H==="bilinear")Te=await s.TensorOpRegistry.bilinear_interpolate_4d;else if(H==="bicubic")Te=await s.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${H}`);const Re=new u("int64",new BigInt64Array(_e.map(BigInt)),[_e.length]);return await Te({x:te,s:Re})}async function m(te,J){return await(await s.TensorOpRegistry.matmul)({a:te,b:J})}async function x(te,J){return await(await s.TensorOpRegistry.rfft)({x:te,a:J})}async function _(te,J){const H=await s.TensorOpRegistry.top_k;return J==null?J=te.dims.at(-1):J=Math.min(J,te.dims.at(-1)),await H({x:te,k:new u("int64",[BigInt(J)],[1])})}const b=te=>new u("int64",te,[te.length]);async function I(te,J,H,_e,Te){return await(await s.TensorOpRegistry.slice)({x:te,s:b(J),e:b(H),a:b(_e),t:b(Te??new Array(_e.length).fill(1))})}function T(te,J){const H=te.data,_e=J.data,Te=[te.dims[0],te.dims[2]],Re=new H.constructor(Te[0]*Te[1]),[We,at,Oe]=te.dims;let ge=0;for(let re=0;re<We;++re){const $e=re*Oe*at;for(let Ge=0;Ge<Oe;++Ge){let qe=0,it=0;const Ve=re*at,Be=$e+Ge;for(let Ne=0;Ne<at;++Ne){const Ye=Number(_e[Ve+Ne]);it+=Ye,qe+=H[Be+Ne*Oe]*Ye}const _t=qe/it;Re[ge++]=_t}}return new u(te.type,Re,Te)}function S(te,J,{eps:H=1e-5}={}){if(te.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[_e,Te]=te.dims;if(J.length!==1&&J[0]!==Te)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[Re,We]=U(te,1,0,!0),at=Re.data,Oe=We.data,ge=te.data,re=new ge.constructor(ge.length);for(let $e=0;$e<_e;++$e){const Ge=$e*Te;for(let qe=0;qe<Te;++qe){const it=Ge+qe;re[it]=(ge[it]-Oe[$e])/(at[$e]+H)}}return new u(te.type,re,te.dims)}function D(te,J){return te=te.slice(),J===null?te=te.filter(H=>H!==1):typeof J=="number"?te[J]===1&&te.splice(J,1):Array.isArray(J)&&(te=te.filter((H,_e)=>H!==1||!J.includes(_e))),te}function E(te,J){return J=C(J,te.length+1),te=te.slice(),te.splice(J,0,1),te}function C(te,J,H=null,_e=!0){if(te<-J||te>=J){if(_e)throw new Error(`IndexError: index ${te} is out of bounds for dimension${H===null?"":" "+H} with size ${J}`);return te<-J?0:J}return te<0&&(te=(te%J+J)%J),te}function P(te,J=0){J=C(J,te[0].dims.length);const H=te[0].dims.slice();H[J]=te.reduce((We,at)=>We+at.dims[J],0);const _e=H.reduce((We,at)=>We*at,1),Te=new te[0].data.constructor(_e),Re=te[0].type;if(J===0){let We=0;for(const at of te){const Oe=at.data;Te.set(Oe,We),We+=Oe.length}}else{let We=0;for(let at=0;at<te.length;++at){const{data:Oe,dims:ge}=te[at];for(let re=0;re<Oe.length;++re){let $e=0;for(let Ge=ge.length-1,qe=re,it=1;Ge>=0;--Ge){const Ve=ge[Ge];let Be=qe%Ve;Ge===J&&(Be+=We),$e+=Be*it,it*=H[Ge],qe=Math.floor(qe/Ve)}Te[$e]=Oe[re]}We+=ge[J]}}return new u(Re,Te,H)}function w(te,J=0){return P(te.map(H=>H.unsqueeze(J)),J)}function R(te,J,H=null,_e=!1,Te=null){const Re=J.data,We=J.dims;H=C(H,We.length);const at=We.slice();at[H]=1;const Oe=new Re.constructor(Re.length/We[H]);Te!==null&&Oe.fill(Te);for(let ge=0;ge<Re.length;++ge){let re=0;for(let $e=We.length-1,Ge=ge,qe=1;$e>=0;--$e){const it=We[$e];if($e!==H){const Ve=Ge%it;re+=Ve*qe,qe*=at[$e]}Ge=Math.floor(Ge/it)}Oe[re]=te(Oe[re],Re[ge],ge,re)}return _e||at.splice(H,1),[J.type,Oe,at]}function U(te,J=null,H=1,_e=!1){const Te=te.data,Re=te.dims;if(J===null){const qe=Te.reduce((_t,Ne)=>_t+Ne,0)/Te.length,it=Math.sqrt(Te.reduce((_t,Ne)=>_t+(Ne-qe)**2,0)/(Te.length-H)),Ve=new u(te.type,[qe],[]);return[new u(te.type,[it],[]),Ve]}J=C(J,Re.length);const We=N(te,J,_e),at=We.data,[Oe,ge,re]=R((Ge,qe,it,Ve)=>Ge+(qe-at[Ve])**2,te,J,_e);for(let Ge=0;Ge<ge.length;++Ge)ge[Ge]=Math.sqrt(ge[Ge]/(Re[J]-H));return[new u(Oe,ge,re),We]}function N(te,J=null,H=!1){const _e=te.dims,Te=te.data;if(J===null){const Oe=Te.reduce((ge,re)=>ge+re,0);return new u(te.type,[Oe/Te.length],[])}J=C(J,_e.length);const[Re,We,at]=R((Oe,ge)=>Oe+ge,te,J,H);if(_e[J]!==1)for(let Oe=0;Oe<We.length;++Oe)We[Oe]/=_e[J];return new u(Re,We,at)}function ie(te){const J=new Array(te.length);for(let H=te.length-1,_e=1;H>=0;--H)J[H]=_e,_e*=te[H];return J}function ee(te,J,H,_e){const Te=te.reduce((Re,We)=>Re*We,1);return new u(H,new _e(Te).fill(J),te)}function q(te,J){let H,_e;if(typeof J=="number")H="float32",_e=Float32Array;else if(typeof J=="bigint")H="int64",_e=BigInt64Array;else if(typeof J=="boolean")H="bool",_e=Uint8Array;else throw new Error(`Unsupported data type: ${typeof J}`);return ee(te,J,H,_e)}function oe(te,J){return q(te.dims,J)}function ae(te){return ee(te,1n,"int64",BigInt64Array)}function X(te){return ae(te.dims)}function se(te){return ee(te,0n,"int64",BigInt64Array)}function le(te){return se(te.dims)}function be(te){const J=te.reduce((H,_e)=>H*_e,1);return new u("float32",Float32Array.from({length:J},()=>Math.random()),te)}function Ee(te){const J=te.reduce((_e,Te)=>_e*Te,1);function H(){const _e=1-Math.random(),Te=1-Math.random();return Math.sqrt(-2*Math.log(_e))*Math.cos(2*Math.PI*Te)}return new u("float32",Float32Array.from({length:J},()=>H()),te)}function Y(te,J){if(te.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(te.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(J))throw new Error("The precision must be either 'binary' or 'ubinary'");const H=J==="binary",_e=H?"int8":"uint8",Te=H?Int8Array:Uint8Array,Re=te.data,We=new Te(Re.length/8);for(let at=0;at<Re.length;++at){const Oe=Re[at]>0?1:0,ge=Math.floor(at/8),re=at%8;We[ge]|=Oe<<7-re,H&&re===0&&(We[ge]-=128)}return new u(_e,We,[te.dims[0],te.dims[1]/8])}}),"./src/utils/video.js":((e,t,n)=>{n.r(t),n.d(t,{RawVideo:()=>l,RawVideoFrame:()=>s,load_video:()=>u});var r=n("./src/utils/image.js"),o=n("./src/env.js");class s{constructor(p,g){this.image=p,this.timestamp=g}}class l{constructor(p,g){p.length>0&&p[0]instanceof r.RawImage&&(p=p.map((h,m)=>new s(h,(m+1)/(p.length+1)*g))),this.frames=p,this.duration=g}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function u(d,{num_frames:p=null,fps:g=null}={}){if(!o.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(p==null&&g==null)throw new Error("Either num_frames or fps must be provided.");const h=[],m=document.createElement("video");if(m.crossOrigin="anonymous",m.muted=!0,typeof d=="string")m.src=d;else if(d instanceof Blob)m.src=URL.createObjectURL(d);else if(d instanceof HTMLVideoElement)m.src=d.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(D=>m.onloadedmetadata=D),m.seekable.start(0)===m.seekable.end(0)){const E=await(await fetch(m.src)).blob();m.src=URL.createObjectURL(E),await new Promise(C=>m.onloadedmetadata=C)}const x=m.duration;let _,b;p!=null?(_=p,b=p===1?0:x/(p-1)):(b=1/g,_=Math.floor(x/b));let I=[];for(let D=0;D<_;++D)I.push(p===1?x/2:D*b);const T=document.createElement("canvas");T.width=m.videoWidth,T.height=m.videoHeight;const S=T.getContext("2d",{willReadFrequently:!0});for(const D of I){m.currentTime=D,await new Promise(w=>{m.onseeked=w}),S.drawImage(m,0,0,T.width,T.height);const E=S.getImageData(0,0,T.width,T.height),C=new r.RawImage(E.data,T.width,T.height,4),P=new s(C,D);h.push(P)}return m.remove(),new l(h,x)}})},e2={};function Er(e){var t=e2[e];if(t!==void 0)return t.exports;var n=e2[e]={exports:{}};return u8[e](n,n.exports,Er),n.exports}(()=>{var e=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__,t;Er.t=function(n,r){if(r&1&&(n=this(n)),r&8||typeof n=="object"&&n&&(r&4&&n.__esModule||r&16&&typeof n.then=="function"))return n;var o=Object.create(null);Er.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var l=r&2&&n;typeof l=="object"&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach(u=>s[u]=()=>n[u]);return s.default=()=>n,Er.d(o,s),o}})();Er.d=(e,t)=>{for(var n in t)Er.o(t,n)&&!Er.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})};Er.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Er.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var A={};(()=>{Er.r(A),Er.d(A,{ASTFeatureExtractor:()=>h.ASTFeatureExtractor,ASTForAudioClassification:()=>n.ASTForAudioClassification,ASTModel:()=>n.ASTModel,ASTPreTrainedModel:()=>n.ASTPreTrainedModel,AlbertForMaskedLM:()=>n.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>n.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>n.AlbertForSequenceClassification,AlbertModel:()=>n.AlbertModel,AlbertPreTrainedModel:()=>n.AlbertPreTrainedModel,AlbertTokenizer:()=>r.AlbertTokenizer,ArceeForCausalLM:()=>n.ArceeForCausalLM,ArceeModel:()=>n.ArceeModel,ArceePreTrainedModel:()=>n.ArceePreTrainedModel,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>o.AutoConfig,AutoFeatureExtractor:()=>m.AutoFeatureExtractor,AutoImageProcessor:()=>b.AutoImageProcessor,AutoModel:()=>n.AutoModel,AutoModelForAudioClassification:()=>n.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>n.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>n.AutoModelForAudioTextToText,AutoModelForCTC:()=>n.AutoModelForCTC,AutoModelForCausalLM:()=>n.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>n.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>n.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>n.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>n.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>n.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>n.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>n.AutoModelForImageTextToText,AutoModelForImageToImage:()=>n.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>n.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>n.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>n.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>n.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>n.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>n.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>n.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>n.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>n.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>n.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>n.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>n.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>n.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>n.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>n.AutoModelForVision2Seq,AutoModelForXVector:()=>n.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>n.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>S.AutoProcessor,AutoTokenizer:()=>r.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>n.BartForConditionalGeneration,BartForSequenceClassification:()=>n.BartForSequenceClassification,BartModel:()=>n.BartModel,BartPretrainedModel:()=>n.BartPretrainedModel,BartTokenizer:()=>r.BartTokenizer,BaseModelOutput:()=>n.BaseModelOutput,BaseStreamer:()=>D.BaseStreamer,BeitFeatureExtractor:()=>_.BeitFeatureExtractor,BeitForImageClassification:()=>n.BeitForImageClassification,BeitModel:()=>n.BeitModel,BeitPreTrainedModel:()=>n.BeitPreTrainedModel,BertForMaskedLM:()=>n.BertForMaskedLM,BertForQuestionAnswering:()=>n.BertForQuestionAnswering,BertForSequenceClassification:()=>n.BertForSequenceClassification,BertForTokenClassification:()=>n.BertForTokenClassification,BertModel:()=>n.BertModel,BertPreTrainedModel:()=>n.BertPreTrainedModel,BertTokenizer:()=>r.BertTokenizer,BitImageProcessor:()=>_.BitImageProcessor,BlenderbotForConditionalGeneration:()=>n.BlenderbotForConditionalGeneration,BlenderbotModel:()=>n.BlenderbotModel,BlenderbotPreTrainedModel:()=>n.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>n.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>n.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>n.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>r.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>r.BlenderbotTokenizer,BloomForCausalLM:()=>n.BloomForCausalLM,BloomModel:()=>n.BloomModel,BloomPreTrainedModel:()=>n.BloomPreTrainedModel,BloomTokenizer:()=>r.BloomTokenizer,CLIPFeatureExtractor:()=>_.CLIPFeatureExtractor,CLIPImageProcessor:()=>_.CLIPImageProcessor,CLIPModel:()=>n.CLIPModel,CLIPPreTrainedModel:()=>n.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>n.CLIPSegForImageSegmentation,CLIPSegModel:()=>n.CLIPSegModel,CLIPSegPreTrainedModel:()=>n.CLIPSegPreTrainedModel,CLIPTextModel:()=>n.CLIPTextModel,CLIPTextModelWithProjection:()=>n.CLIPTextModelWithProjection,CLIPTokenizer:()=>r.CLIPTokenizer,CLIPVisionModel:()=>n.CLIPVisionModel,CLIPVisionModelWithProjection:()=>n.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>n.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>n.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>n.CamembertForSequenceClassification,CamembertForTokenClassification:()=>n.CamembertForTokenClassification,CamembertModel:()=>n.CamembertModel,CamembertPreTrainedModel:()=>n.CamembertPreTrainedModel,CamembertTokenizer:()=>r.CamembertTokenizer,CausalLMOutput:()=>n.CausalLMOutput,CausalLMOutputWithPast:()=>n.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>_.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>n.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>n.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>n.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>h.ClapFeatureExtractor,ClapModel:()=>n.ClapModel,ClapPreTrainedModel:()=>n.ClapPreTrainedModel,ClapTextModelWithProjection:()=>n.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>C.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>n.CodeGenForCausalLM,CodeGenModel:()=>n.CodeGenModel,CodeGenPreTrainedModel:()=>n.CodeGenPreTrainedModel,CodeGenTokenizer:()=>r.CodeGenTokenizer,CodeLlamaTokenizer:()=>r.CodeLlamaTokenizer,CohereForCausalLM:()=>n.CohereForCausalLM,CohereModel:()=>n.CohereModel,CoherePreTrainedModel:()=>n.CoherePreTrainedModel,CohereTokenizer:()=>r.CohereTokenizer,ConvBertForMaskedLM:()=>n.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>n.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>n.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>n.ConvBertForTokenClassification,ConvBertModel:()=>n.ConvBertModel,ConvBertPreTrainedModel:()=>n.ConvBertPreTrainedModel,ConvBertTokenizer:()=>r.ConvBertTokenizer,ConvNextFeatureExtractor:()=>_.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>n.ConvNextForImageClassification,ConvNextImageProcessor:()=>_.ConvNextImageProcessor,ConvNextModel:()=>n.ConvNextModel,ConvNextPreTrainedModel:()=>n.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>n.ConvNextV2ForImageClassification,ConvNextV2Model:()=>n.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>n.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>n.DFineForObjectDetection,DFineModel:()=>n.DFineModel,DFinePreTrainedModel:()=>n.DFinePreTrainedModel,DINOv3ConvNextModel:()=>n.DINOv3ConvNextModel,DINOv3ConvNextPreTrainedModel:()=>n.DINOv3ConvNextPreTrainedModel,DINOv3ViTImageProcessor:()=>_.DINOv3ViTImageProcessor,DINOv3ViTModel:()=>n.DINOv3ViTModel,DINOv3ViTPreTrainedModel:()=>n.DINOv3ViTPreTrainedModel,DPTFeatureExtractor:()=>_.DPTFeatureExtractor,DPTForDepthEstimation:()=>n.DPTForDepthEstimation,DPTImageProcessor:()=>_.DPTImageProcessor,DPTModel:()=>n.DPTModel,DPTPreTrainedModel:()=>n.DPTPreTrainedModel,DacDecoderModel:()=>n.DacDecoderModel,DacDecoderOutput:()=>n.DacDecoderOutput,DacEncoderModel:()=>n.DacEncoderModel,DacEncoderOutput:()=>n.DacEncoderOutput,DacFeatureExtractor:()=>h.DacFeatureExtractor,DacModel:()=>n.DacModel,DacPreTrainedModel:()=>n.DacPreTrainedModel,DataTypeMap:()=>d.DataTypeMap,DebertaForMaskedLM:()=>n.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>n.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>n.DebertaForSequenceClassification,DebertaForTokenClassification:()=>n.DebertaForTokenClassification,DebertaModel:()=>n.DebertaModel,DebertaPreTrainedModel:()=>n.DebertaPreTrainedModel,DebertaTokenizer:()=>r.DebertaTokenizer,DebertaV2ForMaskedLM:()=>n.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>n.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>n.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>n.DebertaV2ForTokenClassification,DebertaV2Model:()=>n.DebertaV2Model,DebertaV2PreTrainedModel:()=>n.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>r.DebertaV2Tokenizer,DecisionTransformerModel:()=>n.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>n.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>_.DeiTFeatureExtractor,DeiTForImageClassification:()=>n.DeiTForImageClassification,DeiTImageProcessor:()=>_.DeiTImageProcessor,DeiTModel:()=>n.DeiTModel,DeiTPreTrainedModel:()=>n.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>n.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>n.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>n.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>n.DepthProPreTrainedModel,DetrFeatureExtractor:()=>_.DetrFeatureExtractor,DetrForObjectDetection:()=>n.DetrForObjectDetection,DetrForSegmentation:()=>n.DetrForSegmentation,DetrImageProcessor:()=>_.DetrImageProcessor,DetrModel:()=>n.DetrModel,DetrObjectDetectionOutput:()=>n.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>n.DetrPreTrainedModel,DetrSegmentationOutput:()=>n.DetrSegmentationOutput,Dinov2ForImageClassification:()=>n.Dinov2ForImageClassification,Dinov2Model:()=>n.Dinov2Model,Dinov2PreTrainedModel:()=>n.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>n.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>n.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>n.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>n.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>n.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>n.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>n.DistilBertForTokenClassification,DistilBertModel:()=>n.DistilBertModel,DistilBertPreTrainedModel:()=>n.DistilBertPreTrainedModel,DistilBertTokenizer:()=>r.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>_.DonutFeatureExtractor,DonutImageProcessor:()=>_.DonutImageProcessor,DonutSwinModel:()=>n.DonutSwinModel,DonutSwinPreTrainedModel:()=>n.DonutSwinPreTrainedModel,EdgeTamModel:()=>n.EdgeTamModel,EfficientNetForImageClassification:()=>n.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>_.EfficientNetImageProcessor,EfficientNetModel:()=>n.EfficientNetModel,EfficientNetPreTrainedModel:()=>n.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>n.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>n.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>n.ElectraForSequenceClassification,ElectraForTokenClassification:()=>n.ElectraForTokenClassification,ElectraModel:()=>n.ElectraModel,ElectraPreTrainedModel:()=>n.ElectraPreTrainedModel,ElectraTokenizer:()=>r.ElectraTokenizer,EncodecFeatureExtractor:()=>h.EncodecFeatureExtractor,EosTokenCriteria:()=>E.EosTokenCriteria,Ernie4_5ForCausalLM:()=>n.Ernie4_5ForCausalLM,Ernie4_5Model:()=>n.Ernie4_5Model,Ernie4_5PreTrainedModel:()=>n.Ernie4_5PreTrainedModel,EsmForMaskedLM:()=>n.EsmForMaskedLM,EsmForSequenceClassification:()=>n.EsmForSequenceClassification,EsmForTokenClassification:()=>n.EsmForTokenClassification,EsmModel:()=>n.EsmModel,EsmPreTrainedModel:()=>n.EsmPreTrainedModel,EsmTokenizer:()=>r.EsmTokenizer,ExaoneForCausalLM:()=>n.ExaoneForCausalLM,ExaoneModel:()=>n.ExaoneModel,ExaonePreTrainedModel:()=>n.ExaonePreTrainedModel,FFT:()=>p.FFT,FalconForCausalLM:()=>n.FalconForCausalLM,FalconModel:()=>n.FalconModel,FalconPreTrainedModel:()=>n.FalconPreTrainedModel,FalconTokenizer:()=>r.FalconTokenizer,FastViTForImageClassification:()=>n.FastViTForImageClassification,FastViTModel:()=>n.FastViTModel,FastViTPreTrainedModel:()=>n.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>g.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>n.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>n.Florence2PreTrainedModel,Florence2Processor:()=>T.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>C.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>C.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>_.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>n.GLPNForDepthEstimation,GLPNModel:()=>n.GLPNModel,GLPNPreTrainedModel:()=>n.GLPNPreTrainedModel,GPT2LMHeadModel:()=>n.GPT2LMHeadModel,GPT2Model:()=>n.GPT2Model,GPT2PreTrainedModel:()=>n.GPT2PreTrainedModel,GPT2Tokenizer:()=>r.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>n.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>n.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>n.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>n.GPTJForCausalLM,GPTJModel:()=>n.GPTJModel,GPTJPreTrainedModel:()=>n.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>n.GPTNeoForCausalLM,GPTNeoModel:()=>n.GPTNeoModel,GPTNeoPreTrainedModel:()=>n.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>n.GPTNeoXForCausalLM,GPTNeoXModel:()=>n.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>n.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>r.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>n.Gemma2ForCausalLM,Gemma2Model:()=>n.Gemma2Model,Gemma2PreTrainedModel:()=>n.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>n.Gemma3ForCausalLM,Gemma3Model:()=>n.Gemma3Model,Gemma3PreTrainedModel:()=>n.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>h.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>n.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>n.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>T.Gemma3nProcessor,GemmaForCausalLM:()=>n.GemmaForCausalLM,GemmaModel:()=>n.GemmaModel,GemmaPreTrainedModel:()=>n.GemmaPreTrainedModel,GemmaTokenizer:()=>r.GemmaTokenizer,GlmForCausalLM:()=>n.GlmForCausalLM,GlmModel:()=>n.GlmModel,GlmPreTrainedModel:()=>n.GlmPreTrainedModel,GraniteForCausalLM:()=>n.GraniteForCausalLM,GraniteModel:()=>n.GraniteModel,GraniteMoeHybridForCausalLM:()=>n.GraniteMoeHybridForCausalLM,GraniteMoeHybridModel:()=>n.GraniteMoeHybridModel,GraniteMoeHybridPreTrainedModel:()=>n.GraniteMoeHybridPreTrainedModel,GranitePreTrainedModel:()=>n.GranitePreTrainedModel,Grok1Tokenizer:()=>r.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>n.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>_.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>n.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>T.GroundingDinoProcessor,GroupViTModel:()=>n.GroupViTModel,GroupViTPreTrainedModel:()=>n.GroupViTPreTrainedModel,HeliumForCausalLM:()=>n.HeliumForCausalLM,HeliumModel:()=>n.HeliumModel,HeliumPreTrainedModel:()=>n.HeliumPreTrainedModel,HerbertTokenizer:()=>r.HerbertTokenizer,HieraForImageClassification:()=>n.HieraForImageClassification,HieraModel:()=>n.HieraModel,HieraPreTrainedModel:()=>n.HieraPreTrainedModel,HubertForCTC:()=>n.HubertForCTC,HubertForSequenceClassification:()=>n.HubertForSequenceClassification,HubertModel:()=>n.HubertModel,HubertPreTrainedModel:()=>n.HubertPreTrainedModel,IJepaForImageClassification:()=>n.IJepaForImageClassification,IJepaModel:()=>n.IJepaModel,IJepaPreTrainedModel:()=>n.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>n.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>_.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>n.Idefics3PreTrainedModel,Idefics3Processor:()=>T.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>h.ImageFeatureExtractor,ImageMattingOutput:()=>n.ImageMattingOutput,ImageProcessor:()=>x.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>E.InterruptableStoppingCriteria,JAISLMHeadModel:()=>n.JAISLMHeadModel,JAISModel:()=>n.JAISModel,JAISPreTrainedModel:()=>n.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>_.JinaCLIPImageProcessor,JinaCLIPModel:()=>n.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>n.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>T.JinaCLIPProcessor,JinaCLIPTextModel:()=>n.JinaCLIPTextModel,JinaCLIPVisionModel:()=>n.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>n.Lfm2ForCausalLM,Lfm2Model:()=>n.Lfm2Model,Lfm2PreTrainedModel:()=>n.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>n.LiteWhisperForConditionalGeneration,Llama4ForCausalLM:()=>n.Llama4ForCausalLM,Llama4PreTrainedModel:()=>n.Llama4PreTrainedModel,LlamaForCausalLM:()=>n.LlamaForCausalLM,LlamaModel:()=>n.LlamaModel,LlamaPreTrainedModel:()=>n.LlamaPreTrainedModel,LlamaTokenizer:()=>r.LlamaTokenizer,LlavaForConditionalGeneration:()=>n.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>n.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>_.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>n.LlavaPreTrainedModel,LlavaProcessor:()=>T.LlavaProcessor,LlavaQwen2ForCausalLM:()=>n.LlavaQwen2ForCausalLM,LogitsProcessor:()=>C.LogitsProcessor,LogitsProcessorList:()=>C.LogitsProcessorList,LogitsWarper:()=>C.LogitsWarper,LongT5ForConditionalGeneration:()=>n.LongT5ForConditionalGeneration,LongT5Model:()=>n.LongT5Model,LongT5PreTrainedModel:()=>n.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>n.M2M100ForConditionalGeneration,M2M100Model:()=>n.M2M100Model,M2M100PreTrainedModel:()=>n.M2M100PreTrainedModel,M2M100Tokenizer:()=>r.M2M100Tokenizer,MBart50Tokenizer:()=>r.MBart50Tokenizer,MBartForCausalLM:()=>n.MBartForCausalLM,MBartForConditionalGeneration:()=>n.MBartForConditionalGeneration,MBartForSequenceClassification:()=>n.MBartForSequenceClassification,MBartModel:()=>n.MBartModel,MBartPreTrainedModel:()=>n.MBartPreTrainedModel,MBartTokenizer:()=>r.MBartTokenizer,MPNetForMaskedLM:()=>n.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>n.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>n.MPNetForSequenceClassification,MPNetForTokenClassification:()=>n.MPNetForTokenClassification,MPNetModel:()=>n.MPNetModel,MPNetPreTrainedModel:()=>n.MPNetPreTrainedModel,MPNetTokenizer:()=>r.MPNetTokenizer,MT5ForConditionalGeneration:()=>n.MT5ForConditionalGeneration,MT5Model:()=>n.MT5Model,MT5PreTrainedModel:()=>n.MT5PreTrainedModel,MarianMTModel:()=>n.MarianMTModel,MarianModel:()=>n.MarianModel,MarianPreTrainedModel:()=>n.MarianPreTrainedModel,MarianTokenizer:()=>r.MarianTokenizer,Mask2FormerImageProcessor:()=>_.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>_.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>n.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>_.MaskFormerImageProcessor,MaskFormerModel:()=>n.MaskFormerModel,MaskFormerPreTrainedModel:()=>n.MaskFormerPreTrainedModel,MaskedLMOutput:()=>n.MaskedLMOutput,MaxLengthCriteria:()=>E.MaxLengthCriteria,Metric3DForDepthEstimation:()=>n.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>n.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>n.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>n.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>n.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>n.MgpstrModelOutput,MgpstrPreTrainedModel:()=>n.MgpstrPreTrainedModel,MgpstrProcessor:()=>T.MgpstrProcessor,MgpstrTokenizer:()=>r.MgpstrTokenizer,MimiDecoderModel:()=>n.MimiDecoderModel,MimiDecoderOutput:()=>n.MimiDecoderOutput,MimiEncoderModel:()=>n.MimiEncoderModel,MimiEncoderOutput:()=>n.MimiEncoderOutput,MimiModel:()=>n.MimiModel,MimiPreTrainedModel:()=>n.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>C.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>C.MinNewTokensLengthLogitsProcessor,Ministral3ForCausalLM:()=>n.Ministral3ForCausalLM,Ministral3Model:()=>n.Ministral3Model,Ministral3PreTrainedModel:()=>n.Ministral3PreTrainedModel,MinistralForCausalLM:()=>n.MinistralForCausalLM,MinistralModel:()=>n.MinistralModel,MinistralPreTrainedModel:()=>n.MinistralPreTrainedModel,Mistral3ForConditionalGeneration:()=>n.Mistral3ForConditionalGeneration,MistralForCausalLM:()=>n.MistralForCausalLM,MistralModel:()=>n.MistralModel,MistralPreTrainedModel:()=>n.MistralPreTrainedModel,MobileBertForMaskedLM:()=>n.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>n.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>n.MobileBertForSequenceClassification,MobileBertModel:()=>n.MobileBertModel,MobileBertPreTrainedModel:()=>n.MobileBertPreTrainedModel,MobileBertTokenizer:()=>r.MobileBertTokenizer,MobileLLMForCausalLM:()=>n.MobileLLMForCausalLM,MobileLLMModel:()=>n.MobileLLMModel,MobileLLMPreTrainedModel:()=>n.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>_.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>n.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>n.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>_.MobileNetV1ImageProcessor,MobileNetV1Model:()=>n.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>n.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>_.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>n.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>n.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>_.MobileNetV2ImageProcessor,MobileNetV2Model:()=>n.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>n.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>_.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>n.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>n.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>_.MobileNetV3ImageProcessor,MobileNetV3Model:()=>n.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>n.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>_.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>n.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>n.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>_.MobileNetV4ImageProcessor,MobileNetV4Model:()=>n.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>n.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>_.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>n.MobileViTForImageClassification,MobileViTImageProcessor:()=>_.MobileViTImageProcessor,MobileViTModel:()=>n.MobileViTModel,MobileViTPreTrainedModel:()=>n.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>n.MobileViTV2ForImageClassification,MobileViTV2Model:()=>n.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>n.MobileViTV2PreTrainedModel,ModelOutput:()=>n.ModelOutput,ModernBertDecoderForCausalLM:()=>n.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>n.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>n.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>n.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>n.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>n.ModernBertForTokenClassification,ModernBertModel:()=>n.ModernBertModel,ModernBertPreTrainedModel:()=>n.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>n.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>h.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>n.MoonshineForConditionalGeneration,MoonshineModel:()=>n.MoonshineModel,MoonshinePreTrainedModel:()=>n.MoonshinePreTrainedModel,MoonshineProcessor:()=>T.MoonshineProcessor,MptForCausalLM:()=>n.MptForCausalLM,MptModel:()=>n.MptModel,MptPreTrainedModel:()=>n.MptPreTrainedModel,MultiModalityCausalLM:()=>n.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>n.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>n.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>n.MusicgenForConditionalGeneration,MusicgenModel:()=>n.MusicgenModel,MusicgenPreTrainedModel:()=>n.MusicgenPreTrainedModel,NanoChatForCausalLM:()=>n.NanoChatForCausalLM,NanoChatModel:()=>n.NanoChatModel,NanoChatPreTrainedModel:()=>n.NanoChatPreTrainedModel,NeoBertForMaskedLM:()=>n.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>n.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>n.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>n.NeoBertForTokenClassification,NeoBertModel:()=>n.NeoBertModel,NeoBertPreTrainedModel:()=>n.NeoBertPreTrainedModel,NllbTokenizer:()=>r.NllbTokenizer,NoBadWordsLogitsProcessor:()=>C.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>C.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>n.NomicBertModel,NomicBertPreTrainedModel:()=>n.NomicBertPreTrainedModel,NougatImageProcessor:()=>_.NougatImageProcessor,NougatTokenizer:()=>r.NougatTokenizer,OPTForCausalLM:()=>n.OPTForCausalLM,OPTModel:()=>n.OPTModel,OPTPreTrainedModel:()=>n.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>n.Olmo2ForCausalLM,Olmo2Model:()=>n.Olmo2Model,Olmo2PreTrainedModel:()=>n.Olmo2PreTrainedModel,OlmoForCausalLM:()=>n.OlmoForCausalLM,OlmoModel:()=>n.OlmoModel,OlmoPreTrainedModel:()=>n.OlmoPreTrainedModel,OpenELMForCausalLM:()=>n.OpenELMForCausalLM,OpenELMModel:()=>n.OpenELMModel,OpenELMPreTrainedModel:()=>n.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>_.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>n.OwlViTForObjectDetection,OwlViTImageProcessor:()=>_.OwlViTImageProcessor,OwlViTModel:()=>n.OwlViTModel,OwlViTPreTrainedModel:()=>n.OwlViTPreTrainedModel,OwlViTProcessor:()=>T.OwlViTProcessor,Owlv2ForObjectDetection:()=>n.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>_.Owlv2ImageProcessor,Owlv2Model:()=>n.Owlv2Model,Owlv2PreTrainedModel:()=>n.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>n.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>n.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>T.PaliGemmaProcessor,ParakeetFeatureExtractor:()=>h.ParakeetFeatureExtractor,ParakeetForCTC:()=>n.ParakeetForCTC,ParakeetPreTrainedModel:()=>n.ParakeetPreTrainedModel,PatchTSMixerForPrediction:()=>n.PatchTSMixerForPrediction,PatchTSMixerModel:()=>n.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>n.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>n.PatchTSTForPrediction,PatchTSTModel:()=>n.PatchTSTModel,PatchTSTPreTrainedModel:()=>n.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>n.Phi3ForCausalLM,Phi3Model:()=>n.Phi3Model,Phi3PreTrainedModel:()=>n.Phi3PreTrainedModel,Phi3VForCausalLM:()=>n.Phi3VForCausalLM,Phi3VImageProcessor:()=>_.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>n.Phi3VPreTrainedModel,Phi3VProcessor:()=>T.Phi3VProcessor,PhiForCausalLM:()=>n.PhiForCausalLM,PhiModel:()=>n.PhiModel,PhiPreTrainedModel:()=>n.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PixtralImageProcessor:()=>_.PixtralImageProcessor,PixtralProcessor:()=>T.PixtralProcessor,PreTrainedModel:()=>n.PreTrainedModel,PreTrainedTokenizer:()=>r.PreTrainedTokenizer,PretrainedConfig:()=>o.PretrainedConfig,PretrainedMixin:()=>n.PretrainedMixin,Processor:()=>I.Processor,PvtForImageClassification:()=>n.PvtForImageClassification,PvtImageProcessor:()=>_.PvtImageProcessor,PvtModel:()=>n.PvtModel,PvtPreTrainedModel:()=>n.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>h.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>n.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>n.PyAnnoteModel,PyAnnotePreTrainedModel:()=>n.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>T.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>n.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>n.Qwen2ForCausalLM,Qwen2Model:()=>n.Qwen2Model,Qwen2PreTrainedModel:()=>n.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>r.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>n.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>_.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>n.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>T.Qwen2VLProcessor,Qwen3ForCausalLM:()=>n.Qwen3ForCausalLM,Qwen3Model:()=>n.Qwen3Model,Qwen3PreTrainedModel:()=>n.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>n.RFDetrForObjectDetection,RFDetrModel:()=>n.RFDetrModel,RFDetrObjectDetectionOutput:()=>n.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>n.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>n.RTDetrForObjectDetection,RTDetrImageProcessor:()=>_.RTDetrImageProcessor,RTDetrModel:()=>n.RTDetrModel,RTDetrObjectDetectionOutput:()=>n.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>n.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>n.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>n.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>n.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>n.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>l.RawImage,RawVideo:()=>u.RawVideo,RawVideoFrame:()=>u.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>C.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>n.ResNetForImageClassification,ResNetModel:()=>n.ResNetModel,ResNetPreTrainedModel:()=>n.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>n.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>n.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>n.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>n.RoFormerForTokenClassification,RoFormerModel:()=>n.RoFormerModel,RoFormerPreTrainedModel:()=>n.RoFormerPreTrainedModel,RoFormerTokenizer:()=>r.RoFormerTokenizer,RobertaForMaskedLM:()=>n.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>n.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>n.RobertaForSequenceClassification,RobertaForTokenClassification:()=>n.RobertaForTokenClassification,RobertaModel:()=>n.RobertaModel,RobertaPreTrainedModel:()=>n.RobertaPreTrainedModel,RobertaTokenizer:()=>r.RobertaTokenizer,Sam2ImageProcessor:()=>_.Sam2ImageProcessor,Sam2ImageSegmentationOutput:()=>n.Sam2ImageSegmentationOutput,Sam2Model:()=>n.Sam2Model,Sam2PreTrainedModel:()=>n.Sam2PreTrainedModel,Sam2Processor:()=>T.Sam2Processor,Sam2VideoProcessor:()=>T.Sam2VideoProcessor,Sam3ImageProcessor:()=>_.Sam3ImageProcessor,Sam3TrackerModel:()=>n.Sam3TrackerModel,SamImageProcessor:()=>_.SamImageProcessor,SamImageSegmentationOutput:()=>n.SamImageSegmentationOutput,SamModel:()=>n.SamModel,SamPreTrainedModel:()=>n.SamPreTrainedModel,SamProcessor:()=>T.SamProcessor,SapiensForDepthEstimation:()=>n.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>n.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>n.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>n.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>h.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>_.SegformerFeatureExtractor,SegformerForImageClassification:()=>n.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>n.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>_.SegformerImageProcessor,SegformerModel:()=>n.SegformerModel,SegformerPreTrainedModel:()=>n.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>n.Seq2SeqLMOutput,SequenceClassifierOutput:()=>n.SequenceClassifierOutput,SiglipImageProcessor:()=>_.SiglipImageProcessor,SiglipModel:()=>n.SiglipModel,SiglipPreTrainedModel:()=>n.SiglipPreTrainedModel,SiglipTextModel:()=>n.SiglipTextModel,SiglipTokenizer:()=>r.SiglipTokenizer,SiglipVisionModel:()=>n.SiglipVisionModel,SmolLM3ForCausalLM:()=>n.SmolLM3ForCausalLM,SmolLM3Model:()=>n.SmolLM3Model,SmolLM3PreTrainedModel:()=>n.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>n.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>_.SmolVLMImageProcessor,SmolVLMProcessor:()=>T.SmolVLMProcessor,SnacDecoderModel:()=>n.SnacDecoderModel,SnacEncoderModel:()=>n.SnacEncoderModel,SnacFeatureExtractor:()=>h.SnacFeatureExtractor,SnacModel:()=>n.SnacModel,SnacPreTrainedModel:()=>n.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>h.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>n.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>n.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>n.SpeechT5HifiGan,SpeechT5Model:()=>n.SpeechT5Model,SpeechT5PreTrainedModel:()=>n.SpeechT5PreTrainedModel,SpeechT5Processor:()=>T.SpeechT5Processor,SpeechT5Tokenizer:()=>r.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>n.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>n.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>n.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>n.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>n.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>r.SqueezeBertTokenizer,StableLmForCausalLM:()=>n.StableLmForCausalLM,StableLmModel:()=>n.StableLmModel,StableLmPreTrainedModel:()=>n.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>n.Starcoder2ForCausalLM,Starcoder2Model:()=>n.Starcoder2Model,Starcoder2PreTrainedModel:()=>n.Starcoder2PreTrainedModel,StoppingCriteria:()=>E.StoppingCriteria,StoppingCriteriaList:()=>E.StoppingCriteriaList,StyleTextToSpeech2Model:()=>n.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>n.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SupertonicForConditionalGeneration:()=>n.SupertonicForConditionalGeneration,SupertonicPreTrainedModel:()=>n.SupertonicPreTrainedModel,SuppressTokensAtBeginLogitsProcessor:()=>C.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>n.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>_.Swin2SRImageProcessor,Swin2SRModel:()=>n.Swin2SRModel,Swin2SRPreTrainedModel:()=>n.Swin2SRPreTrainedModel,SwinForImageClassification:()=>n.SwinForImageClassification,SwinForSemanticSegmentation:()=>n.SwinForSemanticSegmentation,SwinModel:()=>n.SwinModel,SwinPreTrainedModel:()=>n.SwinPreTrainedModel,T5ForConditionalGeneration:()=>n.T5ForConditionalGeneration,T5Model:()=>n.T5Model,T5PreTrainedModel:()=>n.T5PreTrainedModel,T5Tokenizer:()=>r.T5Tokenizer,TableTransformerForObjectDetection:()=>n.TableTransformerForObjectDetection,TableTransformerModel:()=>n.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>n.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>n.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>C.TemperatureLogitsWarper,Tensor:()=>d.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>D.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>n.TokenClassifierOutput,TokenizerModel:()=>r.TokenizerModel,TopKLogitsWarper:()=>C.TopKLogitsWarper,TopPLogitsWarper:()=>C.TopPLogitsWarper,TrOCRForCausalLM:()=>n.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>n.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>n.UltravoxModel,UltravoxPreTrainedModel:()=>n.UltravoxPreTrainedModel,UltravoxProcessor:()=>T.UltravoxProcessor,UniSpeechForCTC:()=>n.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>n.UniSpeechForSequenceClassification,UniSpeechModel:()=>n.UniSpeechModel,UniSpeechPreTrainedModel:()=>n.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>n.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>n.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>n.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>n.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>n.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>T.VLChatProcessor,VLMImageProcessor:()=>_.VLMImageProcessor,VaultGemmaForCausalLM:()=>n.VaultGemmaForCausalLM,VaultGemmaModel:()=>n.VaultGemmaModel,VaultGemmaPreTrainedModel:()=>n.VaultGemmaPreTrainedModel,ViTFeatureExtractor:()=>_.ViTFeatureExtractor,ViTForImageClassification:()=>n.ViTForImageClassification,ViTImageProcessor:()=>_.ViTImageProcessor,ViTMAEModel:()=>n.ViTMAEModel,ViTMAEPreTrainedModel:()=>n.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>n.ViTMSNForImageClassification,ViTMSNModel:()=>n.ViTMSNModel,ViTMSNPreTrainedModel:()=>n.ViTMSNPreTrainedModel,ViTModel:()=>n.ViTModel,ViTPreTrainedModel:()=>n.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>n.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>n.VitMatteForImageMatting,VitMatteImageProcessor:()=>_.VitMatteImageProcessor,VitMattePreTrainedModel:()=>n.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>n.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>_.VitPoseImageProcessor,VitPosePreTrainedModel:()=>n.VitPosePreTrainedModel,VitsModel:()=>n.VitsModel,VitsModelOutput:()=>n.VitsModelOutput,VitsPreTrainedModel:()=>n.VitsPreTrainedModel,VitsTokenizer:()=>r.VitsTokenizer,VoxtralForConditionalGeneration:()=>n.VoxtralForConditionalGeneration,VoxtralProcessor:()=>T.VoxtralProcessor,Wav2Vec2BertForCTC:()=>n.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>n.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>n.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>n.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>r.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>h.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>n.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>n.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>n.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>n.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>n.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>T.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>T.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>n.WavLMForAudioFrameClassification,WavLMForCTC:()=>n.WavLMForCTC,WavLMForSequenceClassification:()=>n.WavLMForSequenceClassification,WavLMForXVector:()=>n.WavLMForXVector,WavLMModel:()=>n.WavLMModel,WavLMPreTrainedModel:()=>n.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>h.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>n.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>n.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>h.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>n.WhisperForConditionalGeneration,WhisperModel:()=>n.WhisperModel,WhisperPreTrainedModel:()=>n.WhisperPreTrainedModel,WhisperProcessor:()=>T.WhisperProcessor,WhisperTextStreamer:()=>D.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>C.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>r.WhisperTokenizer,XLMForQuestionAnswering:()=>n.XLMForQuestionAnswering,XLMForSequenceClassification:()=>n.XLMForSequenceClassification,XLMForTokenClassification:()=>n.XLMForTokenClassification,XLMModel:()=>n.XLMModel,XLMPreTrainedModel:()=>n.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>n.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>n.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>n.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>n.XLMRobertaForTokenClassification,XLMRobertaModel:()=>n.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>n.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>r.XLMRobertaTokenizer,XLMTokenizer:()=>r.XLMTokenizer,XLMWithLMHeadModel:()=>n.XLMWithLMHeadModel,XVectorOutput:()=>n.XVectorOutput,YolosFeatureExtractor:()=>_.YolosFeatureExtractor,YolosForObjectDetection:()=>n.YolosForObjectDetection,YolosImageProcessor:()=>_.YolosImageProcessor,YolosModel:()=>n.YolosModel,YolosObjectDetectionOutput:()=>n.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>n.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>p.bankers_round,cat:()=>d.cat,cos_sim:()=>p.cos_sim,dot:()=>p.dot,dynamic_time_warping:()=>p.dynamic_time_warping,env:()=>e.env,full:()=>d.full,full_like:()=>d.full_like,getCacheShapes:()=>o.getCacheShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>d.interpolate,interpolate_4d:()=>d.interpolate_4d,interpolate_data:()=>p.interpolate_data,is_chinese_char:()=>r.is_chinese_char,layer_norm:()=>d.layer_norm,load_image:()=>l.load_image,load_video:()=>u.load_video,log_softmax:()=>p.log_softmax,magnitude:()=>p.magnitude,matmul:()=>d.matmul,max:()=>p.max,mean:()=>d.mean,mean_pooling:()=>d.mean_pooling,medianFilter:()=>p.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>p.min,ones:()=>d.ones,ones_like:()=>d.ones_like,permute:()=>d.permute,permute_data:()=>p.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>d.quantize_embeddings,rand:()=>d.rand,randn:()=>d.randn,read_audio:()=>s.read_audio,rfft:()=>d.rfft,round:()=>p.round,slice:()=>d.slice,softmax:()=>p.softmax,spectrogram:()=>s.spectrogram,stack:()=>d.stack,std_mean:()=>d.std_mean,topk:()=>d.topk,window_function:()=>s.window_function,zeros:()=>d.zeros,zeros_like:()=>d.zeros_like});var e=Er("./src/env.js"),t=Er("./src/pipelines.js"),n=Er("./src/models.js"),r=Er("./src/tokenizers.js"),o=Er("./src/configs.js"),s=Er("./src/utils/audio.js"),l=Er("./src/utils/image.js"),u=Er("./src/utils/video.js"),d=Er("./src/utils/tensor.js"),p=Er("./src/utils/maths.js"),g=Er("./src/base/feature_extraction_utils.js"),h=Er("./src/models/feature_extractors.js"),m=Er("./src/models/auto/feature_extraction_auto.js"),x=Er("./src/base/image_processors_utils.js"),_=Er("./src/models/image_processors.js"),b=Er("./src/models/auto/image_processing_auto.js"),I=Er("./src/base/processing_utils.js"),T=Er("./src/models/processors.js"),S=Er("./src/models/auto/processing_auto.js"),D=Er("./src/generation/streamers.js"),E=Er("./src/generation/stopping_criteria.js"),C=Er("./src/generation/logits_process.js")})();A.ASTFeatureExtractor;A.ASTForAudioClassification;A.ASTModel;A.ASTPreTrainedModel;A.AlbertForMaskedLM;A.AlbertForQuestionAnswering;A.AlbertForSequenceClassification;A.AlbertModel;A.AlbertPreTrainedModel;A.AlbertTokenizer;A.ArceeForCausalLM;A.ArceeModel;A.ArceePreTrainedModel;A.AudioClassificationPipeline;A.AutoConfig;A.AutoFeatureExtractor;A.AutoImageProcessor;A.AutoModel;A.AutoModelForAudioClassification;A.AutoModelForAudioFrameClassification;A.AutoModelForAudioTextToText;A.AutoModelForCTC;A.AutoModelForCausalLM;A.AutoModelForDepthEstimation;A.AutoModelForDocumentQuestionAnswering;A.AutoModelForImageClassification;A.AutoModelForImageFeatureExtraction;A.AutoModelForImageMatting;A.AutoModelForImageSegmentation;A.AutoModelForImageTextToText;A.AutoModelForImageToImage;A.AutoModelForMaskGeneration;A.AutoModelForMaskedLM;A.AutoModelForNormalEstimation;A.AutoModelForObjectDetection;A.AutoModelForPoseEstimation;A.AutoModelForQuestionAnswering;A.AutoModelForSemanticSegmentation;A.AutoModelForSeq2SeqLM;A.AutoModelForSequenceClassification;A.AutoModelForSpeechSeq2Seq;A.AutoModelForTextToSpectrogram;A.AutoModelForTextToWaveform;A.AutoModelForTokenClassification;A.AutoModelForUniversalSegmentation;A.AutoModelForVision2Seq;A.AutoModelForXVector;A.AutoModelForZeroShotObjectDetection;A.AutoProcessor;A.AutoTokenizer;A.AutomaticSpeechRecognitionPipeline;A.BackgroundRemovalPipeline;A.BartForConditionalGeneration;A.BartForSequenceClassification;A.BartModel;A.BartPretrainedModel;A.BartTokenizer;A.BaseModelOutput;A.BaseStreamer;A.BeitFeatureExtractor;A.BeitForImageClassification;A.BeitModel;A.BeitPreTrainedModel;A.BertForMaskedLM;A.BertForQuestionAnswering;A.BertForSequenceClassification;A.BertForTokenClassification;A.BertModel;A.BertPreTrainedModel;A.BertTokenizer;A.BitImageProcessor;A.BlenderbotForConditionalGeneration;A.BlenderbotModel;A.BlenderbotPreTrainedModel;A.BlenderbotSmallForConditionalGeneration;A.BlenderbotSmallModel;A.BlenderbotSmallPreTrainedModel;A.BlenderbotSmallTokenizer;A.BlenderbotTokenizer;A.BloomForCausalLM;A.BloomModel;A.BloomPreTrainedModel;A.BloomTokenizer;A.CLIPFeatureExtractor;A.CLIPImageProcessor;A.CLIPModel;A.CLIPPreTrainedModel;A.CLIPSegForImageSegmentation;A.CLIPSegModel;A.CLIPSegPreTrainedModel;A.CLIPTextModel;A.CLIPTextModelWithProjection;A.CLIPTokenizer;A.CLIPVisionModel;A.CLIPVisionModelWithProjection;A.CamembertForMaskedLM;A.CamembertForQuestionAnswering;A.CamembertForSequenceClassification;A.CamembertForTokenClassification;A.CamembertModel;A.CamembertPreTrainedModel;A.CamembertTokenizer;A.CausalLMOutput;A.CausalLMOutputWithPast;A.ChineseCLIPFeatureExtractor;A.ChineseCLIPModel;A.ChineseCLIPPreTrainedModel;A.ClapAudioModelWithProjection;A.ClapFeatureExtractor;A.ClapModel;A.ClapPreTrainedModel;A.ClapTextModelWithProjection;A.ClassifierFreeGuidanceLogitsProcessor;A.CodeGenForCausalLM;A.CodeGenModel;A.CodeGenPreTrainedModel;A.CodeGenTokenizer;A.CodeLlamaTokenizer;A.CohereForCausalLM;A.CohereModel;A.CoherePreTrainedModel;A.CohereTokenizer;A.ConvBertForMaskedLM;A.ConvBertForQuestionAnswering;A.ConvBertForSequenceClassification;A.ConvBertForTokenClassification;A.ConvBertModel;A.ConvBertPreTrainedModel;A.ConvBertTokenizer;A.ConvNextFeatureExtractor;A.ConvNextForImageClassification;A.ConvNextImageProcessor;A.ConvNextModel;A.ConvNextPreTrainedModel;A.ConvNextV2ForImageClassification;A.ConvNextV2Model;A.ConvNextV2PreTrainedModel;A.DFineForObjectDetection;A.DFineModel;A.DFinePreTrainedModel;A.DINOv3ConvNextModel;A.DINOv3ConvNextPreTrainedModel;A.DINOv3ViTImageProcessor;A.DINOv3ViTModel;A.DINOv3ViTPreTrainedModel;A.DPTFeatureExtractor;A.DPTForDepthEstimation;A.DPTImageProcessor;A.DPTModel;A.DPTPreTrainedModel;A.DacDecoderModel;A.DacDecoderOutput;A.DacEncoderModel;A.DacEncoderOutput;A.DacFeatureExtractor;A.DacModel;A.DacPreTrainedModel;A.DataTypeMap;A.DebertaForMaskedLM;A.DebertaForQuestionAnswering;A.DebertaForSequenceClassification;A.DebertaForTokenClassification;A.DebertaModel;A.DebertaPreTrainedModel;A.DebertaTokenizer;A.DebertaV2ForMaskedLM;A.DebertaV2ForQuestionAnswering;A.DebertaV2ForSequenceClassification;A.DebertaV2ForTokenClassification;A.DebertaV2Model;A.DebertaV2PreTrainedModel;A.DebertaV2Tokenizer;A.DecisionTransformerModel;A.DecisionTransformerPreTrainedModel;A.DeiTFeatureExtractor;A.DeiTForImageClassification;A.DeiTImageProcessor;A.DeiTModel;A.DeiTPreTrainedModel;A.DepthAnythingForDepthEstimation;A.DepthAnythingPreTrainedModel;A.DepthEstimationPipeline;A.DepthProForDepthEstimation;A.DepthProPreTrainedModel;A.DetrFeatureExtractor;A.DetrForObjectDetection;A.DetrForSegmentation;A.DetrImageProcessor;A.DetrModel;A.DetrObjectDetectionOutput;A.DetrPreTrainedModel;A.DetrSegmentationOutput;A.Dinov2ForImageClassification;A.Dinov2Model;A.Dinov2PreTrainedModel;A.Dinov2WithRegistersForImageClassification;A.Dinov2WithRegistersModel;A.Dinov2WithRegistersPreTrainedModel;A.DistilBertForMaskedLM;A.DistilBertForQuestionAnswering;A.DistilBertForSequenceClassification;A.DistilBertForTokenClassification;A.DistilBertModel;A.DistilBertPreTrainedModel;A.DistilBertTokenizer;A.DocumentQuestionAnsweringPipeline;A.DonutFeatureExtractor;A.DonutImageProcessor;A.DonutSwinModel;A.DonutSwinPreTrainedModel;A.EdgeTamModel;A.EfficientNetForImageClassification;A.EfficientNetImageProcessor;A.EfficientNetModel;A.EfficientNetPreTrainedModel;A.ElectraForMaskedLM;A.ElectraForQuestionAnswering;A.ElectraForSequenceClassification;A.ElectraForTokenClassification;A.ElectraModel;A.ElectraPreTrainedModel;A.ElectraTokenizer;A.EncodecFeatureExtractor;A.EosTokenCriteria;A.Ernie4_5ForCausalLM;A.Ernie4_5Model;A.Ernie4_5PreTrainedModel;A.EsmForMaskedLM;A.EsmForSequenceClassification;A.EsmForTokenClassification;A.EsmModel;A.EsmPreTrainedModel;A.EsmTokenizer;A.ExaoneForCausalLM;A.ExaoneModel;A.ExaonePreTrainedModel;A.FFT;A.FalconForCausalLM;A.FalconModel;A.FalconPreTrainedModel;A.FalconTokenizer;A.FastViTForImageClassification;A.FastViTModel;A.FastViTPreTrainedModel;A.FeatureExtractionPipeline;A.FeatureExtractor;A.FillMaskPipeline;A.Florence2ForConditionalGeneration;A.Florence2PreTrainedModel;A.Florence2Processor;A.ForcedBOSTokenLogitsProcessor;A.ForcedEOSTokenLogitsProcessor;A.GLPNFeatureExtractor;A.GLPNForDepthEstimation;A.GLPNModel;A.GLPNPreTrainedModel;A.GPT2LMHeadModel;A.GPT2Model;A.GPT2PreTrainedModel;A.GPT2Tokenizer;A.GPTBigCodeForCausalLM;A.GPTBigCodeModel;A.GPTBigCodePreTrainedModel;A.GPTJForCausalLM;A.GPTJModel;A.GPTJPreTrainedModel;A.GPTNeoForCausalLM;A.GPTNeoModel;A.GPTNeoPreTrainedModel;A.GPTNeoXForCausalLM;A.GPTNeoXModel;A.GPTNeoXPreTrainedModel;A.GPTNeoXTokenizer;A.Gemma2ForCausalLM;A.Gemma2Model;A.Gemma2PreTrainedModel;A.Gemma3ForCausalLM;A.Gemma3Model;A.Gemma3PreTrainedModel;A.Gemma3nAudioFeatureExtractor;A.Gemma3nForConditionalGeneration;A.Gemma3nPreTrainedModel;A.Gemma3nProcessor;A.GemmaForCausalLM;A.GemmaModel;A.GemmaPreTrainedModel;A.GemmaTokenizer;A.GlmForCausalLM;A.GlmModel;A.GlmPreTrainedModel;A.GraniteForCausalLM;A.GraniteModel;A.GraniteMoeHybridForCausalLM;A.GraniteMoeHybridModel;A.GraniteMoeHybridPreTrainedModel;A.GranitePreTrainedModel;A.Grok1Tokenizer;A.GroundingDinoForObjectDetection;A.GroundingDinoImageProcessor;A.GroundingDinoPreTrainedModel;A.GroundingDinoProcessor;A.GroupViTModel;A.GroupViTPreTrainedModel;A.HeliumForCausalLM;A.HeliumModel;A.HeliumPreTrainedModel;A.HerbertTokenizer;A.HieraForImageClassification;A.HieraModel;A.HieraPreTrainedModel;A.HubertForCTC;A.HubertForSequenceClassification;A.HubertModel;A.HubertPreTrainedModel;A.IJepaForImageClassification;A.IJepaModel;A.IJepaPreTrainedModel;A.Idefics3ForConditionalGeneration;A.Idefics3ImageProcessor;A.Idefics3PreTrainedModel;A.Idefics3Processor;A.ImageClassificationPipeline;A.ImageFeatureExtractionPipeline;A.ImageFeatureExtractor;A.ImageMattingOutput;A.ImageProcessor;A.ImageSegmentationPipeline;A.ImageToImagePipeline;A.ImageToTextPipeline;A.InterruptableStoppingCriteria;A.JAISLMHeadModel;A.JAISModel;A.JAISPreTrainedModel;A.JinaCLIPImageProcessor;A.JinaCLIPModel;A.JinaCLIPPreTrainedModel;A.JinaCLIPProcessor;A.JinaCLIPTextModel;A.JinaCLIPVisionModel;A.Lfm2ForCausalLM;A.Lfm2Model;A.Lfm2PreTrainedModel;A.LiteWhisperForConditionalGeneration;A.Llama4ForCausalLM;A.Llama4PreTrainedModel;A.LlamaForCausalLM;A.LlamaModel;A.LlamaPreTrainedModel;A.LlamaTokenizer;A.LlavaForConditionalGeneration;A.LlavaOnevisionForConditionalGeneration;A.LlavaOnevisionImageProcessor;A.LlavaPreTrainedModel;A.LlavaProcessor;A.LlavaQwen2ForCausalLM;A.LogitsProcessor;A.LogitsProcessorList;A.LogitsWarper;A.LongT5ForConditionalGeneration;A.LongT5Model;A.LongT5PreTrainedModel;A.M2M100ForConditionalGeneration;A.M2M100Model;A.M2M100PreTrainedModel;A.M2M100Tokenizer;A.MBart50Tokenizer;A.MBartForCausalLM;A.MBartForConditionalGeneration;A.MBartForSequenceClassification;A.MBartModel;A.MBartPreTrainedModel;A.MBartTokenizer;A.MPNetForMaskedLM;A.MPNetForQuestionAnswering;A.MPNetForSequenceClassification;A.MPNetForTokenClassification;A.MPNetModel;A.MPNetPreTrainedModel;A.MPNetTokenizer;A.MT5ForConditionalGeneration;A.MT5Model;A.MT5PreTrainedModel;A.MarianMTModel;A.MarianModel;A.MarianPreTrainedModel;A.MarianTokenizer;A.Mask2FormerImageProcessor;A.MaskFormerFeatureExtractor;A.MaskFormerForInstanceSegmentation;A.MaskFormerImageProcessor;A.MaskFormerModel;A.MaskFormerPreTrainedModel;A.MaskedLMOutput;A.MaxLengthCriteria;A.Metric3DForDepthEstimation;A.Metric3DPreTrainedModel;A.Metric3Dv2ForDepthEstimation;A.Metric3Dv2PreTrainedModel;A.MgpstrForSceneTextRecognition;A.MgpstrModelOutput;A.MgpstrPreTrainedModel;A.MgpstrProcessor;A.MgpstrTokenizer;A.MimiDecoderModel;A.MimiDecoderOutput;A.MimiEncoderModel;A.MimiEncoderOutput;A.MimiModel;A.MimiPreTrainedModel;A.MinLengthLogitsProcessor;A.MinNewTokensLengthLogitsProcessor;A.Ministral3ForCausalLM;A.Ministral3Model;A.Ministral3PreTrainedModel;A.MinistralForCausalLM;A.MinistralModel;A.MinistralPreTrainedModel;A.Mistral3ForConditionalGeneration;A.MistralForCausalLM;A.MistralModel;A.MistralPreTrainedModel;A.MobileBertForMaskedLM;A.MobileBertForQuestionAnswering;A.MobileBertForSequenceClassification;A.MobileBertModel;A.MobileBertPreTrainedModel;A.MobileBertTokenizer;A.MobileLLMForCausalLM;A.MobileLLMModel;A.MobileLLMPreTrainedModel;A.MobileNetV1FeatureExtractor;A.MobileNetV1ForImageClassification;A.MobileNetV1ForSemanticSegmentation;A.MobileNetV1ImageProcessor;A.MobileNetV1Model;A.MobileNetV1PreTrainedModel;A.MobileNetV2FeatureExtractor;A.MobileNetV2ForImageClassification;A.MobileNetV2ForSemanticSegmentation;A.MobileNetV2ImageProcessor;A.MobileNetV2Model;A.MobileNetV2PreTrainedModel;A.MobileNetV3FeatureExtractor;A.MobileNetV3ForImageClassification;A.MobileNetV3ForSemanticSegmentation;A.MobileNetV3ImageProcessor;A.MobileNetV3Model;A.MobileNetV3PreTrainedModel;A.MobileNetV4FeatureExtractor;A.MobileNetV4ForImageClassification;A.MobileNetV4ForSemanticSegmentation;A.MobileNetV4ImageProcessor;A.MobileNetV4Model;A.MobileNetV4PreTrainedModel;A.MobileViTFeatureExtractor;A.MobileViTForImageClassification;A.MobileViTImageProcessor;A.MobileViTModel;A.MobileViTPreTrainedModel;A.MobileViTV2ForImageClassification;A.MobileViTV2Model;A.MobileViTV2PreTrainedModel;A.ModelOutput;A.ModernBertDecoderForCausalLM;A.ModernBertDecoderModel;A.ModernBertDecoderPreTrainedModel;A.ModernBertForMaskedLM;A.ModernBertForSequenceClassification;A.ModernBertForTokenClassification;A.ModernBertModel;A.ModernBertPreTrainedModel;A.Moondream1ForConditionalGeneration;A.MoonshineFeatureExtractor;A.MoonshineForConditionalGeneration;A.MoonshineModel;A.MoonshinePreTrainedModel;A.MoonshineProcessor;A.MptForCausalLM;A.MptModel;A.MptPreTrainedModel;A.MultiModalityCausalLM;A.MultiModalityPreTrainedModel;A.MusicgenForCausalLM;A.MusicgenForConditionalGeneration;A.MusicgenModel;A.MusicgenPreTrainedModel;A.NanoChatForCausalLM;A.NanoChatModel;A.NanoChatPreTrainedModel;A.NeoBertForMaskedLM;A.NeoBertForQuestionAnswering;A.NeoBertForSequenceClassification;A.NeoBertForTokenClassification;A.NeoBertModel;A.NeoBertPreTrainedModel;A.NllbTokenizer;A.NoBadWordsLogitsProcessor;A.NoRepeatNGramLogitsProcessor;A.NomicBertModel;A.NomicBertPreTrainedModel;A.NougatImageProcessor;A.NougatTokenizer;A.OPTForCausalLM;A.OPTModel;A.OPTPreTrainedModel;A.ObjectDetectionPipeline;A.Olmo2ForCausalLM;A.Olmo2Model;A.Olmo2PreTrainedModel;A.OlmoForCausalLM;A.OlmoModel;A.OlmoPreTrainedModel;A.OpenELMForCausalLM;A.OpenELMModel;A.OpenELMPreTrainedModel;A.OwlViTFeatureExtractor;A.OwlViTForObjectDetection;A.OwlViTImageProcessor;A.OwlViTModel;A.OwlViTPreTrainedModel;A.OwlViTProcessor;A.Owlv2ForObjectDetection;A.Owlv2ImageProcessor;A.Owlv2Model;A.Owlv2PreTrainedModel;A.PaliGemmaForConditionalGeneration;A.PaliGemmaPreTrainedModel;A.PaliGemmaProcessor;A.ParakeetFeatureExtractor;A.ParakeetForCTC;A.ParakeetPreTrainedModel;A.PatchTSMixerForPrediction;A.PatchTSMixerModel;A.PatchTSMixerPreTrainedModel;A.PatchTSTForPrediction;A.PatchTSTModel;A.PatchTSTPreTrainedModel;A.Phi3ForCausalLM;A.Phi3Model;A.Phi3PreTrainedModel;A.Phi3VForCausalLM;A.Phi3VImageProcessor;A.Phi3VPreTrainedModel;A.Phi3VProcessor;A.PhiForCausalLM;A.PhiModel;A.PhiPreTrainedModel;A.Pipeline;A.PixtralImageProcessor;A.PixtralProcessor;A.PreTrainedModel;A.PreTrainedTokenizer;A.PretrainedConfig;A.PretrainedMixin;A.Processor;A.PvtForImageClassification;A.PvtImageProcessor;A.PvtModel;A.PvtPreTrainedModel;A.PyAnnoteFeatureExtractor;A.PyAnnoteForAudioFrameClassification;A.PyAnnoteModel;A.PyAnnotePreTrainedModel;A.PyAnnoteProcessor;A.QuestionAnsweringModelOutput;A.QuestionAnsweringPipeline;A.Qwen2ForCausalLM;A.Qwen2Model;A.Qwen2PreTrainedModel;A.Qwen2Tokenizer;A.Qwen2VLForConditionalGeneration;A.Qwen2VLImageProcessor;A.Qwen2VLPreTrainedModel;A.Qwen2VLProcessor;A.Qwen3ForCausalLM;A.Qwen3Model;A.Qwen3PreTrainedModel;A.RFDetrForObjectDetection;A.RFDetrModel;A.RFDetrObjectDetectionOutput;A.RFDetrPreTrainedModel;A.RTDetrForObjectDetection;A.RTDetrImageProcessor;A.RTDetrModel;A.RTDetrObjectDetectionOutput;A.RTDetrPreTrainedModel;A.RTDetrV2ForObjectDetection;A.RTDetrV2Model;A.RTDetrV2ObjectDetectionOutput;A.RTDetrV2PreTrainedModel;A.RawAudio;A.RawImage;A.RawVideo;A.RawVideoFrame;A.RepetitionPenaltyLogitsProcessor;A.ResNetForImageClassification;A.ResNetModel;A.ResNetPreTrainedModel;A.RoFormerForMaskedLM;A.RoFormerForQuestionAnswering;A.RoFormerForSequenceClassification;A.RoFormerForTokenClassification;A.RoFormerModel;A.RoFormerPreTrainedModel;A.RoFormerTokenizer;A.RobertaForMaskedLM;A.RobertaForQuestionAnswering;A.RobertaForSequenceClassification;A.RobertaForTokenClassification;A.RobertaModel;A.RobertaPreTrainedModel;A.RobertaTokenizer;A.Sam2ImageProcessor;A.Sam2ImageSegmentationOutput;A.Sam2Model;A.Sam2PreTrainedModel;A.Sam2Processor;A.Sam2VideoProcessor;A.Sam3ImageProcessor;A.Sam3TrackerModel;A.SamImageProcessor;A.SamImageSegmentationOutput;A.SamModel;A.SamPreTrainedModel;A.SamProcessor;A.SapiensForDepthEstimation;A.SapiensForNormalEstimation;A.SapiensForSemanticSegmentation;A.SapiensPreTrainedModel;A.SeamlessM4TFeatureExtractor;A.SegformerFeatureExtractor;A.SegformerForImageClassification;A.SegformerForSemanticSegmentation;A.SegformerImageProcessor;A.SegformerModel;A.SegformerPreTrainedModel;A.Seq2SeqLMOutput;A.SequenceClassifierOutput;A.SiglipImageProcessor;A.SiglipModel;A.SiglipPreTrainedModel;A.SiglipTextModel;A.SiglipTokenizer;A.SiglipVisionModel;A.SmolLM3ForCausalLM;A.SmolLM3Model;A.SmolLM3PreTrainedModel;A.SmolVLMForConditionalGeneration;A.SmolVLMImageProcessor;A.SmolVLMProcessor;A.SnacDecoderModel;A.SnacEncoderModel;A.SnacFeatureExtractor;A.SnacModel;A.SnacPreTrainedModel;A.SpeechT5FeatureExtractor;A.SpeechT5ForSpeechToText;A.SpeechT5ForTextToSpeech;A.SpeechT5HifiGan;A.SpeechT5Model;A.SpeechT5PreTrainedModel;A.SpeechT5Processor;A.SpeechT5Tokenizer;A.SqueezeBertForMaskedLM;A.SqueezeBertForQuestionAnswering;A.SqueezeBertForSequenceClassification;A.SqueezeBertModel;A.SqueezeBertPreTrainedModel;A.SqueezeBertTokenizer;A.StableLmForCausalLM;A.StableLmModel;A.StableLmPreTrainedModel;A.Starcoder2ForCausalLM;A.Starcoder2Model;A.Starcoder2PreTrainedModel;A.StoppingCriteria;A.StoppingCriteriaList;A.StyleTextToSpeech2Model;A.StyleTextToSpeech2PreTrainedModel;A.SummarizationPipeline;A.SupertonicForConditionalGeneration;A.SupertonicPreTrainedModel;A.SuppressTokensAtBeginLogitsProcessor;A.Swin2SRForImageSuperResolution;A.Swin2SRImageProcessor;A.Swin2SRModel;A.Swin2SRPreTrainedModel;A.SwinForImageClassification;A.SwinForSemanticSegmentation;A.SwinModel;A.SwinPreTrainedModel;A.T5ForConditionalGeneration;A.T5Model;A.T5PreTrainedModel;A.T5Tokenizer;A.TableTransformerForObjectDetection;A.TableTransformerModel;A.TableTransformerObjectDetectionOutput;A.TableTransformerPreTrainedModel;A.TemperatureLogitsWarper;A.Tensor;A.Text2TextGenerationPipeline;A.TextClassificationPipeline;A.TextGenerationPipeline;A.TextStreamer;A.TextToAudioPipeline;A.TokenClassificationPipeline;A.TokenClassifierOutput;A.TokenizerModel;A.TopKLogitsWarper;A.TopPLogitsWarper;A.TrOCRForCausalLM;A.TrOCRPreTrainedModel;A.TranslationPipeline;A.UltravoxModel;A.UltravoxPreTrainedModel;A.UltravoxProcessor;A.UniSpeechForCTC;A.UniSpeechForSequenceClassification;A.UniSpeechModel;A.UniSpeechPreTrainedModel;A.UniSpeechSatForAudioFrameClassification;A.UniSpeechSatForCTC;A.UniSpeechSatForSequenceClassification;A.UniSpeechSatModel;A.UniSpeechSatPreTrainedModel;A.VLChatProcessor;A.VLMImageProcessor;A.VaultGemmaForCausalLM;A.VaultGemmaModel;A.VaultGemmaPreTrainedModel;A.ViTFeatureExtractor;A.ViTForImageClassification;A.ViTImageProcessor;A.ViTMAEModel;A.ViTMAEPreTrainedModel;A.ViTMSNForImageClassification;A.ViTMSNModel;A.ViTMSNPreTrainedModel;A.ViTModel;A.ViTPreTrainedModel;A.VisionEncoderDecoderModel;A.VitMatteForImageMatting;A.VitMatteImageProcessor;A.VitMattePreTrainedModel;A.VitPoseForPoseEstimation;A.VitPoseImageProcessor;A.VitPosePreTrainedModel;A.VitsModel;A.VitsModelOutput;A.VitsPreTrainedModel;A.VitsTokenizer;A.VoxtralForConditionalGeneration;A.VoxtralProcessor;A.Wav2Vec2BertForCTC;A.Wav2Vec2BertForSequenceClassification;A.Wav2Vec2BertModel;A.Wav2Vec2BertPreTrainedModel;A.Wav2Vec2CTCTokenizer;A.Wav2Vec2FeatureExtractor;A.Wav2Vec2ForAudioFrameClassification;A.Wav2Vec2ForCTC;A.Wav2Vec2ForSequenceClassification;A.Wav2Vec2Model;A.Wav2Vec2PreTrainedModel;A.Wav2Vec2Processor;A.Wav2Vec2ProcessorWithLM;A.WavLMForAudioFrameClassification;A.WavLMForCTC;A.WavLMForSequenceClassification;A.WavLMForXVector;A.WavLMModel;A.WavLMPreTrainedModel;A.WeSpeakerFeatureExtractor;A.WeSpeakerResNetModel;A.WeSpeakerResNetPreTrainedModel;A.WhisperFeatureExtractor;A.WhisperForConditionalGeneration;A.WhisperModel;A.WhisperPreTrainedModel;A.WhisperProcessor;A.WhisperTextStreamer;A.WhisperTimeStampLogitsProcessor;A.WhisperTokenizer;A.XLMForQuestionAnswering;A.XLMForSequenceClassification;A.XLMForTokenClassification;A.XLMModel;A.XLMPreTrainedModel;A.XLMRobertaForMaskedLM;A.XLMRobertaForQuestionAnswering;A.XLMRobertaForSequenceClassification;A.XLMRobertaForTokenClassification;A.XLMRobertaModel;A.XLMRobertaPreTrainedModel;A.XLMRobertaTokenizer;A.XLMTokenizer;A.XLMWithLMHeadModel;A.XVectorOutput;A.YolosFeatureExtractor;A.YolosForObjectDetection;A.YolosImageProcessor;A.YolosModel;A.YolosObjectDetectionOutput;A.YolosPreTrainedModel;A.ZeroShotAudioClassificationPipeline;A.ZeroShotClassificationPipeline;A.ZeroShotImageClassificationPipeline;A.ZeroShotObjectDetectionPipeline;A.bankers_round;A.cat;A.cos_sim;A.dot;A.dynamic_time_warping;A.env;A.full;A.full_like;A.getCacheShapes;A.hamming;A.hanning;A.interpolate;A.interpolate_4d;A.interpolate_data;A.is_chinese_char;A.layer_norm;A.load_image;A.load_video;A.log_softmax;A.magnitude;A.matmul;A.max;A.mean;A.mean_pooling;A.medianFilter;A.mel_filter_bank;A.min;A.ones;A.ones_like;A.permute;A.permute_data;var d8=A.pipeline;A.quantize_embeddings;A.rand;A.randn;A.read_audio;A.rfft;A.round;A.slice;A.softmax;A.spectrogram;A.stack;A.std_mean;A.topk;A.window_function;A.zeros;A.zeros_like;let uv=null,yg=null;async function p8(e){return uv||yg||(yg=d8("image-to-text","microsoft/trocr-base-printed",{progress_callback:t=>{e&&(t.status==="downloading"||t.status==="loading")&&t.progress!=null&&e(Math.round(t.progress))}}),uv=await yg,yg=null,uv)}async function f8(e,t){const n=await p8(t),r=URL.createObjectURL(e);try{t?.(100);const o=await n(r),s=Array.isArray(o)&&o[0]?o[0].generated_text:"",l=h8(s),u=l[0]??A$(s);return{drawNumber:m8(s),numbers:u,bets:l.length>0?l:u.length>0?[u]:[],units:g8(s),amount:_8(s),rawText:s,confidence:0}}finally{URL.revokeObjectURL(r)}}function m8(e){const t=[/(\d{2,4}\/\d{2,3})/,/\s*[:\s]*(\d{2,4}\/\d{2,3})/i,/Draw\s*(?:No\.?)?\s*[:\s]*(\d{2,4}\/\d{2,3})/i];for(const n of t){const r=e.match(n);if(r)return r[1]}return""}function A$(e){const t=[],n=e.split(`
`);for(const r of n){const o=r.match(/\b([1-9]|[1-4]\d)\b/g);if(o&&o.length>=3)for(const s of o){const l=parseInt(s,10);l>=1&&l<=49&&!t.includes(l)&&t.push(l)}}return t.slice(0,7)}function h8(e){const t=[],n=/(\d{1,2}(?:[+-]\d{1,2}){5})/g,r=e.match(n);if(r)for(const o of r){const s=o.split(/[+-]/).map(l=>parseInt(l,10)).filter(l=>!isNaN(l)&&l>=1&&l<=49);s.length>=6&&t.push(s.slice(0,6))}if(t.length===0){const o=A$(e);o.length>=3&&t.push(o.slice(0,6))}return t}function g8(e){const t=[/(\d+)\s*(?:|Units?|Entries?)/i,/\s*[:\s]*(\d+)/i];for(const n of t){const r=e.match(n);if(r)return parseInt(r[1],10)}return 1}function _8(e){const t=[/\$\s*([\d,]+(?:\.\d{1,2})?)/,/\s*[:\s]*\$?\s*([\d,]+(?:\.\d{1,2})?)/i,/Amount\s*[:\s]*\$?\s*([\d,]+(?:\.\d{1,2})?)/i,/HK\$\s*([\d,]+(?:\.\d{1,2})?)/i];for(const n of t){const r=e.match(n);if(r)return parseFloat(r[1].replace(/,/g,""))}return 10}const t2="https://bet.hkjc.com/marksix/getJSON.aspx?ls=1&js=1",n2="lastMarkSixResults",v8=3600*1e3;function y8(e){if(!e)return t2;const[t,n,r]=e.split("-");return`${t2}&date=${r}/${n}/${t}`}function b8(e){return`https://corsproxy.io/?${encodeURIComponent(e)}`}function x8(e){let t=e.trim();t=t.replace(/^var\s+\w+\s*=\s*/,"").replace(/;?\s*$/,"");let n;try{n=JSON.parse(t)}catch{return null}const r=Array.isArray(n)?n[0]:n;if(!r||typeof r!="object")return null;const o=r,s=String(o.no??o.drawNo??o.DrawNo??""),l=String(o.date??o.drawDate??o.DrawDate??""),d=((o.no1!==void 0?[o.no1,o.no2,o.no3,o.no4,o.no5,o.no6]:null)??o.winningNumbers??o.numbers??[]).map(g=>parseInt(String(g),10)).filter(g=>!isNaN(g)&&g>=1&&g<=49);if(d.length<6)return null;const p=parseInt(String(o.sno??o.extraNumber??o.extra??""),10);return isNaN(p)||p<1||p>49?null:{drawNumber:s,drawDate:l,winningNumbers:d.slice(0,6),extraNumber:p}}async function O$(e){if(!e){const l=localStorage.getItem(n2);if(l)try{const{data:u,timestamp:d}=JSON.parse(l);if(Date.now()-d<v8)return u}catch{}}const t=y8(e),n=b8(t),r=await fetch(n);if(!r.ok)throw new Error(`HTTP ${r.status}`);const o=await r.text(),s=x8(o);if(!s)throw new Error("Failed to parse HKJC response");if(!e){const l={data:s,timestamp:Date.now()};localStorage.setItem(n2,JSON.stringify(l))}return s}async function $$(e){try{const t=await O$();if(t.drawNumber===e)return t}catch{}return null}function D$(e,t){const n=e.slice(0,6),r=n.filter(d=>t.winningNumbers.includes(d)),o=n.includes(t.extraNumber),s=r.length;let l=null,u=null;return s===6?(l="prizes.first",u=1):s===5&&o?(l="prizes.second",u=2):s===5?(l="prizes.third",u=3):s===4&&o?(l="prizes.fourth",u=4):s===4?(l="prizes.fifth",u=5):s===3&&o?(l="prizes.sixth",u=6):s===3&&(l="prizes.seventh",u=7),{matchedNumbers:r,extraMatched:o,prizeCategory:l,prizeTier:u}}var wv={exports:{}},w8=wv.exports,r2;function M8(){return r2||(r2=1,(function(e,t){((n,r)=>{e.exports=r()})(w8,function(){var n=function(v,O){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(j,V){j.__proto__=V}:function(j,V){for(var Z in V)Object.prototype.hasOwnProperty.call(V,Z)&&(j[Z]=V[Z])}))(v,O)},r=function(){return(r=Object.assign||function(v){for(var O,j=1,V=arguments.length;j<V;j++)for(var Z in O=arguments[j])Object.prototype.hasOwnProperty.call(O,Z)&&(v[Z]=O[Z]);return v}).apply(this,arguments)};function o(v,O,j){for(var V,Z=0,ce=O.length;Z<ce;Z++)!V&&Z in O||((V=V||Array.prototype.slice.call(O,0,Z))[Z]=O[Z]);return v.concat(V||Array.prototype.slice.call(O))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:q$,l=Object.keys,u=Array.isArray;function d(v,O){return typeof O=="object"&&l(O).forEach(function(j){v[j]=O[j]}),v}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var p=Object.getPrototypeOf,g={}.hasOwnProperty;function h(v,O){return g.call(v,O)}function m(v,O){typeof O=="function"&&(O=O(p(v))),(typeof Reflect>"u"?l:Reflect.ownKeys)(O).forEach(function(j){_(v,j,O[j])})}var x=Object.defineProperty;function _(v,O,j,V){x(v,O,d(j&&h(j,"get")&&typeof j.get=="function"?{get:j.get,set:j.set,configurable:!0}:{value:j,configurable:!0,writable:!0},V))}function b(v){return{from:function(O){return v.prototype=Object.create(O.prototype),_(v.prototype,"constructor",v),{extend:m.bind(null,v.prototype)}}}}var I=Object.getOwnPropertyDescriptor,T=[].slice;function S(v,O,j){return T.call(v,O,j)}function D(v,O){return O(v)}function E(v){if(!v)throw new Error("Assertion Failed")}function C(v){s.setImmediate?setImmediate(v):setTimeout(v,0)}function P(v,O){if(typeof O=="string"&&h(v,O))return v[O];if(!O)return v;if(typeof O!="string"){for(var j=[],V=0,Z=O.length;V<Z;++V){var ce=P(v,O[V]);j.push(ce)}return j}var ve,Me=O.indexOf(".");return Me===-1||(ve=v[O.substr(0,Me)])==null?void 0:P(ve,O.substr(Me+1))}function w(v,O,j){if(v&&O!==void 0&&!("isFrozen"in Object&&Object.isFrozen(v)))if(typeof O!="string"&&"length"in O){E(typeof j!="string"&&"length"in j);for(var V=0,Z=O.length;V<Z;++V)w(v,O[V],j[V])}else{var ce,ve,Me=O.indexOf(".");Me!==-1?(ce=O.substr(0,Me),(Me=O.substr(Me+1))===""?j===void 0?u(v)&&!isNaN(parseInt(ce))?v.splice(ce,1):delete v[ce]:v[ce]=j:w(ve=(ve=v[ce])&&h(v,ce)?ve:v[ce]={},Me,j)):j===void 0?u(v)&&!isNaN(parseInt(O))?v.splice(O,1):delete v[O]:v[O]=j}}function R(v){var O,j={};for(O in v)h(v,O)&&(j[O]=v[O]);return j}var U=[].concat;function N(v){return U.apply([],v)}var te="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(N([8,16,32,64].map(function(v){return["Int","Uint","Float"].map(function(O){return O+v+"Array"})}))).filter(function(v){return s[v]}),ie=new Set(te.map(function(v){return s[v]})),ee=null;function q(v){return ee=new WeakMap,v=(function O(j){if(!j||typeof j!="object")return j;var V=ee.get(j);if(V)return V;if(u(j)){V=[],ee.set(j,V);for(var Z=0,ce=j.length;Z<ce;++Z)V.push(O(j[Z]))}else if(ie.has(j.constructor))V=j;else{var ve,Me=p(j);for(ve in V=Me===Object.prototype?{}:Object.create(Me),ee.set(j,V),j)h(j,ve)&&(V[ve]=O(j[ve]))}return V})(v),ee=null,v}var oe={}.toString;function ae(v){return oe.call(v).slice(8,-1)}var X=typeof Symbol<"u"?Symbol.iterator:"@@iterator",se=typeof X=="symbol"?function(v){var O;return v!=null&&(O=v[X])&&O.apply(v)}:function(){return null};function le(v,O){O=v.indexOf(O),0<=O&&v.splice(O,1)}var be={};function Ee(v){var O,j,V,Z;if(arguments.length===1){if(u(v))return v.slice();if(this===be&&typeof v=="string")return[v];if(Z=se(v))for(j=[];!(V=Z.next()).done;)j.push(V.value);else{if(v==null)return[v];if(typeof(O=v.length)!="number")return[v];for(j=new Array(O);O--;)j[O]=v[O]}}else for(O=arguments.length,j=new Array(O);O--;)j[O]=arguments[O];return j}var Y=typeof Symbol<"u"?function(v){return v[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},te=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(te),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(v,O){this.name=v,this.message=O}function _e(v,O){return v+". Errors: "+Object.keys(O).map(function(j){return O[j].toString()}).filter(function(j,V,Z){return Z.indexOf(j)===V}).join(`
`)}function Te(v,O,j,V){this.failures=O,this.failedKeys=V,this.successCount=j,this.message=_e(v,O)}function Re(v,O){this.name="BulkError",this.failures=Object.keys(O).map(function(j){return O[j]}),this.failuresByPos=O,this.message=_e(v,this.failures)}b(H).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(Te).from(H),b(Re).from(H);var We=dt.reduce(function(v,O){return v[O]=O+"Error",v},{}),at=H,Oe=dt.reduce(function(v,O){var j=O+"Error";function V(Z,ce){this.name=j,Z?typeof Z=="string"?(this.message="".concat(Z).concat(ce?`
 `+ce:""),this.inner=ce||null):typeof Z=="object"&&(this.message="".concat(Z.name," ").concat(Z.message),this.inner=Z):(this.message=J[O]||j,this.inner=null)}return b(V).from(at),v[O]=V,v},{}),ge=(Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError,te.reduce(function(v,O){return v[O+"Error"]=Oe[O],v},{}));te=dt.reduce(function(v,O){return["Syntax","Type","Range"].indexOf(O)===-1&&(v[O+"Error"]=Oe[O]),v},{});function re(){}function $e(v){return v}function Ge(v,O){return v==null||v===$e?O:function(j){return O(v(j))}}function qe(v,O){return function(){v.apply(this,arguments),O.apply(this,arguments)}}function it(v,O){return v===re?O:function(){var j=v.apply(this,arguments),V=(j!==void 0&&(arguments[0]=j),this.onsuccess),Z=this.onerror,ce=(this.onsuccess=null,this.onerror=null,O.apply(this,arguments));return V&&(this.onsuccess=this.onsuccess?qe(V,this.onsuccess):V),Z&&(this.onerror=this.onerror?qe(Z,this.onerror):Z),ce!==void 0?ce:j}}function Ve(v,O){return v===re?O:function(){v.apply(this,arguments);var j=this.onsuccess,V=this.onerror;this.onsuccess=this.onerror=null,O.apply(this,arguments),j&&(this.onsuccess=this.onsuccess?qe(j,this.onsuccess):j),V&&(this.onerror=this.onerror?qe(V,this.onerror):V)}}function Be(v,O){return v===re?O:function(Z){var V=v.apply(this,arguments),Z=(d(Z,V),this.onsuccess),ce=this.onerror,ve=(this.onsuccess=null,this.onerror=null,O.apply(this,arguments));return Z&&(this.onsuccess=this.onsuccess?qe(Z,this.onsuccess):Z),ce&&(this.onerror=this.onerror?qe(ce,this.onerror):ce),V===void 0?ve===void 0?void 0:ve:d(V,ve)}}function _t(v,O){return v===re?O:function(){return O.apply(this,arguments)!==!1&&v.apply(this,arguments)}}function Ne(v,O){return v===re?O:function(){var j=v.apply(this,arguments);if(j&&typeof j.then=="function"){for(var V=this,Z=arguments.length,ce=new Array(Z);Z--;)ce[Z]=arguments[Z];return j.then(function(){return O.apply(V,ce)})}return O.apply(this,arguments)}}te.ModifyError=Te,te.DexieError=H,te.BulkError=Re;var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function kt(v){Ye=v}var mt={},Tt=100,Ke=typeof Promise>"u"?[]:(dt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Ke=crypto.subtle.digest("SHA-512",new Uint8Array([0])),p(Ke),dt]:[dt,p(dt),dt]),dt=Ke[0],co=Ke[1],co=co&&co.then,wt=dt&&dt.constructor,st=!!Ke[2],He=function(v,O){hn.push([v,O]),qt&&(queueMicrotask(Qi),qt=!1)},Bt=!0,qt=!0,xn=[],At=[],nn=$e,Ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:re,pgp:!1,env:{},finalize:re},rt=Ct,hn=[],En=0,tr=[];function Rt(v){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var O=this._PSD=rt;if(typeof v!="function"){if(v!==mt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&mr(this,this._value)}else this._state=null,this._value=null,++O.ref,(function j(V,Z){try{Z(function(ce){if(V._state===null){if(ce===V)throw new TypeError("A promise cannot be resolved with itself.");var ve=V._lib&&Xa();ce&&typeof ce.then=="function"?j(V,function(Me,Le){ce instanceof Rt?ce._then(Me,Le):ce.then(Me,Le)}):(V._state=!0,V._value=ce,qa(V)),ve&&sa()}},mr.bind(null,V))}catch(ce){mr(V,ce)}})(this,v)}var Kn={get:function(){var v=rt,O=Xe;function j(V,Z){var ce=this,ve=!v.global&&(v!==rt||O!==Xe),Me=ve&&!jt(),Le=new Rt(function(Ze,ze){on(ce,new xr(Vr(V,v,ve,Me),Vr(Z,v,ve,Me),Ze,ze,v))});return this._consoleTask&&(Le._consoleTask=this._consoleTask),Le}return j.prototype=mt,j},set:function(v){_(this,"then",v&&v.prototype===mt?Kn:{get:function(){return v},set:Kn.set})}};function xr(v,O,j,V,Z){this.onFulfilled=typeof v=="function"?v:null,this.onRejected=typeof O=="function"?O:null,this.resolve=j,this.reject=V,this.psd=Z}function mr(v,O){var j,V;At.push(O),v._state===null&&(j=v._lib&&Xa(),O=nn(O),v._state=!1,v._value=O,V=v,xn.some(function(Z){return Z._value===V._value})||xn.push(V),qa(v),j)&&sa()}function qa(v){var O=v._listeners;v._listeners=[];for(var j=0,V=O.length;j<V;++j)on(v,O[j]);var Z=v._PSD;--Z.ref||Z.finalize(),En===0&&(++En,He(function(){--En==0&&wn()},[]))}function on(v,O){if(v._state===null)v._listeners.push(O);else{var j=v._state?O.onFulfilled:O.onRejected;if(j===null)return(v._state?O.resolve:O.reject)(v._value);++O.psd.ref,++En,He(wr,[j,v,O])}}function wr(v,O,j){try{var V,Z=O._value;!O._state&&At.length&&(At=[]),V=Ye&&O._consoleTask?O._consoleTask.run(function(){return v(Z)}):v(Z),O._state||At.indexOf(Z)!==-1||(ce=>{for(var ve=xn.length;ve;)if(xn[--ve]._value===ce._value)return xn.splice(ve,1)})(O),j.resolve(V)}catch(ce){j.reject(ce)}finally{--En==0&&wn(),--j.psd.ref||j.psd.finalize()}}function Qi(){pr(Ct,function(){Xa()&&sa()})}function Xa(){var v=Bt;return qt=Bt=!1,v}function sa(){var v,O,j;do for(;0<hn.length;)for(v=hn,hn=[],j=v.length,O=0;O<j;++O){var V=v[O];V[0].apply(null,V[1])}while(0<hn.length);qt=Bt=!0}function wn(){for(var v=xn,O=(xn=[],v.forEach(function(V){V._PSD.onunhandled.call(null,V._value,V)}),tr.slice(0)),j=O.length;j;)O[--j]()}function vi(v){return new Rt(mt,!1,v)}function B(v,O){var j=rt;return function(){var V=Xa(),Z=rt;try{return yn(j,!0),v.apply(this,arguments)}catch(ce){O&&O(ce)}finally{yn(Z,!1),V&&sa()}}}m(Rt.prototype,{then:Kn,_then:function(v,O){on(this,new xr(null,null,v,O,rt))},catch:function(v){var O,j;return arguments.length===1?this.then(null,v):(O=v,j=arguments[1],typeof O=="function"?this.then(null,function(V){return(V instanceof O?j:vi)(V)}):this.then(null,function(V){return(V&&V.name===O?j:vi)(V)}))},finally:function(v){return this.then(function(O){return Rt.resolve(v()).then(function(){return O})},function(O){return Rt.resolve(v()).then(function(){return vi(O)})})},timeout:function(v,O){var j=this;return v<1/0?new Rt(function(V,Z){var ce=setTimeout(function(){return Z(new Oe.Timeout(O))},v);j.then(V,Z).finally(clearTimeout.bind(null,ce))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Rt.prototype,Symbol.toStringTag,"Dexie.Promise"),Ct.env=Fn(),m(Rt,{all:function(){var v=Ee.apply(null,arguments).map(gn);return new Rt(function(O,j){v.length===0&&O([]);var V=v.length;v.forEach(function(Z,ce){return Rt.resolve(Z).then(function(ve){v[ce]=ve,--V||O(v)},j)})})},resolve:function(v){return v instanceof Rt?v:v&&typeof v.then=="function"?new Rt(function(O,j){v.then(O,j)}):new Rt(mt,!0,v)},reject:vi,race:function(){var v=Ee.apply(null,arguments).map(gn);return new Rt(function(O,j){v.map(function(V){return Rt.resolve(V).then(O,j)})})},PSD:{get:function(){return rt},set:function(v){return rt=v}},totalEchoes:{get:function(){return Xe}},newPSD:Lt,usePSD:pr,scheduler:{get:function(){return He},set:function(v){He=v}},rejectionMapper:{get:function(){return nn},set:function(v){nn=v}},follow:function(v,O){return new Rt(function(j,V){return Lt(function(Z,ce){var ve=rt;ve.unhandleds=[],ve.onunhandled=ce,ve.finalize=qe(function(){var Me,Le=this;Me=function(){Le.unhandleds.length===0?Z():ce(Le.unhandleds[0])},tr.push(function Ze(){Me(),tr.splice(tr.indexOf(Ze),1)}),++En,He(function(){--En==0&&wn()},[])},ve.finalize),v()},O,j,V)})}}),wt&&(wt.allSettled&&_(Rt,"allSettled",function(){var v=Ee.apply(null,arguments).map(gn);return new Rt(function(O){v.length===0&&O([]);var j=v.length,V=new Array(j);v.forEach(function(Z,ce){return Rt.resolve(Z).then(function(ve){return V[ce]={status:"fulfilled",value:ve}},function(ve){return V[ce]={status:"rejected",reason:ve}}).then(function(){return--j||O(V)})})})}),wt.any&&typeof AggregateError<"u"&&_(Rt,"any",function(){var v=Ee.apply(null,arguments).map(gn);return new Rt(function(O,j){v.length===0&&j(new AggregateError([]));var V=v.length,Z=new Array(V);v.forEach(function(ce,ve){return Rt.resolve(ce).then(function(Me){return O(Me)},function(Me){Z[ve]=Me,--V||j(new AggregateError(Z))})})})}),wt.withResolvers)&&(Rt.withResolvers=wt.withResolvers);var xe={awaits:0,echoes:0,id:0},pe=0,we=[],Se=0,Xe=0,ht=0;function Lt(v,ve,j,V){var Z=rt,ce=Object.create(Z),ve=(ce.parent=Z,ce.ref=0,ce.global=!1,ce.id=++ht,Ct.env,ce.env=st?{Promise:Rt,PromiseProp:{value:Rt,configurable:!0,writable:!0},all:Rt.all,race:Rt.race,allSettled:Rt.allSettled,any:Rt.any,resolve:Rt.resolve,reject:Rt.reject}:{},ve&&d(ce,ve),++Z.ref,ce.finalize=function(){--this.parent.ref||this.parent.finalize()},pr(ce,v,j,V));return ce.ref===0&&ce.finalize(),ve}function Qt(){return xe.id||(xe.id=++pe),++xe.awaits,xe.echoes+=Tt,xe.id}function jt(){return!!xe.awaits&&(--xe.awaits==0&&(xe.id=0),xe.echoes=xe.awaits*Tt,!0)}function gn(v){return xe.echoes&&v&&v.constructor===wt?(Qt(),v.then(function(O){return jt(),O},function(O){return jt(),In(O)})):v}function Gt(){var v=we[we.length-1];we.pop(),yn(v,!1)}function yn(v,O){var j,V,Z=rt;(O?!xe.echoes||Se++&&v===rt:!Se||--Se&&v===rt)||queueMicrotask(O?(function(ce){++Xe,xe.echoes&&--xe.echoes!=0||(xe.echoes=xe.awaits=xe.id=0),we.push(rt),yn(ce,!0)}).bind(null,v):Gt),v!==rt&&(rt=v,Z===Ct&&(Ct.env=Fn()),st)&&(j=Ct.env.Promise,V=v.env,Z.global||v.global)&&(Object.defineProperty(s,"Promise",V.PromiseProp),j.all=V.all,j.race=V.race,j.resolve=V.resolve,j.reject=V.reject,V.allSettled&&(j.allSettled=V.allSettled),V.any)&&(j.any=V.any)}function Fn(){var v=s.Promise;return st?{Promise:v,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:v.all,race:v.race,allSettled:v.allSettled,any:v.any,resolve:v.resolve,reject:v.reject}:{}}function pr(v,O,j,V,Z){var ce=rt;try{return yn(v,!0),O(j,V,Z)}finally{yn(ce,!1)}}function Vr(v,O,j,V){return typeof v!="function"?v:function(){var Z=rt;j&&Qt(),yn(O,!0);try{return v.apply(this,arguments)}finally{yn(Z,!1),V&&queueMicrotask(jt)}}}function fr(v){Promise===wt&&xe.echoes===0?Se===0?v():enqueueNativeMicroTask(v):setTimeout(v,0)}(""+co).indexOf("[native code]")===-1&&(Qt=jt=re);var In=Rt.reject,wa="",hr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Cr="String expected.",la=[],ha="__dbnames",Ma="readonly",Pr="readwrite";function gr(v,O){return v?O?function(){return v.apply(this,arguments)&&O.apply(this,arguments)}:v:O}var Ja={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ei(v){return typeof v!="string"||/\./.test(v)?function(O){return O}:function(O){return O[v]===void 0&&v in O&&delete(O=q(O))[v],O}}function ao(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function An(v,O){try{var j=yi(v),V=yi(O);if(j!==V)return j==="Array"?1:V==="Array"?-1:j==="binary"?1:V==="binary"?-1:j==="string"?1:V==="string"?-1:j==="Date"?1:V!=="Date"?NaN:-1;switch(j){case"number":case"Date":case"string":return O<v?1:v<O?-1:0;case"binary":for(var Z=Aa(v),ce=Aa(O),ve=Z.length,Me=ce.length,Le=ve<Me?ve:Me,Ze=0;Ze<Le;++Ze)if(Z[Ze]!==ce[Ze])return Z[Ze]<ce[Ze]?-1:1;return ve===Me?0:ve<Me?-1:1;case"Array":for(var ze=v,Ie=O,Fe=ze.length,y=Ie.length,$=Fe<y?Fe:y,F=0;F<$;++F){var W=An(ze[F],Ie[F]);if(W!==0)return W}return Fe===y?0:Fe<y?-1:1}}catch{}return NaN}function yi(v){var O=typeof v;return O=="object"&&(ArrayBuffer.isView(v)||(O=ae(v))==="ArrayBuffer")?"binary":O}function Aa(v){return v instanceof Uint8Array?v:ArrayBuffer.isView(v)?new Uint8Array(v.buffer,v.byteOffset,v.byteLength):new Uint8Array(v)}function Wr(v,O,j){var V=v.schema.yProps;return V?(O&&0<j.numFailures&&(O=O.filter(function(Z,ce){return!j.failures[ce]})),Promise.all(V.map(function(Z){return Z=Z.updatesTable,O?v.db.table(Z).where("k").anyOf(O).delete():v.db.table(Z).clear()})).then(function(){return j})):j}Dt.prototype.execute=function(v){var O=this["@@propmod"];if(O.add!==void 0){var j=O.add;if(u(j))return o(o([],u(v)?v:[],!0),j).sort();if(typeof j=="number")return(Number(v)||0)+j;if(typeof j=="bigint")try{return BigInt(v)+j}catch{return BigInt(0)+j}throw new TypeError("Invalid term ".concat(j))}if(O.remove!==void 0){var V=O.remove;if(u(V))return u(v)?v.filter(function(Z){return!V.includes(Z)}).sort():[];if(typeof V=="number")return Number(v)-V;if(typeof V=="bigint")try{return BigInt(v)-V}catch{return BigInt(0)-V}throw new TypeError("Invalid subtrahend ".concat(V))}return j=(j=O.replacePrefix)==null?void 0:j[0],j&&typeof v=="string"&&v.startsWith(j)?O.replacePrefix[1]+v.substring(j.length):v};var ga=Dt;function Dt(v){this["@@propmod"]=v}function Ft(v,O){for(var j=l(O),V=j.length,Z=!1,ce=0;ce<V;++ce){var ve=j[ce],Me=O[ve],Le=P(v,ve);Me instanceof ga?(w(v,ve,Me.execute(Le)),Z=!0):Le!==Me&&(w(v,ve,Me),Z=!0)}return Z}fn.prototype._trans=function(v,O,j){var V=this._tx||rt.trans,Z=this.name,ce=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(v==="readonly"?"read":"write"," ").concat(this.name));function ve(Ze,ze,Ie){if(Ie.schema[Z])return O(Ie.idbtrans,Ie);throw new Oe.NotFound("Table "+Z+" not part of transaction")}var Me=Xa();try{var Le=V&&V.db._novip===this.db._novip?V===rt.trans?V._promise(v,ve,j):Lt(function(){return V._promise(v,ve,j)},{trans:V,transless:rt.transless||rt}):(function Ze(ze,Ie,Fe,y){if(ze.idbdb&&(ze._state.openComplete||rt.letThrough||ze._vip)){var $=ze._createTransaction(Ie,Fe,ze._dbSchema);try{$.create(),ze._state.PR1398_maxLoop=3}catch(F){return F.name===We.InvalidState&&ze.isOpen()&&0<--ze._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ze.close({disableAutoOpen:!1}),ze.open().then(function(){return Ze(ze,Ie,Fe,y)})):In(F)}return $._promise(Ie,function(F,W){return Lt(function(){return rt.trans=$,y(F,W,$)})}).then(function(F){if(Ie==="readwrite")try{$.idbtrans.commit()}catch{}return Ie==="readonly"?F:$._completion.then(function(){return F})})}if(ze._state.openComplete)return In(new Oe.DatabaseClosed(ze._state.dbOpenError));if(!ze._state.isBeingOpened){if(!ze._state.autoOpen)return In(new Oe.DatabaseClosed);ze.open().catch(re)}return ze._state.dbReadyPromise.then(function(){return Ze(ze,Ie,Fe,y)})})(this.db,v,[this.name],ve);return ce&&(Le._consoleTask=ce,Le=Le.catch(function(Ze){return console.trace(Ze),In(Ze)})),Le}finally{Me&&sa()}},fn.prototype.get=function(v,O){var j=this;return v&&v.constructor===Object?this.where(v).first(O):v==null?In(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(V){return j.core.get({trans:V,key:v}).then(function(Z){return j.hook.reading.fire(Z)})}).then(O)},fn.prototype.where=function(v){if(typeof v=="string")return new this.db.WhereClause(this,v);if(u(v))return new this.db.WhereClause(this,"[".concat(v.join("+"),"]"));var O=l(v);if(O.length===1)return this.where(O[0]).equals(v[O[0]]);var j=this.schema.indexes.concat(this.schema.primKey).filter(function(Me){if(Me.compound&&O.every(function(Ze){return 0<=Me.keyPath.indexOf(Ze)})){for(var Le=0;Le<O.length;++Le)if(O.indexOf(Me.keyPath[Le])===-1)return!1;return!0}return!1}).sort(function(Me,Le){return Me.keyPath.length-Le.keyPath.length})[0];if(j&&this.db._maxKey!==wa)return ve=j.keyPath.slice(0,O.length),this.where(ve).equals(ve.map(function(Me){return v[Me]}));!j&&Ye&&console.warn("The query ".concat(JSON.stringify(v)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(O.join("+"),"]"));var V=this.schema.idxByName;function Z(Me,Le){return An(Me,Le)===0}var ve=O.reduce(function(ze,Le){var Ze=ze[0],ze=ze[1],Ie=V[Le],Fe=v[Le];return[Ze||Ie,Ze||!Ie?gr(ze,Ie&&Ie.multi?function(y){return y=P(y,Le),u(y)&&y.some(function($){return Z(Fe,$)})}:function(y){return Z(Fe,P(y,Le))}):ze]},[null,null]),ce=ve[0],ve=ve[1];return ce?this.where(ce.name).equals(v[ce.keyPath]).filter(ve):j?this.filter(ve):this.where(O).equals("")},fn.prototype.filter=function(v){return this.toCollection().and(v)},fn.prototype.count=function(v){return this.toCollection().count(v)},fn.prototype.offset=function(v){return this.toCollection().offset(v)},fn.prototype.limit=function(v){return this.toCollection().limit(v)},fn.prototype.each=function(v){return this.toCollection().each(v)},fn.prototype.toArray=function(v){return this.toCollection().toArray(v)},fn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},fn.prototype.orderBy=function(v){return new this.db.Collection(new this.db.WhereClause(this,u(v)?"[".concat(v.join("+"),"]"):v))},fn.prototype.reverse=function(){return this.toCollection().reverse()},fn.prototype.mapToClass=function(v){for(var O=this.db,j=this.name,V=((this.schema.mappedClass=v).prototype instanceof ao&&(v=(ve=>{var Me=ze,Le=ve;if(typeof Le!="function"&&Le!==null)throw new TypeError("Class extends value "+String(Le)+" is not a constructor or null");function Ze(){this.constructor=Me}function ze(){return ve!==null&&ve.apply(this,arguments)||this}return n(Me,Le),Me.prototype=Le===null?Object.create(Le):(Ze.prototype=Le.prototype,new Ze),Object.defineProperty(ze.prototype,"db",{get:function(){return O},enumerable:!1,configurable:!0}),ze.prototype.table=function(){return j},ze})(v)),new Set),Z=v.prototype;Z;Z=p(Z))Object.getOwnPropertyNames(Z).forEach(function(ve){return V.add(ve)});function ce(ve){if(!ve)return ve;var Me,Le=Object.create(v.prototype);for(Me in ve)if(!V.has(Me))try{Le[Me]=ve[Me]}catch{}return Le}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ce,this.hook("reading",ce),v},fn.prototype.defineClass=function(){return this.mapToClass(function(v){d(this,v)})},fn.prototype.add=function(v,O){var j=this,V=this.schema.primKey,Z=V.auto,ce=V.keyPath,ve=v;return ce&&Z&&(ve=ei(ce)(v)),this._trans("readwrite",function(Me){return j.core.mutate({trans:Me,type:"add",keys:O!=null?[O]:null,values:[ve]})}).then(function(Me){return Me.numFailures?Rt.reject(Me.failures[0]):Me.lastResult}).then(function(Me){if(ce)try{w(v,ce,Me)}catch{}return Me})},fn.prototype.upsert=function(v,O){var j=this,V=this.schema.primKey.keyPath;return this._trans("readwrite",function(Z){return j.core.get({trans:Z,key:v}).then(function(ce){var ve=ce??{};return Ft(ve,O),V&&w(ve,V,v),j.core.mutate({trans:Z,type:"put",values:[ve],keys:[v],upsert:!0,updates:{keys:[v],changeSpecs:[O]}}).then(function(Me){return Me.numFailures?Rt.reject(Me.failures[0]):!!ce})})})},fn.prototype.update=function(v,O){return typeof v!="object"||u(v)?this.where(":id").equals(v).modify(O):(v=P(v,this.schema.primKey.keyPath))===void 0?In(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(v).modify(O)},fn.prototype.put=function(v,O){var j=this,V=this.schema.primKey,Z=V.auto,ce=V.keyPath,ve=v;return ce&&Z&&(ve=ei(ce)(v)),this._trans("readwrite",function(Me){return j.core.mutate({trans:Me,type:"put",values:[ve],keys:O!=null?[O]:null})}).then(function(Me){return Me.numFailures?Rt.reject(Me.failures[0]):Me.lastResult}).then(function(Me){if(ce)try{w(v,ce,Me)}catch{}return Me})},fn.prototype.delete=function(v){var O=this;return this._trans("readwrite",function(j){return O.core.mutate({trans:j,type:"delete",keys:[v]}).then(function(V){return Wr(O,[v],V)}).then(function(V){return V.numFailures?Rt.reject(V.failures[0]):void 0})})},fn.prototype.clear=function(){var v=this;return this._trans("readwrite",function(O){return v.core.mutate({trans:O,type:"deleteRange",range:Ja}).then(function(j){return Wr(v,null,j)})}).then(function(O){return O.numFailures?Rt.reject(O.failures[0]):void 0})},fn.prototype.bulkGet=function(v){var O=this;return this._trans("readonly",function(j){return O.core.getMany({keys:v,trans:j}).then(function(V){return V.map(function(Z){return O.hook.reading.fire(Z)})})})},fn.prototype.bulkAdd=function(v,O,j){var V=this,Z=Array.isArray(O)?O:void 0,ce=(j=j||(Z?void 0:O))?j.allKeys:void 0;return this._trans("readwrite",function(ve){var Me=V.schema.primKey,Ze=Me.auto,Me=Me.keyPath;if(Me&&Z)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Z&&Z.length!==v.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var Le=v.length,Ze=Me&&Ze?v.map(ei(Me)):v;return V.core.mutate({trans:ve,type:"add",keys:Z,values:Ze,wantResults:ce}).then(function(ze){var Ie=ze.numFailures,Fe=ze.failures;if(Ie===0)return ce?ze.results:ze.lastResult;throw new Re("".concat(V.name,".bulkAdd(): ").concat(Ie," of ").concat(Le," operations failed"),Fe)})})},fn.prototype.bulkPut=function(v,O,j){var V=this,Z=Array.isArray(O)?O:void 0,ce=(j=j||(Z?void 0:O))?j.allKeys:void 0;return this._trans("readwrite",function(ve){var Me=V.schema.primKey,Ze=Me.auto,Me=Me.keyPath;if(Me&&Z)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Z&&Z.length!==v.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var Le=v.length,Ze=Me&&Ze?v.map(ei(Me)):v;return V.core.mutate({trans:ve,type:"put",keys:Z,values:Ze,wantResults:ce}).then(function(ze){var Ie=ze.numFailures,Fe=ze.failures;if(Ie===0)return ce?ze.results:ze.lastResult;throw new Re("".concat(V.name,".bulkPut(): ").concat(Ie," of ").concat(Le," operations failed"),Fe)})})},fn.prototype.bulkUpdate=function(v){var O=this,j=this.core,V=v.map(function(ve){return ve.key}),Z=v.map(function(ve){return ve.changes}),ce=[];return this._trans("readwrite",function(ve){return j.getMany({trans:ve,keys:V,cache:"clone"}).then(function(Me){var Le=[],Ze=[],ze=(v.forEach(function(Ie,Fe){var y=Ie.key,$=Ie.changes,F=Me[Fe];if(F){for(var W=0,Q=Object.keys($);W<Q.length;W++){var ue=Q[W],Ce=$[ue];if(ue===O.schema.primKey.keyPath){if(An(Ce,y)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else w(F,ue,Ce)}ce.push(Fe),Le.push(y),Ze.push(F)}}),Le.length);return j.mutate({trans:ve,type:"put",keys:Le,values:Ze,updates:{keys:V,changeSpecs:Z}}).then(function(Ie){var Fe=Ie.numFailures,y=Ie.failures;if(Fe===0)return ze;for(var $=0,F=Object.keys(y);$<F.length;$++){var W,Q=F[$],ue=ce[Number(Q)];ue!=null&&(W=y[Q],delete y[Q],y[ue]=W)}throw new Re("".concat(O.name,".bulkUpdate(): ").concat(Fe," of ").concat(ze," operations failed"),y)})})})},fn.prototype.bulkDelete=function(v){var O=this,j=v.length;return this._trans("readwrite",function(V){return O.core.mutate({trans:V,type:"delete",keys:v}).then(function(Z){return Wr(O,v,Z)})}).then(function(V){var Z=V.numFailures,ce=V.failures;if(Z===0)return V.lastResult;throw new Re("".concat(O.name,".bulkDelete(): ").concat(Z," of ").concat(j," operations failed"),ce)})};var Jt=fn;function fn(){}function Ei(v){function O(ve,Me){if(Me){for(var Le=arguments.length,Ze=new Array(Le-1);--Le;)Ze[Le-1]=arguments[Le];return j[ve].subscribe.apply(null,Ze),v}if(typeof ve=="string")return j[ve]}var j={};O.addEventType=ce;for(var V=1,Z=arguments.length;V<Z;++V)ce(arguments[V]);return O;function ce(ve,Me,Le){var Ze,ze;if(typeof ve!="object")return Me=Me||_t,ze={subscribers:[],fire:Le=Le||re,subscribe:function(Ie){ze.subscribers.indexOf(Ie)===-1&&(ze.subscribers.push(Ie),ze.fire=Me(ze.fire,Ie))},unsubscribe:function(Ie){ze.subscribers=ze.subscribers.filter(function(Fe){return Fe!==Ie}),ze.fire=ze.subscribers.reduce(Me,Le)}},j[ve]=O[ve]=ze;l(Ze=ve).forEach(function(Ie){var Fe=Ze[Ie];if(u(Fe))ce(Ie,Ze[Ie][0],Ze[Ie][1]);else{if(Fe!=="asap")throw new Oe.InvalidArgument("Invalid event config");var y=ce(Ie,$e,function(){for(var $=arguments.length,F=new Array($);$--;)F[$]=arguments[$];y.subscribers.forEach(function(W){C(function(){W.apply(null,F)})})})}})}}function Qr(v,O){return b(O).from({prototype:v}),O}function ti(v,O){return!(v.filter||v.algorithm||v.or)&&(O?v.justLimit:!v.replayFilter)}function _o(v,O){v.filter=gr(v.filter,O)}function Qe(v,O,j){var V=v.replayFilter;v.replayFilter=V?function(){return gr(V(),O())}:O,v.justLimit=j&&!V}function G(v,O){if(v.isPrimKey)return O.primaryKey;var j=O.getIndexByKeyPath(v.index);if(j)return j;throw new Oe.Schema("KeyPath "+v.index+" on object store "+O.name+" is not indexed")}function ye(v,O,j){var V=G(v,O.schema);return O.openCursor({trans:j,values:!v.keysOnly,reverse:v.dir==="prev",unique:!!v.unique,query:{index:V,range:v.range}})}function Pe(v,O,j,V){var Z,ce,ve=v.replayFilter?gr(v.filter,v.replayFilter()):v.filter;return v.or?(Z={},ce=function(Me,Le,Ze){var ze,Ie;ve&&!ve(Le,Ze,function(Fe){return Le.stop(Fe)},function(Fe){return Le.fail(Fe)})||((Ie=""+(ze=Le.primaryKey))=="[object ArrayBuffer]"&&(Ie=""+new Uint8Array(ze)),h(Z,Ie))||(Z[Ie]=!0,O(Me,Le,Ze))},Promise.all([v.or._iterate(ce,j),ke(ye(v,V,j),v.algorithm,ce,!v.keysOnly&&v.valueMapper)])):ke(ye(v,V,j),gr(v.algorithm,ve),O,!v.keysOnly&&v.valueMapper)}function ke(v,O,j,V){var Z=B(V?function(ce,ve,Me){return j(V(ce),ve,Me)}:j);return v.then(function(ce){if(ce)return ce.start(function(){var ve=function(){return ce.continue()};O&&!O(ce,function(Me){return ve=Me},function(Me){ce.stop(Me),ve=re},function(Me){ce.fail(Me),ve=re})||Z(ce.value,ce,function(Me){return ve=Me}),ve()})})}ot.prototype._read=function(v,O){var j=this._ctx;return j.error?j.table._trans(null,In.bind(null,j.error)):j.table._trans("readonly",v).then(O)},ot.prototype._write=function(v){var O=this._ctx;return O.error?O.table._trans(null,In.bind(null,O.error)):O.table._trans("readwrite",v,"locked")},ot.prototype._addAlgorithm=function(v){var O=this._ctx;O.algorithm=gr(O.algorithm,v)},ot.prototype._iterate=function(v,O){return Pe(this._ctx,v,O,this._ctx.table.core)},ot.prototype.clone=function(v){var O=Object.create(this.constructor.prototype),j=Object.create(this._ctx);return v&&d(j,v),O._ctx=j,O},ot.prototype.raw=function(){return this._ctx.valueMapper=null,this},ot.prototype.each=function(v){var O=this._ctx;return this._read(function(j){return Pe(O,v,j,O.table.core)})},ot.prototype.count=function(v){var O=this;return this._read(function(j){var V,Z=O._ctx,ce=Z.table.core;return ti(Z,!0)?ce.count({trans:j,query:{index:G(Z,ce.schema),range:Z.range}}).then(function(ve){return Math.min(ve,Z.limit)}):(V=0,Pe(Z,function(){return++V,!1},j,ce).then(function(){return V}))}).then(v)},ot.prototype.sortBy=function(v,O){var j=v.split(".").reverse(),V=j[0],Z=j.length-1;function ce(Le,Ze){return Ze?ce(Le[j[Ze]],Ze-1):Le[V]}var ve=this._ctx.dir==="next"?1:-1;function Me(Le,Ze){return An(ce(Le,Z),ce(Ze,Z))*ve}return this.toArray(function(Le){return Le.sort(Me)}).then(O)},ot.prototype.toArray=function(v){var O=this;return this._read(function(j){var V,Z,ce,ve=O._ctx;return ve.dir==="next"&&ti(ve,!0)&&0<ve.limit?(V=ve.valueMapper,Z=G(ve,ve.table.core.schema),ve.table.core.query({trans:j,limit:ve.limit,values:!0,query:{index:Z,range:ve.range}}).then(function(Me){return Me=Me.result,V?Me.map(V):Me})):(ce=[],Pe(ve,function(Me){return ce.push(Me)},j,ve.table.core).then(function(){return ce}))},v)},ot.prototype.offset=function(v){var O=this._ctx;return v<=0||(O.offset+=v,ti(O)?Qe(O,function(){var j=v;return function(V,Z){return j===0||(j===1?--j:Z(function(){V.advance(j),j=0}),!1)}}):Qe(O,function(){var j=v;return function(){return--j<0}})),this},ot.prototype.limit=function(v){return this._ctx.limit=Math.min(this._ctx.limit,v),Qe(this._ctx,function(){var O=v;return function(j,V,Z){return--O<=0&&V(Z),0<=O}},!0),this},ot.prototype.until=function(v,O){return _o(this._ctx,function(j,V,Z){return!v(j.value)||(V(Z),O)}),this},ot.prototype.first=function(v){return this.limit(1).toArray(function(O){return O[0]}).then(v)},ot.prototype.last=function(v){return this.reverse().first(v)},ot.prototype.filter=function(v){var O;return _o(this._ctx,function(j){return v(j.value)}),(O=this._ctx).isMatch=gr(O.isMatch,v),this},ot.prototype.and=function(v){return this.filter(v)},ot.prototype.or=function(v){return new this.db.WhereClause(this._ctx.table,v,this)},ot.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ot.prototype.desc=function(){return this.reverse()},ot.prototype.eachKey=function(v){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(j,V){v(V.key,V)})},ot.prototype.eachUniqueKey=function(v){return this._ctx.unique="unique",this.eachKey(v)},ot.prototype.eachPrimaryKey=function(v){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(j,V){v(V.primaryKey,V)})},ot.prototype.keys=function(v){var O=this._ctx,j=(O.keysOnly=!O.isMatch,[]);return this.each(function(V,Z){j.push(Z.key)}).then(function(){return j}).then(v)},ot.prototype.primaryKeys=function(v){var O=this._ctx;if(O.dir==="next"&&ti(O,!0)&&0<O.limit)return this._read(function(V){var Z=G(O,O.table.core.schema);return O.table.core.query({trans:V,values:!1,limit:O.limit,query:{index:Z,range:O.range}})}).then(function(V){return V.result}).then(v);O.keysOnly=!O.isMatch;var j=[];return this.each(function(V,Z){j.push(Z.primaryKey)}).then(function(){return j}).then(v)},ot.prototype.uniqueKeys=function(v){return this._ctx.unique="unique",this.keys(v)},ot.prototype.firstKey=function(v){return this.limit(1).keys(function(O){return O[0]}).then(v)},ot.prototype.lastKey=function(v){return this.reverse().firstKey(v)},ot.prototype.distinct=function(){var v,O=this._ctx,O=O.index&&O.table.schema.idxByName[O.index];return O&&O.multi&&(v={},_o(this._ctx,function(V){var V=V.primaryKey.toString(),Z=h(v,V);return v[V]=!0,!Z})),this},ot.prototype.modify=function(v){var O=this,j=this._ctx;return this._write(function(V){function Z(F,W){var Q=W.failures;Fe+=F-W.numFailures;for(var ue=0,Ce=l(Q);ue<Ce.length;ue++){var je=Ce[ue];Ie.push(Q[je])}}var ce=typeof v=="function"?v:function(F){return Ft(F,v)},ve=j.table.core,ze=ve.schema.primaryKey,Me=ze.outbound,Le=ze.extractKey,Ze=200,ze=O.db._options.modifyChunkSize,Ie=(ze&&(Ze=typeof ze=="object"?ze[ve.name]||ze["*"]||200:ze),[]),Fe=0,y=[],$=v===Kt;return O.clone().primaryKeys().then(function(F){function W(ue){var Ce=Math.min(Ze,F.length-ue),je=F.slice(ue,ue+Ce);return($?Promise.resolve([]):ve.getMany({trans:V,keys:je,cache:"immutable"})).then(function(nt){var pt=[],gt=[],$t=Me?[]:null,Ot=$?je:[];if(!$)for(var Et=0;Et<Ce;++Et){var Yt=nt[Et],kn={value:q(Yt),primKey:F[ue+Et]};ce.call(kn,kn.value,kn)!==!1&&(kn.value==null?Ot.push(F[ue+Et]):Me||An(Le(Yt),Le(kn.value))===0?(gt.push(kn.value),Me&&$t.push(F[ue+Et])):(Ot.push(F[ue+Et]),pt.push(kn.value)))}return Promise.resolve(0<pt.length&&ve.mutate({trans:V,type:"add",values:pt}).then(function(Qn){for(var vn in Qn.failures)Ot.splice(parseInt(vn),1);Z(pt.length,Qn)})).then(function(){return(0<gt.length||Q&&typeof v=="object")&&ve.mutate({trans:V,type:"put",keys:$t,values:gt,criteria:Q,changeSpec:typeof v!="function"&&v,isAdditionalChunk:0<ue}).then(function(Qn){return Z(gt.length,Qn)})}).then(function(){return(0<Ot.length||Q&&$)&&ve.mutate({trans:V,type:"delete",keys:Ot,criteria:Q,isAdditionalChunk:0<ue}).then(function(Qn){return Wr(j.table,Ot,Qn)}).then(function(Qn){return Z(Ot.length,Qn)})}).then(function(){return F.length>ue+Ce&&W(ue+Ze)})})}var Q=ti(j)&&j.limit===1/0&&(typeof v!="function"||$)&&{index:j.index,range:j.range};return W(0).then(function(){if(0<Ie.length)throw new Te("Error modifying one or more objects",Ie,Fe,y);return F.length})})})},ot.prototype.delete=function(){var v=this._ctx,O=v.range;return!ti(v)||v.table.schema.yProps||!v.isPrimKey&&O.type!==3?this.modify(Kt):this._write(function(j){var V=v.table.core.schema.primaryKey,Z=O;return v.table.core.count({trans:j,query:{index:V,range:Z}}).then(function(ce){return v.table.core.mutate({trans:j,type:"deleteRange",range:Z}).then(function(Le){var Me=Le.failures,Le=Le.numFailures;if(Le)throw new Te("Could not delete some values",Object.keys(Me).map(function(Ze){return Me[Ze]}),ce-Le);return ce-Le})})})};var lt=ot;function ot(){}var Kt=function(v,O){return O.value=null};function Ht(v,O){return v<O?-1:v===O?0:1}function Xt(v,O){return O<v?-1:v===O?0:1}function zt(v,O,j){return v=v instanceof lr?new v.Collection(v):v,v._ctx.error=new(j||TypeError)(O),v}function bn(v){return new v.Collection(v,function(){return ta("")}).limit(0)}function mn(y,O,j,V){var Z,ce,ve,Me,Le,Ze,ze,Ie=j.length;if(!j.every(function(F){return typeof F=="string"}))return zt(y,Cr);function Fe(F){Z=F==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},ce=F==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},ve=F==="next"?Ht:Xt;var W=j.map(function(Q){return{lower:ce(Q),upper:Z(Q)}}).sort(function(Q,ue){return ve(Q.lower,ue.lower)});Me=W.map(function(Q){return Q.upper}),Le=W.map(function(Q){return Q.lower}),ze=(Ze=F)==="next"?"":V}Fe("next");var y=new y.Collection(y,function(){return or(Me[0],Le[Ie-1]+V)}),$=(y._ondirectionchange=function(F){Fe(F)},0);return y._addAlgorithm(function(F,W,Q){var ue=F.key;if(typeof ue=="string"){var Ce=ce(ue);if(O(Ce,Le,$))return!0;for(var je=null,nt=$;nt<Ie;++nt){var pt=((gt,$t,Ot,Et,Yt,kn)=>{for(var Qn=Math.min(gt.length,Et.length),vn=-1,Bn=0;Bn<Qn;++Bn){var Or=$t[Bn];if(Or!==Et[Bn])return Yt(gt[Bn],Ot[Bn])<0?gt.substr(0,Bn)+Ot[Bn]+Ot.substr(Bn+1):Yt(gt[Bn],Et[Bn])<0?gt.substr(0,Bn)+Et[Bn]+Ot.substr(Bn+1):0<=vn?gt.substr(0,vn)+$t[vn]+Ot.substr(vn+1):null;Yt(gt[Bn],Or)<0&&(vn=Bn)}return Qn<Et.length&&kn==="next"?gt+Ot.substr(gt.length):Qn<gt.length&&kn==="prev"?gt.substr(0,Ot.length):vn<0?null:gt.substr(0,vn)+Et[vn]+Ot.substr(vn+1)})(ue,Ce,Me[nt],Le[nt],ve,Ze);pt===null&&je===null?$=nt+1:(je===null||0<ve(je,pt))&&(je=pt)}W(je!==null?function(){F.continue(je+ze)}:Q)}return!1}),y}function or(v,O,j,V){return{type:2,lower:v,upper:O,lowerOpen:j,upperOpen:V}}function ta(v){return{type:1,lower:v,upper:v}}Object.defineProperty(On.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),On.prototype.between=function(v,O,j,V){j=j!==!1,V=V===!0;try{return 0<this._cmp(v,O)||this._cmp(v,O)===0&&(j||V)&&(!j||!V)?bn(this):new this.Collection(this,function(){return or(v,O,!j,!V)})}catch{return zt(this,hr)}},On.prototype.equals=function(v){return v==null?zt(this,hr):new this.Collection(this,function(){return ta(v)})},On.prototype.above=function(v){return v==null?zt(this,hr):new this.Collection(this,function(){return or(v,void 0,!0)})},On.prototype.aboveOrEqual=function(v){return v==null?zt(this,hr):new this.Collection(this,function(){return or(v,void 0,!1)})},On.prototype.below=function(v){return v==null?zt(this,hr):new this.Collection(this,function(){return or(void 0,v,!1,!0)})},On.prototype.belowOrEqual=function(v){return v==null?zt(this,hr):new this.Collection(this,function(){return or(void 0,v)})},On.prototype.startsWith=function(v){return typeof v!="string"?zt(this,Cr):this.between(v,v+wa,!0,!0)},On.prototype.startsWithIgnoreCase=function(v){return v===""?this.startsWith(v):mn(this,function(O,j){return O.indexOf(j[0])===0},[v],wa)},On.prototype.equalsIgnoreCase=function(v){return mn(this,function(O,j){return O===j[0]},[v],"")},On.prototype.anyOfIgnoreCase=function(){var v=Ee.apply(be,arguments);return v.length===0?bn(this):mn(this,function(O,j){return j.indexOf(O)!==-1},v,"")},On.prototype.startsWithAnyOfIgnoreCase=function(){var v=Ee.apply(be,arguments);return v.length===0?bn(this):mn(this,function(O,j){return j.some(function(V){return O.indexOf(V)===0})},v,wa)},On.prototype.anyOf=function(){var v,O,j=this,V=Ee.apply(be,arguments),Z=this._cmp;try{V.sort(Z)}catch{return zt(this,hr)}return V.length===0?bn(this):((v=new this.Collection(this,function(){return or(V[0],V[V.length-1])}))._ondirectionchange=function(ce){Z=ce==="next"?j._ascending:j._descending,V.sort(Z)},O=0,v._addAlgorithm(function(ce,ve,Me){for(var Le=ce.key;0<Z(Le,V[O]);)if(++O===V.length)return ve(Me),!1;return Z(Le,V[O])===0||(ve(function(){ce.continue(V[O])}),!1)}),v)},On.prototype.notEqual=function(v){return this.inAnyRange([[-1/0,v],[v,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},On.prototype.noneOf=function(){var v=Ee.apply(be,arguments);if(v.length===0)return new this.Collection(this);try{v.sort(this._ascending)}catch{return zt(this,hr)}var O=v.reduce(function(j,V){return j?j.concat([[j[j.length-1][1],V]]):[[-1/0,V]]},null);return O.push([v[v.length-1],this.db._maxKey]),this.inAnyRange(O,{includeLowers:!1,includeUppers:!1})},On.prototype.inAnyRange=function(v,Q){var j=this,V=this._cmp,Z=this._ascending,ce=this._descending,ve=this._min,Me=this._max;if(v.length===0)return bn(this);if(!v.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&Z(ue[0],ue[1])<=0}))return zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var Le=!Q||Q.includeLowers!==!1,Ze=Q&&Q.includeUppers===!0,ze,Ie=Z;function Fe(ue,Ce){return Ie(ue[0],Ce[0])}try{(ze=v.reduce(function(ue,Ce){for(var je=0,nt=ue.length;je<nt;++je){var pt=ue[je];if(V(Ce[0],pt[1])<0&&0<V(Ce[1],pt[0])){pt[0]=ve(pt[0],Ce[0]),pt[1]=Me(pt[1],Ce[1]);break}}return je===nt&&ue.push(Ce),ue},[])).sort(Fe)}catch{return zt(this,hr)}var y=0,$=Ze?function(ue){return 0<Z(ue,ze[y][1])}:function(ue){return 0<=Z(ue,ze[y][1])},F=Le?function(ue){return 0<ce(ue,ze[y][0])}:function(ue){return 0<=ce(ue,ze[y][0])},W=$,Q=new this.Collection(this,function(){return or(ze[0][0],ze[ze.length-1][1],!Le,!Ze)});return Q._ondirectionchange=function(ue){Ie=ue==="next"?(W=$,Z):(W=F,ce),ze.sort(Fe)},Q._addAlgorithm(function(ue,Ce,je){for(var nt,pt=ue.key;W(pt);)if(++y===ze.length)return Ce(je),!1;return!$(nt=pt)&&!F(nt)||(j._cmp(pt,ze[y][1])===0||j._cmp(pt,ze[y][0])===0||Ce(function(){Ie===Z?ue.continue(ze[y][0]):ue.continue(ze[y][1])}),!1)}),Q},On.prototype.startsWithAnyOf=function(){var v=Ee.apply(be,arguments);return v.every(function(O){return typeof O=="string"})?v.length===0?bn(this):this.inAnyRange(v.map(function(O){return[O,O+wa]})):zt(this,"startsWithAnyOf() only works with strings")};var lr=On;function On(){}function Hn(v){return B(function(O){return Ta(O),v(O.target.error),!1})}function Ta(v){v.stopPropagation&&v.stopPropagation(),v.preventDefault&&v.preventDefault()}var Qa="storagemutated",Gr="x-storagemutated-1",Kr=Ei(null,Qa),kr=(nr.prototype._lock=function(){return E(!rt.global),++this._reculock,this._reculock!==1||rt.global||(rt.lockOwnerFor=this),this},nr.prototype._unlock=function(){if(E(!rt.global),--this._reculock==0)for(rt.global||(rt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var v=this._blockedFuncs.shift();try{pr(v[1],v[0])}catch{}}return this},nr.prototype._locked=function(){return this._reculock&&rt.lockOwnerFor!==this},nr.prototype.create=function(v){var O=this;if(this.mode){var j=this.db.idbdb,V=this.db._state.dbOpenError;if(E(!this.idbtrans),!v&&!j)switch(V&&V.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(V);case"MissingAPIError":throw new Oe.MissingAPI(V.message,V);default:throw new Oe.OpenFailed(V)}if(!this.active)throw new Oe.TransactionInactive;E(this._completion._state===null),(v=this.idbtrans=v||(this.db.core||j).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=B(function(Z){Ta(Z),O._reject(v.error)}),v.onabort=B(function(Z){Ta(Z),O.active&&O._reject(new Oe.Abort(v.error)),O.active=!1,O.on("abort").fire(Z)}),v.oncomplete=B(function(){O.active=!1,O._resolve(),"mutatedParts"in v&&Kr.storagemutated.fire(v.mutatedParts)})}return this},nr.prototype._promise=function(v,O,j){var V,Z=this;return v==="readwrite"&&this.mode!=="readwrite"?In(new Oe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Rt(function(ce,ve){Z._blockedFuncs.push([function(){Z._promise(v,O,j).then(ce,ve)},rt])}):j?Lt(function(){var ce=new Rt(function(ve,Me){Z._lock();var Le=O(ve,Me,Z);Le&&Le.then&&Le.then(ve,Me)});return ce.finally(function(){return Z._unlock()}),ce._lib=!0,ce}):((V=new Rt(function(ce,ve){var Me=O(ce,ve,Z);Me&&Me.then&&Me.then(ce,ve)}))._lib=!0,V):In(new Oe.TransactionInactive)},nr.prototype._root=function(){return this.parent?this.parent._root():this},nr.prototype.waitFor=function(v){var O,j=this._root(),V=Rt.resolve(v),Z=(j._waitingFor?j._waitingFor=j._waitingFor.then(function(){return V}):(j._waitingFor=V,j._waitingQueue=[],O=j.idbtrans.objectStore(j.storeNames[0]),(function ce(){for(++j._spinCount;j._waitingQueue.length;)j._waitingQueue.shift()();j._waitingFor&&(O.get(-1/0).onsuccess=ce)})()),j._waitingFor);return new Rt(function(ce,ve){V.then(function(Me){return j._waitingQueue.push(B(ce.bind(null,Me)))},function(Me){return j._waitingQueue.push(B(ve.bind(null,Me)))}).finally(function(){j._waitingFor===Z&&(j._waitingFor=null)})})},nr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},nr.prototype.table=function(v){var O=this._memoizedTables||(this._memoizedTables={});if(h(O,v))return O[v];var j=this.schema[v];if(j)return(j=new this.db.Table(v,j,this)).core=this.db.core.table(v),O[v]=j;throw new Oe.NotFound("Table "+v+" not part of transaction")},nr);function nr(){}function Ar(v,O,j,V,Z,ce,ve,Me){return{name:v,keyPath:O,unique:j,multi:V,auto:Z,compound:ce,src:(j&&!ve?"&":"")+(V?"*":"")+(Z?"++":"")+ni(O),type:Me}}function ni(v){return typeof v=="string"?v:v?"["+[].join.call(v,"+")+"]":""}function ri(v,O,j){return{name:v,primKey:O,indexes:j,mappedClass:null,idxByName:(V=function(Z){return[Z.name,Z]},j.reduce(function(Z,ce,ve){return ce=V(ce,ve),ce&&(Z[ce[0]]=ce[1]),Z},{}))};var V}var Hr=function(v){try{return v.only([[]]),Hr=function(){return[[]]},[[]]}catch{return Hr=function(){return wa},wa}};function Ya(v){return v==null?function(){}:typeof v=="string"?(O=v).split(".").length===1?function(j){return j[O]}:function(j){return P(j,O)}:function(j){return P(j,v)};var O}function Yr(v){return[].slice.call(v)}var Lr=0;function Xn(v){return v==null?":id":typeof v=="string"?v:"[".concat(v.join("+"),"]")}function _r(v,O,Le){function V($){if($.type===3)return null;if($.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ie=$.lower,Fe=$.upper,y=$.lowerOpen,$=$.upperOpen;return Ie===void 0?Fe===void 0?null:O.upperBound(Fe,!!$):Fe===void 0?O.lowerBound(Ie,!!y):O.bound(Ie,Fe,!!y,!!$)}function Z(ze){var Ie,Fe=ze.name;return{name:Fe,schema:ze,mutate:function(y){var $=y.trans,F=y.type,W=y.keys,Q=y.values,ue=y.range;return new Promise(function(Ce,je){Ce=B(Ce);var nt=$.objectStore(Fe),pt=nt.keyPath==null,gt=F==="put"||F==="add";if(!gt&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var $t,Ot=(W||Q||{length:1}).length;if(W&&Q&&W.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(Ot===0)return Ce({numFailures:0,failures:{},results:[],lastResult:void 0});function Et(Tr){++Qn,Ta(Tr)}var Yt=[],kn=[],Qn=0;if(F==="deleteRange"){if(ue.type===4)return Ce({numFailures:Qn,failures:kn,results:[],lastResult:void 0});ue.type===3?Yt.push($t=nt.clear()):Yt.push($t=nt.delete(V(ue)))}else{var pt=gt?pt?[Q,W]:[Q,null]:[W,null],vn=pt[0],Bn=pt[1];if(gt)for(var Or=0;Or<Ot;++Or)Yt.push($t=Bn&&Bn[Or]!==void 0?nt[F](vn[Or],Bn[Or]):nt[F](vn[Or])),$t.onerror=Et;else for(Or=0;Or<Ot;++Or)Yt.push($t=nt[F](vn[Or])),$t.onerror=Et}function ui(Tr){Tr=Tr.target.result,Yt.forEach(function(po,Fs){return po.error!=null&&(kn[Fs]=po.error)}),Ce({numFailures:Qn,failures:kn,results:F==="delete"?W:Yt.map(function(po){return po.result}),lastResult:Tr})}$t.onerror=function(Tr){Et(Tr),ui(Tr)},$t.onsuccess=ui})},getMany:function(y){var $=y.trans,F=y.keys;return new Promise(function(W,Q){W=B(W);for(var ue,Ce=$.objectStore(Fe),je=F.length,nt=new Array(je),pt=0,gt=0,$t=function(Yt){Yt=Yt.target,nt[Yt._pos]=Yt.result,++gt===pt&&W(nt)},Ot=Hn(Q),Et=0;Et<je;++Et)F[Et]!=null&&((ue=Ce.get(F[Et]))._pos=Et,ue.onsuccess=$t,ue.onerror=Ot,++pt);pt===0&&W(nt)})},get:function(y){var $=y.trans,F=y.key;return new Promise(function(W,Q){W=B(W);var ue=$.objectStore(Fe).get(F);ue.onsuccess=function(Ce){return W(Ce.target.result)},ue.onerror=Hn(Q)})},query:(Ie=Me,function(y){return new Promise(function($,F){$=B($);var W,Q,ue,gt=y.trans,Ce=y.values,je=y.limit,pt=y.query,nt=je===1/0?void 0:je,$t=pt.index,pt=pt.range,gt=gt.objectStore(Fe),gt=$t.isPrimaryKey?gt:gt.index($t.name),$t=V(pt);if(je===0)return $({result:[]});Ie?((pt=Ce?gt.getAll($t,nt):gt.getAllKeys($t,nt)).onsuccess=function(Ot){return $({result:Ot.target.result})},pt.onerror=Hn(F)):(W=0,Q=!Ce&&"openKeyCursor"in gt?gt.openKeyCursor($t):gt.openCursor($t),ue=[],Q.onsuccess=function(Ot){var Et=Q.result;return!Et||(ue.push(Ce?Et.value:Et.primaryKey),++W===je)?$({result:ue}):void Et.continue()},Q.onerror=Hn(F))})}),openCursor:function(y){var $=y.trans,F=y.values,W=y.query,Q=y.reverse,ue=y.unique;return new Promise(function(Ce,je){Ce=B(Ce);var gt=W.index,nt=W.range,pt=$.objectStore(Fe),pt=gt.isPrimaryKey?pt:pt.index(gt.name),gt=Q?ue?"prevunique":"prev":ue?"nextunique":"next",$t=!F&&"openKeyCursor"in pt?pt.openKeyCursor(V(nt),gt):pt.openCursor(V(nt),gt);$t.onerror=Hn(je),$t.onsuccess=B(function(Ot){var Et,Yt,kn,Qn,vn=$t.result;vn?(vn.___id=++Lr,vn.done=!1,Et=vn.continue.bind(vn),Yt=(Yt=vn.continuePrimaryKey)&&Yt.bind(vn),kn=vn.advance.bind(vn),Qn=function(){throw new Error("Cursor not stopped")},vn.trans=$,vn.stop=vn.continue=vn.continuePrimaryKey=vn.advance=function(){throw new Error("Cursor not started")},vn.fail=B(je),vn.next=function(){var Bn=this,Or=1;return this.start(function(){return Or--?Bn.continue():Bn.stop()}).then(function(){return Bn})},vn.start=function(Bn){function Or(){if($t.result)try{Bn()}catch(Tr){vn.fail(Tr)}else vn.done=!0,vn.start=function(){throw new Error("Cursor behind last entry")},vn.stop()}var ui=new Promise(function(Tr,po){Tr=B(Tr),$t.onerror=Hn(po),vn.fail=po,vn.stop=function(Fs){vn.stop=vn.continue=vn.continuePrimaryKey=vn.advance=Qn,Tr(Fs)}});return $t.onsuccess=B(function(Tr){$t.onsuccess=Or,Or()}),vn.continue=Et,vn.continuePrimaryKey=Yt,vn.advance=kn,Or(),ui},Ce(vn)):Ce(null)},je)})},count:function(y){var $=y.query,F=y.trans,W=$.index,Q=$.range;return new Promise(function(ue,Ce){var je=F.objectStore(Fe),je=W.isPrimaryKey?je:je.index(W.name),nt=V(Q),nt=nt?je.count(nt):je.count();nt.onsuccess=B(function(pt){return ue(pt.target.result)}),nt.onerror=Hn(Ce)})}}}ce=Le,ve=Yr((Le=v).objectStoreNames);var ce,Le={schema:{name:Le.name,tables:ve.map(function(ze){return ce.objectStore(ze)}).map(function(ze){var Ie=ze.keyPath,Fe=ze.autoIncrement,$=u(Ie),y={},$={name:ze.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ie==null,compound:$,keyPath:Ie,autoIncrement:Fe,unique:!0,extractKey:Ya(Ie)},indexes:Yr(ze.indexNames).map(function(F){return ze.index(F)}).map(function(ue){var Ce=ue.name,W=ue.unique,Q=ue.multiEntry,ue=ue.keyPath,Ce={name:Ce,compound:u(ue),keyPath:ue,unique:W,multiEntry:Q,extractKey:Ya(ue)};return y[Xn(ue)]=Ce}),getIndexByKeyPath:function(F){return y[Xn(F)]}};return y[":id"]=$.primaryKey,Ie!=null&&(y[Xn(Ie)]=$.primaryKey),$})},hasGetAll:0<ve.length&&"getAll"in ce.objectStore(ve[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},ve=Le.schema,Me=Le.hasGetAll,Le=ve.tables.map(Z),Ze={};return Le.forEach(function(ze){return Ze[ze.name]=ze}),{stack:"dbcore",transaction:v.transaction.bind(v),table:function(ze){if(Ze[ze])return Ze[ze];throw new Error("Table '".concat(ze,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Hr(O),schema:ve}}function Ua(v,O,j,V){return j=j.IDBKeyRange,O=_r(O,j,V),{dbcore:v.dbcore.reduce(function(Z,ce){return ce=ce.create,r(r({},Z),ce(Z))},O)}}function ci(v,O){var j=O.db,j=Ua(v._middlewares,j,v._deps,O);v.core=j.dbcore,v.tables.forEach(function(V){var Z=V.name;v.core.schema.tables.some(function(ce){return ce.name===Z})&&(V.core=v.core.table(Z),v[Z]instanceof v.Table)&&(v[Z].core=V.core)})}function Si(v,O,j,V){j.forEach(function(Z){var ce=V[Z];O.forEach(function(ve){var Me=(function Le(Ze,ze){return I(Ze,ze)||(Ze=p(Ze))&&Le(Ze,ze)})(ve,Z);(!Me||"value"in Me&&Me.value===void 0)&&(ve===v.Transaction.prototype||ve instanceof v.Transaction?_(ve,Z,{get:function(){return this.table(Z)},set:function(Le){x(this,Z,{value:Le,writable:!0,configurable:!0,enumerable:!0})}}):ve[Z]=new v.Table(Z,ce))})})}function vo(v,O){O.forEach(function(j){for(var V in j)j[V]instanceof v.Table&&delete j[V]})}function pl(v,O){return v._cfg.version-O._cfg.version}function Ko(v,O,j,V){var Z=v._dbSchema,ce=(j.objectStoreNames.contains("$meta")&&!Z.$meta&&(Z.$meta=ri("$meta",Hl("")[0],[]),v._storeNames.push("$meta")),v._createTransaction("readwrite",v._storeNames,Z)),ve=(ce.create(j),ce._completion.catch(V),ce._reject.bind(ce)),Me=rt.transless||rt;Lt(function(){if(rt.trans=ce,rt.transless=Me,O!==0)return ci(v,j),Ze=O,((Le=ce).storeNames.includes("$meta")?Le.table("$meta").get("version").then(function(ze){return ze??Ze}):Rt.resolve(Ze)).then(function(W){var Ie=v,Fe=W,y=ce,$=j,F=[],W=Ie._versions,Q=Ie._dbSchema=yo(0,Ie.idbdb,$);return(W=W.filter(function(ue){return ue._cfg.version>=Fe})).length===0?Rt.resolve():(W.forEach(function(ue){F.push(function(){var Ce,je,nt,pt=Q,gt=ue._cfg.dbschema,$t=(ks(Ie,pt,$),ks(Ie,gt,$),Q=Ie._dbSchema=gt,Cs(pt,gt)),Ot=($t.add.forEach(function(Et){io($,Et[0],Et[1].primKey,Et[1].indexes)}),$t.change.forEach(function(Et){if(Et.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var Yt=$.objectStore(Et.name);Et.add.forEach(function(kn){return Ps(Yt,kn)}),Et.change.forEach(function(kn){Yt.deleteIndex(kn.name),Ps(Yt,kn)}),Et.del.forEach(function(kn){return Yt.deleteIndex(kn)})}),ue._cfg.contentUpgrade);if(Ot&&ue._cfg.version>Fe)return ci(Ie,$),y._memoizedTables={},Ce=R(gt),$t.del.forEach(function(Et){Ce[Et]=pt[Et]}),vo(Ie,[Ie.Transaction.prototype]),Si(Ie,[Ie.Transaction.prototype],l(Ce),Ce),y.schema=Ce,(je=Y(Ot))&&Qt(),gt=Rt.follow(function(){var Et;(nt=Ot(y))&&je&&(Et=jt.bind(null,null),nt.then(Et,Et))}),nt&&typeof nt.then=="function"?Rt.resolve(nt):gt.then(function(){return nt})}),F.push(function(Ce){var je,nt,pt=ue._cfg.dbschema;je=pt,nt=Ce,[].slice.call(nt.db.objectStoreNames).forEach(function(gt){return je[gt]==null&&nt.db.deleteObjectStore(gt)}),vo(Ie,[Ie.Transaction.prototype]),Si(Ie,[Ie.Transaction.prototype],Ie._storeNames,Ie._dbSchema),y.schema=Ie._dbSchema}),F.push(function(Ce){Ie.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ie.idbdb.version/10)===ue._cfg.version?(Ie.idbdb.deleteObjectStore("$meta"),delete Ie._dbSchema.$meta,Ie._storeNames=Ie._storeNames.filter(function(je){return je!=="$meta"})):Ce.objectStore("$meta").put(ue._cfg.version,"version"))})}),(function ue(){return F.length?Rt.resolve(F.shift()(y.idbtrans)).then(ue):Rt.resolve()})().then(function(){Kl(Q,$)}))}).catch(ve);var Le,Ze;l(Z).forEach(function(ze){io(j,ze,Z[ze].primKey,Z[ze].indexes)}),ci(v,j),Rt.follow(function(){return v.on.populate.fire(ce)}).catch(ve)})}function Ss(v,O){Kl(v._dbSchema,O),O.db.version%10!=0||O.objectStoreNames.contains("$meta")||O.db.createObjectStore("$meta").add(Math.ceil(O.db.version/10-1),"version");var j=yo(0,v.idbdb,O);ks(v,v._dbSchema,O);for(var V=0,Z=Cs(j,v._dbSchema).change;V<Z.length;V++){var ce=(ve=>{if(ve.change.length||ve.recreate)return console.warn("Unable to patch indexes of table ".concat(ve.name," because it has changes on the type of index or primary key.")),{value:void 0};var Me=O.objectStore(ve.name);ve.add.forEach(function(Le){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ve.name,".").concat(Le.src)),Ps(Me,Le)})})(Z[V]);if(typeof ce=="object")return ce.value}}function Cs(v,O){var j,V={del:[],add:[],change:[]};for(j in v)O[j]||V.del.push(j);for(j in O){var Z=v[j],ce=O[j];if(Z){var ve={name:j,def:ce,recreate:!1,del:[],add:[],change:[]};if(""+(Z.primKey.keyPath||"")!=""+(ce.primKey.keyPath||"")||Z.primKey.auto!==ce.primKey.auto)ve.recreate=!0,V.change.push(ve);else{var Me=Z.idxByName,Le=ce.idxByName,Ze=void 0;for(Ze in Me)Le[Ze]||ve.del.push(Ze);for(Ze in Le){var ze=Me[Ze],Ie=Le[Ze];ze?ze.src!==Ie.src&&ve.change.push(Ie):ve.add.push(Ie)}(0<ve.del.length||0<ve.add.length||0<ve.change.length)&&V.change.push(ve)}}else V.add.push([j,ce])}return V}function io(v,O,j,V){var Z=v.db.createObjectStore(O,j.keyPath?{keyPath:j.keyPath,autoIncrement:j.auto}:{autoIncrement:j.auto});V.forEach(function(ce){return Ps(Z,ce)})}function Kl(v,O){l(v).forEach(function(j){O.db.objectStoreNames.contains(j)||(Ye&&console.debug("Dexie: Creating missing table",j),io(O,j,v[j].primKey,v[j].indexes))})}function Ps(v,O){v.createIndex(O.name,O.keyPath,{unique:O.unique,multiEntry:O.multi})}function yo(v,O,j){var V={};return S(O.objectStoreNames,0).forEach(function(Z){for(var ce=j.objectStore(Z),ve=Ar(ni(Ze=ce.keyPath),Ze||"",!0,!1,!!ce.autoIncrement,Ze&&typeof Ze!="string",!0),Me=[],Le=0;Le<ce.indexNames.length;++Le){var ze=ce.index(ce.indexNames[Le]),Ze=ze.keyPath,ze=Ar(ze.name,Ze,!!ze.unique,!!ze.multiEntry,!1,Ze&&typeof Ze!="string",!1);Me.push(ze)}V[Z]=ri(Z,ve,Me)}),V}function ks(v,O,j){for(var V=j.db.objectStoreNames,Z=0;Z<V.length;++Z){var ce=V[Z],ve=j.objectStore(ce);v._hasGetAll="getAll"in ve;for(var Me=0;Me<ve.indexNames.length;++Me){var Le,Ze=ve.indexNames[Me],ze=ve.index(Ze).keyPath,ze=typeof ze=="string"?ze:"["+S(ze).join("+")+"]";O[ce]&&(Le=O[ce].idxByName[ze])&&(Le.name=Ze,delete O[ce].idxByName[ze],O[ce].idxByName[Ze]=Le)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(v._hasGetAll=!1)}function Hl(v){return v.split(",").map(function(O,j){var Z=O.split(":"),V=(V=Z[1])==null?void 0:V.trim(),Z=(O=Z[0].trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(Z)?Z.match(/^\[(.*)\]$/)[1].split("+"):Z;return Ar(Z,ce||null,/\&/.test(O),/\*/.test(O),/\+\+/.test(O),u(ce),j===0,V)})}bo.prototype._createTableSchema=ri,bo.prototype._parseIndexSyntax=Hl,bo.prototype._parseStoresSpec=function(v,O){var j=this;l(v).forEach(function(V){if(v[V]!==null){var Z=j._parseIndexSyntax(v[V]),ce=Z.shift();if(!ce)throw new Oe.Schema("Invalid schema for table "+V+": "+v[V]);if(ce.unique=!0,ce.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");Z.forEach(function(ve){if(ve.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!ve.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),ce=j._createTableSchema(V,ce,Z),O[V]=ce}})},bo.prototype.stores=function(j){var O=this.db,j=(this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,j):j,O._versions),V={},Z={};return j.forEach(function(ce){d(V,ce._cfg.storesSource),Z=ce._cfg.dbschema={},ce._parseStoresSpec(V,Z)}),O._dbSchema=Z,vo(O,[O._allTables,O,O.Transaction.prototype]),Si(O,[O._allTables,O,O.Transaction.prototype,this._cfg.tables],l(Z),Z),O._storeNames=l(Z),this},bo.prototype.upgrade=function(v){return this._cfg.contentUpgrade=Ne(this._cfg.contentUpgrade||re,v),this};var Ho=bo;function bo(){}function As(v,O){var j=v._dbNamesDB;return j||(j=v._dbNamesDB=new bi(ha,{addons:[],indexedDB:v,IDBKeyRange:O})).version(1).stores({dbnames:"name"}),j.table("dbnames")}function qo(v){return v&&typeof v.databases=="function"}function Os(v){return Lt(function(){return rt.letThrough=!0,v()})}function fl(v){return!("from"in v)}var Ea=function(v,O){var j;if(!this)return j=new Ea,v&&"d"in v&&d(j,v),j;d(this,arguments.length?{d:1,from:v,to:1<arguments.length?O:v}:{d:0})};function xo(v,O,j){var V=An(O,j);if(!isNaN(V)){if(0<V)throw RangeError();if(fl(v))return d(v,{from:O,to:j,d:1});var V=v.l,Z=v.r;if(An(j,v.from)<0)return V?xo(V,O,j):v.l={from:O,to:j,d:1,l:null,r:null},Ds(v);if(0<An(O,v.to))return Z?xo(Z,O,j):v.r={from:O,to:j,d:1,l:null,r:null},Ds(v);An(O,v.from)<0&&(v.from=O,v.l=null,v.d=Z?Z.d+1:1),0<An(j,v.to)&&(v.to=j,v.r=null,v.d=v.l?v.l.d+1:1),O=!v.r,V&&!v.l&&Yi(v,V),Z&&O&&Yi(v,Z)}}function Yi(v,O){fl(O)||(function j(V,Z){var ce=Z.from,ve=Z.l,Me=Z.r;xo(V,ce,Z.to),ve&&j(V,ve),Me&&j(V,Me)})(v,O)}function oo(v,O){var j=$s(O),V=j.next();if(!V.done)for(var Z=V.value,ce=$s(v),ve=ce.next(Z.from),Me=ve.value;!V.done&&!ve.done;){if(An(Me.from,Z.to)<=0&&0<=An(Me.to,Z.from))return!0;An(Z.from,Me.from)<0?Z=(V=j.next(Me.from)).value:Me=(ve=ce.next(Z.from)).value}return!1}function $s(v){var O=fl(v)?null:{s:0,n:v};return{next:function(j){for(var V=0<arguments.length;O;)switch(O.s){case 0:if(O.s=1,V)for(;O.n.l&&An(j,O.n.from)<0;)O={up:O,n:O.n.l,s:1};else for(;O.n.l;)O={up:O,n:O.n.l,s:1};case 1:if(O.s=2,!V||An(j,O.n.to)<=0)return{value:O.n,done:!1};case 2:if(O.n.r){O.s=3,O={up:O,n:O.n.r,s:0};continue}case 3:O=O.up}return{done:!0}}}}function Ds(v){var O,j,V,Z=(((Z=v.r)==null?void 0:Z.d)||0)-(((Z=v.l)==null?void 0:Z.d)||0),Z=1<Z?"r":Z<-1?"l":"";Z&&(O=Z=="r"?"l":"r",j=r({},v),V=v[Z],v.from=V.from,v.to=V.to,v[Z]=V[Z],j[Z]=V[O],(v[O]=j).d=ml(j)),v.d=ml(v)}function ml(j){var O=j.r,j=j.l;return(O?j?Math.max(O.d,j.d):O.d:j?j.d:0)+1}function Xo(v,O){return l(O).forEach(function(j){v[j]?Yi(v[j],O[j]):v[j]=(function V(Z){var ce,ve,Me={};for(ce in Z)h(Z,ce)&&(ve=Z[ce],Me[ce]=!ve||typeof ve!="object"||ie.has(ve.constructor)?ve:V(ve));return Me})(O[j])}),v}function ql(v,O){return v.all||O.all||Object.keys(v).some(function(j){return O[j]&&oo(O[j],v[j])})}m(Ea.prototype,((dt={add:function(v){return Yi(this,v),this},addKey:function(v){return xo(this,v,v),this},addKeys:function(v){var O=this;return v.forEach(function(j){return xo(O,j,j)}),this},hasKey:function(v){var O=$s(this).next(v).value;return O&&An(O.from,v)<=0&&0<=An(O.to,v)}})[X]=function(){return $s(this)},dt));var Ii={},Qo={},Is=!1;function wo(v){Xo(Qo,v),Is||(Is=!0,setTimeout(function(){Is=!1,hl(Qo,!(Qo={}))},0))}function hl(v,O){O===void 0&&(O=!1);var j=new Set;if(v.all)for(var V=0,Z=Object.values(Ii);V<Z.length;V++)Xl(Me=Z[V],v,j,O);else for(var ce in v){var ve,Me,ce=/^idb\:\/\/(.*)\/(.*)\//.exec(ce);ce&&(ve=ce[1],ce=ce[2],Me=Ii["idb://".concat(ve,"/").concat(ce)])&&Xl(Me,v,j,O)}j.forEach(function(Le){return Le()})}function Xl(v,O,j,V){for(var Z=[],ce=0,ve=Object.entries(v.queries.query);ce<ve.length;ce++){for(var Me=ve[ce],Le=Me[0],Ze=[],ze=0,Ie=Me[1];ze<Ie.length;ze++){var Fe=Ie[ze];ql(O,Fe.obsSet)?Fe.subscribers.forEach(function(W){return j.add(W)}):V&&Ze.push(Fe)}V&&Z.push([Le,Ze])}if(V)for(var y=0,$=Z;y<$.length;y++){var F=$[y],Le=F[0],Ze=F[1];v.queries.query[Le]=Ze}}function Cc(v){var O=v._state,j=v._deps.indexedDB;if(O.isBeingOpened||v.idbdb)return O.dbReadyPromise.then(function(){return O.dbOpenError?In(O.dbOpenError):v});O.isBeingOpened=!0,O.dbOpenError=null,O.openComplete=!1;var V=O.openCanceller,Z=Math.round(10*v.verno),ce=!1;function ve(){if(O.openCanceller!==V)throw new Oe.DatabaseClosed("db.open() was cancelled")}function Me(){return new Rt(function(Fe,y){if(ve(),!j)throw new Oe.MissingAPI;var $=v.name,F=O.autoSchema||!Z?j.open($):j.open($,Z);if(!F)throw new Oe.MissingAPI;F.onerror=Hn(y),F.onblocked=B(v._fireOnBlocked),F.onupgradeneeded=B(function(W){var Q;ze=F.transaction,O.autoSchema&&!v._options.allowEmptyDB?(F.onerror=Ta,ze.abort(),F.result.close(),(Q=j.deleteDatabase($)).onsuccess=Q.onerror=B(function(){y(new Oe.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(ze.onerror=Hn(y),Q=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,Ie=Q<1,v.idbdb=F.result,ce&&Ss(v,ze),Ko(v,Q/10,ze,y))},y),F.onsuccess=B(function(){ze=null;var W,Q,ue,Ce,je,nt,pt=v.idbdb=F.result,gt=S(pt.objectStoreNames);if(0<gt.length)try{var $t=pt.transaction((je=gt).length===1?je[0]:je,"readonly");if(O.autoSchema)nt=pt,Ce=$t,(ue=v).verno=nt.version/10,Ce=ue._dbSchema=yo(0,nt,Ce),ue._storeNames=S(nt.objectStoreNames,0),Si(ue,[ue._allTables],l(Ce),Ce);else if(ks(v,v._dbSchema,$t),Q=$t,((Q=Cs(yo(0,(W=v).idbdb,Q),W._dbSchema)).add.length||Q.change.some(function(Ot){return Ot.add.length||Ot.change.length}))&&!ce)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),pt.close(),Z=pt.version+1,ce=!0,Fe(Me());ci(v,$t)}catch{}la.push(v),pt.onversionchange=B(function(Ot){O.vcFired=!0,v.on("versionchange").fire(Ot)}),pt.onclose=B(function(){v.close({disableAutoOpen:!1})}),Ie&&(gt=v._deps,je=$,qo(nt=gt.indexedDB)||je===ha||As(nt,gt.IDBKeyRange).put({name:je}).catch(re)),Fe()},y)}).catch(function(Fe){switch(Fe?.name){case"UnknownError":if(0<O.PR1398_maxLoop)return O.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Me();break;case"VersionError":if(0<Z)return Z=0,Me()}return Rt.reject(Fe)})}var Le,Ze=O.dbReadyResolve,ze=null,Ie=!1;return Rt.race([V,(typeof navigator>"u"?Rt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Fe){function y(){return indexedDB.databases().finally(Fe)}Le=setInterval(y,100),y()}).finally(function(){return clearInterval(Le)}):Promise.resolve()).then(Me)]).then(function(){return ve(),O.onReadyBeingFired=[],Rt.resolve(Os(function(){return v.on.ready.fire(v.vip)})).then(function Fe(){var y;if(0<O.onReadyBeingFired.length)return y=O.onReadyBeingFired.reduce(Ne,re),O.onReadyBeingFired=[],Rt.resolve(Os(function(){return y(v.vip)})).then(Fe)})}).finally(function(){O.openCanceller===V&&(O.onReadyBeingFired=null,O.isBeingOpened=!1)}).catch(function(Fe){O.dbOpenError=Fe;try{ze&&ze.abort()}catch{}return V===O.openCanceller&&v._close(),In(Fe)}).finally(function(){O.openComplete=!0,Ze()}).then(function(){var Fe;return Ie&&(Fe={},v.tables.forEach(function(y){y.schema.indexes.forEach(function($){$.name&&(Fe["idb://".concat(v.name,"/").concat(y.name,"/").concat($.name)]=new Ea(-1/0,[[[]]]))}),Fe["idb://".concat(v.name,"/").concat(y.name,"/")]=Fe["idb://".concat(v.name,"/").concat(y.name,"/:dels")]=new Ea(-1/0,[[[]]])}),Kr(Qa).fire(Fe),hl(Fe,!0)),v})}function Yo(v){function O(ce){return v.next(ce)}var j=Z(O),V=Z(function(ce){return v.throw(ce)});function Z(ce){return function(Me){var Me=ce(Me),Le=Me.value;return Me.done?Le:Le&&typeof Le.then=="function"?Le.then(j,V):u(Le)?Promise.all(Le).then(j,V):j(Le)}}return Z(O)()}function Zi(v,O,j){for(var V=u(v)?v.slice():[v],Z=0;Z<j;++Z)V.push(O);return V}var Pc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(v){return r(r({},v),{table:function(V){var j=v.table(V),V=j.schema,Z={},ce=[];function ve(Fe,y,$){var ue=Xn(Fe),F=Z[ue]=Z[ue]||[],W=Fe==null?0:typeof Fe=="string"?1:Fe.length,Q=0<y,ue=r(r({},$),{name:Q?"".concat(ue,"(virtual-from:").concat($.name,")"):$.name,lowLevelIndex:$,isVirtual:Q,keyTail:y,keyLength:W,extractKey:Ya(Fe),unique:!Q&&$.unique});return F.push(ue),ue.isPrimaryKey||ce.push(ue),1<W&&ve(W===2?Fe[0]:Fe.slice(0,W-1),y+1,$),F.sort(function(Ce,je){return Ce.keyTail-je.keyTail}),ue}var Me=ve(V.primaryKey.keyPath,0,V.primaryKey);Z[":id"]=[Me];for(var Le=0,Ze=V.indexes;Le<Ze.length;Le++){var ze=Ze[Le];ve(ze.keyPath,0,ze)}function Ie(Fe){var y,$=Fe.query.index;return $.isVirtual?r(r({},Fe),{query:{index:$.lowLevelIndex,range:(y=Fe.query.range,$=$.keyTail,{type:y.type===1?2:y.type,lower:Zi(y.lower,y.lowerOpen?v.MAX_KEY:v.MIN_KEY,$),lowerOpen:!0,upper:Zi(y.upper,y.upperOpen?v.MIN_KEY:v.MAX_KEY,$),upperOpen:!0})}}):Fe}return r(r({},j),{schema:r(r({},V),{primaryKey:Me,indexes:ce,getIndexByKeyPath:function(Fe){return(Fe=Z[Xn(Fe)])&&Fe[0]}}),count:function(Fe){return j.count(Ie(Fe))},query:function(Fe){return j.query(Ie(Fe))},openCursor:function(Fe){var y=Fe.query.index,$=y.keyTail,F=y.keyLength;return y.isVirtual?j.openCursor(Ie(Fe)).then(function(Q){return Q&&W(Q)}):j.openCursor(Fe);function W(Q){return Object.create(Q,{continue:{value:function(ue){ue!=null?Q.continue(Zi(ue,Fe.reverse?v.MAX_KEY:v.MIN_KEY,$)):Fe.unique?Q.continue(Q.key.slice(0,F).concat(Fe.reverse?v.MIN_KEY:v.MAX_KEY,$)):Q.continue()}},continuePrimaryKey:{value:function(ue,Ce){Q.continuePrimaryKey(Zi(ue,v.MAX_KEY,$),Ce)}},primaryKey:{get:function(){return Q.primaryKey}},key:{get:function(){var ue=Q.key;return F===1?ue[0]:ue.slice(0,F)}},value:{get:function(){return Q.value}}})}}})}})}};function Zo(v,O,j,V){return j=j||{},V=V||"",l(v).forEach(function(Z){var ce,ve,Me;h(O,Z)?(ce=v[Z],ve=O[Z],typeof ce=="object"&&typeof ve=="object"&&ce&&ve?(Me=ae(ce))!==ae(ve)?j[V+Z]=O[Z]:Me==="Object"?Zo(ce,ve,j,V+Z+"."):ce!==ve&&(j[V+Z]=O[Z]):ce!==ve&&(j[V+Z]=O[Z])):j[V+Z]=void 0}),l(O).forEach(function(Z){h(v,Z)||(j[V+Z]=O[Z])}),j}function so(v,O){return O.type==="delete"?O.keys:O.keys||O.values.map(v.extractKey)}var Mo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(v){return r(r({},v),{table:function(O){var j=v.table(O),V=j.schema.primaryKey;return r(r({},j),{mutate:function(Z){var ce=rt.trans,ve=ce.table(O).hook,Me=ve.deleting,Le=ve.creating,Ze=ve.updating;switch(Z.type){case"add":if(Le.fire===re)break;return ce._promise("readwrite",function(){return ze(Z)},!0);case"put":if(Le.fire===re&&Ze.fire===re)break;return ce._promise("readwrite",function(){return ze(Z)},!0);case"delete":if(Me.fire===re)break;return ce._promise("readwrite",function(){return ze(Z)},!0);case"deleteRange":if(Me.fire===re)break;return ce._promise("readwrite",function(){return(function Ie(Fe,y,$){return j.query({trans:Fe,values:!1,query:{index:V,range:y},limit:$}).then(function(F){var W=F.result;return ze({type:"delete",keys:W,trans:Fe}).then(function(Q){return 0<Q.numFailures?Promise.reject(Q.failures[0]):W.length<$?{failures:[],numFailures:0,lastResult:void 0}:Ie(Fe,r(r({},y),{lower:W[W.length-1],lowerOpen:!0}),$)})})})(Z.trans,Z.range,1e4)},!0)}return j.mutate(Z);function ze(Ie){var Fe,y,$,F=rt.trans,W=Ie.keys||so(V,Ie);if(W)return(Ie=Ie.type==="add"||Ie.type==="put"?r(r({},Ie),{keys:W}):r({},Ie)).type!=="delete"&&(Ie.values=o([],Ie.values)),Ie.keys&&(Ie.keys=o([],Ie.keys)),Fe=j,$=W,((y=Ie).type==="add"?Promise.resolve([]):Fe.getMany({trans:y.trans,keys:$,cache:"immutable"})).then(function(Q){var ue=W.map(function(Ce,je){var nt,pt,gt,$t=Q[je],Ot={onerror:null,onsuccess:null};return Ie.type==="delete"?Me.fire.call(Ot,Ce,$t,F):Ie.type==="add"||$t===void 0?(nt=Le.fire.call(Ot,Ce,Ie.values[je],F),Ce==null&&nt!=null&&(Ie.keys[je]=Ce=nt,V.outbound||w(Ie.values[je],V.keyPath,Ce))):(nt=Zo($t,Ie.values[je]),(pt=Ze.fire.call(Ot,nt,Ce,$t,F))&&(gt=Ie.values[je],Object.keys(pt).forEach(function(Et){h(gt,Et)?gt[Et]=pt[Et]:w(gt,Et,pt[Et])}))),Ot});return j.mutate(Ie).then(function(Ce){for(var je=Ce.failures,nt=Ce.results,pt=Ce.numFailures,Ce=Ce.lastResult,gt=0;gt<W.length;++gt){var $t=(nt||W)[gt],Ot=ue[gt];$t==null?Ot.onerror&&Ot.onerror(je[gt]):Ot.onsuccess&&Ot.onsuccess(Ie.type==="put"&&Q[gt]?Ie.values[gt]:$t)}return{failures:je,results:nt,numFailures:pt,lastResult:Ce}}).catch(function(Ce){return ue.forEach(function(je){return je.onerror&&je.onerror(Ce)}),Promise.reject(Ce)})});throw new Error("Keys missing")}}})}})}};function Jo(v,O,j){try{if(!O||O.keys.length<v.length)return null;for(var V=[],Z=0,ce=0;Z<O.keys.length&&ce<v.length;++Z)An(O.keys[Z],v[ce])===0&&(V.push(j?q(O.values[Z]):O.values[Z]),++ce);return V.length===v.length?V:null}catch{return null}}var Ql={stack:"dbcore",level:-1,create:function(v){return{table:function(O){var j=v.table(O);return r(r({},j),{getMany:function(V){var Z;return V.cache?(Z=Jo(V.keys,V.trans._cache,V.cache==="clone"))?Rt.resolve(Z):j.getMany(V).then(function(ce){return V.trans._cache={keys:V.keys,values:V.cache==="clone"?q(ce):ce},ce}):j.getMany(V)},mutate:function(V){return V.type!=="add"&&(V.trans._cache=null),j.mutate(V)}})}}}};function Ri(v,O){return v.trans.mode==="readonly"&&!!v.subscr&&!v.trans.explicit&&v.trans.db._options.cache!=="disabled"&&!O.schema.primaryKey.outbound}function es(v,O){switch(v){case"query":return O.values&&!O.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var gl={stack:"dbcore",level:0,name:"Observability",create:function(v){var O=v.schema.name,j=new Ea(v.MIN_KEY,v.MAX_KEY);return r(r({},v),{transaction:function(V,Z,ce){if(rt.subscr&&Z!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(rt.querier));return v.transaction(V,Z,ce)},table:function(V){function Z(W){var F,W=W.query;return[F=W.index,new Ea((F=(W=W.range).lower)!=null?F:v.MIN_KEY,(F=W.upper)!=null?F:v.MAX_KEY)]}var ce=v.table(V),ve=ce.schema,Me=ve.primaryKey,Le=ve.indexes,Ze=Me.extractKey,ze=Me.outbound,Ie=Me.autoIncrement&&Le.filter(function($){return $.compound&&$.keyPath.includes(Me.keyPath)}),Fe=r(r({},ce),{mutate:function($){function F(Yt){return Yt="idb://".concat(O,"/").concat(V,"/").concat(Yt),je[Yt]||(je[Yt]=new Ea)}var W,Q,ue,Ce=$.trans,je=$.mutatedParts||($.mutatedParts={}),nt=F(""),pt=F(":dels"),gt=$.type,Ot=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[so(Me,$).filter(function(Yt){return Yt}),$.values]:[],$t=Ot[0],Ot=Ot[1],Et=$.trans._cache;return u($t)?(nt.addKeys($t),(gt=gt==="delete"||$t.length===Ot.length?Jo($t,Et):null)||pt.addKeys($t),(gt||Ot)&&(W=F,Q=gt,ue=Ot,ve.indexes.forEach(function(Yt){var kn=W(Yt.name||"");function Qn(Bn){return Bn!=null?Yt.extractKey(Bn):null}function vn(Bn){Yt.multiEntry&&u(Bn)?Bn.forEach(function(Or){return kn.addKey(Or)}):kn.addKey(Bn)}(Q||ue).forEach(function(Bn,Tr){var ui=Q&&Qn(Q[Tr]),Tr=ue&&Qn(ue[Tr]);An(ui,Tr)!==0&&(ui!=null&&vn(ui),Tr!=null)&&vn(Tr)})}))):$t?(Ot={from:(Et=$t.lower)!=null?Et:v.MIN_KEY,to:(gt=$t.upper)!=null?gt:v.MAX_KEY},pt.add(Ot),nt.add(Ot)):(nt.add(j),pt.add(j),ve.indexes.forEach(function(Yt){return F(Yt.name).add(j)})),ce.mutate($).then(function(Yt){return!$t||$.type!=="add"&&$.type!=="put"||(nt.addKeys(Yt.results),Ie&&Ie.forEach(function(kn){for(var Qn=$.values.map(function(ui){return kn.extractKey(ui)}),vn=kn.keyPath.findIndex(function(ui){return ui===Me.keyPath}),Bn=0,Or=Yt.results.length;Bn<Or;++Bn)Qn[Bn][vn]=Yt.results[Bn];F(kn.name).addKeys(Qn)})),Ce.mutatedParts=Xo(Ce.mutatedParts||{},je),Yt})}}),y={get:function($){return[Me,new Ea($.key)]},getMany:function($){return[Me,new Ea().addKeys($.keys)]},count:Z,query:Z,openCursor:Z};return l(y).forEach(function($){Fe[$]=function(F){var W=rt.subscr,Q=!!W,ue=Ri(rt,ce)&&es($,F)?F.obsSet={}:W;if(Q){var Ce,W=function(Ot){return Ot="idb://".concat(O,"/").concat(V,"/").concat(Ot),ue[Ot]||(ue[Ot]=new Ea)},je=W(""),nt=W(":dels"),Q=y[$](F),pt=Q[0],Q=Q[1];if(($==="query"&&pt.isPrimaryKey&&!F.values?nt:W(pt.name||"")).add(Q),!pt.isPrimaryKey){if($!=="count")return Ce=$==="query"&&ze&&F.values&&ce.query(r(r({},F),{values:!1})),ce[$].apply(this,arguments).then(function(Ot){if($==="query"){if(ze&&F.values)return Ce.then(function(Qn){return Qn=Qn.result,je.addKeys(Qn),Ot});var Et=F.values?Ot.result.map(Ze):Ot.result;(F.values?je:nt).addKeys(Et)}else{var Yt,kn;if($==="openCursor")return kn=F.values,(Yt=Ot)&&Object.create(Yt,{key:{get:function(){return nt.addKey(Yt.primaryKey),Yt.key}},primaryKey:{get:function(){var Qn=Yt.primaryKey;return nt.addKey(Qn),Qn}},value:{get:function(){return kn&&je.addKey(Yt.primaryKey),Yt.value}}})}return Ot});nt.add(j)}}return ce[$].apply(this,arguments)}}),Fe}})}};function Rs(v,O,j){var V;return j.numFailures===0?O:O.type==="deleteRange"||(V=O.keys?O.keys.length:"values"in O&&O.values?O.values.length:1,j.numFailures===V)?null:(V=r({},O),u(V.keys)&&(V.keys=V.keys.filter(function(Z,ce){return!(ce in j.failures)})),"values"in V&&u(V.values)&&(V.values=V.values.filter(function(Z,ce){return!(ce in j.failures)})),V)}function Ci(v,O){return j=v,((V=O).lower===void 0||(V.lowerOpen?0<An(j,V.lower):0<=An(j,V.lower)))&&(j=v,(V=O).upper===void 0||(V.upperOpen?An(j,V.upper)<0:An(j,V.upper)<=0));var j,V}function Ls(v,O,j,V,Z,ce){var ve,Me,Le,Ze,ze,Ie;return!j||j.length===0||(ve=O.query.index,Me=ve.multiEntry,Le=O.query.range,Ze=V.schema.primaryKey.extractKey,ze=ve.extractKey,Ie=(ve.lowLevelIndex||ve).extractKey,(V=j.reduce(function(Fe,y){var $=Fe,F=[];if(y.type==="add"||y.type==="put")for(var W=new Ea,Q=y.values.length-1;0<=Q;--Q){var ue,Ce=y.values[Q],je=Ze(Ce);!W.hasKey(je)&&(ue=ze(Ce),Me&&u(ue)?ue.some(function(Ot){return Ci(Ot,Le)}):Ci(ue,Le))&&(W.addKey(je),F.push(Ce))}switch(y.type){case"add":var nt=new Ea().addKeys(O.values?Fe.map(function(Et){return Ze(Et)}):Fe),$=Fe.concat(O.values?F.filter(function(Et){return Et=Ze(Et),!nt.hasKey(Et)&&(nt.addKey(Et),!0)}):F.map(function(Et){return Ze(Et)}).filter(function(Et){return!nt.hasKey(Et)&&(nt.addKey(Et),!0)}));break;case"put":var pt=new Ea().addKeys(y.values.map(function(Et){return Ze(Et)}));$=Fe.filter(function(Et){return!pt.hasKey(O.values?Ze(Et):Et)}).concat(O.values?F:F.map(function(Et){return Ze(Et)}));break;case"delete":var gt=new Ea().addKeys(y.keys);$=Fe.filter(function(Et){return!gt.hasKey(O.values?Ze(Et):Et)});break;case"deleteRange":var $t=y.range;$=Fe.filter(function(Et){return!Ci(Ze(Et),$t)})}return $},v))===v)?v:(V.sort(function(Fe,y){return An(Ie(Fe),Ie(y))||An(Ze(Fe),Ze(y))}),O.limit&&O.limit<1/0&&(V.length>O.limit?V.length=O.limit:v.length===O.limit&&V.length<O.limit&&(Z.dirty=!0)),ce?Object.freeze(V):V)}function To(v,O){return An(v.lower,O.lower)===0&&An(v.upper,O.upper)===0&&!!v.lowerOpen==!!O.lowerOpen&&!!v.upperOpen==!!O.upperOpen}function Eo(v,O){return((j,V,Z,ce)=>{if(j===void 0)return V!==void 0?-1:0;if(V===void 0)return 1;if((j=An(j,V))===0){if(Z&&ce)return 0;if(Z)return 1;if(ce)return-1}return j})(v.lower,O.lower,v.lowerOpen,O.lowerOpen)<=0&&0<=((j,V,Z,ce)=>{if(j===void 0)return V!==void 0?1:0;if(V===void 0)return-1;if((j=An(j,V))===0){if(Z&&ce)return 0;if(Z)return-1;if(ce)return 1}return j})(v.upper,O.upper,v.upperOpen,O.upperOpen)}function kc(v,O,j,V){v.subscribers.add(j),V.addEventListener("abort",function(){var Z,ce;v.subscribers.delete(j),v.subscribers.size===0&&(Z=v,ce=O,setTimeout(function(){Z.subscribers.size===0&&le(ce,Z)},3e3))})}var zs={stack:"dbcore",level:0,name:"Cache",create:function(v){var O=v.schema.name;return r(r({},v),{transaction:function(j,V,Z){var ce,ve,Me=v.transaction(j,V,Z);return V==="readwrite"&&(Z=(ce=new AbortController).signal,Me.addEventListener("abort",(ve=function(Le){return function(){if(ce.abort(),V==="readwrite"){for(var Ze=new Set,ze=0,Ie=j;ze<Ie.length;ze++){var Fe=Ie[ze],y=Ii["idb://".concat(O,"/").concat(Fe)];if(y){var $=v.table(Fe),F=y.optimisticOps.filter(function(Yt){return Yt.trans===Me});if(Me._explicit&&Le&&Me.mutatedParts)for(var W=0,Q=Object.values(y.queries.query);W<Q.length;W++)for(var ue=0,Ce=(pt=Q[W]).slice();ue<Ce.length;ue++)ql((gt=Ce[ue]).obsSet,Me.mutatedParts)&&(le(pt,gt),gt.subscribers.forEach(function(Yt){return Ze.add(Yt)}));else if(0<F.length){y.optimisticOps=y.optimisticOps.filter(function(Yt){return Yt.trans!==Me});for(var je=0,nt=Object.values(y.queries.query);je<nt.length;je++)for(var pt,gt,$t,Ot=0,Et=(pt=nt[je]).slice();Ot<Et.length;Ot++)(gt=Et[Ot]).res!=null&&Me.mutatedParts&&(Le&&!gt.dirty?($t=Object.isFrozen(gt.res),$t=Ls(gt.res,gt.req,F,$,gt,$t),gt.dirty?(le(pt,gt),gt.subscribers.forEach(function(Yt){return Ze.add(Yt)})):$t!==gt.res&&(gt.res=$t,gt.promise=Rt.resolve({result:$t}))):(gt.dirty&&le(pt,gt),gt.subscribers.forEach(function(Yt){return Ze.add(Yt)})))}}}Ze.forEach(function(Yt){return Yt()})}}})(!1),{signal:Z}),Me.addEventListener("error",ve(!1),{signal:Z}),Me.addEventListener("complete",ve(!0),{signal:Z})),Me},table:function(j){var V=v.table(j),Z=V.schema.primaryKey;return r(r({},V),{mutate:function(ce){var ve,Me=rt.trans;return!Z.outbound&&Me.db._options.cache!=="disabled"&&!Me.explicit&&Me.idbtrans.mode==="readwrite"&&(ve=Ii["idb://".concat(O,"/").concat(j)])?(Me=V.mutate(ce),ce.type!=="add"&&ce.type!=="put"||!(50<=ce.values.length||so(Z,ce).some(function(Le){return Le==null}))?(ve.optimisticOps.push(ce),ce.mutatedParts&&wo(ce.mutatedParts),Me.then(function(Le){0<Le.numFailures&&(le(ve.optimisticOps,ce),(Le=Rs(0,ce,Le))&&ve.optimisticOps.push(Le),ce.mutatedParts)&&wo(ce.mutatedParts)}),Me.catch(function(){le(ve.optimisticOps,ce),ce.mutatedParts&&wo(ce.mutatedParts)})):Me.then(function(Le){var Ze=Rs(0,r(r({},ce),{values:ce.values.map(function(ze,Ie){var Fe;return Le.failures[Ie]?ze:(w(Fe=(Fe=Z.keyPath)!=null&&Fe.includes(".")?q(ze):r({},ze),Z.keyPath,Le.results[Ie]),Fe)})}),Le);ve.optimisticOps.push(Ze),queueMicrotask(function(){return ce.mutatedParts&&wo(ce.mutatedParts)})}),Me):V.mutate(ce)},query:function(ce){var ve,Me,Le,Ze,ze,Ie,Fe;return Ri(rt,V)&&es("query",ce)?(ve=((Le=rt.trans)==null?void 0:Le.db._options.cache)==="immutable",Me=(Le=rt).requery,Le=Le.signal,Ie=((y,$,F,W)=>{var Q=Ii["idb://".concat(y,"/").concat($)];if(!Q)return[];if(!(y=Q.queries[F]))return[null,!1,Q,null];var ue=y[(W.query?W.query.index.name:null)||""];if(!ue)return[null,!1,Q,null];switch(F){case"query":var Ce=ue.find(function(je){return je.req.limit===W.limit&&je.req.values===W.values&&To(je.req.query.range,W.query.range)});return Ce?[Ce,!0,Q,ue]:[ue.find(function(je){return("limit"in je.req?je.req.limit:1/0)>=W.limit&&(!W.values||je.req.values)&&Eo(je.req.query.range,W.query.range)}),!1,Q,ue];case"count":return Ce=ue.find(function(je){return To(je.req.query.range,W.query.range)}),[Ce,!!Ce,Q,ue]}})(O,j,"query",ce),Fe=Ie[0],Ze=Ie[2],ze=Ie[3],Fe&&Ie[1]?Fe.obsSet=ce.obsSet:(Ie=V.query(ce).then(function(y){var $=y.result;if(Fe&&(Fe.res=$),ve){for(var F=0,W=$.length;F<W;++F)Object.freeze($[F]);Object.freeze($)}else y.result=q($);return y}).catch(function(y){return ze&&Fe&&le(ze,Fe),Promise.reject(y)}),Fe={obsSet:ce.obsSet,promise:Ie,subscribers:new Set,type:"query",req:ce,dirty:!1},ze?ze.push(Fe):(ze=[Fe],(Ze=Ze||(Ii["idb://".concat(O,"/").concat(j)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ce.query.index.name||""]=ze)),kc(Fe,ze,Me,Le),Fe.promise.then(function(y){return{result:Ls(y.result,ce,Ze?.optimisticOps,V,Fe,ve)}})):V.query(ce)}})}})}};function lo(v,O){return new Proxy(v,{get:function(j,V,Z){return V==="db"?O:Reflect.get(j,V,Z)}})}Mr.prototype.version=function(v){if(isNaN(v)||v<.1)throw new Oe.Type("Given version is not a positive number");if(v=Math.round(10*v)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,v);var O=this._versions,j=O.filter(function(V){return V._cfg.version===v})[0];return j||(j=new this.Version(v),O.push(j),O.sort(pl),j.stores({}),this._state.autoSchema=!1),j},Mr.prototype._whenReady=function(v){var O=this;return this.idbdb&&(this._state.openComplete||rt.letThrough||this._vip)?v():new Rt(function(j,V){if(O._state.openComplete)return V(new Oe.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return void V(new Oe.DatabaseClosed);O.open().catch(re)}O._state.dbReadyPromise.then(j,V)}).then(v)},Mr.prototype.use=function(Z){var O=Z.stack,j=Z.create,V=Z.level,Z=Z.name,ce=(Z&&this.unuse({stack:O,name:Z}),this._middlewares[O]||(this._middlewares[O]=[]));return ce.push({stack:O,create:j,level:V??10,name:Z}),ce.sort(function(ve,Me){return ve.level-Me.level}),this},Mr.prototype.unuse=function(v){var O=v.stack,j=v.name,V=v.create;return O&&this._middlewares[O]&&(this._middlewares[O]=this._middlewares[O].filter(function(Z){return V?Z.create!==V:!!j&&Z.name!==j})),this},Mr.prototype.open=function(){var v=this;return pr(Ct,function(){return Cc(v)})},Mr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var v=this._state,O=la.indexOf(this);if(0<=O&&la.splice(O,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}v.isBeingOpened||(v.dbReadyPromise=new Rt(function(j){v.dbReadyResolve=j}),v.openCanceller=new Rt(function(j,V){v.cancelOpen=V}))},Mr.prototype.close=function(O){var O=(O===void 0?{disableAutoOpen:!0}:O).disableAutoOpen,j=this._state;O?(j.isBeingOpened&&j.cancelOpen(new Oe.DatabaseClosed),this._close(),j.autoOpen=!1,j.dbOpenError=new Oe.DatabaseClosed):(this._close(),j.autoOpen=this._options.autoOpen||j.isBeingOpened,j.openComplete=!1,j.dbOpenError=null)},Mr.prototype.delete=function(v){var O=this,j=(v===void 0&&(v={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),V=this._state;return new Rt(function(Z,ce){function ve(){O.close(v);var Me=O._deps.indexedDB.deleteDatabase(O.name);Me.onsuccess=B(function(){var Le,Ze,ze;Le=O._deps,Ze=O.name,qo(ze=Le.indexedDB)||Ze===ha||As(ze,Le.IDBKeyRange).delete(Ze).catch(re),Z()}),Me.onerror=Hn(ce),Me.onblocked=O._fireOnBlocked}if(j)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");V.isBeingOpened?V.dbReadyPromise.then(ve):ve()})},Mr.prototype.backendDB=function(){return this.idbdb},Mr.prototype.isOpen=function(){return this.idbdb!==null},Mr.prototype.hasBeenClosed=function(){var v=this._state.dbOpenError;return v&&v.name==="DatabaseClosed"},Mr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Mr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Mr.prototype,"tables",{get:function(){var v=this;return l(this._allTables).map(function(O){return v._allTables[O]})},enumerable:!1,configurable:!0}),Mr.prototype.transaction=function(){var v=(function(O,j,V){var Z=arguments.length;if(Z<2)throw new Oe.InvalidArgument("Too few arguments");for(var ce=new Array(Z-1);--Z;)ce[Z-1]=arguments[Z];return V=ce.pop(),[O,N(ce),V]}).apply(this,arguments);return this._transaction.apply(this,v)},Mr.prototype._transaction=function(v,O,j){var V,Z,ce=this,ve=rt.trans,Me=(ve&&ve.db===this&&v.indexOf("!")===-1||(ve=null),v.indexOf("?")!==-1);v=v.replace("!","").replace("?","");try{if(Z=O.map(function(Ze){if(Ze=Ze instanceof ce.Table?Ze.name:Ze,typeof Ze!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ze}),v=="r"||v===Ma)V=Ma;else{if(v!="rw"&&v!=Pr)throw new Oe.InvalidArgument("Invalid transaction mode: "+v);V=Pr}if(ve){if(ve.mode===Ma&&V===Pr){if(!Me)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ve=null}ve&&Z.forEach(function(Ze){if(ve&&ve.storeNames.indexOf(Ze)===-1){if(!Me)throw new Oe.SubTransaction("Table "+Ze+" not included in parent transaction.");ve=null}}),Me&&ve&&!ve.active&&(ve=null)}}catch(Ze){return ve?ve._promise(null,function(ze,Ie){Ie(Ze)}):In(Ze)}var Le=(function Ze(ze,Ie,Fe,y,$){return Rt.resolve().then(function(){var ue=rt.transless||rt,F=ze._createTransaction(Ie,Fe,ze._dbSchema,y),ue=(F.explicit=!0,{trans:F,transless:ue});if(y)F.idbtrans=y.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,ze._state.PR1398_maxLoop=3}catch(Ce){return Ce.name===We.InvalidState&&ze.isOpen()&&0<--ze._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ze.close({disableAutoOpen:!1}),ze.open().then(function(){return Ze(ze,Ie,Fe,null,$)})):In(Ce)}var W,Q=Y($),ue=(Q&&Qt(),Rt.follow(function(){var Ce;(W=$.call(F,F))&&(Q?(Ce=jt.bind(null,null),W.then(Ce,Ce)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Yo(W)))},ue));return(W&&typeof W.then=="function"?Rt.resolve(W).then(function(Ce){return F.active?Ce:In(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ue.then(function(){return W})).then(function(Ce){return y&&F._resolve(),F._completion.then(function(){return Ce})}).catch(function(Ce){return F._reject(Ce),In(Ce)})})}).bind(null,this,V,Z,ve,j);return ve?ve._promise(V,Le,"lock"):rt.trans?pr(rt.transless,function(){return ce._whenReady(Le)}):this._whenReady(Le)},Mr.prototype.table=function(v){if(h(this._allTables,v))return this._allTables[v];throw new Oe.InvalidTable("Table ".concat(v," does not exist"))};var bi=Mr;function Mr(v,O){var j,V,Z,ce,ve,Me=this,Le=(this._middlewares={},this.verno=0,Mr.dependencies),Le=(this._options=O=r({addons:Mr.addons,autoOpen:!0,indexedDB:Le.indexedDB,IDBKeyRange:Le.IDBKeyRange,cache:"cloned"},O),this._deps={indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange},O.addons),Ze=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:O.autoOpen}),ze=(Ze.dbReadyPromise=new Rt(function(Ie){Ze.dbReadyResolve=Ie}),Ze.openCanceller=new Rt(function(Ie,Fe){Ze.cancelOpen=Fe}),this._state=Ze,this.name=v,this.on=Ei(this,"populate","blocked","versionchange","close",{ready:[Ne,re]}),this.once=function(Ie,Fe){var y=function(){for(var $=[],F=0;F<arguments.length;F++)$[F]=arguments[F];Me.on(Ie).unsubscribe(y),Fe.apply(Me,$)};return Me.on(Ie,y)},this.on.ready.subscribe=D(this.on.ready.subscribe,function(Ie){return function(Fe,y){Mr.vip(function(){var $,F=Me._state;F.openComplete?(F.dbOpenError||Rt.resolve().then(Fe),y&&Ie(Fe)):F.onReadyBeingFired?(F.onReadyBeingFired.push(Fe),y&&Ie(Fe)):(Ie(Fe),$=Me,y||Ie(function W(){$.on.ready.unsubscribe(Fe),$.on.ready.unsubscribe(W)}))})}}),this.Collection=(j=this,Qr(lt.prototype,function(W,F){this.db=j;var y=Ja,$=null;if(F)try{y=F()}catch(ue){$=ue}var F=W._ctx,W=F.table,Q=W.hook.reading.fire;this._ctx={table:W,index:F.index,isPrimKey:!F.index||W.schema.primKey.keyPath&&F.index===W.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:F.or,valueMapper:Q!==$e?Q:null}})),this.Table=(V=this,Qr(Jt.prototype,function(Ie,Fe,y){this.db=V,this._tx=y,this.name=Ie,this.schema=Fe,this.hook=V._allTables[Ie]?V._allTables[Ie].hook:Ei(null,{creating:[it,re],reading:[Ge,$e],updating:[Be,re],deleting:[Ve,re]})})),this.Transaction=(Z=this,Qr(kr.prototype,function(Ie,Fe,y,$,F){var W=this;Ie!=="readonly"&&Fe.forEach(function(Q){Q=(Q=y[Q])==null?void 0:Q.yProps,Q&&(Fe=Fe.concat(Q.map(function(ue){return ue.updatesTable})))}),this.db=Z,this.mode=Ie,this.storeNames=Fe,this.schema=y,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=Ei(this,"complete","error","abort"),this.parent=F||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Rt(function(Q,ue){W._resolve=Q,W._reject=ue}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(Q){var ue=W.active;return W.active=!1,W.on.error.fire(Q),W.parent?W.parent._reject(Q):ue&&W.idbtrans&&W.idbtrans.abort(),In(Q)})})),this.Version=(ce=this,Qr(Ho.prototype,function(Ie){this.db=ce,this._cfg={version:Ie,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ve=this,Qr(lr.prototype,function(Ie,Fe,y){if(this.db=ve,this._ctx={table:Ie,index:Fe===":id"?null:Fe,or:y},this._cmp=this._ascending=An,this._descending=function($,F){return An(F,$)},this._max=function($,F){return 0<An($,F)?$:F},this._min=function($,F){return An($,F)<0?$:F},this._IDBKeyRange=ve._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(Ie){0<Ie.newVersion?console.warn("Another connection wants to upgrade database '".concat(Me.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Me.name,"'. Closing db now to resume the delete request.")),Me.close({disableAutoOpen:!1})}),this.on("blocked",function(Ie){!Ie.newVersion||Ie.newVersion<Ie.oldVersion?console.warn("Dexie.delete('".concat(Me.name,"') was blocked")):console.warn("Upgrade '".concat(Me.name,"' blocked by other connection holding version ").concat(Ie.oldVersion/10))}),this._maxKey=Hr(O.IDBKeyRange),this._createTransaction=function(Ie,Fe,y,$){return new Me.Transaction(Ie,Fe,y,Me._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(Ie){Me.on("blocked").fire(Ie),la.filter(function(Fe){return Fe.name===Me.name&&Fe!==Me&&!Fe._state.vcFired}).map(function(Fe){return Fe.on("versionchange").fire(Ie)})},this.use(Ql),this.use(zs),this.use(gl),this.use(Pc),this.use(Mo),new Proxy(this,{get:function(Ie,Fe,y){var $;return Fe==="_vip"||(Fe==="table"?function(F){return lo(Me.table(F),ze)}:($=Reflect.get(Ie,Fe,y))instanceof Jt?lo($,ze):Fe==="tables"?$.map(function(F){return lo(F,ze)}):Fe==="_createTransaction"?function(){return lo($.apply(this,arguments),ze)}:$)}}));this.vip=ze,Le.forEach(function(Ie){return Ie(Me)})}var rn,co=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_l=(uo.prototype.subscribe=function(v,O,j){return this._subscribe(v&&typeof v!="function"?v:{next:v,error:O,complete:j})},uo.prototype[co]=function(){return this},uo);function uo(v){this._subscribe=v}try{rn={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{rn={indexedDB:null,IDBKeyRange:null}}function ts(v){var O,j=!1,V=new _l(function(Z){var ce=Y(v),ve,Me=!1,Le={},Ze={},ze={get closed(){return Me},unsubscribe:function(){Me||(Me=!0,ve&&ve.abort(),Ie&&Kr.storagemutated.unsubscribe(y))}},Ie=(Z.start&&Z.start(ze),!1),Fe=function(){return fr($)},y=function(F){Xo(Le,F),ql(Ze,Le)&&Fe()},$=function(){var F,W,Q;!Me&&rn.indexedDB&&(Le={},F={},ve&&ve.abort(),ve=new AbortController,Q=(ue=>{var Ce=Xa();try{ce&&Qt();var je=Lt(v,ue);return je=ce?je.finally(jt):je}finally{Ce&&sa()}})(W={subscr:F,signal:ve.signal,requery:Fe,querier:v,trans:null}),Promise.resolve(Q).then(function(ue){j=!0,O=ue,Me||W.signal.aborted||(Le={},(Ce=>{for(var je in Ce)if(h(Ce,je))return;return 1})(Ze=F)||Ie||(Kr(Qa,y),Ie=!0),fr(function(){return!Me&&Z.next&&Z.next(ue)}))},function(ue){j=!1,["DatabaseClosedError","AbortError"].includes(ue?.name)||Me||fr(function(){Me||Z.error&&Z.error(ue)})}))};return setTimeout(Fe,0),ze});return V.hasValue=function(){return j},V.getValue=function(){return O},V}var Oa=bi;function So(v){var O=zi;try{zi=!0,Kr.storagemutated.fire(v),hl(v,!0)}finally{zi=O}}m(Oa,r(r({},te),{delete:function(v){return new Oa(v,{addons:[]}).delete()},exists:function(v){return new Oa(v,{addons:[]}).open().then(function(O){return O.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(v){try{return O=Oa.dependencies,j=O.indexedDB,O=O.IDBKeyRange,(qo(j)?Promise.resolve(j.databases()).then(function(V){return V.map(function(Z){return Z.name}).filter(function(Z){return Z!==ha})}):As(j,O).toCollection().primaryKeys()).then(v)}catch{return In(new Oe.MissingAPI)}var O,j},defineClass:function(){return function(v){d(this,v)}},ignoreTransaction:function(v){return rt.trans?pr(rt.transless,v):v()},vip:Os,async:function(v){return function(){try{var O=Yo(v.apply(this,arguments));return O&&typeof O.then=="function"?O:Rt.resolve(O)}catch(j){return In(j)}}},spawn:function(v,O,j){try{var V=Yo(v.apply(j,O||[]));return V&&typeof V.then=="function"?V:Rt.resolve(V)}catch(Z){return In(Z)}},currentTransaction:{get:function(){return rt.trans||null}},waitFor:function(v,O){return v=Rt.resolve(typeof v=="function"?Oa.ignoreTransaction(v):v).timeout(O||6e4),rt.trans?rt.trans.waitFor(v):v},Promise:Rt,debug:{get:function(){return Ye},set:function(v){kt(v)}},derive:b,extend:d,props:m,override:D,Events:Ei,on:Kr,liveQuery:ts,extendObservabilitySet:Xo,getByKeyPath:P,setByKeyPath:w,delByKeyPath:function(v,O){typeof O=="string"?w(v,O,void 0):"length"in O&&[].map.call(O,function(j){w(v,j,void 0)})},shallowClone:R,deepClone:q,getObjectDiff:Zo,cmp:An,asap:C,minKey:-1/0,addons:[],connections:la,errnames:We,dependencies:rn,cache:Ii,semVer:"4.3.0",version:"4.3.0".split(".").map(function(v){return parseInt(v)}).reduce(function(v,O,j){return v+O/Math.pow(10,2*j)})})),Oa.maxKey=Hr(Oa.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kr(Qa,function(v){zi||(v=new CustomEvent(Gr,{detail:v}),zi=!0,dispatchEvent(v),zi=!1)}),addEventListener(Gr,function(v){v=v.detail,zi||So(v)}));var Li,zi=!1,Va=function(){};return typeof BroadcastChannel<"u"&&((Va=function(){(Li=new BroadcastChannel(Gr)).onmessage=function(v){return v.data&&So(v.data)}})(),typeof Li.unref=="function"&&Li.unref(),Kr(Qa,function(v){zi||Li.postMessage(v)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(v){if(!bi.disableBfCache&&v.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),Li?.close();for(var O=0,j=la;O<j.length;O++)j[O].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(v){!bi.disableBfCache&&v.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),Va(),So({all:new Ea(-1/0,[[]])}))})),Rt.rejectionMapper=function(v,O){return!v||v instanceof H||v instanceof TypeError||v instanceof SyntaxError||!v.name||!ge[v.name]?v:(O=new ge[v.name](O||v.message,v),"stack"in v&&_(O,"stack",{get:function(){return this.inner.stack}}),O)},kt(Ye),r(bi,Object.freeze({__proto__:null,Dexie:bi,Entity:ao,PropModification:ga,RangeSet:Ea,add:function(v){return new ga({add:v})},cmp:An,default:bi,liveQuery:ts,mergeRanges:Yi,rangesOverlap:oo,remove:function(v){return new ga({remove:v})},replacePrefix:function(v,O){return new ga({replacePrefix:[v,O]})}}),{default:bi}),bi})})(wv)),wv.exports}var T8=M8();const vx=Od(T8),a2=Symbol.for("Dexie"),Gv=globalThis[a2]||(globalThis[a2]=vx);if(vx.semVer!==Gv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${vx.semVer} and ${Gv.semVer}`);const{liveQuery:E8,mergeRanges:R8,rangesOverlap:L8,RangeSet:z8,cmp:F8,Entity:j8,PropModification:B8,replacePrefix:N8,add:U8,remove:V8,DexieYProvider:W8}=Gv;class S8 extends Gv{tickets;constructor(){super("MarkSixDB"),this.version(1).stores({tickets:"++id, drawNumber, uploadDate"})}}const Eg=new S8;function Sg({number:e,matched:t,isExtra:n,size:r=40}){const o=()=>t?"#4CAF50":n?"#FFD700":"#003366";return de.jsx(hi,{sx:{width:r,height:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:o(),border:t?"3px solid #FFD700":n?"3px solid #F44336":"none",boxShadow:t?"0 0 8px rgba(255,215,0,0.6)":1},children:de.jsx(ia,{sx:{color:n&&!t?"#003366":"#fff",fontWeight:"bold",fontSize:r*.4},children:e})})}const C8={drawNumber:"24/015",drawDate:"2026-02-15",winningNumbers:[3,12,18,27,35,42],extraNumber:9};function P8(){const{t:e}=Qv(),{showSnackbar:t}=by(),[n,r]=ne.useState(!1),[o,s]=ne.useState(0),[l,u]=ne.useState(!1),[d,p]=ne.useState(""),[g,h]=ne.useState(0),[m,x]=ne.useState(null),[_,b]=ne.useState(""),[I,T]=ne.useState(""),[S,D]=ne.useState("1"),[E,C]=ne.useState("10"),[P,w]=ne.useState(""),[R,U]=ne.useState([]),[N,ie]=ne.useState(""),[ee,q]=ne.useState(null),[oe,ae]=ne.useState(!1),[X,se]=ne.useState(""),[le,be]=ne.useState(!1),[Ee,Y]=ne.useState(null),[te,J]=ne.useState(null),[H,_e]=ne.useState(!1),[Te,Re]=ne.useState("");ne.useEffect(()=>{We()},[]);const We=ne.useCallback(async Ve=>{ae(!0),se(""),be(!1);try{const Be=await O$(Ve||void 0);q(Be)}catch{q(C8),be(!0),se(e("results.fetchFailed"))}finally{ae(!1)}},[e]),at=ne.useCallback(async Ve=>{if(Ve.length===0)return;const Be=Ve[0];r(!0),u(!1),s(0),Y(null),J(null),Re(""),U([]);const _t=new FileReader;_t.onload=Ne=>x(Ne.target?.result),_t.readAsDataURL(Be);try{const Ne=await f8(Be,s);b(Ne.drawNumber),T(Ne.numbers.join(", ")),U(Ne.bets),D(String(Ne.units)),C(String(Ne.amount)),p(Ne.rawText),h(Ne.confidence),u(!0)}catch{t(e("common.error"),"error")}finally{r(!1)}},[t,e]),{getRootProps:Oe,getInputProps:ge,isDragActive:re}=VP({onDrop:at,accept:{"image/*":[".jpeg",".jpg",".png"]},maxFiles:1}),$e=async()=>{const Ve=I.split(/[,\s]+/).map(_t=>parseInt(_t.trim(),10)).filter(_t=>!isNaN(_t)&&_t>=1&&_t<=49),Be={drawNumber:_,numbers:Ve,units:parseInt(S,10)||1,amount:parseFloat(E)||0,uploadDate:new Date().toISOString(),userNote:P||void 0,thumbnailDataURL:m||void 0};await Eg.tickets.add(Be),t(e("upload.saved"))},Ge=async()=>{if(_){_e(!0),Re(""),Y(null),J(null);try{const Ve=await $$(_);if(Ve){Y(Ve);const Be=I.split(/[,\s]+/).map(Ne=>parseInt(Ne.trim(),10)).filter(Ne=>!isNaN(Ne)),_t=D$(Be,Ve);J(_t)}else Re(e("results.notFound"))}catch{Re(e("results.networkError"))}finally{_e(!1)}}},qe=()=>{u(!1),r(!1),x(null),b(""),T(""),D("1"),C("10"),w(""),p(""),h(0),U([]),Y(null),J(null),Re("")},it=Ve=>{T(Ve.join(", "))};return de.jsxs(hi,{children:[de.jsx(ia,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:e("results.title")}),de.jsxs(il,{sx:{p:2,mb:3},children:[de.jsxs(yf,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:"center",flexWrap:"wrap",children:[de.jsx(nl,{type:"date",label:e("fields.drawDate"),value:N,onChange:Ve=>ie(Ve.target.value),size:"small",InputLabelProps:{shrink:!0},sx:{minWidth:160}}),de.jsx(ys,{variant:"contained",startIcon:de.jsx(v5,{}),onClick:()=>We(N||void 0),disabled:oe,"aria-label":e("results.loadLatest"),children:e(oe?"results.loadingLatest":"results.loadLatest")})]}),oe&&de.jsx(jM,{sx:{mt:1}}),X&&de.jsx(Nl,{severity:"warning",sx:{mt:1},children:X}),ee&&!oe&&de.jsxs(hi,{sx:{mt:2},children:[de.jsxs(ia,{variant:"body2",color:"text.secondary",children:[e("results.drawDate"),": ",de.jsx("strong",{children:ee.drawDate}),"|",e("fields.drawNumber"),": ",de.jsx("strong",{children:ee.drawNumber}),le&&de.jsx(_v,{label:"sample",size:"small",color:"warning",sx:{ml:1}})]}),de.jsxs(hi,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1,alignItems:"center"},children:[ee.winningNumbers.map(Ve=>de.jsx(Sg,{number:Ve,matched:!1},Ve)),de.jsx(_v,{label:"+",size:"small"}),de.jsx(Sg,{number:ee.extraNumber,isExtra:!0,matched:!1})]}),de.jsx(Nl,{severity:"info",sx:{mt:1},children:e("results.disclaimer")})]})]}),de.jsx(wP,{sx:{mb:3}}),de.jsx(ia,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:e("upload.title")}),de.jsx(Nl,{severity:"success",sx:{mb:2},children:e("upload.privacyNote")}),!l&&!n&&de.jsxs(il,{...Oe(),sx:{p:4,textAlign:"center",cursor:"pointer",border:"2px dashed",borderColor:re?"secondary.main":"divider",bgcolor:re?"action.hover":"background.paper",transition:"all 0.2s","&:hover":{borderColor:"secondary.main"}},children:[de.jsx("input",{...ge(),"aria-label":e("upload.dropzone")}),de.jsx(h5,{sx:{fontSize:48,color:"text.secondary",mb:1}}),de.jsx(ia,{color:"text.secondary",children:e("upload.dropzone")})]}),n&&de.jsxs(hi,{sx:{mt:2},children:[de.jsx(ia,{children:o<100?e("upload.modelLoading"):e("upload.scanning")}),de.jsx(jM,{variant:"determinate",value:o,sx:{mt:1,height:8,borderRadius:4}}),de.jsx(ia,{variant:"caption",color:"text.secondary",children:o<100?`${o}%`:e("upload.scanning")})]}),de.jsx(fP,{in:l,children:de.jsxs(hi,{sx:{mt:2},children:[de.jsxs(Nl,{severity:"success",sx:{mb:2},children:[e("upload.scanComplete"),g>0?`  ${g.toFixed(0)}% confidence`:""]}),m&&de.jsx(hi,{sx:{mb:2,textAlign:"center"},children:de.jsx("img",{src:m,alt:"Ticket preview",style:{maxWidth:"100%",maxHeight:200,borderRadius:8}})}),R.length>1&&de.jsxs(Nl,{severity:"info",sx:{mb:2},children:[e("upload.multipleBets"),de.jsx(hi,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:1},children:R.map((Ve,Be)=>de.jsx(ys,{size:"small",variant:"outlined",onClick:()=>it(Ve),"aria-label":`${e("upload.selectBet")} ${Be+1}`,children:`${e("upload.betNumber",{number:Be+1})}: ${Ve.join(", ")}`},Be))})]}),de.jsxs(yf,{spacing:2,children:[de.jsx(nl,{label:e("fields.drawNumber"),value:_,onChange:Ve=>b(Ve.target.value),fullWidth:!0,size:"small"}),de.jsx(nl,{label:e("fields.numbers"),value:I,onChange:Ve=>T(Ve.target.value),fullWidth:!0,size:"small",helperText:"e.g. 1, 12, 23, 34, 45, 49"}),de.jsxs(hi,{sx:{display:"flex",gap:2},children:[de.jsx(nl,{label:e("fields.units"),value:S,onChange:Ve=>D(Ve.target.value),type:"number",size:"small",sx:{flex:1}}),de.jsx(nl,{label:e("fields.amount"),value:E,onChange:Ve=>C(Ve.target.value),type:"number",size:"small",sx:{flex:1}})]}),de.jsx(nl,{label:e("fields.note"),value:P,onChange:Ve=>w(Ve.target.value),fullWidth:!0,size:"small",multiline:!0,rows:2})]}),d&&de.jsxs(hi,{sx:{mt:2},children:[de.jsx(ia,{variant:"caption",color:"text.secondary",children:"Raw OCR text:"}),de.jsx(il,{sx:{p:1,maxHeight:100,overflow:"auto",fontSize:12},children:de.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:d})})]}),de.jsxs(yf,{direction:"row",spacing:1,sx:{mt:2},children:[de.jsx(ys,{variant:"contained",startIcon:de.jsx(P5,{}),onClick:$e,children:e("upload.save")}),de.jsx(ys,{variant:"outlined",startIcon:de.jsx($P,{}),onClick:Ge,disabled:!_||H,children:e(H?"results.fetching":"results.fetch")}),de.jsx(ys,{variant:"text",startIcon:de.jsx(C5,{}),onClick:qe,children:e("upload.rescan")})]}),Te&&de.jsxs(Nl,{severity:"warning",sx:{mt:2},children:[Te,de.jsx(ia,{variant:"caption",display:"block",children:e("results.corsWarning")})]}),Ee&&te&&de.jsx(vP,{sx:{mt:2},children:de.jsxs(yP,{children:[de.jsx(ia,{variant:"h6",children:e("results.title")}),de.jsxs(ia,{variant:"body2",color:"text.secondary",children:[e("results.drawDate"),": ",Ee.drawDate]}),de.jsxs(hi,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:1,alignItems:"center"},children:[de.jsxs(ia,{variant:"body2",fontWeight:"bold",children:[e("results.winningNumbers"),":"]}),Ee.winningNumbers.map(Ve=>de.jsx(Sg,{number:Ve,matched:te.matchedNumbers.includes(Ve)},Ve)),de.jsx(_v,{label:"+",size:"small"}),de.jsx(Sg,{number:Ee.extraNumber,isExtra:!0,matched:te.extraMatched})]}),de.jsxs(hi,{sx:{mt:2},children:[de.jsxs(ia,{children:[e("results.matches"),": ",te.matchedNumbers.length,te.extraMatched?" + extra":""]}),de.jsx(ia,{variant:"h6",color:te.prizeCategory?"success.main":"text.secondary",fontWeight:"bold",children:te.prizeCategory?e(te.prizeCategory):e("results.noMatch")})]}),de.jsx(Nl,{severity:"info",sx:{mt:2},children:e("results.disclaimer")})]})})]})})]})}function k8(e,t,n){var r,o;typeof e=="function"?(r=t||[],o=n):(r=[],o=t);var s=$i.useRef({hasResult:!1,result:o,error:null}),l=$i.useReducer(function(p){return p+1},0);l[0];var u=l[1],d=$i.useMemo(function(){var p=typeof e=="function"?e():e;if(!p||typeof p.subscribe!="function")throw e===p?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof p.hasValue!="function"||p.hasValue()))if(typeof p.getValue=="function")s.current.result=p.getValue(),s.current.hasResult=!0;else{var g=p.subscribe(function(h){s.current.result=h,s.current.hasResult=!0});typeof g=="function"?g():g.unsubscribe()}return p},r);if($i.useDebugValue(s.current.result),$i.useEffect(function(){var p=d.subscribe(function(g){var h=s.current;(h.error!==null||h.result!==g)&&(h.error=null,h.result=g,h.hasResult=!0,u())},function(g){var h=s.current;h.error!==g&&(h.error=g,u())});return typeof p=="function"?p:p.unsubscribe.bind(p)},r),s.current.error)throw s.current.error;return s.current.result}function A8(e,t,n){return k8(function(){return E8(e)},[],n)}function O8(){const{t:e}=Qv(),{showSnackbar:t}=by(),n=A8(()=>Eg.tickets.orderBy("uploadDate").reverse().toArray())??[],[r,o]=ne.useState(null),[s,l]=ne.useState(!1),[u,d]=ne.useState(null),[p,g]=ne.useState({}),h=ne.useRef(null),m=async()=>{u!==null&&(await Eg.tickets.delete(u),d(null))},x=async()=>{r?.id&&(await Eg.tickets.update(r.id,{drawNumber:r.drawNumber,numbers:r.numbers,units:r.units,amount:r.amount,userNote:r.userNote}),l(!1))},_=()=>{const T=JSON.stringify(n,null,2),S=new Blob([T],{type:"application/json"}),D=URL.createObjectURL(S),E=document.createElement("a");E.href=D,E.download=`marksix-records-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(D)},b=async T=>{const S=T.target.files?.[0];if(S){try{const D=await S.text(),E=JSON.parse(D);for(const C of E){const{id:P,...w}=C;await Eg.tickets.add(w)}t(e("history.imported"))}catch{t(e("common.error"),"error")}h.current&&(h.current.value="")}},I=async T=>{if(!(!T.id||!T.drawNumber))try{const S=await $$(T.drawNumber);if(S){const D=D$(T.numbers,S);g(E=>({...E,[T.id]:{result:S,comparison:D}}))}else t(e("results.notFound"),"error")}catch{t(e("results.networkError"),"error")}};return de.jsxs(hi,{children:[de.jsxs(hi,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[de.jsx(ia,{variant:"h5",fontWeight:"bold",children:e("history.title")}),de.jsxs(yf,{direction:"row",spacing:1,children:[de.jsx(ys,{size:"small",startIcon:de.jsx(b5,{}),onClick:_,disabled:n.length===0,children:e("history.exportJson")}),de.jsx(ys,{size:"small",startIcon:de.jsx(x5,{}),onClick:()=>h.current?.click(),children:e("history.importJson")}),de.jsx("input",{ref:h,type:"file",accept:".json",style:{display:"none"},onChange:b})]})]}),n.length===0&&de.jsx(Nl,{severity:"info",children:e("history.noRecords")}),de.jsx(yf,{spacing:2,children:n.map(T=>de.jsxs(vP,{children:[de.jsxs(yP,{children:[de.jsxs(hi,{sx:{display:"flex",justifyContent:"space-between"},children:[de.jsxs(ia,{variant:"subtitle1",fontWeight:"bold",children:[e("fields.drawNumber"),": ",T.drawNumber||""]}),de.jsx(ia,{variant:"caption",color:"text.secondary",children:new Date(T.uploadDate).toLocaleDateString()})]}),de.jsx(hi,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:T.numbers.map((S,D)=>de.jsx(Sg,{number:S,size:32,matched:T.id!==void 0&&p[T.id]?.comparison.matchedNumbers.includes(S)},`${T.id}-${D}`))}),de.jsxs(ia,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e("fields.units"),": ",T.units," | ",e("fields.amount"),": $",T.amount]}),T.userNote&&de.jsx(ia,{variant:"body2",sx:{mt:.5,fontStyle:"italic"},children:T.userNote}),T.id!==void 0&&p[T.id]&&de.jsx(hi,{sx:{mt:1},children:de.jsx(_v,{label:p[T.id].comparison.prizeCategory?e(p[T.id].comparison.prizeCategory):e("results.noMatch"),color:p[T.id].comparison.prizeCategory?"success":"default",size:"small"})})]}),de.jsxs(Uj,{children:[de.jsx(Bg,{size:"small",onClick:()=>{o({...T}),l(!0)},"aria-label":e("history.edit"),children:de.jsx(y5,{})}),de.jsx(Bg,{size:"small",onClick:()=>d(T.id),"aria-label":e("history.delete"),color:"error",children:de.jsx(_5,{})}),de.jsx(ys,{size:"small",startIcon:de.jsx($P,{}),onClick:()=>I(T),disabled:!T.drawNumber,children:e("results.fetch")})]})]},T.id))}),de.jsxs(CM,{open:u!==null,onClose:()=>d(null),children:[de.jsx(kM,{children:e("history.confirmDelete")}),de.jsxs(PM,{children:[de.jsx(ys,{onClick:()=>d(null),children:e("common.cancel")}),de.jsx(ys,{onClick:m,color:"error",children:e("history.delete")})]})]}),de.jsxs(CM,{open:s,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[de.jsx(kM,{children:e("history.edit")}),de.jsx(FB,{children:de.jsxs(yf,{spacing:2,sx:{mt:1},children:[de.jsx(nl,{label:e("fields.drawNumber"),value:r?.drawNumber||"",onChange:T=>o(S=>S&&{...S,drawNumber:T.target.value}),fullWidth:!0,size:"small"}),de.jsx(nl,{label:e("fields.numbers"),value:r?.numbers.join(", ")||"",onChange:T=>o(S=>S&&{...S,numbers:T.target.value.split(/[,\s]+/).map(D=>parseInt(D.trim(),10)).filter(D=>!isNaN(D))}),fullWidth:!0,size:"small"}),de.jsx(nl,{label:e("fields.units"),type:"number",value:r?.units||1,onChange:T=>o(S=>S&&{...S,units:parseInt(T.target.value,10)||1}),fullWidth:!0,size:"small"}),de.jsx(nl,{label:e("fields.amount"),type:"number",value:r?.amount||0,onChange:T=>o(S=>S&&{...S,amount:parseFloat(T.target.value)||0}),fullWidth:!0,size:"small"}),de.jsx(nl,{label:e("fields.note"),value:r?.userNote||"",onChange:T=>o(S=>S&&{...S,userNote:T.target.value}),fullWidth:!0,size:"small",multiline:!0,rows:2})]})}),de.jsxs(PM,{children:[de.jsx(ys,{onClick:()=>l(!1),children:e("common.cancel")}),de.jsx(ys,{onClick:x,variant:"contained",children:e("upload.save")})]})]})]})}function $8(){const{t:e}=Qv(),t=e("about.featureList",{returnObjects:!0});return de.jsxs(hi,{children:[de.jsx(ia,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:e("about.title")}),de.jsxs(il,{sx:{p:3,mb:2},children:[de.jsx(ia,{paragraph:!0,children:e("about.description")}),de.jsx(ia,{variant:"h6",gutterBottom:!0,children:e("about.features")}),de.jsx(MP,{children:Array.isArray(t)&&t.map((n,r)=>de.jsxs(QN,{disableGutters:!0,children:[de.jsx(t4,{sx:{minWidth:36},children:de.jsx(m5,{color:"success"})}),de.jsx(o4,{primary:n})]},r))})]}),de.jsx(Nl,{severity:"warning",children:e("about.disclaimer")})]})}function D8(){const{darkMode:e,snackbar:t,hideSnackbar:n}=by(),r=ne.useMemo(()=>e5(e),[e]);return de.jsxs(jz,{theme:r,children:[de.jsx(Jj,{}),de.jsx(k5,{children:de.jsxs(YD,{children:[de.jsx(dv,{path:"/",element:de.jsx(P8,{})}),de.jsx(dv,{path:"/history",element:de.jsx(O8,{})}),de.jsx(dv,{path:"/about",element:de.jsx($8,{})})]})}),de.jsx(_U,{open:t.open,autoHideDuration:4e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:de.jsx(Nl,{onClose:n,severity:t.severity,variant:"filled",children:t.message})})]})}rD.createRoot(document.getElementById("root")).render(de.jsx(ne.StrictMode,{children:de.jsx(eI,{basename:"/marksix-lucky-scan/",children:de.jsx(D8,{})})}));
